const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index.es-BhtQeACu.js","assets/vendor-BfWiUekA.js","assets/mui-Di4SMJX8.js"])))=>i.map(i=>d[i]);
var K1=Object.defineProperty;var J1=(n,e,t)=>e in n?K1(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var dt=(n,e,t)=>J1(n,typeof e!="symbol"?e+"":e,t);import{c as Y1,j as u,T as Z1,C as X1,u as Q1,i as Lt,a as Po,b as bf,A as e0,d as t0,B as re,e as fe,f as zt,g as Rt,I as r0,h as Xe,k as xn,l as mi,G as Qe,L as cd,D as ya,P as yn,m as Qt,n as Cr,S as dr,V as n0,o as Xi,p as Du,q as ks,r as wo,M as ho,s as fo,F as Mn,t as yf,v as wf,w as xf,x as ca,y as _f,z as i0,E as Ol,_ as Bt,H as Wl,J as Sf,R as s0,K as Cl,N as En,O as Tn,Q as Rn,W as Fl,U as a0,X as o0,Y as l0,Z as Fc,$ as c0,a0 as u0,a1 as h0,a2 as Dc,a3 as Pn,a4 as d0,a5 as f0,a6 as p0,a7 as Mu,a8 as Bu,a9 as Uu,aa as g0,ab as jf,ac as Af,ad as au,ae as m0,af as v0,ag as b0,ah as y0,ai as w0,aj as kf,ak as x0,al as no,am as ud,an as hd,ao as _0,ap as S0,aq as $u,ar as j0,as as A0,at as k0,au as C0}from"./mui-Di4SMJX8.js";import{c as L0,r as F,R as P0,g as Cf,d as _n,a as po}from"./vendor-BfWiUekA.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var Lf,dd=L0;Lf=dd.createRoot,dd.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xo(){return xo=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},xo.apply(this,arguments)}var zi;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(zi||(zi={}));const fd="popstate";function I0(n){n===void 0&&(n={});function e(i,s){let{pathname:a="/",search:c="",hash:l=""}=Cs(i.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),ou("",{pathname:a,search:c,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(i,s){let a=i.document.querySelector("base"),c="";if(a&&a.getAttribute("href")){let l=i.location.href,f=l.indexOf("#");c=f===-1?l:l.slice(0,f)}return c+"#"+(typeof s=="string"?s:Dl(s))}function r(i,s){qu(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return E0(e,t,r,n)}function ar(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function qu(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function N0(){return Math.random().toString(36).substr(2,8)}function pd(n,e){return{usr:n.state,key:n.key,idx:e}}function ou(n,e,t,r){return t===void 0&&(t=null),xo({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Cs(e):e,{state:t,key:e&&e.key||r||N0()})}function Dl(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Cs(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function E0(n,e,t,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,c=zi.Pop,l=null,f=p();f==null&&(f=0,a.replaceState(xo({},a.state,{idx:f}),""));function p(){return(a.state||{idx:null}).idx}function m(){c=zi.Pop;let P=p(),w=P==null?null:P-f;f=P,l&&l({action:c,location:S.location,delta:w})}function y(P,w){c=zi.Push;let L=ou(S.location,P,w);t&&t(L,P),f=p()+1;let R=pd(L,f),J=S.createHref(L);try{a.pushState(R,"",J)}catch(te){if(te instanceof DOMException&&te.name==="DataCloneError")throw te;i.location.assign(J)}s&&l&&l({action:c,location:S.location,delta:1})}function v(P,w){c=zi.Replace;let L=ou(S.location,P,w);t&&t(L,P),f=p();let R=pd(L,f),J=S.createHref(L);a.replaceState(R,"",J),s&&l&&l({action:c,location:S.location,delta:0})}function k(P){let w=i.location.origin!=="null"?i.location.origin:i.location.href,L=typeof P=="string"?P:Dl(P);return L=L.replace(/ $/,"%20"),ar(w,"No window.location.(origin|href) available to create URL for href: "+L),new URL(L,w)}let S={get action(){return c},get location(){return n(i,a)},listen(P){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(fd,m),l=P,()=>{i.removeEventListener(fd,m),l=null}},createHref(P){return e(i,P)},createURL:k,encodeLocation(P){let w=k(P);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:y,replace:v,go(P){return a.go(P)}};return S}var gd;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(gd||(gd={}));function T0(n,e,t){return t===void 0&&(t="/"),R0(n,e,t)}function R0(n,e,t,r){let i=typeof e=="string"?Cs(e):e,s=zu(i.pathname||"/",t);if(s==null)return null;let a=Pf(n);O0(a);let c=null;for(let l=0;c==null&&l<a.length;++l){let f=G0(s);c=W0(a[l],f)}return c}function Pf(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let i=(s,a,c)=>{let l={relativePath:c===void 0?s.path||"":c,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};l.relativePath.startsWith("/")&&(ar(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let f=Hi([r,l.relativePath]),p=t.concat(l);s.children&&s.children.length>0&&(ar(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),Pf(s.children,e,p,f)),!(s.path==null&&!s.index)&&e.push({path:f,score:q0(f,s.index),routesMeta:p})};return n.forEach((s,a)=>{var c;if(s.path===""||!((c=s.path)!=null&&c.includes("?")))i(s,a);else for(let l of If(s.path))i(s,a,l)}),e}function If(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=If(r.join("/")),c=[];return c.push(...a.map(l=>l===""?s:[s,l].join("/"))),i&&c.push(...a),c.map(l=>n.startsWith("/")&&l===""?"/":l)}function O0(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:z0(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const F0=/^:[\w-]+$/,D0=3,M0=2,B0=1,U0=10,$0=-2,md=n=>n==="*";function q0(n,e){let t=n.split("/"),r=t.length;return t.some(md)&&(r+=$0),e&&(r+=M0),t.filter(i=>!md(i)).reduce((i,s)=>i+(F0.test(s)?D0:s===""?B0:U0),r)}function z0(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function W0(n,e,t){let{routesMeta:r}=n,i={},s="/",a=[];for(let c=0;c<r.length;++c){let l=r[c],f=c===r.length-1,p=s==="/"?e:e.slice(s.length)||"/",m=V0({path:l.relativePath,caseSensitive:l.caseSensitive,end:f},p),y=l.route;if(!m)return null;Object.assign(i,m.params),a.push({params:i,pathname:Hi([s,m.pathname]),pathnameBase:Z0(Hi([s,m.pathnameBase])),route:y}),m.pathnameBase!=="/"&&(s=Hi([s,m.pathnameBase]))}return a}function V0(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=H0(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((f,p,m)=>{let{paramName:y,isOptional:v}=p;if(y==="*"){let S=c[m]||"";a=s.slice(0,s.length-S.length).replace(/(.)\/+$/,"$1")}const k=c[m];return v&&!k?f[y]=void 0:f[y]=(k||"").replace(/%2F/g,"/"),f},{}),pathname:s,pathnameBase:a,pattern:n}}function H0(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),qu(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,c,l)=>(r.push({paramName:c,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function G0(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return qu(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function zu(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function K0(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Cs(n):n;return{pathname:t?t.startsWith("/")?t:J0(t,e):e,search:X0(r),hash:Q0(i)}}function J0(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function Mc(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Y0(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Wu(n,e){let t=Y0(n);return e?t.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function Vu(n,e,t,r){r===void 0&&(r=!1);let i;typeof n=="string"?i=Cs(n):(i=xo({},n),ar(!i.pathname||!i.pathname.includes("?"),Mc("?","pathname","search",i)),ar(!i.pathname||!i.pathname.includes("#"),Mc("#","pathname","hash",i)),ar(!i.search||!i.search.includes("#"),Mc("#","search","hash",i)));let s=n===""||i.pathname==="",a=s?"/":i.pathname,c;if(a==null)c=t;else{let m=e.length-1;if(!r&&a.startsWith("..")){let y=a.split("/");for(;y[0]==="..";)y.shift(),m-=1;i.pathname=y.join("/")}c=m>=0?e[m]:"/"}let l=K0(i,c),f=a&&a!=="/"&&a.endsWith("/"),p=(s||a===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(f||p)&&(l.pathname+="/"),l}const Hi=n=>n.join("/").replace(/\/\/+/g,"/"),Z0=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),X0=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,Q0=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function e2(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const Nf=["post","put","patch","delete"];new Set(Nf);const t2=["get",...Nf];new Set(t2);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _o(){return _o=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_o.apply(this,arguments)}const Hu=F.createContext(null),r2=F.createContext(null),Qi=F.createContext(null),Vl=F.createContext(null),vi=F.createContext({outlet:null,matches:[],isDataRoute:!1}),Ef=F.createContext(null);function n2(n,e){let{relative:t}=e===void 0?{}:e;Sa()||ar(!1);let{basename:r,navigator:i}=F.useContext(Qi),{hash:s,pathname:a,search:c}=Of(n,{relative:t}),l=a;return r!=="/"&&(l=a==="/"?r:Hi([r,a])),i.createHref({pathname:l,search:c,hash:s})}function Sa(){return F.useContext(Vl)!=null}function Xn(){return Sa()||ar(!1),F.useContext(Vl).location}function Tf(n){F.useContext(Qi).static||F.useLayoutEffect(n)}function Bn(){let{isDataRoute:n}=F.useContext(vi);return n?m2():i2()}function i2(){Sa()||ar(!1);let n=F.useContext(Hu),{basename:e,future:t,navigator:r}=F.useContext(Qi),{matches:i}=F.useContext(vi),{pathname:s}=Xn(),a=JSON.stringify(Wu(i,t.v7_relativeSplatPath)),c=F.useRef(!1);return Tf(()=>{c.current=!0}),F.useCallback(function(f,p){if(p===void 0&&(p={}),!c.current)return;if(typeof f=="number"){r.go(f);return}let m=Vu(f,JSON.parse(a),s,p.relative==="path");n==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:Hi([e,m.pathname])),(p.replace?r.replace:r.push)(m,p.state,p)},[e,r,a,s,n])}function Rf(){let{matches:n}=F.useContext(vi),e=n[n.length-1];return e?e.params:{}}function Of(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=F.useContext(Qi),{matches:i}=F.useContext(vi),{pathname:s}=Xn(),a=JSON.stringify(Wu(i,r.v7_relativeSplatPath));return F.useMemo(()=>Vu(n,JSON.parse(a),s,t==="path"),[n,a,s,t])}function s2(n,e){return a2(n,e)}function a2(n,e,t,r){Sa()||ar(!1);let{navigator:i,static:s}=F.useContext(Qi),{matches:a}=F.useContext(vi),c=a[a.length-1],l=c?c.params:{};c&&c.pathname;let f=c?c.pathnameBase:"/";c&&c.route;let p=Xn(),m;if(e){var y;let w=typeof e=="string"?Cs(e):e;f==="/"||(y=w.pathname)!=null&&y.startsWith(f)||ar(!1),m=w}else m=p;let v=m.pathname||"/",k=v;if(f!=="/"){let w=f.replace(/^\//,"").split("/");k="/"+v.replace(/^\//,"").split("/").slice(w.length).join("/")}let S=T0(n,{pathname:k}),P=h2(S&&S.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:Hi([f,i.encodeLocation?i.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?f:Hi([f,i.encodeLocation?i.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),a,t,r);return e&&P?F.createElement(Vl.Provider,{value:{location:_o({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:zi.Pop}},P):P}function o2(){let n=g2(),e=e2(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return F.createElement(F.Fragment,null,F.createElement("h2",null,"Unexpected Application Error!"),F.createElement("h3",{style:{fontStyle:"italic"}},e),t?F.createElement("pre",{style:i},t):null,null)}const l2=F.createElement(o2,null);class c2 extends F.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?F.createElement(vi.Provider,{value:this.props.routeContext},F.createElement(Ef.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function u2(n){let{routeContext:e,match:t,children:r}=n,i=F.useContext(Hu);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),F.createElement(vi.Provider,{value:e},r)}function h2(n,e,t,r){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var s;if(!t)return null;if(t.errors)n=t.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,c=(i=t)==null?void 0:i.errors;if(c!=null){let p=a.findIndex(m=>m.route.id&&(c==null?void 0:c[m.route.id])!==void 0);p>=0||ar(!1),a=a.slice(0,Math.min(a.length,p+1))}let l=!1,f=-1;if(t&&r&&r.v7_partialHydration)for(let p=0;p<a.length;p++){let m=a[p];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(f=p),m.route.id){let{loaderData:y,errors:v}=t,k=m.route.loader&&y[m.route.id]===void 0&&(!v||v[m.route.id]===void 0);if(m.route.lazy||k){l=!0,f>=0?a=a.slice(0,f+1):a=[a[0]];break}}}return a.reduceRight((p,m,y)=>{let v,k=!1,S=null,P=null;t&&(v=c&&m.route.id?c[m.route.id]:void 0,S=m.route.errorElement||l2,l&&(f<0&&y===0?(v2("route-fallback"),k=!0,P=null):f===y&&(k=!0,P=m.route.hydrateFallbackElement||null)));let w=e.concat(a.slice(0,y+1)),L=()=>{let R;return v?R=S:k?R=P:m.route.Component?R=F.createElement(m.route.Component,null):m.route.element?R=m.route.element:R=p,F.createElement(u2,{match:m,routeContext:{outlet:p,matches:w,isDataRoute:t!=null},children:R})};return t&&(m.route.ErrorBoundary||m.route.errorElement||y===0)?F.createElement(c2,{location:t.location,revalidation:t.revalidation,component:S,error:v,children:L(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):L()},null)}var Ff=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(Ff||{}),Df=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(Df||{});function d2(n){let e=F.useContext(Hu);return e||ar(!1),e}function f2(n){let e=F.useContext(r2);return e||ar(!1),e}function p2(n){let e=F.useContext(vi);return e||ar(!1),e}function Mf(n){let e=p2(),t=e.matches[e.matches.length-1];return t.route.id||ar(!1),t.route.id}function g2(){var n;let e=F.useContext(Ef),t=f2(),r=Mf();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function m2(){let{router:n}=d2(Ff.UseNavigateStable),e=Mf(Df.UseNavigateStable),t=F.useRef(!1);return Tf(()=>{t.current=!0}),F.useCallback(function(i,s){s===void 0&&(s={}),t.current&&(typeof i=="number"?n.navigate(i):n.navigate(i,_o({fromRouteId:e},s)))},[n,e])}const vd={};function v2(n,e,t){vd[n]||(vd[n]=!0)}function b2(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function y2(n){let{to:e,replace:t,state:r,relative:i}=n;Sa()||ar(!1);let{future:s,static:a}=F.useContext(Qi),{matches:c}=F.useContext(vi),{pathname:l}=Xn(),f=Bn(),p=Vu(e,Wu(c,s.v7_relativeSplatPath),l,i==="path"),m=JSON.stringify(p);return F.useEffect(()=>f(JSON.parse(m),{replace:t,state:r,relative:i}),[f,m,i,t,r]),null}function ms(n){ar(!1)}function w2(n){let{basename:e="/",children:t=null,location:r,navigationType:i=zi.Pop,navigator:s,static:a=!1,future:c}=n;Sa()&&ar(!1);let l=e.replace(/^\/*/,"/"),f=F.useMemo(()=>({basename:l,navigator:s,static:a,future:_o({v7_relativeSplatPath:!1},c)}),[l,c,s,a]);typeof r=="string"&&(r=Cs(r));let{pathname:p="/",search:m="",hash:y="",state:v=null,key:k="default"}=r,S=F.useMemo(()=>{let P=zu(p,l);return P==null?null:{location:{pathname:P,search:m,hash:y,state:v,key:k},navigationType:i}},[l,p,m,y,v,k,i]);return S==null?null:F.createElement(Qi.Provider,{value:f},F.createElement(Vl.Provider,{children:t,value:S}))}function x2(n){let{children:e,location:t}=n;return s2(lu(e),t)}new Promise(()=>{});function lu(n,e){e===void 0&&(e=[]);let t=[];return F.Children.forEach(n,(r,i)=>{if(!F.isValidElement(r))return;let s=[...e,i];if(r.type===F.Fragment){t.push.apply(t,lu(r.props.children,s));return}r.type!==ms&&ar(!1),!r.props.index||!r.props.children||ar(!1);let a={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=lu(r.props.children,s)),t.push(a)}),t}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cu(){return cu=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},cu.apply(this,arguments)}function _2(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function S2(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function j2(n,e){return n.button===0&&(!e||e==="_self")&&!S2(n)}function uu(n){return n===void 0&&(n=""),new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let r=n[t];return e.concat(Array.isArray(r)?r.map(i=>[t,i]):[[t,r]])},[]))}function A2(n,e){let t=uu(n);return e&&e.forEach((r,i)=>{t.has(i)||e.getAll(i).forEach(s=>{t.append(i,s)})}),t}const k2=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],C2="6";try{window.__reactRouterVersion=C2}catch{}const L2="startTransition",bd=P0[L2];function P2(n){let{basename:e,children:t,future:r,window:i}=n,s=F.useRef();s.current==null&&(s.current=I0({window:i,v5Compat:!0}));let a=s.current,[c,l]=F.useState({action:a.action,location:a.location}),{v7_startTransition:f}=r||{},p=F.useCallback(m=>{f&&bd?bd(()=>l(m)):l(m)},[l,f]);return F.useLayoutEffect(()=>a.listen(p),[a,p]),F.useEffect(()=>b2(r),[r]),F.createElement(w2,{basename:e,children:t,location:c.location,navigationType:c.action,navigator:a,future:r})}const I2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",N2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,co=F.forwardRef(function(e,t){let{onClick:r,relative:i,reloadDocument:s,replace:a,state:c,target:l,to:f,preventScrollReset:p,viewTransition:m}=e,y=_2(e,k2),{basename:v}=F.useContext(Qi),k,S=!1;if(typeof f=="string"&&N2.test(f)&&(k=f,I2))try{let R=new URL(window.location.href),J=f.startsWith("//")?new URL(R.protocol+f):new URL(f),te=zu(J.pathname,v);J.origin===R.origin&&te!=null?f=te+J.search+J.hash:S=!0}catch{}let P=n2(f,{relative:i}),w=E2(f,{replace:a,state:c,target:l,preventScrollReset:p,relative:i,viewTransition:m});function L(R){r&&r(R),R.defaultPrevented||w(R)}return F.createElement("a",cu({},y,{href:k||P,onClick:S||s?r:L,ref:t,target:l}))});var yd;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(yd||(yd={}));var wd;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(wd||(wd={}));function E2(n,e){let{target:t,replace:r,state:i,preventScrollReset:s,relative:a,viewTransition:c}=e===void 0?{}:e,l=Bn(),f=Xn(),p=Of(n,{relative:a});return F.useCallback(m=>{if(j2(m,t)){m.preventDefault();let y=r!==void 0?r:Dl(f)===Dl(p);l(n,{replace:y,state:i,preventScrollReset:s,relative:a,viewTransition:c})}},[f,l,p,r,i,t,n,s,a,c])}function T2(n){let e=F.useRef(uu(n)),t=F.useRef(!1),r=Xn(),i=F.useMemo(()=>A2(r.search,t.current?null:e.current),[r.search]),s=Bn(),a=F.useCallback((c,l)=>{const f=uu(typeof c=="function"?c(i):c);t.current=!0,s("?"+f,l)},[s,i]);return[i,a]}const Bf=F.createContext({mode:"dark",toggleTheme:()=>{}}),R2=({children:n})=>{const[e,t]=F.useState("dark");F.useEffect(()=>{const s=localStorage.getItem("theme");s?t(s):localStorage.setItem("theme","dark")},[]),F.useEffect(()=>{localStorage.setItem("theme",e),document.body.className=e==="dark"?"dark-theme":"light-theme"},[e]);const r=()=>{t(s=>s==="dark"?"light":"dark")},i=Y1({palette:{mode:e,primary:{main:"#FF0F50"},secondary:{main:"#9900CC"},background:{default:e==="dark"?"#0A0A0A":"#f5f5f5",paper:e==="dark"?"#121212":"#ffffff"},text:{primary:e==="dark"?"#FFFFFF":"#000000",secondary:e==="dark"?"#FF69B4":"#555555"},error:{main:"#FF0000"}},typography:{fontFamily:'"Montserrat", "Roboto", "Helvetica", "Arial", sans-serif',h1:{fontWeight:800,letterSpacing:"0.5px"},h2:{fontWeight:700,letterSpacing:"0.3px"},h3:{fontWeight:600},h4:{fontWeight:600},button:{fontWeight:600,textTransform:"none"}},components:{MuiButton:{styleOverrides:{root:{borderRadius:6,padding:"8px 20px",transition:"all 0.3s ease"},containedPrimary:{backgroundColor:"#FF0F50","&:hover":{backgroundColor:"#D10D42",transform:"scale(1.03)"}}}},MuiCard:{styleOverrides:{root:{borderRadius:8,transition:"transform 0.3s ease-in-out, box-shadow 0.3s ease","&:hover":{transform:"scale(1.05)",zIndex:1,boxShadow:"0 10px 20px rgba(0,0,0,0.5)"}}}},MuiAppBar:{styleOverrides:{root:{backgroundColor:e==="dark"?"#121212":"#ffffff",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.3)"}}},MuiIconButton:{styleOverrides:{root:{"&:hover":{backgroundColor:"rgba(255, 15, 80, 0.1)"}}}}}});return u.jsx(Bf.Provider,{value:{mode:e,toggleTheme:r},children:u.jsxs(Z1,{theme:i,children:[u.jsx(X1,{}),n]})})};class O2{constructor(){dt(this,"config",null);dt(this,"isInitialized",!1);dt(this,"thumbnailCache",new Map);dt(this,"CACHE_DURATION",30*60*1e3);dt(this,"activeRequests",new Set);dt(this,"MAX_CONCURRENT_REQUESTS",5)}async initialize(e){this.config=e,this.isInitialized=!0}cleanExpiredCache(){const e=Date.now();for(const[t,r]of this.thumbnailCache.entries())e-r.timestamp>this.CACHE_DURATION&&this.thumbnailCache.delete(t)}getCachedThumbnailUrl(e){this.cleanExpiredCache();const t=this.thumbnailCache.get(e);return t?t.url:null}setCachedThumbnailUrl(e,t){this.thumbnailCache.set(e,{url:t,timestamp:Date.now()})}async waitForAvailableSlot(){for(;this.activeRequests.size>=this.MAX_CONCURRENT_REQUESTS;)await new Promise(e=>setTimeout(e,100))}addActiveRequest(e){this.activeRequests.add(e)}removeActiveRequest(e){this.activeRequests.delete(e)}async checkInitialized(){(!this.isInitialized||!this.config)&&await this.initializeWithDefaultConfig()}async initializeWithDefaultConfig(){try{const e=await fetch("/api/site-config");if(e.ok){const t=await e.json();if(t.wasabiConfig){await this.initialize(t.wasabiConfig);return}}}catch{console.warn("Could not load site config for Wasabi, using default config")}await this.initialize(F2)}async uploadFile(e,t="videos"){try{const r=new FormData;r.append("file",e);const i="",s=`/api/upload/${t}`,a=`${i}${s}`;console.log(`Uploading file to: ${a}`),console.log(`File: ${e.name}, Size: ${e.size}, Type: ${e.type}`);const c=await fetch(a,{method:"POST",body:r});if(c.ok){const l=await c.json();return{success:l.success,fileId:l.fileId,url:l.url}}else{const l=await c.json().catch(()=>({}));throw new Error(`Upload failed: ${c.status} ${c.statusText} - ${l.error||"Unknown error"}`)}}catch(r){return console.error("Error uploading file to Wasabi:",r),{success:!1,fileId:"",url:"",error:r instanceof Error?r.message:"Unknown error"}}}async getFileUrl(e){await this.checkInitialized();const t=3,r=5e3;for(let i=1;i<=t;i++)try{const s="",a=encodeURIComponent(e);console.log(`Requesting signed URL for fileId: ${e} (attempt ${i}/${t})`);const c=new AbortController,l=setTimeout(()=>c.abort(),r),f=await fetch(`${s}/api/signed-url/${a}`,{signal:c.signal});if(clearTimeout(l),f.ok){const p=await f.json();if(p.success&&p.url)return console.log("Signed URL obtained:",p.url),p.url}else console.error(`Failed to get signed URL (attempt ${i}):`,f.status,f.statusText);i<t&&await new Promise(p=>setTimeout(p,1e3*i))}catch(s){if(console.error(`Error getting signed URL (attempt ${i}):`,s),s instanceof Error&&(s.name==="AbortError"||s.code==="ECONNRESET"||s.code==="ETIMEDOUT")&&i<t){console.log(`Retrying in ${1e3*i}ms...`),await new Promise(a=>setTimeout(a,1e3*i));continue}break}return console.warn("Failed to get signed URL after all attempts, falling back to direct URL"),e.startsWith("videos/")||e.startsWith("thumbnails/")?`https://${this.config.bucket}.s3.${this.config.region}.wasabisys.com/${e}`:`https://${this.config.bucket}.s3.${this.config.region}.wasabisys.com/videos/${e}`}async getThumbnailUrl(e){await this.checkInitialized();const t=this.getCachedThumbnailUrl(e);if(t)return console.log("Using cached thumbnail URL:",e),t;await this.waitForAvailableSlot(),this.addActiveRequest(e);try{for(let a=1;a<=3;a++)try{const c="",l=encodeURIComponent(e);console.log(`Requesting signed URL for thumbnailId: ${e} (attempt ${a}/3)`);const f=new AbortController,p=setTimeout(()=>f.abort(),5e3),m=await fetch(`${c}/api/signed-url/${l}`,{signal:f.signal});if(clearTimeout(p),m.ok){const y=await m.json();if(y.success&&y.url)return console.log("Signed URL for thumbnail obtained:",y.url),this.setCachedThumbnailUrl(e,y.url),y.url}else console.error(`Failed to get signed URL for thumbnail (attempt ${a}):`,m.status,m.statusText);a<3&&await new Promise(y=>setTimeout(y,1e3*a))}catch(c){if(console.error(`Error getting signed URL for thumbnail (attempt ${a}):`,c),c instanceof Error&&(c.name==="AbortError"||c.code==="ECONNRESET"||c.code==="ETIMEDOUT")&&a<3){console.log(`Retrying thumbnail in ${1e3*a}ms...`),await new Promise(l=>setTimeout(l,1e3*a));continue}break}console.warn("Failed to get signed URL for thumbnail after all attempts, falling back to direct URL");let s;return e.startsWith("thumbnails/")?s=`https://${this.config.bucket}.s3.${this.config.region}.wasabisys.com/${e}`:s=`https://${this.config.bucket}.s3.${this.config.region}.wasabisys.com/thumbnails/${e}`,this.setCachedThumbnailUrl(e,s),s}finally{this.removeActiveRequest(e)}}async deleteFile(e){await this.checkInitialized();try{const t="",r=encodeURIComponent(e),i=await fetch(`${t}/api/delete-file/${r}`,{method:"DELETE"});return i.ok?(await i.json()).success||!1:(console.error("Failed to delete file:",i.status,i.statusText),!1)}catch(t){return console.error("Error deleting file from Wasabi:",t),!1}}async fileExists(e){await this.checkInitialized();try{const t=await this.getFileUrl(e);return(await fetch(t,{method:"HEAD"})).ok}catch(t){return console.error("Error checking file existence:",t),!1}}async listFiles(e="videos"){await this.checkInitialized();try{return[]}catch(t){return console.error("Error listing files:",t),[]}}}const wn=new O2,F2={accessKey:"",secretKey:"",region:"",bucket:"",endpoint:""};class D2{constructor(){dt(this,"METADATA_KEY","metadata/videosplus-data.json");dt(this,"cache",null);dt(this,"cacheTimestamp",0);dt(this,"CACHE_DURATION",30*60*1e3);dt(this,"fallbackCache",null);dt(this,"fallbackTimestamp",0);dt(this,"FALLBACK_CACHE_DURATION",24*60*60*1e3)}isCacheValid(){return this.cache!==null&&this.cacheTimestamp>0&&Date.now()-this.cacheTimestamp<this.CACHE_DURATION}isFallbackCacheValid(){return this.fallbackCache!==null&&this.fallbackTimestamp>0&&Date.now()-this.fallbackTimestamp<this.FALLBACK_CACHE_DURATION}clearCache(){this.cache=null,this.cacheTimestamp=0,console.log("Wasabi metadata cache cleared")}async loadDataFromWasabi(){try{console.log("Loading metadata from Wasabi..."),await wn.initialize({accessKey:"MRQU098AA1K8DGBHUST0",secretKey:"4VoS1MQ4RQ9kGa71zVeq1LXMGc7P3qJ0NFhTNVUm",region:"eu-central-2",bucket:"videosfolder",endpoint:"https://s3.eu-central-2.wasabisys.com"});const e=await wn.getFileUrl(this.METADATA_KEY),t=await fetch(e);if(!t.ok)throw new Error(`Failed to load metadata: ${t.status}`);const r=await t.json();return console.log("Metadata loaded from Wasabi:",r),this.cache=r,this.cacheTimestamp=Date.now(),r}catch(e){console.error("Error loading metadata from Wasabi:",e);const t={videos:[],users:[],sessions:[],siteConfig:{siteName:"VideosPlus",paypalClientId:"",paypalMeUsername:"",stripePublishableKey:"",stripeSecretKey:"",telegramUsername:"",videoListTitle:"Available Videos",crypto:[],emailHost:"smtp.gmail.com",emailPort:"587",emailSecure:!1,emailUser:"",emailPass:"",emailFrom:"",wasabiConfig:{accessKey:"MRQU098AA1K8DGBHUST0",secretKey:"4VoS1MQ4RQ9kGa71zVeq1LXMGc7P3qJ0NFhTNVUm",region:"eu-central-2",bucket:"videosfolder",endpoint:"https://s3.eu-central-2.wasabisys.com"}}};return this.cache=t,this.cacheTimestamp=Date.now(),t}}async saveDataToWasabi(e){try{console.log("Saving metadata to Wasabi..."),await wn.initialize({accessKey:"MRQU098AA1K8DGBHUST0",secretKey:"4VoS1MQ4RQ9kGa71zVeq1LXMGc7P3qJ0NFhTNVUm",region:"eu-central-2",bucket:"videosfolder",endpoint:"https://s3.eu-central-2.wasabisys.com"});const t=JSON.stringify(e,null,2),r=new FormData,i=new Blob([t],{type:"application/json"});r.append("file",i,"videosplus-data.json");const a=await fetch("/api/upload/metadata",{method:"POST",body:r});if(!a.ok)throw new Error(`Failed to save metadata: ${a.status}`);console.log("Metadata saved to Wasabi successfully"),this.cache=e,this.cacheTimestamp=Date.now()}catch(t){throw console.error("Error saving metadata to Wasabi:",t),t}}async getData(){if(this.isCacheValid())return console.log("Using cached metadata"),this.cache;try{const e=await this.loadDataFromWasabi();return this.fallbackCache=e,this.fallbackTimestamp=Date.now(),e}catch(e){return console.error("Error loading metadata from Wasabi, trying fallback cache:",e),this.isFallbackCacheValid()?(console.log("Using fallback cached metadata"),this.fallbackCache):(console.warn("No valid cache available, returning default data"),this.getDefaultData())}}async getAllVideos(){return(await this.getData()).videos||[]}async getVideo(e){return(await this.getAllVideos()).find(r=>r.id===e)||null}async createVideo(e){const t=await this.loadDataFromWasabi(),r={...e,id:this.generateId(),createdAt:new Date().toISOString(),views:0};return t.videos||(t.videos=[]),t.videos.push(r),await this.saveDataToWasabi(t),r}async updateVideo(e,t){const r=await this.loadDataFromWasabi();if(!r.videos)return null;const i=r.videos.findIndex(s=>s.id===e);return i===-1?null:(r.videos[i]={...r.videos[i],...t},await this.saveDataToWasabi(r),r.videos[i])}async deleteVideo(e){const t=await this.loadDataFromWasabi();if(!t.videos)return!1;const r=t.videos.findIndex(i=>i.id===e);return r===-1?!1:(t.videos.splice(r,1),await this.saveDataToWasabi(t),!0)}async incrementVideoViews(e){const t=await this.loadDataFromWasabi();if(!t.videos)return;const r=t.videos.find(i=>i.id===e);r&&(r.views=(r.views||0)+1,await this.saveDataToWasabi(t))}async getAllUsers(){return(await this.getData()).users||[]}async getUser(e){return(await this.getAllUsers()).find(r=>r.id===e)||null}async getUserByEmail(e){return(await this.getAllUsers()).find(r=>r.email===e)||null}async createUser(e){const t=await this.loadDataFromWasabi(),r={...e,id:this.generateId(),createdAt:new Date().toISOString()};return t.users||(t.users=[]),t.users.push(r),await this.saveDataToWasabi(t),r}async updateUser(e,t){const r=await this.loadDataFromWasabi();if(!r.users)return null;const i=r.users.findIndex(s=>s.id===e);return i===-1?null:(r.users[i]={...r.users[i],...t},await this.saveDataToWasabi(r),r.users[i])}async deleteUser(e){const t=await this.loadDataFromWasabi();if(!t.users)return!1;const r=t.users.findIndex(i=>i.id===e);return r===-1?!1:(t.users.splice(r,1),await this.saveDataToWasabi(t),!0)}async getAllSessions(){return(await this.getData()).sessions||[]}async getSessionByToken(e){return(await this.getAllSessions()).find(r=>r.token===e&&r.isActive)||null}async createSession(e){const t=await this.loadDataFromWasabi(),r={...e,id:this.generateId(),createdAt:new Date().toISOString()};return t.sessions||(t.sessions=[]),t.sessions.push(r),await this.saveDataToWasabi(t),r}async updateSession(e,t){const r=await this.loadDataFromWasabi();if(!r.sessions)return null;const i=r.sessions.findIndex(s=>s.id===e);return i===-1?null:(r.sessions[i]={...r.sessions[i],...t},await this.saveDataToWasabi(r),r.sessions[i])}async deleteSession(e){const t=await this.loadDataFromWasabi();if(!t.sessions)return!1;const r=t.sessions.findIndex(i=>i.id===e);return r===-1?!1:(t.sessions.splice(r,1),await this.saveDataToWasabi(t),!0)}async getSiteConfig(){return(await this.getData()).siteConfig||null}async updateSiteConfig(e){const t=await this.loadDataFromWasabi();return t.siteConfig={...t.siteConfig,...e},await this.saveDataToWasabi(t),t.siteConfig}generateId(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}clearCachePublic(){this.clearCache()}}const wr=new D2;class M2{constructor(){dt(this,"isInitialized",!1)}async initialize(){this.isInitialized=!0}async checkInitialized(){this.isInitialized||await this.initialize()}async getAllVideos(){return await this.checkInitialized(),await wr.getAllVideos()}async getVideo(e){return await this.checkInitialized(),await wr.getVideo(e)}async createVideo(e){return await this.checkInitialized(),await wr.createVideo(e)}async updateVideo(e,t){return await this.checkInitialized(),await wr.updateVideo(e,t)}async deleteVideo(e){return await this.checkInitialized(),await wr.deleteVideo(e)}async incrementVideoViews(e){return await this.checkInitialized(),await wr.incrementVideoViews(e)}async getAllUsers(){return await this.checkInitialized(),await wr.getAllUsers()}async getUser(e){return await this.checkInitialized(),await wr.getUser(e)}async getUserByEmail(e){return await this.checkInitialized(),await wr.getUserByEmail(e)}async createUser(e){return await this.checkInitialized(),await wr.createUser(e)}async updateUser(e,t){return await this.checkInitialized(),await wr.updateUser(e,t)}async deleteUser(e){return await this.checkInitialized(),await wr.deleteUser(e)}async createSession(e){return await this.checkInitialized(),await wr.createSession(e)}async getSessionByToken(e){return await this.checkInitialized(),await wr.getSessionByToken(e)}async updateSession(e,t){return await this.checkInitialized(),await wr.updateSession(e,t)}async deleteSession(e){return await this.checkInitialized(),await wr.deleteSession(e)}async getSiteConfig(){return await this.checkInitialized(),await wr.getSiteConfig()}async updateSiteConfig(e){return await this.checkInitialized(),await wr.updateSiteConfig(e)}async healthCheck(){try{return await this.checkInitialized(),!0}catch(e){return console.error("Health check failed:",e),!1}}}const Bc=new M2,B2="modulepreload",U2=function(n){return"/"+n},xd={},Ji=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(t.map(l=>{if(l=U2(l),l in xd)return;xd[l]=!0;const f=l.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${p}`))return;const m=document.createElement("link");if(m.rel=f?"stylesheet":B2,f||(m.as="script"),m.crossOrigin="",m.href=l,c&&m.setAttribute("nonce",c),document.head.appendChild(m),f)return new Promise((y,v)=>{m.addEventListener("load",y),m.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(a){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a}return i.then(a=>{for(const c of a||[])c.status==="rejected"&&s(c.reason);return e().catch(s)})},$2=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Ji(async()=>{const{default:r}=await Promise.resolve().then(()=>ja);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class Gu extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class q2 extends Gu{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class _d extends Gu{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Sd extends Gu{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var hu;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(hu||(hu={}));var z2=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function c(p){try{f(r.next(p))}catch(m){a(m)}}function l(p){try{f(r.throw(p))}catch(m){a(m)}}function f(p){p.done?s(p.value):i(p.value).then(c,l)}f((r=r.apply(n,e||[])).next())})};class W2{constructor(e,{headers:t={},customFetch:r,region:i=hu.Any}={}){this.url=e,this.headers=t,this.region=i,this.fetch=$2(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return z2(this,void 0,void 0,function*(){try{const{headers:i,method:s,body:a}=t;let c={},{region:l}=t;l||(l=this.region);const f=new URL(`${this.url}/${e}`);l&&l!=="any"&&(c["x-region"]=l,f.searchParams.set("forceFunctionRegion",l));let p;a&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",p=a):typeof a=="string"?(c["Content-Type"]="text/plain",p=a):typeof FormData<"u"&&a instanceof FormData?p=a:(c["Content-Type"]="application/json",p=JSON.stringify(a)));const m=yield this.fetch(f.toString(),{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),i),body:p}).catch(S=>{throw new q2(S)}),y=m.headers.get("x-relay-error");if(y&&y==="true")throw new _d(m);if(!m.ok)throw new Sd(m);let v=((r=m.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),k;return v==="application/json"?k=yield m.json():v==="application/octet-stream"?k=yield m.blob():v==="text/event-stream"?k=m:v==="multipart/form-data"?k=yield m.formData():k=yield m.text(),{data:k,error:null,response:m}}catch(i){return{data:null,error:i,response:i instanceof Sd||i instanceof _d?i.context:void 0}}})}}var Xr={},Ku={},Hl={},Io={},Gl={},Kl={},V2=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},wa=V2();const H2=wa.fetch,Uf=wa.fetch.bind(wa),$f=wa.Headers,G2=wa.Request,K2=wa.Response,ja=Object.freeze(Object.defineProperty({__proto__:null,Headers:$f,Request:G2,Response:K2,default:Uf,fetch:H2},Symbol.toStringTag,{value:"Module"})),J2=Cf(ja);var Jl={};Object.defineProperty(Jl,"__esModule",{value:!0});let Y2=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Jl.default=Y2;var qf=_n&&_n.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Kl,"__esModule",{value:!0});const Z2=qf(J2),X2=qf(Jl);let Q2=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Z2.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var a,c,l,f;let p=null,m=null,y=null,v=s.status,k=s.statusText;if(s.ok){if(this.method!=="HEAD"){const L=await s.text();L===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((a=this.headers.get("Accept"))===null||a===void 0)&&a.includes("application/vnd.pgrst.plan+text"))?m=L:m=JSON.parse(L))}const P=(c=this.headers.get("Prefer"))===null||c===void 0?void 0:c.match(/count=(exact|planned|estimated)/),w=(l=s.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");P&&w&&w.length>1&&(y=parseInt(w[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(m)&&(m.length>1?(p={code:"PGRST116",details:`Results contain ${m.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},m=null,y=null,v=406,k="Not Acceptable"):m.length===1?m=m[0]:m=null)}else{const P=await s.text();try{p=JSON.parse(P),Array.isArray(p)&&s.status===404&&(m=[],p=null,v=200,k="OK")}catch{s.status===404&&P===""?(v=204,k="No Content"):p={message:P}}if(p&&this.isMaybeSingle&&(!((f=p==null?void 0:p.details)===null||f===void 0)&&f.includes("0 rows"))&&(p=null,v=200,k="OK"),p&&this.shouldThrowOnError)throw new X2.default(p)}return{error:p,data:m,count:y,status:v,statusText:k}});return this.shouldThrowOnError||(i=i.catch(s=>{var a,c,l;return{error:{message:`${(a=s==null?void 0:s.name)!==null&&a!==void 0?a:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(c=s==null?void 0:s.stack)!==null&&c!==void 0?c:""}`,hint:"",code:`${(l=s==null?void 0:s.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,t)}returns(){return this}overrideTypes(){return this}};Kl.default=Q2;var eg=_n&&_n.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Gl,"__esModule",{value:!0});const tg=eg(Kl);let rg=class extends tg.default{select(e){let t=!1;const r=(e??"*").split("").map(i=>/\s/.test(i)&&!t?"":(i==='"'&&(t=!t),i)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:i,referencedTable:s=i}={}){const a=s?`${s}.order`:"order",c=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${c?`${c},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:i=r}={}){const s=typeof i>"u"?"offset":`${i}.offset`,a=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(a,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:i=!1,wal:s=!1,format:a="text"}={}){var c;const l=[e?"analyze":null,t?"verbose":null,r?"settings":null,i?"buffers":null,s?"wal":null].filter(Boolean).join("|"),f=(c=this.headers.get("Accept"))!==null&&c!==void 0?c:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${f}"; options=${l};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};Gl.default=rg;var ng=_n&&_n.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Io,"__esModule",{value:!0});const ig=ng(Gl);let sg=class extends ig.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:i}={}){let s="";i==="plain"?s="pl":i==="phrase"?s="ph":i==="websearch"&&(s="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${a}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}};Io.default=sg;var ag=_n&&_n.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Hl,"__esModule",{value:!0});const io=ag(Io);let og=class{constructor(e,{headers:t={},schema:r,fetch:i}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=i}select(e,{head:t=!1,count:r}={}){const i=t?"HEAD":"GET";let s=!1;const a=(e??"*").split("").map(c=>/\s/.test(c)&&!s?"":(c==='"'&&(s=!s),c)).join("");return this.url.searchParams.set("select",a),r&&this.headers.append("Prefer",`count=${r}`),new io.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var i;const s="POST";if(t&&this.headers.append("Prefer",`count=${t}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const a=e.reduce((c,l)=>c.concat(Object.keys(l)),[]);if(a.length>0){const c=[...new Set(a)].map(l=>`"${l}"`);this.url.searchParams.set("columns",c.join(","))}}return new io.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:i,defaultToNull:s=!0}={}){var a;const c="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&this.url.searchParams.set("on_conflict",t),i&&this.headers.append("Prefer",`count=${i}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((f,p)=>f.concat(Object.keys(p)),[]);if(l.length>0){const f=[...new Set(l)].map(p=>`"${p}"`);this.url.searchParams.set("columns",f.join(","))}}return new io.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}update(e,{count:t}={}){var r;const i="PATCH";return t&&this.headers.append("Prefer",`count=${t}`),new io.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var t;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new io.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}};Hl.default=og;var zf=_n&&_n.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Ku,"__esModule",{value:!0});const lg=zf(Hl),cg=zf(Io);let ug=class Wf{constructor(e,{headers:t={},schema:r,fetch:i}={}){this.url=e,this.headers=new Headers(t),this.schemaName=r,this.fetch=i}from(e){const t=new URL(`${this.url}/${e}`);return new lg.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Wf(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:r=!1,get:i=!1,count:s}={}){var a;let c;const l=new URL(`${this.url}/rpc/${e}`);let f;r||i?(c=r?"HEAD":"GET",Object.entries(t).filter(([m,y])=>y!==void 0).map(([m,y])=>[m,Array.isArray(y)?`{${y.join(",")}}`:`${y}`]).forEach(([m,y])=>{l.searchParams.append(m,y)})):(c="POST",f=t);const p=new Headers(this.headers);return s&&p.set("Prefer",`count=${s}`),new cg.default({method:c,url:l,headers:p,schema:this.schemaName,body:f,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};Ku.default=ug;var Aa=_n&&_n.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Xr,"__esModule",{value:!0});Xr.PostgrestError=Xr.PostgrestBuilder=Xr.PostgrestTransformBuilder=Xr.PostgrestFilterBuilder=Xr.PostgrestQueryBuilder=Xr.PostgrestClient=void 0;const Vf=Aa(Ku);Xr.PostgrestClient=Vf.default;const Hf=Aa(Hl);Xr.PostgrestQueryBuilder=Hf.default;const Gf=Aa(Io);Xr.PostgrestFilterBuilder=Gf.default;const Kf=Aa(Gl);Xr.PostgrestTransformBuilder=Kf.default;const Jf=Aa(Kl);Xr.PostgrestBuilder=Jf.default;const Yf=Aa(Jl);Xr.PostgrestError=Yf.default;var hg=Xr.default={PostgrestClient:Vf.default,PostgrestQueryBuilder:Hf.default,PostgrestFilterBuilder:Gf.default,PostgrestTransformBuilder:Kf.default,PostgrestBuilder:Jf.default,PostgrestError:Yf.default};const{PostgrestClient:dg,PostgrestQueryBuilder:mw,PostgrestFilterBuilder:vw,PostgrestTransformBuilder:bw,PostgrestBuilder:yw,PostgrestError:ww}=hg;class fg{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const r=t.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const r=this.getWebSocketConstructor();return new r(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const pg="2.15.5",gg=`realtime-js/${pg}`,mg="1.0.0",du=1e4,vg=1e3,bg=100;var go;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(go||(go={}));var pr;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(pr||(pr={}));var Dn;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(Dn||(Dn={}));var fu;(function(n){n.websocket="websocket"})(fu||(fu={}));var ws;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(ws||(ws={}));class yg{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const i=t.getUint8(1),s=t.getUint8(2);let a=this.HEADER_LENGTH+2;const c=r.decode(e.slice(a,a+i));a=a+i;const l=r.decode(e.slice(a,a+s));a=a+s;const f=JSON.parse(r.decode(e.slice(a,e.byteLength)));return{ref:null,topic:c,event:l,payload:f}}}class Zf{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var qt;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(qt||(qt={}));const jd=(n,e,t={})=>{var r;const i=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((s,a)=>(s[a]=wg(a,n,e,i),s),{})},wg=(n,e,t,r)=>{const i=e.find(c=>c.name===n),s=i==null?void 0:i.type,a=t[n];return s&&!r.includes(s)?Xf(s,a):pu(a)},Xf=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return jg(e,t)}switch(n){case qt.bool:return xg(e);case qt.float4:case qt.float8:case qt.int2:case qt.int4:case qt.int8:case qt.numeric:case qt.oid:return _g(e);case qt.json:case qt.jsonb:return Sg(e);case qt.timestamp:return Ag(e);case qt.abstime:case qt.date:case qt.daterange:case qt.int4range:case qt.int8range:case qt.money:case qt.reltime:case qt.text:case qt.time:case qt.timestamptz:case qt.timetz:case qt.tsrange:case qt.tstzrange:return pu(e);default:return pu(e)}},pu=n=>n,xg=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},_g=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},Sg=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},jg=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let s;const a=n.slice(1,t);try{s=JSON.parse("["+a+"]")}catch{s=a?a.split(","):[]}return s.map(c=>Xf(e,c))}return n},Ag=n=>typeof n=="string"?n.replace(" ","T"):n,Qf=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class Uc{constructor(e,t,r={},i=du){this.channel=e,this.event=t,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Ad;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(Ad||(Ad={}));class mo{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:a,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=mo.syncState(this.state,i,s,a),this.pendingDiffs.forEach(l=>{this.state=mo.syncDiff(this.state,l,s,a)}),this.pendingDiffs=[],c()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:a,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=mo.syncDiff(this.state,i,s,a),c())}),this.onJoin((i,s,a)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:a})}),this.onLeave((i,s,a)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,i){const s=this.cloneDeep(e),a=this.transformState(t),c={},l={};return this.map(s,(f,p)=>{a[f]||(l[f]=p)}),this.map(a,(f,p)=>{const m=s[f];if(m){const y=p.map(P=>P.presence_ref),v=m.map(P=>P.presence_ref),k=p.filter(P=>v.indexOf(P.presence_ref)<0),S=m.filter(P=>y.indexOf(P.presence_ref)<0);k.length>0&&(c[f]=k),S.length>0&&(l[f]=S)}else c[f]=p}),this.syncDiff(s,{joins:c,leaves:l},r,i)}static syncDiff(e,t,r,i){const{joins:s,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(c,l)=>{var f;const p=(f=e[c])!==null&&f!==void 0?f:[];if(e[c]=this.cloneDeep(l),p.length>0){const m=e[c].map(v=>v.presence_ref),y=p.filter(v=>m.indexOf(v.presence_ref)<0);e[c].unshift(...y)}r(c,p,l)}),this.map(a,(c,l)=>{let f=e[c];if(!f)return;const p=l.map(m=>m.presence_ref);f=f.filter(m=>p.indexOf(m.presence_ref)<0),e[c]=f,i(c,f,l),f.length===0&&delete e[c]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const i=e[r];return"metas"in i?t[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):t[r]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var kd;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(kd||(kd={}));var vo;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(vo||(vo={}));var fi;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(fi||(fi={}));class Ju{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=pr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Uc(this,Dn.join,this.params,this.timeout),this.rejoinTimer=new Zf(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=pr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=pr.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=pr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=pr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=pr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Dn.reply,{},(i,s)=>{this._trigger(this._replyEventName(s),i)}),this.presence=new mo(this),this.broadcastEndpointURL=Qf(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var r,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==pr.closed){const{config:{broadcast:a,presence:c,private:l}}=this.params,f=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(v=>v.filter))!==null&&i!==void 0?i:[],p=!!this.bindings[vo.PRESENCE]&&this.bindings[vo.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,m={},y={broadcast:a,presence:Object.assign(Object.assign({},c),{enabled:p}),postgres_changes:f,private:l};this.socket.accessTokenValue&&(m.access_token=this.socket.accessTokenValue),this._onError(v=>e==null?void 0:e(fi.CHANNEL_ERROR,v)),this._onClose(()=>e==null?void 0:e(fi.CLOSED)),this.updateJoinPayload(Object.assign({config:y},m)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:v})=>{var k;if(this.socket.setAuth(),v===void 0){e==null||e(fi.SUBSCRIBED);return}else{const S=this.bindings.postgres_changes,P=(k=S==null?void 0:S.length)!==null&&k!==void 0?k:0,w=[];for(let L=0;L<P;L++){const R=S[L],{filter:{event:J,schema:te,table:he,filter:Q}}=R,$=v&&v[L];if($&&$.event===J&&$.schema===te&&$.table===he&&$.filter===Q)w.push(Object.assign(Object.assign({},R),{id:$.id}));else{this.unsubscribe(),this.state=pr.errored,e==null||e(fi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=w,e&&e(fi.SUBSCRIBED);return}}).receive("error",v=>{this.state=pr.errored,e==null||e(fi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(v).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(fi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===pr.joined&&e===vo.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,r)}async send(e,t={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:a}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:a,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=f.body)===null||i===void 0?void 0:i.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var a,c,l;const f=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(c=(a=this.params)===null||a===void 0?void 0:a.config)===null||c===void 0?void 0:c.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),f.receive("ok",()=>s("ok")),f.receive("error",()=>s("error")),f.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=pr.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Dn.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new Uc(this,Dn.leave,{},e),r.receive("ok",()=>{t(),i("ok")}).receive("timeout",()=>{t(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=pr.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(s),a}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Uc(this,e,t,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>bg){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var i,s;const a=e.toLocaleLowerCase(),{close:c,error:l,leave:f,join:p}=Dn;if(r&&[c,l,f,p].indexOf(a)>=0&&r!==this._joinRef())return;let y=this._onMessage(a,t,r);if(t&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(v=>{var k,S,P;return((k=v.filter)===null||k===void 0?void 0:k.event)==="*"||((P=(S=v.filter)===null||S===void 0?void 0:S.event)===null||P===void 0?void 0:P.toLocaleLowerCase())===a}).map(v=>v.callback(y,r)):(s=this.bindings[a])===null||s===void 0||s.filter(v=>{var k,S,P,w,L,R;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in v){const J=v.id,te=(k=v.filter)===null||k===void 0?void 0:k.event;return J&&((S=t.ids)===null||S===void 0?void 0:S.includes(J))&&(te==="*"||(te==null?void 0:te.toLocaleLowerCase())===((P=t.data)===null||P===void 0?void 0:P.type.toLocaleLowerCase()))}else{const J=(L=(w=v==null?void 0:v.filter)===null||w===void 0?void 0:w.event)===null||L===void 0?void 0:L.toLocaleLowerCase();return J==="*"||J===((R=t==null?void 0:t.event)===null||R===void 0?void 0:R.toLocaleLowerCase())}else return v.type.toLocaleLowerCase()===a}).map(v=>{if(typeof y=="object"&&"ids"in y){const k=y.data,{schema:S,table:P,commit_timestamp:w,type:L,errors:R}=k;y=Object.assign(Object.assign({},{schema:S,table:P,commit_timestamp:w,eventType:L,new:{},old:{},errors:R}),this._getPayloadRecords(k))}v.callback(y,r)})}_isClosed(){return this.state===pr.closed}_isJoined(){return this.state===pr.joined}_isJoining(){return this.state===pr.joining}_isLeaving(){return this.state===pr.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const i=e.toLocaleLowerCase(),s={type:i,filter:t,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&Ju.isEqual(i.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Dn.close,{},e)}_onError(e){this._on(Dn.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=pr.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=jd(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=jd(e.columns,e.old_record)),t}}const $c=()=>{},vl={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},kg=[1e3,2e3,5e3,1e4],Cg=1e4,Lg=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Pg{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=du,this.transport=null,this.heartbeatIntervalMs=vl.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=$c,this.ref=0,this.reconnectTimer=null,this.logger=$c,this.conn=null,this.sendBuffer=[],this.serializer=new yg,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let s;return i?s=i:typeof fetch>"u"?s=(...a)=>Ji(async()=>{const{default:c}=await Promise.resolve().then(()=>ja);return{default:c}},void 0).then(({default:c})=>c(...a)).catch(c=>{throw new Error(`Failed to load @supabase/node-fetch: ${c.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):s=fetch,(...a)=>s(...a)},!(!((r=t==null?void 0:t.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${fu.websocket}`,this.httpEndpoint=Qf(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=fg.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:mg}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case go.connecting:return ws.Connecting;case go.open:return ws.Open;case go.closing:return ws.Closing;default:return ws.Closed}}isConnected(){return this.connectionState()===ws.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(s=>s.topic===r);if(i)return i;{const s=new Ju(`realtime:${e}`,t,this);return this.channels.push(s),s}}push(e){const{topic:t,event:r,payload:i,ref:s}=e,a=()=>{this.encode(e,c=>{var l;(l=this.conn)===null||l===void 0||l.send(c)})};this.log("push",`${t} ${r} (${s})`,i),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(vg,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},vl.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(f){this.log("error","error in heartbeat callback",f)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:s,ref:a}=t,c=a?`(${a})`:"",l=s.status||"";this.log("receive",`${l} ${r} ${i} ${c}`.trim(),s),this.channels.filter(f=>f._isMember(r)).forEach(f=>f._trigger(i,s,a)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Dn.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${r}${i}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([Lg],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(r=>{const i={access_token:t,version:gg};t&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(Dn.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Zf(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},vl.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,i,s,a,c,l,f,p;if(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:du,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:vl.HEARTBEAT_INTERVAL,this.worker=(s=e==null?void 0:e.worker)!==null&&s!==void 0?s:!1,this.accessToken=(a=e==null?void 0:e.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(c=e==null?void 0:e.heartbeatCallback)!==null&&c!==void 0?c:$c,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=e==null?void 0:e.reconnectAfterMs)!==null&&l!==void 0?l:m=>kg[m-1]||Cg,this.encode=(f=e==null?void 0:e.encode)!==null&&f!==void 0?f:(m,y)=>y(JSON.stringify(m)),this.decode=(p=e==null?void 0:e.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Yu extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function gr(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class Ig extends Yu{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class gu extends Yu{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Ng=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function c(p){try{f(r.next(p))}catch(m){a(m)}}function l(p){try{f(r.throw(p))}catch(m){a(m)}}function f(p){p.done?s(p.value):i(p.value).then(c,l)}f((r=r.apply(n,e||[])).next())})};const ep=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Ji(async()=>{const{default:r}=await Promise.resolve().then(()=>ja);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},Eg=()=>Ng(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ji(()=>Promise.resolve().then(()=>ja),void 0)).Response:Response}),mu=n=>{if(Array.isArray(n))return n.map(t=>mu(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,r])=>{const i=t.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=mu(r)}),e},Tg=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)};var Ls=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function c(p){try{f(r.next(p))}catch(m){a(m)}}function l(p){try{f(r.throw(p))}catch(m){a(m)}}function f(p){p.done?s(p.value):i(p.value).then(c,l)}f((r=r.apply(n,e||[])).next())})};const qc=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Rg=(n,e,t)=>Ls(void 0,void 0,void 0,function*(){const r=yield Eg();n instanceof r&&!(t!=null&&t.noResolveJson)?n.json().then(i=>{const s=n.status||500,a=(i==null?void 0:i.statusCode)||s+"";e(new Ig(qc(i),s,a))}).catch(i=>{e(new gu(qc(i),i))}):e(new gu(qc(n),n))}),Og=(n,e,t,r)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"||!r?i:(Tg(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,e!=null&&e.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),t))};function No(n,e,t,r,i,s){return Ls(this,void 0,void 0,function*(){return new Promise((a,c)=>{n(t,Og(e,r,i,s)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>a(l)).catch(l=>Rg(l,c,r))})})}function Ml(n,e,t,r){return Ls(this,void 0,void 0,function*(){return No(n,"GET",e,t,r)})}function Kn(n,e,t,r,i){return Ls(this,void 0,void 0,function*(){return No(n,"POST",e,r,i,t)})}function vu(n,e,t,r,i){return Ls(this,void 0,void 0,function*(){return No(n,"PUT",e,r,i,t)})}function Fg(n,e,t,r){return Ls(this,void 0,void 0,function*(){return No(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function tp(n,e,t,r,i){return Ls(this,void 0,void 0,function*(){return No(n,"DELETE",e,r,i,t)})}var Wr=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function c(p){try{f(r.next(p))}catch(m){a(m)}}function l(p){try{f(r.throw(p))}catch(m){a(m)}}function f(p){p.done?s(p.value):i(p.value).then(c,l)}f((r=r.apply(n,e||[])).next())})};const Dg={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Cd={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Mg{constructor(e,t={},r,i){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=ep(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,r,i){return Wr(this,void 0,void 0,function*(){try{let s;const a=Object.assign(Object.assign({},Cd),i);let c=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const l=a.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",a.cacheControl),l&&s.append("metadata",this.encodeMetadata(l)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",a.cacheControl),l&&s.append("metadata",this.encodeMetadata(l))):(s=r,c["cache-control"]=`max-age=${a.cacheControl}`,c["content-type"]=a.contentType,l&&(c["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i!=null&&i.headers&&(c=Object.assign(Object.assign({},c),i.headers));const f=this._removeEmptyFolders(t),p=this._getFinalPath(f),m=yield(e=="PUT"?vu:Kn)(this.fetch,`${this.url}/object/${p}`,s,Object.assign({headers:c},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:f,id:m.Id,fullPath:m.Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(gr(s))return{data:null,error:s};throw s}})}upload(e,t,r){return Wr(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,i){return Wr(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),a=this._getFinalPath(s),c=new URL(this.url+`/object/upload/sign/${a}`);c.searchParams.set("token",t);try{let l;const f=Object.assign({upsert:Cd.upsert},i),p=Object.assign(Object.assign({},this.headers),{"x-upsert":String(f.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",f.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",f.cacheControl)):(l=r,p["cache-control"]=`max-age=${f.cacheControl}`,p["content-type"]=f.contentType);const m=yield vu(this.fetch,c.toString(),l,{headers:p});return{data:{path:s,fullPath:m.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(gr(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return Wr(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);t!=null&&t.upsert&&(i["x-upsert"]="true");const s=yield Kn(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),a=new URL(this.url+s.url),c=a.searchParams.get("token");if(!c)throw new Yu("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:c},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(gr(r))return{data:null,error:r};throw r}})}update(e,t,r){return Wr(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return Wr(this,void 0,void 0,function*(){try{return{data:yield Kn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(gr(i))return{data:null,error:i};throw i}})}copy(e,t,r){return Wr(this,void 0,void 0,function*(){try{return{data:{path:(yield Kn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(gr(i))return{data:null,error:i};throw i}})}createSignedUrl(e,t,r){return Wr(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield Kn(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${a}`)},{data:s,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(gr(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,r){return Wr(this,void 0,void 0,function*(){try{const i=yield Kn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${s}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(gr(i))return{data:null,error:i};throw i}})}download(e,t){return Wr(this,void 0,void 0,function*(){const i=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),a=s?`?${s}`:"";try{const c=this._getFinalPath(e);return{data:yield(yield Ml(this.fetch,`${this.url}/${i}/${c}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(gr(c))return{data:null,error:c};throw c}})}info(e){return Wr(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield Ml(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:mu(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(gr(r))return{data:null,error:r};throw r}})}exists(e){return Wr(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield Fg(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(gr(r)&&r instanceof gu){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),i=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&i.push(s);const c=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&i.push(l);let f=i.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${r}${f}`)}}}remove(e){return Wr(this,void 0,void 0,function*(){try{return{data:yield tp(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(gr(t))return{data:null,error:t};throw t}})}list(e,t,r){return Wr(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},Dg),t),{prefix:e||""});return{data:yield Kn(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(gr(i))return{data:null,error:i};throw i}})}listV2(e,t){return Wr(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield Kn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},t),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(gr(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Bg="2.12.1",Ug={"X-Client-Info":`storage-js/${Bg}`};var ra=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function c(p){try{f(r.next(p))}catch(m){a(m)}}function l(p){try{f(r.throw(p))}catch(m){a(m)}}function f(p){p.done?s(p.value):i(p.value).then(c,l)}f((r=r.apply(n,e||[])).next())})};class $g{constructor(e,t={},r,i){this.shouldThrowOnError=!1;const s=new URL(e);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href,this.headers=Object.assign(Object.assign({},Ug),t),this.fetch=ep(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return ra(this,void 0,void 0,function*(){try{return{data:yield Ml(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(gr(e))return{data:null,error:e};throw e}})}getBucket(e){return ra(this,void 0,void 0,function*(){try{return{data:yield Ml(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(gr(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return ra(this,void 0,void 0,function*(){try{return{data:yield Kn(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(gr(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return ra(this,void 0,void 0,function*(){try{return{data:yield vu(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(gr(r))return{data:null,error:r};throw r}})}emptyBucket(e){return ra(this,void 0,void 0,function*(){try{return{data:yield Kn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(gr(t))return{data:null,error:t};throw t}})}deleteBucket(e){return ra(this,void 0,void 0,function*(){try{return{data:yield tp(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(gr(t))return{data:null,error:t};throw t}})}}class qg extends $g{constructor(e,t={},r,i){super(e,t,r,i)}from(e){return new Mg(this.url,this.headers,e,this.fetch)}}const zg="2.57.4";let uo="";typeof Deno<"u"?uo="deno":typeof document<"u"?uo="web":typeof navigator<"u"&&navigator.product==="ReactNative"?uo="react-native":uo="node";const Wg={"X-Client-Info":`supabase-js-${uo}/${zg}`},Vg={headers:Wg},Hg={schema:"public"},Gg={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Kg={};var Jg=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function c(p){try{f(r.next(p))}catch(m){a(m)}}function l(p){try{f(r.throw(p))}catch(m){a(m)}}function f(p){p.done?s(p.value):i(p.value).then(c,l)}f((r=r.apply(n,e||[])).next())})};const Yg=n=>{let e;return n?e=n:typeof fetch>"u"?e=Uf:e=fetch,(...t)=>e(...t)},Zg=()=>typeof Headers>"u"?$f:Headers,Xg=(n,e,t)=>{const r=Yg(t),i=Zg();return(s,a)=>Jg(void 0,void 0,void 0,function*(){var c;const l=(c=yield e())!==null&&c!==void 0?c:n;let f=new i(a==null?void 0:a.headers);return f.has("apikey")||f.set("apikey",n),f.has("Authorization")||f.set("Authorization",`Bearer ${l}`),r(s,Object.assign(Object.assign({},a),{headers:f}))})};var Qg=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function c(p){try{f(r.next(p))}catch(m){a(m)}}function l(p){try{f(r.throw(p))}catch(m){a(m)}}function f(p){p.done?s(p.value):i(p.value).then(c,l)}f((r=r.apply(n,e||[])).next())})};function em(n){return n.endsWith("/")?n:n+"/"}function tm(n,e){var t,r;const{db:i,auth:s,realtime:a,global:c}=n,{db:l,auth:f,realtime:p,global:m}=e,y={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},f),s),realtime:Object.assign(Object.assign({},p),a),storage:{},global:Object.assign(Object.assign(Object.assign({},m),c),{headers:Object.assign(Object.assign({},(t=m==null?void 0:m.headers)!==null&&t!==void 0?t:{}),(r=c==null?void 0:c.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>Qg(this,void 0,void 0,function*(){return""})};return n.accessToken?y.accessToken=n.accessToken:delete y.accessToken,y}function rm(n){const e=n==null?void 0:n.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(em(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const rp="2.71.1",ua=30*1e3,bu=3,zc=bu*ua,nm="http://localhost:9999",im="supabase.auth.token",sm={"X-Client-Info":`gotrue-js/${rp}`},yu="X-Supabase-Api-Version",np={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},am=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,om=10*60*1e3;class Zu extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function pt(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class lm extends Zu{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function cm(n){return pt(n)&&n.name==="AuthApiError"}class ip extends Zu{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class es extends Zu{constructor(e,t,r,i){super(e,r,i),this.name=t,this.status=r}}class Ui extends es{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function um(n){return pt(n)&&n.name==="AuthSessionMissingError"}class bl extends es{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class yl extends es{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class wl extends es{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function hm(n){return pt(n)&&n.name==="AuthImplicitGrantRedirectError"}class Ld extends es{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class wu extends es{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Wc(n){return pt(n)&&n.name==="AuthRetryableFetchError"}class Pd extends es{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class xu extends es{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Bl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Id=` 	
\r=`.split(""),dm=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<Id.length;e+=1)n[Id[e].charCodeAt(0)]=-2;for(let e=0;e<Bl.length;e+=1)n[Bl[e].charCodeAt(0)]=e;return n})();function Nd(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(Bl[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(Bl[r]),e.queuedBits-=6}}function sp(n,e,t){const r=dm[n];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function Ed(n){const e=[],t=a=>{e.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=a=>{gm(a,r,t)};for(let a=0;a<n.length;a+=1)sp(n.charCodeAt(a),i,s);return e.join("")}function fm(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function pm(n,e){for(let t=0;t<n.length;t+=1){let r=n.charCodeAt(t);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(n.charCodeAt(t+1)-56320&65535|i)+65536,t+=1}fm(r,e)}}function gm(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let r=1;r<6;r+=1)if(!(n>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function mm(n){const e=[],t={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<n.length;i+=1)sp(n.charCodeAt(i),t,r);return new Uint8Array(e)}function vm(n){const e=[];return pm(n,t=>e.push(t)),new Uint8Array(e)}function bm(n){const e=[],t={queue:0,queuedBits:0},r=i=>{e.push(i)};return n.forEach(i=>Nd(i,t,r)),Nd(null,t,r),e.join("")}function ym(n){return Math.round(Date.now()/1e3)+n}function wm(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const On=()=>typeof window<"u"&&typeof document<"u",ps={tested:!1,writable:!1},ap=()=>{if(!On())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ps.tested)return ps.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),ps.tested=!0,ps.writable=!0}catch{ps.tested=!0,ps.writable=!1}return ps.writable};function xm(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return t.searchParams.forEach((r,i)=>{e[i]=r}),e}const op=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Ji(async()=>{const{default:r}=await Promise.resolve().then(()=>ja);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},_m=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",ha=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},gs=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Di=async(n,e)=>{await n.removeItem(e)};class Yl{constructor(){this.promise=new Yl.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Yl.promiseConstructor=Promise;function Vc(n){const e=n.split(".");if(e.length!==3)throw new xu("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!am.test(e[r]))throw new xu("JWT not in base64url format");return{header:JSON.parse(Ed(e[0])),payload:JSON.parse(Ed(e[1])),signature:mm(e[2]),raw:{header:e[0],payload:e[1]}}}async function Sm(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function jm(n,e){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const a=await n(s);if(!e(s,null,a)){r(a);return}}catch(a){if(!e(s,a)){i(a);return}}})()})}function Am(n){return("0"+n.toString(16)).substr(-2)}function km(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let i="";for(let s=0;s<56;s++)i+=t.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,Am).join("")}async function Cm(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function Lm(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await Cm(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function na(n,e,t=!1){const r=km();let i=r;t&&(i+="/PASSWORD_RECOVERY"),await ha(n,`${e}-code-verifier`,i);const s=await Lm(r);return[s,r===s?"plain":"s256"]}const Pm=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Im(n){const e=n.headers.get(yu);if(!e||!e.match(Pm))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Nm(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function Em(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Tm=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ia(n){if(!Tm.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Hc(){const n={};return new Proxy(n,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const r=t.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Td(n){return JSON.parse(JSON.stringify(n))}var Rm=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const vs=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Om=[502,503,504];async function Rd(n){var e;if(!_m(n))throw new wu(vs(n),0);if(Om.includes(n.status))throw new wu(vs(n),n.status);let t;try{t=await n.json()}catch(s){throw new ip(vs(s),s)}let r;const i=Im(n);if(i&&i.getTime()>=np["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new Pd(vs(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Ui}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((s,a)=>s&&typeof a=="string",!0))throw new Pd(vs(t),n.status,t.weak_password.reasons);throw new lm(vs(t),n.status||500,r)}const Fm=(n,e,t,r)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),t))};async function xt(n,e,t,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[yu]||(s[yu]=np["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const a=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const c=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await Dm(n,e,t+c,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function Dm(n,e,t,r,i,s){const a=Fm(e,r,i,s);let c;try{c=await n(t,Object.assign({},a))}catch(l){throw console.error(l),new wu(vs(l),0)}if(c.ok||await Rd(c),r!=null&&r.noResolveJson)return c;try{return await c.json()}catch(l){await Rd(l)}}function di(n){var e;let t=null;$m(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=ym(n.expires_in)));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function Od(n){const e=di(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function $i(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function Mm(n){return{data:n,error:null}}function Bm(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:s}=n,a=Rm(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:s},l=Object.assign({},a);return{data:{properties:c,user:l},error:null}}function Um(n){return n}function $m(n){return n.access_token&&n.refresh_token&&n.expires_in}const Gc=["global","local","others"];var qm=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};class zm{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=op(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=Gc[0]){if(Gc.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Gc.join(", ")}`);try{return await xt(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(pt(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await xt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:$i})}catch(r){if(pt(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=qm(e,["options"]),i=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await xt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:Bm,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(pt(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await xt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:$i})}catch(t){if(pt(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,i,s,a,c,l;try{const f={nextPage:null,lastPage:0,total:0},p=await xt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:Um});if(p.error)throw p.error;const m=await p.json(),y=(a=p.headers.get("x-total-count"))!==null&&a!==void 0?a:0,v=(l=(c=p.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&l!==void 0?l:[];return v.length>0&&(v.forEach(k=>{const S=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),P=JSON.parse(k.split(";")[1].split("=")[1]);f[`${P}Page`]=S}),f.total=parseInt(y)),{data:Object.assign(Object.assign({},m),f),error:null}}catch(f){if(pt(f))return{data:{users:[]},error:f};throw f}}async getUserById(e){ia(e);try{return await xt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:$i})}catch(t){if(pt(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){ia(e);try{return await xt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:$i})}catch(r){if(pt(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){ia(e);try{return await xt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:$i})}catch(r){if(pt(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){ia(e.userId);try{const{data:t,error:r}=await xt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:r}}catch(t){if(pt(t))return{data:null,error:t};throw t}}async _deleteFactor(e){ia(e.userId),ia(e.id);try{return{data:await xt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(pt(t))return{data:null,error:t};throw t}}}function Fd(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function Wm(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const sa={debug:!!(globalThis&&ap()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class lp extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Vm extends lp{}async function Hm(n,e,t){sa.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),sa.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){sa.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,i.name);try{return await t()}finally{sa.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,i.name)}}else{if(e===0)throw sa.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new Vm(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(sa.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}Wm();const Gm={url:nm,storageKey:im,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:sm,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Dd(n,e,t){return await t()}const aa={};class So{constructor(e){var t,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=So.nextInstanceID,So.nextInstanceID+=1,this.instanceID>0&&On()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},Gm),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new zm({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=op(i.fetch),this.lock=i.lock||Dd,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:On()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=Hm:this.lock=Dd,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:ap()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Fd(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=Fd(this.memoryStorage)),On()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}get jwks(){var e,t;return(t=(e=aa[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){aa[this.storageKey]=Object.assign(Object.assign({},aa[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=aa[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){aa[this.storageKey]=Object.assign(Object.assign({},aa[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${rp}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=xm(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),On()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:s}=await this._getSessionFromURL(t,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),hm(s)){const l=(e=s.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:a,redirectType:c}=i;return this._debug("#_initialize()","detected session in URL",a,"redirect type",c),await this._saveSession(a),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return pt(t)?{error:t}:{error:new ip("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,i;try{const s=await xt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:di}),{data:a,error:c}=s;if(c||!a)return{data:{user:null,session:null},error:c};const l=a.session,f=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:f,session:l},error:null}}catch(s){if(pt(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var t,r,i;try{let s;if("email"in e){const{email:p,password:m,options:y}=e;let v=null,k=null;this.flowType==="pkce"&&([v,k]=await na(this.storage,this.storageKey)),s=await xt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y==null?void 0:y.emailRedirectTo,body:{email:p,password:m,data:(t=y==null?void 0:y.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken},code_challenge:v,code_challenge_method:k},xform:di})}else if("phone"in e){const{phone:p,password:m,options:y}=e;s=await xt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:m,data:(r=y==null?void 0:y.data)!==null&&r!==void 0?r:{},channel:(i=y==null?void 0:y.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken}},xform:di})}else throw new yl("You must provide either an email or phone number and a password");const{data:a,error:c}=s;if(c||!a)return{data:{user:null,session:null},error:c};const l=a.session,f=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:f,session:l},error:null}}catch(s){if(pt(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let t;if("email"in e){const{email:s,password:a,options:c}=e;t=await xt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:Od})}else if("phone"in e){const{phone:s,password:a,options:c}=e;t=await xt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:Od})}else throw new yl("You must provide either an email or phone number and a password");const{data:r,error:i}=t;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new bl}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(t){if(pt(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,r,i,s,a,c,l,f,p,m,y,v;let k,S;if("message"in e)k=e.message,S=e.signature;else{const{chain:P,wallet:w,statement:L,options:R}=e;let J;if(On())if(typeof w=="object")J=w;else{const he=window;if("solana"in he&&typeof he.solana=="object"&&("signIn"in he.solana&&typeof he.solana.signIn=="function"||"signMessage"in he.solana&&typeof he.solana.signMessage=="function"))J=he.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(R!=null&&R.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");J=w}const te=new URL((t=R==null?void 0:R.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in J&&J.signIn){const he=await J.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},R==null?void 0:R.signInWithSolana),{version:"1",domain:te.host,uri:te.href}),L?{statement:L}:null));let Q;if(Array.isArray(he)&&he[0]&&typeof he[0]=="object")Q=he[0];else if(he&&typeof he=="object"&&"signedMessage"in he&&"signature"in he)Q=he;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in Q&&"signature"in Q&&(typeof Q.signedMessage=="string"||Q.signedMessage instanceof Uint8Array)&&Q.signature instanceof Uint8Array)k=typeof Q.signedMessage=="string"?Q.signedMessage:new TextDecoder().decode(Q.signedMessage),S=Q.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in J)||typeof J.signMessage!="function"||!("publicKey"in J)||typeof J!="object"||!J.publicKey||!("toBase58"in J.publicKey)||typeof J.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");k=[`${te.host} wants you to sign in with your Solana account:`,J.publicKey.toBase58(),...L?["",L,""]:[""],"Version: 1",`URI: ${te.href}`,`Issued At: ${(i=(r=R==null?void 0:R.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=R==null?void 0:R.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${R.signInWithSolana.notBefore}`]:[],...!((a=R==null?void 0:R.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${R.signInWithSolana.expirationTime}`]:[],...!((c=R==null?void 0:R.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${R.signInWithSolana.chainId}`]:[],...!((l=R==null?void 0:R.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${R.signInWithSolana.nonce}`]:[],...!((f=R==null?void 0:R.signInWithSolana)===null||f===void 0)&&f.requestId?[`Request ID: ${R.signInWithSolana.requestId}`]:[],...!((m=(p=R==null?void 0:R.signInWithSolana)===null||p===void 0?void 0:p.resources)===null||m===void 0)&&m.length?["Resources",...R.signInWithSolana.resources.map(Q=>`- ${Q}`)]:[]].join(`
`);const he=await J.signMessage(new TextEncoder().encode(k),"utf8");if(!he||!(he instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");S=he}}try{const{data:P,error:w}=await xt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:k,signature:bm(S)},!((y=e.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(v=e.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:di});if(w)throw w;return!P||!P.session||!P.user?{data:{user:null,session:null},error:new bl}:(P.session&&(await this._saveSession(P.session),await this._notifyAllSubscribers("SIGNED_IN",P.session)),{data:Object.assign({},P),error:w})}catch(P){if(pt(P))return{data:{user:null,session:null},error:P};throw P}}async _exchangeCodeForSession(e){const t=await gs(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(t??"").split("/");try{const{data:s,error:a}=await xt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:di});if(await Di(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new bl}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:a})}catch(s){if(pt(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:t,provider:r,token:i,access_token:s,nonce:a}=e,c=await xt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:di}),{data:l,error:f}=c;return f?{data:{user:null,session:null},error:f}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new bl}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:f})}catch(t){if(pt(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,i,s,a;try{if("email"in e){const{email:c,options:l}=e;let f=null,p=null;this.flowType==="pkce"&&([f,p]=await na(this.storage,this.storageKey));const{error:m}=await xt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:f,code_challenge_method:p},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:m}}if("phone"in e){const{phone:c,options:l}=e,{data:f,error:p}=await xt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(a=l==null?void 0:l.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:p}}throw new yl("You must provide either an email or phone number.")}catch(c){if(pt(c))return{data:{user:null,session:null},error:c};throw c}}async verifyOtp(e){var t,r;try{let i,s;"options"in e&&(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:c}=await xt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:di});if(c)throw c;if(!a)throw new Error("An error occurred on token verification.");const l=a.session,f=a.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:f,session:l},error:null}}catch(i){if(pt(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var t,r,i;try{let s=null,a=null;return this.flowType==="pkce"&&([s,a]=await na(this.storage,this.storageKey)),await xt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:a}),headers:this.headers,xform:Mm})}catch(s){if(pt(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new Ui;const{error:i}=await xt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(pt(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:s}=e,{error:a}=await xt(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:r,type:i,options:s}=e,{data:a,error:c}=await xt(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:c}}throw new yl("You must provide either an email or phone number and a type")}catch(t){if(pt(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await gs(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<zc:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const a=await gs(this.userStorage,this.storageKey+"-user");a!=null&&a.user?e.user=a.user:e.user=Hc()}if(this.storage.isServer&&e.user){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,f,p)=>(!a&&f==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,f,p))})}return{data:{session:e},error:null}}const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await xt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:$i}):await this._useSession(async t=>{var r,i,s;const{data:a,error:c}=t;if(c)throw c;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ui}:await xt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:$i})})}catch(t){if(pt(t))return um(t)&&(await this._removeSession(),await Di(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new Ui;const a=i.session;let c=null,l=null;this.flowType==="pkce"&&e.email!=null&&([c,l]=await na(this.storage,this.storageKey));const{data:f,error:p}=await xt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:c,code_challenge_method:l}),jwt:a.access_token,xform:$i});if(p)throw p;return a.user=f.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(pt(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ui;const t=Date.now()/1e3;let r=t,i=!0,s=null;const{payload:a}=Vc(e.access_token);if(a.exp&&(r=a.exp,i=r<=t),i){const{session:c,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!c)return{data:{user:null,session:null},error:null};s=c}else{const{data:c,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:c.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(t){if(pt(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:a,error:c}=t;if(c)throw c;e=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Ui;const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(pt(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!On())throw new wl("No browser detected.");if(e.error||e.error_description||e.error_code)throw new wl(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new Ld("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new wl("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Ld("No code detected.");const{data:L,error:R}=await this._exchangeCodeForSession(e.code);if(R)throw R;const J=new URL(window.location.href);return J.searchParams.delete("code"),window.history.replaceState(window.history.state,"",J.toString()),{data:{session:L.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:a,expires_in:c,expires_at:l,token_type:f}=e;if(!s||!c||!a||!f)throw new wl("No session defined in URL");const p=Math.round(Date.now()/1e3),m=parseInt(c);let y=p+m;l&&(y=parseInt(l));const v=y-p;v*1e3<=ua&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${v}s, should have been closer to ${m}s`);const k=y-m;p-k>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",k,y,p):p-k<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",k,y,p);const{data:S,error:P}=await this._getUser(s);if(P)throw P;const w={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:m,expires_at:y,refresh_token:a,token_type:f,user:S.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:w,redirectType:e.type},error:null}}catch(r){if(pt(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await gs(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:i,error:s}=t;if(s)return{error:s};const a=(r=i.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:c}=await this.admin.signOut(a,e);if(c&&!(cm(c)&&(c.status===404||c.status===401||c.status===403)))return{error:c}}return e!=="others"&&(await this._removeSession(),await Di(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=wm(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,i;try{const{data:{session:s},error:a}=t;if(a)throw a;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,t={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await na(this.storage,this.storageKey,!0));try{return await xt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(s){if(pt(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(pt(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:i}=await this._useSession(async s=>{var a,c,l,f,p;const{data:m,error:y}=s;if(y)throw y;const v=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(c=e.options)===null||c===void 0?void 0:c.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await xt(this.fetch,"GET",v,{headers:this.headers,jwt:(p=(f=m.session)===null||f===void 0?void 0:f.access_token)!==null&&p!==void 0?p:void 0})});if(i)throw i;return On()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(pt(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,i;const{data:s,error:a}=t;if(a)throw a;return await xt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(t){if(pt(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await jm(async i=>(i>0&&await Sm(200*Math.pow(2,i-1)),this._debug(t,"refreshing attempt",i),await xt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:di})),(i,s)=>{const a=200*Math.pow(2,i);return s&&Wc(s)&&Date.now()+a-r<ua})}catch(r){if(this._debug(t,"error",r),pt(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),On()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await gs(this.storage,this.storageKey);if(i&&this.userStorage){let a=await gs(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:i.user},await ha(this.userStorage,this.storageKey+"-user",a)),i.user=(e=a==null?void 0:a.user)!==null&&e!==void 0?e:Hc()}else if(i&&!i.user&&!i.user){const a=await gs(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(i.user=a.user,await Di(this.storage,this.storageKey+"-user"),await ha(this.storage,this.storageKey,i)):i.user=Hc()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const s=((t=i.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<zc;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${zc}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:a}=await this._callRefreshToken(i.refresh_token);a&&(console.error(a),Wc(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:c}=await this._getUser(i.access_token);!c&&(a!=null&&a.user)?(i.user=a.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new Ui;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Yl;const{data:s,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!s.session)throw new Ui;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const c={session:s.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(s){if(this._debug(i,"error",s),pt(s)){const a={session:null,error:s};return Wc(s)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,t,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const s=[],a=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(e,t)}catch(l){s.push(l)}});if(await Promise.all(a),s.length>0){for(let c=0;c<s.length;c+=1)console.error(s[c]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),r=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&t.user&&await ha(this.userStorage,this.storageKey+"-user",{user:t.user});const i=Object.assign({},t);delete i.user;const s=Td(i);await ha(this.storage,this.storageKey,s)}else{const i=Td(t);await ha(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await Di(this.storage,this.storageKey),await Di(this.storage,this.storageKey+"-code-verifier"),await Di(this.storage,this.storageKey+"-user"),this.userStorage&&await Di(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&On()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ua);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/ua);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${ua}ms, refresh threshold is ${bu} ticks`),i<=bu&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof lp)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!On()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const i=[`provider=${encodeURIComponent(t)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,a]=await na(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(a)}`});i.push(c.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:i,error:s}=t;return s?{data:null,error:s}:await xt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(pt(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,i;const{data:s,error:a}=t;if(a)return{data:null,error:a};const c=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:f}=await xt(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return f?{data:null,error:f}:(e.factorType==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(t){if(pt(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:i,error:s}=t;if(s)return{data:null,error:s};const{data:a,error:c}=await xt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:c})})}catch(t){if(pt(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:i,error:s}=t;return s?{data:null,error:s}:await xt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(pt(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=(e==null?void 0:e.factors)||[],i=r.filter(a=>a.factor_type==="totp"&&a.status==="verified"),s=r.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:r,totp:i,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:i},error:s}=e;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=Vc(i.access_token);let c=null;a.aal&&(c=a.aal);let l=c;((r=(t=i.user.factors)===null||t===void 0?void 0:t.filter(m=>m.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const p=a.amr||[];return{data:{currentLevel:c,nextLevel:l,currentAuthenticationMethods:p},error:null}}))}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(c=>c.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(c=>c.kid===e),r&&this.jwks_cached_at+om>i)return r;const{data:s,error:a}=await xt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,r=s.keys.find(c=>c.kid===e),!r)?null:r}async getClaims(e,t={}){try{let r=e;if(!r){const{data:v,error:k}=await this.getSession();if(k||!v.session)return{data:null,error:k};r=v.session.access_token}const{header:i,payload:s,signature:a,raw:{header:c,payload:l}}=Vc(r);t!=null&&t.allowExpired||Nm(s.exp);const f=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!f){const{error:v}=await this.getUser(r);if(v)throw v;return{data:{claims:s,header:i,signature:a},error:null}}const p=Em(i.alg),m=await crypto.subtle.importKey("jwk",f,p,!0,["verify"]);if(!await crypto.subtle.verify(p,m,a,vm(`${c}.${l}`)))throw new xu("Invalid JWT signature");return{data:{claims:s,header:i,signature:a},error:null}}catch(r){if(pt(r))return{data:null,error:r};throw r}}}So.nextInstanceID=0;const Km=So;class Jm extends Km{constructor(e){super(e)}}var Ym=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function c(p){try{f(r.next(p))}catch(m){a(m)}}function l(p){try{f(r.throw(p))}catch(m){a(m)}}function f(p){p.done?s(p.value):i(p.value).then(c,l)}f((r=r.apply(n,e||[])).next())})};class Zm{constructor(e,t,r){var i,s,a;this.supabaseUrl=e,this.supabaseKey=t;const c=rm(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const l=`sb-${c.hostname.split(".")[0]}-auth-token`,f={db:Hg,realtime:Kg,auth:Object.assign(Object.assign({},Gg),{storageKey:l}),global:Vg},p=tm(r??{},f);this.storageKey=(i=p.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=p.global.headers)!==null&&s!==void 0?s:{},p.accessToken?(this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(m,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=p.auth)!==null&&a!==void 0?a:{},this.headers,p.global.fetch),this.fetch=Xg(t,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},p.realtime)),this.rest=new dg(new URL("rest/v1",c).href,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),this.storage=new qg(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),p.accessToken||this._listenForAuthEvents()}get functions(){return new W2(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Ym(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,userStorage:s,storageKey:a,flowType:c,lock:l,debug:f},p,m){const y={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Jm({url:this.authUrl.href,headers:Object.assign(Object.assign({},y),p),storageKey:a,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,userStorage:s,flowType:c,lock:l,debug:f,fetch:m,hasCustomAuthorizationHeader:Object.keys(this.headers).some(v=>v.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new Pg(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Xm=(n,e,t)=>new Zm(n,e,t);function Qm(){if(typeof window<"u"||typeof process>"u")return!1;const n=process.version;if(n==null)return!1;const e=n.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}Qm()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Md={url:"https://tzfeqnmqvbvixopaunku.supabase.co",anonKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR6ZmVxbm1xdmJ2aXhvcGF1bmt1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc3NDE1MzAsImV4cCI6MjA3MzMxNzUzMH0.ZYnY9STMyklVs3zfzAQhn1JzTKU70TlP7AfiQCwUb1w"},e5=()=>{const n=Md.url,e=Md.anonKey;return{url:n,anonKey:e}},_s=class _s{constructor(){dt(this,"client",null);dt(this,"config",null);dt(this,"isInitialized",!1)}static getInstance(){return _s.instance||(_s.instance=new _s),_s.instance}async initialize(){if(!this.isInitialized)try{const e=e5();this.config={url:e.url,anonKey:e.anonKey},this.client=Xm(this.config.url,this.config.anonKey);const{data:t,error:r}=await this.client.from("videos").select("count").limit(1);if(r)throw console.error("Erro ao conectar com Supabase:",r),new Error(`Falha na conexo com Supabase: ${r.message}`);this.isInitialized=!0,console.log("Supabase inicializado com sucesso")}catch(e){throw console.error("Erro ao inicializar Supabase:",e),e}}async checkInitialized(){(!this.isInitialized||!this.client)&&await this.initialize()}getClient(){if(!this.client)throw new Error("Supabase no foi inicializado. Chame initialize() primeiro.");return this.client}async getVideos(){await this.checkInitialized();const{data:e,error:t}=await this.client.from("videos").select("*").eq("is_active",!0).order("created_at",{ascending:!1});if(t)throw console.error("Erro ao buscar vdeos:",t),t;return e||[]}async getVideo(e){await this.checkInitialized();const{data:t,error:r}=await this.client.from("videos").select("*").eq("id",e).eq("is_active",!0).single();if(r){if(r.code==="PGRST116")return null;throw console.error("Erro ao buscar vdeo:",r),r}return t}async incrementVideoViews(e){await this.checkInitialized();const{error:t}=await this.client.from("videos").update({views:this.client.rpc("increment_views",{video_id:e})}).eq("id",e);t&&console.error("Erro ao incrementar views:",t)}async getUserByEmail(e){await this.checkInitialized();const{data:t,error:r}=await this.client.from("users").select("*").eq("email",e).single();if(r){if(r.code==="PGRST116")return null;throw console.error("Erro ao buscar usurio:",r),r}return t}async getUserById(e){await this.checkInitialized();const{data:t,error:r}=await this.client.from("users").select("*").eq("id",e).single();if(r){if(r.code==="PGRST116")return null;throw console.error("Erro ao buscar usurio por ID:",r),r}return t}async createUser(e){await this.checkInitialized();const{data:t,error:r}=await this.client.from("users").insert(e).select().single();if(r)throw console.error("Erro ao criar usurio:",r),r;return t}async createSession(e){await this.checkInitialized();const{data:t,error:r}=await this.client.from("sessions").insert(e).select().single();if(r)throw console.error("Erro ao criar sesso:",r),r;return t}async getSessionByToken(e){await this.checkInitialized();const{data:t,error:r}=await this.client.from("sessions").select("*").eq("token",e).eq("is_active",!0).single();if(r){if(r.code==="PGRST116")return null;throw console.error("Erro ao buscar sesso:",r),r}return t}async updateSession(e,t){await this.checkInitialized();const{error:r}=await this.client.from("sessions").update(t).eq("id",e);if(r)throw console.error("Erro ao atualizar sesso:",r),r}async deleteSession(e){await this.checkInitialized();const{error:t}=await this.client.from("sessions").delete().eq("id",e);if(t)throw console.error("Erro ao deletar sesso:",t),t}async getSiteConfig(){await this.checkInitialized();const{data:e,error:t}=await this.client.from("site_config").select("*").order("id",{ascending:!1}).limit(1).single();if(t){if(t.code==="PGRST116")return null;throw console.error("Erro ao buscar configurao do site:",t),t}return e}async updateSiteConfig(e){await this.checkInitialized();const{error:t}=await this.client.from("site_config").upsert(e);if(t)throw console.error("Erro ao atualizar configurao do site:",t),t}async getCryptoWallets(){await this.checkInitialized();const{data:e,error:t}=await this.client.from("crypto_wallets").select("*").order("created_at",{ascending:!1});if(t)throw console.error("Erro ao buscar carteiras crypto:",t),t;return e||[]}};dt(_s,"instance");let jo=_s;class qi{static async login(e,t){try{console.log("Attempting login with Supabase for email:",e);const r=await this.supabase.getUserByEmail(e);if(!r)return console.log("User not found for email:",e),null;if(r.password!==t)return console.log("Invalid password for email:",e),null;const i={$id:r.id,email:r.email,name:r.name,password:r.password,created_at:r.created_at},s=this.generateSessionToken(),a={user_id:i.$id,token:s,user_agent:navigator.userAgent,expires_at:new Date(Date.now()+24*60*60*1e3).toISOString(),is_active:!0},c=await this.supabase.createSession(a),l={id:c.id,userId:c.user_id,token:c.token,userAgent:c.user_agent,expiresAt:c.expires_at,isActive:c.is_active,createdAt:c.created_at};return localStorage.setItem("sessionToken",s),console.log("Login successful for user:",i.email),{user:i,session:l}}catch(r){return console.error("Error during login:",r),null}}static async logout(){try{const e=localStorage.getItem("sessionToken");if(e){const t=await this.supabase.getSessionByToken(e);t&&await this.supabase.updateSession(t.id,{is_active:!1})}localStorage.removeItem("sessionToken"),console.log("Logout successful")}catch(e){console.error("Error during logout:",e),localStorage.removeItem("sessionToken")}}static async getCurrentSession(){try{const e=localStorage.getItem("sessionToken");if(!e)return null;const t=await this.supabase.getSessionByToken(e);if(!t)return null;const r=new Date,i=new Date(t.expires_at);return r>i?(await this.supabase.updateSession(t.id,{is_active:!1}),localStorage.removeItem("sessionToken"),null):{id:t.id,userId:t.user_id,token:t.token,userAgent:t.user_agent,expiresAt:t.expires_at,isActive:t.is_active,createdAt:t.created_at}}catch(e){return console.error("Error getting current session:",e),null}}static async getUserById(e){try{const t=await this.supabase.getUserById(e);return t?{$id:t.id,email:t.email,name:t.name,password:t.password,created_at:t.created_at}:null}catch(t){return console.error("Error getting user by ID:",t),null}}static async validateSession(e){try{const t=await this.supabase.getSessionByToken(e);if(!t)return null;const r=new Date,i=new Date(t.expires_at);return r>i?(await this.supabase.updateSession(t.id,{is_active:!1}),null):{id:t.id,userId:t.user_id,token:t.token,userAgent:t.user_agent,expiresAt:t.expires_at,isActive:t.is_active,createdAt:t.created_at}}catch(t){return console.error("Error validating session:",t),null}}static async deactivateSession(e){try{await this.supabase.updateSession(e,{is_active:!1}),console.log("Session deactivated:",e)}catch(t){console.error("Error deactivating session:",t)}}static async createUser(e){try{const t=await this.supabase.createUser({email:e.email,name:e.name,password:e.password,created_at:new Date().toISOString()});return{$id:t.id,email:t.email,name:t.name,password:t.password,created_at:t.created_at}}catch(t){return console.error("Error creating user:",t),null}}static generateSessionToken(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let t="";for(let r=0;r<64;r++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}static async updateUser(e,t){try{const r=this.supabase.getClient(),{data:i,error:s}=await r.from("users").update(t).eq("id",e).select().single();return s?(console.error("Error updating user:",s),null):{$id:i.id,email:i.email,name:i.name,password:i.password,created_at:i.created_at}}catch(r){return console.error("Error updating user:",r),null}}static async changePassword(e,t){try{const r=this.supabase.getClient(),{error:i}=await r.from("users").update({password:t}).eq("id",e);return i?(console.error("Error changing password:",i),!1):!0}catch(r){return console.error("Error changing password:",r),!1}}static async getAllUsers(){try{const e=this.supabase.getClient(),{data:t,error:r}=await e.from("users").select("*").order("created_at",{ascending:!1});return r?(console.error("Error getting all users:",r),[]):t.map(i=>({$id:i.id,email:i.email,name:i.name,password:i.password,created_at:i.created_at}))}catch(e){return console.error("Error getting all users:",e),[]}}static async deleteUser(e){try{const t=this.supabase.getClient(),{error:r}=await t.from("users").delete().eq("id",e);return r?(console.error("Error deleting user:",r),!1):!0}catch(t){return console.error("Error deleting user:",t),!1}}}dt(qi,"supabase",jo.getInstance());class gi{static clearCache(){this.videosCache=null,this.cacheTimestamp=0,console.log("Video cache cleared")}static clearCachePublic(){this.clearCache()}static async forceRefreshCache(){return this.clearCache(),await this.getAllVideos()}static isCacheValid(){return this.videosCache!==null&&this.cacheTimestamp>0&&Date.now()-this.cacheTimestamp<this.CACHE_DURATION}static convertSupabaseVideo(e){return{$id:e.id,title:e.title,description:e.description||"",price:e.price,duration:e.duration||"00:00",videoFileId:e.video_file_id,video_id:e.video_file_id,thumbnailFileId:e.thumbnail_file_id,thumbnail_id:e.thumbnail_file_id,thumbnailUrl:void 0,isPurchased:!1,createdAt:e.created_at,views:e.views||0,product_link:e.product_link||""}}static async getVideoIds(e="newest"){try{console.log("Getting video IDs only (fast operation)");const t=await this.supabase.getVideos();return this.sortVideos(t.map(i=>this.convertSupabaseVideo(i)),e).map(i=>i.$id)}catch(t){return console.error("Error getting video IDs:",t),[]}}static async getAllVideos(e="newest",t=""){try{if(!t&&this.isCacheValid())return console.log("Usando cache de vdeos do Supabase"),this.sortVideos([...this.videosCache],e);console.log("Buscando todos os vdeos do Supabase");let i=(await this.supabase.getVideos()).map(s=>this.convertSupabaseVideo(s));if(t&&t.trim()!==""){const s=t.trim().toLowerCase();i=i.filter(a=>a.title.toLowerCase().includes(s)||a.description.toLowerCase().includes(s))}for(const s of i){const a=s.thumbnailFileId||s.thumbnail_id;if(a)try{s.thumbnailUrl=await wn.getThumbnailUrl(a)}catch(c){console.error(`Erro ao obter miniatura para o vdeo ${s.$id}:`,c),s.thumbnailUrl="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjE4MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMzAwIiBoZWlnaHQ9IjE4MCIgZmlsbD0iI2Y1ZjVmNSIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IiM5OTk5OTkiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5WaWRlbyBUaHVtYm5haWw8L3RleHQ+PC9zdmc+"}else s.thumbnailUrl="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjE4MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMzAwIiBoZWlnaHQ9IjE4MCIgZmlsbD0iI2Y1ZjVmNSIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IiM5OTk5OTkiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5WaWRlbyBUaHVtYm5haWw8L3RleHQ+PC9zdmc+"}return t||(this.videosCache=[...i],this.cacheTimestamp=Date.now(),console.log("Cache Supabase atualizado com",i.length,"vdeos")),this.sortVideos(i,e)}catch(r){throw console.error("Erro ao obter vdeos do Supabase:",r),r}}static sortVideos(e,t){switch(t){case"newest":return e.sort((r,i)=>new Date(i.createdAt).getTime()-new Date(r.createdAt).getTime());case"price_asc":return e.sort((r,i)=>r.price-i.price);case"price_desc":return e.sort((r,i)=>i.price-r.price);case"views_desc":return e.sort((r,i)=>(i.views||0)-(r.views||0));case"duration_desc":return e.sort((r,i)=>{const s=a=>{try{const c=a.split(":").map(Number);if(c.length===2)return c[0]*60+c[1];if(c.length===3)return c[0]*3600+c[1]*60+c[2]}catch(c){console.error("Erro ao analisar durao:",c)}return 0};return s(i.duration)-s(r.duration)});default:return e}}static async getVideo(e){try{console.log(`Getting single video ${e} from Supabase (optimized)`);const t=await this.supabase.getVideo(e);if(!t)return console.log(`Video ${e} not found in Supabase`),null;const r=this.convertSupabaseVideo(t),i=r.thumbnailFileId||r.thumbnail_id;return i&&wn.getThumbnailUrl(i).then(s=>{r.thumbnailUrl=s,console.log(`Thumbnail loaded for video ${r.$id}`)}).catch(s=>{console.error(`Error getting thumbnail for video ${r.$id}:`,s),r.thumbnailUrl="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjE4MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMzAwIiBoZWlnaHQ9IjE4MCIgZmlsbD0iI2Y1ZjVmNSIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IiM5OTk5OTkiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5WaWRlbyBUaHVtYm5haWw8L3RleHQ+PC9zdmc+"}),r.thumbnailUrl="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjE4MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMzAwIiBoZWlnaHQ9IjE4MCIgZmlsbD0iI2Y1ZjVmNSIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IiM5OTk5OTkiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5WaWRlbyBUaHVtYm5haWw8L3RleHQ+PC9zdmc+",console.log(`Video ${e} loaded successfully from Supabase`),r}catch(t){return console.error(`Error getting video ${e} from Supabase:`,t),null}}static async incrementViews(e){try{await this.supabase.incrementVideoViews(e)}catch(t){console.error(`Error incrementing views for video ${e}:`,t)}}static async getVideosWithPagination(e=1,t=12,r="newest",i=""){try{const s=await this.getAllVideos(r,i),a=Math.ceil(s.length/t),c=(e-1)*t,l=c+t;return{videos:s.slice(c,l),totalPages:a}}catch(s){throw console.error("Error getting paginated videos from Supabase:",s),s}}static async getVideoFileUrl(e){try{console.log(`Getting video file URL for video ${e}`);const t=await this.getVideo(e);if(!t)return console.error(`Video ${e} not found`),null;const r=t.video_id||t.videoFileId;if(!r)return console.error(`Video ${e} has no video file ID (checked both video_id and videoFileId)`),null;console.log(`Attempting to get file URL for video ID: ${r}`);try{const i=await wn.getFileUrl(r);return console.log(`Video URL obtained: ${i}`),i}catch(i){return console.error("Error getting file URL:",i),console.error(`Video File ID: ${r}`),null}}catch(t){return console.error(`Error getting video file URL for ${e}:`,t),null}}static async createVideo(e){try{this.clearCache();const t=this.supabase.getClient(),{data:r,error:i}=await t.from("videos").insert({title:e.title,description:e.description,price:e.price,duration:e.duration,video_file_id:e.videoFileId,thumbnail_file_id:e.thumbnailFileId,product_link:e.productLink||"",is_active:!0,views:0}).select().single();return i?(console.error("Error creating video in Supabase:",i),null):(await this.forceRefreshCache(),this.convertSupabaseVideo(r))}catch(t){return console.error("Error creating video:",t),null}}static async updateVideo(e,t){try{this.clearCache();const r=this.supabase.getClient(),i={};t.title!==void 0&&(i.title=t.title),t.description!==void 0&&(i.description=t.description),t.price!==void 0&&(i.price=t.price),t.duration!==void 0&&(i.duration=t.duration),t.videoFileId!==void 0&&(i.video_file_id=t.videoFileId),t.thumbnailFileId!==void 0&&(i.thumbnail_file_id=t.thumbnailFileId),t.productLink!==void 0&&(i.product_link=t.productLink);const{data:s,error:a}=await r.from("videos").update(i).eq("id",e).select().single();return a?(console.error("Error updating video in Supabase:",a),null):(await this.forceRefreshCache(),this.convertSupabaseVideo(s))}catch(r){return console.error("Error updating video:",r),null}}static async deleteVideo(e){try{this.clearCache();const t=await this.getVideo(e);if(t){const s=t.video_id||t.videoFileId,a=t.thumbnail_id||t.thumbnailFileId;s&&await wn.deleteFile(s),a&&await wn.deleteFile(a)}const r=this.supabase.getClient(),{error:i}=await r.from("videos").delete().eq("id",e);return i?(console.error("Error deleting video from Supabase:",i),!1):(await this.forceRefreshCache(),!0)}catch(t){return console.error("Error deleting video:",t),!1}}}dt(gi,"supabase",jo.getInstance()),dt(gi,"videosCache",null),dt(gi,"cacheTimestamp",0),dt(gi,"CACHE_DURATION",5*60*1e3);var pi=(n=>(n.NEWEST="newest",n.PRICE_ASC="price_asc",n.PRICE_DESC="price_desc",n.VIEWS_DESC="views_desc",n.DURATION_DESC="duration_desc",n))(pi||{});class Wt{static clearCache(){this.videosCache=null,this.cacheTimestamp=0,console.log("Video cache cleared")}static clearCachePublic(){this.clearCache()}static async forceRefreshCache(){return this.clearCache(),await this.getAllVideos()}static isCacheValid(){return this.videosCache!==null&&this.cacheTimestamp>0&&Date.now()-this.cacheTimestamp<this.CACHE_DURATION}static convertVideoData(e){let t="00:00";if(typeof e.duration=="string")t=e.duration;else if(typeof e.duration=="number"){const r=e.duration,i=Math.floor(r/60),s=r%60;if(i<60)t=`${i.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`;else{const a=Math.floor(i/60),c=i%60;t=`${a.toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`}}return{$id:e.id,title:e.title,description:e.description,price:e.price,duration:t,videoFileId:e.videoFileId,video_id:e.videoFileId,thumbnailFileId:e.thumbnailFileId,thumbnail_id:e.thumbnailFileId,thumbnailUrl:e.thumbnailUrl,isPurchased:e.isPurchased||!1,createdAt:e.createdAt,views:e.views,product_link:e.productLink||""}}static async getVideoIds(e="newest"){try{if(console.log("Getting video IDs only (fast operation)"),Jn.useSupabaseForVideos)return await gi.getVideoIds(e);throw new Error("Supabase is required for video operations")}catch(t){throw console.error("Error getting video IDs from Supabase:",t),t}}static async getAllVideos(e="newest",t=""){try{if(Jn.useSupabaseForVideos)return await gi.getAllVideos(e,t);throw new Error("Supabase is required for video operations")}catch(r){throw console.error("Error getting videos from Supabase:",r),r}}static sortVideos(e,t){switch(t){case"newest":return e.sort((r,i)=>new Date(i.createdAt).getTime()-new Date(r.createdAt).getTime());case"price_asc":return e.sort((r,i)=>r.price-i.price);case"price_desc":return e.sort((r,i)=>i.price-r.price);case"views_desc":return e.sort((r,i)=>(i.views||0)-(r.views||0));case"duration_desc":return e.sort((r,i)=>{const s=a=>{try{const c=a.split(":").map(Number);if(c.length===2)return c[0]*60+c[1];if(c.length===3)return c[0]*3600+c[1]*60+c[2]}catch(c){console.error("Erro ao analisar durao:",c)}return 0};return s(i.duration)-s(r.duration)});default:return e}}static async getVideo(e){try{if(console.log(`Getting single video ${e} (optimized)`),Jn.useSupabaseForVideos)return await gi.getVideo(e);throw new Error("Supabase is required for video operations")}catch(t){return console.error(`Error getting video ${e} from Supabase:`,t),null}}static async incrementViews(e){try{if(Jn.useSupabaseForVideos){await gi.incrementViews(e);return}throw new Error("Supabase is required for video operations")}catch(t){console.error(`Error incrementing views for video ${e} from Supabase:`,t)}}static async getVideosWithPagination(e=1,t=12,r="newest",i=""){try{const s=await this.getAllVideos(r,i),a=Math.ceil(s.length/t),c=(e-1)*t,l=c+t;return{videos:s.slice(c,l),totalPages:a}}catch(s){throw console.error("Error getting paginated videos:",s),s}}static async getVideoFileUrl(e){try{if(console.log(`Getting video file URL for video ${e}`),Jn.useSupabaseForVideos)return await gi.getVideoFileUrl(e);throw new Error("Supabase is required for video operations")}catch(t){return console.error(`Error getting video file URL for ${e} from Supabase:`,t),null}}static async createVideo(e){try{this.clearCache();const t=await Bc.createVideo({title:e.title,description:e.description,price:e.price,duration:e.duration.toString(),videoFileId:e.videoFileId,thumbnailFileId:e.thumbnailFileId,productLink:e.productLink||"",isActive:!0,isPurchased:!1});return await this.forceRefreshCache(),this.convertVideoData(t)}catch(t){return console.error("Error creating video:",t),null}}static async updateVideo(e,t){try{this.clearCache();const r={...t};r.duration&&(r.duration=r.duration.toString());const i=await Bc.updateVideo(e,r);return i?(await this.forceRefreshCache(),this.convertVideoData(i)):null}catch(r){return console.error("Error updating video:",r),null}}static async deleteVideo(e){try{this.clearCache();const t=await this.getVideo(e);if(t){const i=t.video_id||t.videoFileId,s=t.thumbnail_id||t.thumbnailFileId;i&&await wn.deleteFile(i),s&&await wn.deleteFile(s)}const r=await Bc.deleteVideo(e);return r&&await this.forceRefreshCache(),r}catch(t){return console.error("Error deleting video:",t),!1}}}dt(Wt,"videosCache",null),dt(Wt,"cacheTimestamp",0),dt(Wt,"CACHE_DURATION",30*1e3);const Jn={useSupabaseForVideos:!0,useSupabaseForUsers:!0,useSupabaseForConfig:!0,enableFallback:!1},cp=F.createContext({user:null,loading:!1,error:null,login:async()=>{},logout:async()=>{},checkSession:async()=>{},isAuthenticated:!1,sessionCheckedAt:0}),Bd=5*60*1e3,t5=({children:n})=>{const[e,t]=F.useState(null),[r,i]=F.useState(!0),[s,a]=F.useState(null),[c,l]=F.useState(!1),[f,p]=F.useState(0),[m,y]=F.useState(null),v=Bn();F.useEffect(()=>{P();const L=setInterval(()=>{m&&Date.now()-f>Bd&&P()},Bd);return()=>clearInterval(L)},[]);const k=async(L,R,J)=>{try{if(i(!0),a(null),Jn.useSupabaseForUsers){console.log("Attempting login with Supabase");const te=await qi.login(L,R);if(te){t(te.user),l(!0),y(te.session),p(Date.now()),v(J||"/admin");return}else{a("Usurio no encontrado ou senha invlida.");return}}throw new Error("Supabase is required for user authentication")}catch(te){console.error("Login error:",te),a("Erro ao fazer login. Tente novamente.")}finally{i(!1)}},S=async()=>{try{i(!0),Jn.useSupabaseForUsers&&await qi.logout(),t(null),l(!1),y(null),p(Date.now()),v("/login")}catch(L){console.error("Logout error:",L),localStorage.removeItem("sessionToken"),t(null),l(!1),y(null),v("/login")}finally{i(!1)}},P=async()=>{try{const L=Date.now();if(L-f<1e4)return;if(i(!0),Jn.useSupabaseForUsers){console.log("Checking session with Supabase");const R=await qi.getCurrentSession();if(y(R),p(L),!R){t(null),l(!1);return}const J=await qi.getUserById(R.userId);if(!J){await qi.deactivateSession(R.id),t(null),l(!1),y(null);return}t(J),l(!0);return}throw new Error("Supabase is required for user authentication")}catch(L){console.error("Session check error:",L),t(null),l(!1),y(null)}finally{i(!1)}},w={user:e,loading:r,error:s,login:k,logout:S,checkSession:P,isAuthenticated:c,sessionCheckedAt:f};return u.jsx(cp.Provider,{value:w,children:n})},ts=()=>F.useContext(cp);class Wi{static isCacheValid(){return this.configCache!==null&&this.cacheTimestamp>0&&Date.now()-this.cacheTimestamp<this.CACHE_DURATION}static clearCache(){this.configCache=null,this.cacheTimestamp=0,console.log("Site config cache cleared")}static convertSupabaseToSiteConfigData(e,t){return{siteName:e.site_name||"VideosPlus",paypalClientId:e.paypal_client_id||"",paypalMeUsername:e.paypal_me_username||"",stripePublishableKey:e.stripe_publishable_key||"",stripeSecretKey:e.stripe_secret_key||"",telegramUsername:e.telegram_username||"",videoListTitle:e.video_list_title||"Available Videos",crypto:t.map(r=>`${r.type}:${r.address}`),emailHost:e.email_host||"smtp.gmail.com",emailPort:e.email_port||"587",emailSecure:e.email_secure||!1,emailUser:e.email_user||"",emailPass:e.email_pass||"",emailFrom:e.email_from||"",wasabiConfig:{accessKey:e.wasabi_access_key||"",secretKey:e.wasabi_secret_key||"",region:e.wasabi_region||"",bucket:e.wasabi_bucket||"",endpoint:e.wasabi_endpoint||""}}}static convertSiteConfigDataToSupabase(e){return{site_name:e.siteName,paypal_client_id:e.paypalClientId,paypal_me_username:e.paypalMeUsername,stripe_publishable_key:e.stripePublishableKey,stripe_secret_key:e.stripeSecretKey,telegram_username:e.telegramUsername,video_list_title:e.videoListTitle,email_host:e.emailHost,email_port:e.emailPort,email_secure:e.emailSecure,email_user:e.emailUser,email_pass:e.emailPass,email_from:e.emailFrom,wasabi_access_key:e.wasabiConfig.accessKey,wasabi_secret_key:e.wasabiConfig.secretKey,wasabi_region:e.wasabiConfig.region,wasabi_bucket:e.wasabiConfig.bucket,wasabi_endpoint:e.wasabiConfig.endpoint,updated_at:new Date().toISOString()}}static async getSiteConfig(){try{if(this.isCacheValid())return console.log("Usando cache de configurao do site"),this.configCache;console.log("Buscando configurao do site do Supabase");const e=await this.supabase.getSiteConfig();if(!e)return console.log("Configurao do site no encontrada no Supabase"),null;const t=await this.supabase.getCryptoWallets(),r=this.convertSupabaseToSiteConfigData(e,t);return this.configCache=r,this.cacheTimestamp=Date.now(),console.log("Configurao do site carregada do Supabase"),r}catch(e){return console.error("Erro ao obter configurao do site:",e),null}}static async updateSiteConfig(e){try{console.log("Atualizando configurao do site no Supabase"),this.clearCache();const t=await this.getSiteConfig();if(!t)return console.error("No foi possvel obter configurao atual"),null;const r={...t,...e},i=this.convertSiteConfigDataToSupabase(r);return await this.supabase.updateSiteConfig(i),e.crypto&&await this.updateCryptoWallets(e.crypto),this.clearCache(),console.log("Configurao do site atualizada no Supabase"),r}catch(t){return console.error("Erro ao atualizar configurao do site:",t),null}}static async updateCryptoWallets(e){try{console.log("Atualizando carteiras crypto no Supabase");const t=this.supabase.getClient();await t.from("crypto_wallets").delete().neq("id",0);const r=e.map(i=>{const[s,a]=i.split(":");return{type:s.trim(),address:a.trim()}});r.length>0&&await t.from("crypto_wallets").insert(r),console.log("Carteiras crypto atualizadas no Supabase")}catch(t){throw console.error("Erro ao atualizar carteiras crypto:",t),t}}static async getCryptoWallets(){try{return(await this.supabase.getCryptoWallets()).map(t=>({id:t.id,address:t.address,type:t.type,created_at:t.created_at}))}catch(e){return console.error("Erro ao obter carteiras crypto:",e),[]}}static convertToSiteConfig(e){return{$id:"site-config",site_name:e.siteName,paypal_client_id:e.paypalClientId,paypal_me_username:e.paypalMeUsername,stripe_publishable_key:e.stripePublishableKey,stripe_secret_key:e.stripeSecretKey,telegram_username:e.telegramUsername,video_list_title:e.videoListTitle,crypto:e.crypto,email_host:e.emailHost,email_port:e.emailPort,email_secure:e.emailSecure,email_user:e.emailUser,email_pass:e.emailPass,email_from:e.emailFrom,wasabi_config:e.wasabiConfig}}static getDefaultConfig(){return{siteName:"VideosPlus",paypalClientId:"",paypalMeUsername:"",stripePublishableKey:"",stripeSecretKey:"",telegramUsername:"",videoListTitle:"Available Videos",crypto:[],emailHost:"smtp.gmail.com",emailPort:"587",emailSecure:!1,emailUser:"",emailPass:"",emailFrom:"",wasabiConfig:{accessKey:"",secretKey:"",region:"",bucket:"",endpoint:""}}}static async refreshConfig(){return this.clearCache(),await this.getSiteConfig()}}dt(Wi,"supabase",jo.getInstance()),dt(Wi,"configCache",null),dt(Wi,"cacheTimestamp",0),dt(Wi,"CACHE_DURATION",10*60*1e3);const up=F.createContext({siteName:"VideosPlus",paypalClientId:"",paypalMeUsername:"",stripePublishableKey:"",stripeSecretKey:"",telegramUsername:"",videoListTitle:"Available Videos",cryptoWallets:[],emailHost:"smtp.gmail.com",emailPort:"587",emailSecure:!1,emailUser:"",emailPass:"",emailFrom:"",wasabiConfig:{accessKey:"",secretKey:"",region:"",bucket:"",endpoint:""},siteConfig:null,loading:!1,error:null,refreshConfig:async()=>{},updateConfig:async()=>{}}),r5=({children:n})=>{const[e,t]=F.useState(null),[r,i]=F.useState(!0),[s,a]=F.useState(null),c=m=>({$id:"site-config",site_name:m.siteName,paypal_client_id:m.paypalClientId,paypal_me_username:m.paypalMeUsername,stripe_publishable_key:m.stripePublishableKey,stripe_secret_key:m.stripeSecretKey,telegram_username:m.telegramUsername,video_list_title:m.videoListTitle,crypto:m.crypto,email_host:m.emailHost,email_port:m.emailPort,email_secure:m.emailSecure,email_user:m.emailUser,email_pass:m.emailPass,email_from:m.emailFrom,wasabi_config:m.wasabiConfig}),l=async()=>{try{if(i(!0),a(null),Jn.useSupabaseForConfig){console.log("Loading site config from Supabase");const m=await Wi.getSiteConfig();if(m){const y={siteName:m.siteName,paypalClientId:m.paypalClientId,paypalMeUsername:m.paypalMeUsername,stripePublishableKey:m.stripePublishableKey,stripeSecretKey:m.stripeSecretKey,telegramUsername:m.telegramUsername,videoListTitle:m.videoListTitle,crypto:m.crypto,emailHost:m.emailHost,emailPort:m.emailPort,emailSecure:m.emailSecure,emailUser:m.emailUser,emailPass:m.emailPass,emailFrom:m.emailFrom,wasabiConfig:m.wasabiConfig},v=c(y);t(v)}else throw new Error("No configuration found in Supabase")}}catch(m){console.error("Error fetching site config from Supabase:",m),a("Failed to load site configuration from Supabase"),t({$id:"site-config",site_name:"VideosPlus",paypal_client_id:"",paypal_me_username:"",stripe_publishable_key:"",stripe_secret_key:"",telegram_username:"",video_list_title:"Available Videos",crypto:[],email_host:"smtp.gmail.com",email_port:"587",email_secure:!1,email_user:"",email_pass:"",email_from:"",wasabi_config:{accessKey:"",secretKey:"",region:"",bucket:"",endpoint:""}})}finally{i(!1)}},f=async m=>{try{if(i(!0),a(null),Jn.useSupabaseForConfig){console.log("Updating site config in Supabase");const y=await Wi.updateSiteConfig(m);if(y){const v=c(y);t(v);return}else throw new Error("Failed to update configuration in Supabase")}}catch(y){throw console.error("Error updating site config in Supabase:",y),a("Failed to update site configuration in Supabase"),y}finally{i(!1)}};F.useEffect(()=>{l()},[]);const p={siteName:(e==null?void 0:e.site_name)||"VideosPlus",paypalClientId:(e==null?void 0:e.paypal_client_id)||"",paypalMeUsername:(e==null?void 0:e.paypal_me_username)||"",stripePublishableKey:(e==null?void 0:e.stripe_publishable_key)||"",stripeSecretKey:(e==null?void 0:e.stripe_secret_key)||"",telegramUsername:(e==null?void 0:e.telegram_username)||"",videoListTitle:(e==null?void 0:e.video_list_title)||"Available Videos",cryptoWallets:(e==null?void 0:e.crypto)||[],emailHost:(e==null?void 0:e.email_host)||"smtp.gmail.com",emailPort:(e==null?void 0:e.email_port)||"587",emailSecure:(e==null?void 0:e.email_secure)||!1,emailUser:(e==null?void 0:e.email_user)||"",emailPass:(e==null?void 0:e.email_pass)||"",emailFrom:(e==null?void 0:e.email_from)||"",wasabiConfig:(e==null?void 0:e.wasabi_config)||{accessKey:"",secretKey:"",region:"",bucket:"",endpoint:""},siteConfig:e,loading:r,error:s,refreshConfig:l,updateConfig:f};return u.jsx(up.Provider,{value:p,children:n})},Qn=()=>F.useContext(up);var Xu={},Kc={};const n5=Cf(Q1);var Ud;function Pt(){return Ud||(Ud=1,function(n){"use client";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return e.createSvgIcon}});var e=n5}(Kc)),Kc}var i5=Lt;Object.defineProperty(Xu,"__esModule",{value:!0});var Ul=Xu.default=void 0,s5=i5(Pt()),a5=u;Ul=Xu.default=(0,s5.default)((0,a5.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search");var Qu={},o5=Lt;Object.defineProperty(Qu,"__esModule",{value:!0});var hp=Qu.default=void 0,l5=o5(Pt()),c5=u;hp=Qu.default=(0,l5.default)((0,c5.jsx)("path",{d:"M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zM12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6c3.31 0 6 2.69 6 6s-2.69 6-6 6"}),"Brightness4");var eh={},u5=Lt;Object.defineProperty(eh,"__esModule",{value:!0});var dp=eh.default=void 0,h5=u5(Pt()),d5=u;dp=eh.default=(0,h5.default)((0,d5.jsx)("path",{d:"M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zM12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6m0-10c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4"}),"Brightness7");var th={},f5=Lt;Object.defineProperty(th,"__esModule",{value:!0});var fp=th.default=void 0,p5=f5(Pt()),g5=u;fp=th.default=(0,p5.default)((0,g5.jsx)("path",{d:"m17 7-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4z"}),"Logout");var rh={},m5=Lt;Object.defineProperty(rh,"__esModule",{value:!0});var pp=rh.default=void 0,v5=m5(Pt()),b5=u;pp=rh.default=(0,v5.default)((0,b5.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"Person");const y5=()=>{const{mode:n,toggleTheme:e}=F.useContext(Bf),{user:t,logout:r,isAuthenticated:i}=ts(),{siteName:s}=Qn(),a=Bn(),c=Po(),l=bf(c.breakpoints.down("md")),[f,p]=F.useState(""),m=async()=>{try{await r()}catch(S){console.error("Error during logout:",S),localStorage.removeItem("sessionToken"),window.location.reload()}},y=S=>{S.preventDefault(),f.trim()&&a(`/videos?search=${encodeURIComponent(f.trim())}`)},v=S=>{p(S.target.value)},k=i&&t;return u.jsx(e0,{position:"sticky",sx:{bgcolor:n==="dark"?"#0A0A0A":"#121212",color:"#fff",boxShadow:"0 4px 12px rgba(0,0,0,0.5)"},children:u.jsxs(t0,{children:[u.jsxs(re,{component:co,to:"/",sx:{flexGrow:1,textDecoration:"none",color:"inherit",display:"flex",alignItems:"center"},children:[u.jsx(re,{sx:{display:"flex",alignItems:"center",background:"linear-gradient(to right, #FF0F50 0%, #D10D42 100%)",borderRadius:"8px",px:1.5,py:.5,mr:1,boxShadow:"0 2px 8px rgba(0, 0, 0, 0.3)"},children:u.jsxs(fe,{variant:"h6",sx:{fontWeight:700,letterSpacing:"0.5px",fontFamily:"'Montserrat', sans-serif",fontSize:{xs:"0.9rem",sm:"1.1rem"},color:"white"},children:[s.split(" ")[0],u.jsx(re,{component:"span",sx:{color:"white",fontWeight:400,ml:.5},children:s.split(" ").slice(1).join(" ")})]})}),u.jsx(zt,{label:"18+",size:"small",sx:{ml:1,bgcolor:"#FF0F50",color:"white",fontWeight:"bold",height:"22px",fontSize:"0.7rem"}})]}),!l&&u.jsx(re,{component:"form",onSubmit:y,sx:{display:"flex",alignItems:"center",mx:1,minWidth:"200px",maxWidth:"250px"},children:u.jsx(Rt,{placeholder:"Search...",size:"small",value:f,onChange:v,sx:{flexGrow:1,"& .MuiOutlinedInput-root":{backgroundColor:"rgba(255, 255, 255, 0.08)",color:"#fff",height:"36px",fontSize:"0.85rem","& fieldset":{borderColor:"rgba(255, 255, 255, 0.2)",borderWidth:"1px"},"&:hover fieldset":{borderColor:"rgba(255, 15, 80, 0.4)"},"&.Mui-focused fieldset":{borderColor:"#FF0F50",borderWidth:"1px"}},"& .MuiInputBase-input":{padding:"8px 12px","&::placeholder":{color:"rgba(255, 255, 255, 0.6)",opacity:1,fontSize:"0.85rem"}}},InputProps:{startAdornment:u.jsx(r0,{position:"start",sx:{ml:1},children:u.jsx(Ul,{sx:{color:"rgba(255, 255, 255, 0.6)",fontSize:"18px"}})})}})}),u.jsxs(re,{sx:{display:"flex",alignItems:"center"},children:[u.jsx(Xe,{color:"inherit",component:co,to:"/",sx:{mr:1,color:"#fff",fontWeight:600,"&:hover":{bgcolor:"rgba(255, 15, 80, 0.1)"}},children:"Home"}),u.jsx(Xe,{color:"inherit",component:co,to:"/videos",sx:{mr:1,color:"#fff",fontWeight:600,"&:hover":{bgcolor:"rgba(255, 15, 80, 0.1)"}},children:"Videos"}),l&&u.jsx(xn,{color:"inherit",onClick:()=>a("/videos"),sx:{mr:1,color:"#fff","&:hover":{bgcolor:"rgba(255, 15, 80, 0.1)"}},"aria-label":"search",children:u.jsx(Ul,{})}),k&&u.jsxs(u.Fragment,{children:[u.jsx(Xe,{color:"inherit",component:co,to:"/admin",startIcon:u.jsx(pp,{}),sx:{mr:1,color:"#fff",fontWeight:600,"&:hover":{bgcolor:"rgba(255, 15, 80, 0.1)"}},children:"Admin"}),u.jsx(xn,{color:"inherit",onClick:m,sx:{color:"#fff","&:hover":{bgcolor:"rgba(255, 15, 80, 0.1)"}},"aria-label":"logout",children:u.jsx(fp,{})})]}),u.jsx(xn,{color:"inherit",onClick:e,sx:{ml:1,color:"#FF69B4","&:hover":{bgcolor:"rgba(255, 15, 80, 0.1)"}},"aria-label":"toggle theme",children:n==="dark"?u.jsx(dp,{}):u.jsx(hp,{})})]})]})})};var nh={},w5=Lt;Object.defineProperty(nh,"__esModule",{value:!0});var ih=nh.default=void 0,x5=w5(Pt()),_5=u;ih=nh.default=(0,x5.default)((0,_5.jsx)("path",{d:"M1 21h22L12 2zm12-3h-2v-2h2zm0-4h-2v-4h2z"}),"Warning");var sh={},S5=Lt;Object.defineProperty(sh,"__esModule",{value:!0});var ah=sh.default=void 0,j5=S5(Pt()),A5=u;ah=sh.default=(0,j5.default)((0,A5.jsx)("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2m3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1z"}),"Lock");var oh={},k5=Lt;Object.defineProperty(oh,"__esModule",{value:!0});var Ao=oh.default=void 0,C5=k5(Pt()),L5=u;Ao=oh.default=(0,C5.default)((0,L5.jsx)("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"}),"Settings");const P5=()=>{const n=new Date().getFullYear(),e=Po(),{siteName:t}=Qn(),r=Bn(),[i,s]=F.useState(!1),[a,c]=F.useState({projectId:"",apiKey:""}),l=()=>{r("/login")};F.useEffect(()=>{const p=m=>{m.ctrlKey&&m.altKey&&m.key==="s"&&(s(!0),setTimeout(()=>s(!1),1e4))};return document.addEventListener("keydown",p),()=>document.removeEventListener("keydown",p)},[]),F.useEffect(()=>{c({projectId:"",apiKey:""})},[]);const f=()=>{const p=prompt("Digite o Access Key do Wasabi:"),m=prompt("Digite a Secret Key do Wasabi:");p&&m&&(localStorage.setItem("wasabi-config",JSON.stringify({projectId:p,apiKey:m})),c({projectId:p,apiKey:m}),alert("Credenciais salvas com sucesso!"))};return u.jsxs(re,{component:"footer",sx:{py:5,bgcolor:e.palette.mode==="dark"?"#0A0A0A":"#121212",borderTop:`1px solid ${e.palette.mode==="dark"?"rgba(255,15,80,0.2)":"rgba(255,15,80,0.3)"}`,color:"#fff",mt:6},children:[u.jsxs(re,{sx:{backgroundColor:"rgba(255, 15, 80, 0.1)",p:2,mb:4,borderRadius:1,display:"flex",alignItems:"center",maxWidth:1200,mx:"auto"},children:[u.jsx(ih,{sx:{color:"#FF0F50",mr:2}}),u.jsxs(fe,{variant:"body2",sx:{color:"white"},children:[u.jsx("strong",{children:"AGE VERIFICATION NOTICE:"})," This website contains adult content and is intended for adults aged 18 years or older. By entering this site, you confirm that you are at least 18 years old and agree to our terms and conditions."]})]}),u.jsxs(mi,{children:[u.jsxs(Qe,{container:!0,spacing:4,children:[u.jsx(Qe,{item:!0,xs:12,md:4,children:u.jsxs(re,{sx:{mb:3},children:[u.jsx(fe,{variant:"h6",sx:{color:"#FF0F50",fontWeight:"bold",mb:2},children:t}),u.jsx(fe,{variant:"body2",sx:{color:"rgba(255,255,255,0.7)"},children:"We offer exclusive premium adult content for our users. All videos are carefully selected to ensure the highest quality viewing experience for our 18+ audience."})]})}),u.jsxs(Qe,{item:!0,xs:12,md:4,children:[u.jsx(fe,{variant:"h6",sx:{color:"#FF0F50",fontWeight:"bold",mb:2},children:"Quick Links"}),u.jsxs(re,{sx:{display:"flex",flexDirection:"column"},children:[u.jsx(cd,{href:"/",underline:"hover",sx:{mb:1.5,color:"rgba(255,255,255,0.7)","&:hover":{color:"#FF69B4"}},children:"Home"}),u.jsx(cd,{href:"/videos",underline:"hover",sx:{mb:1.5,color:"rgba(255,255,255,0.7)","&:hover":{color:"#FF69B4"}},children:"Videos"}),u.jsx(re,{sx:{display:"flex",alignItems:"center",color:"#FF69B4",mt:1,background:"rgba(255,15,80,0.1)",px:1.5,py:.5,borderRadius:1,width:"fit-content"},children:u.jsx(fe,{variant:"body2",fontWeight:"bold",children:"18+ ADULTS ONLY"})})]})]}),u.jsxs(Qe,{item:!0,xs:12,md:4,children:[u.jsx(fe,{variant:"h6",sx:{color:"#FF0F50",fontWeight:"bold",mb:2},children:"Legal Information"}),u.jsx(fe,{variant:"body2",sx:{color:"rgba(255,255,255,0.7)"},paragraph:!0,children:"This website contains adult-oriented material intended for individuals 18 years of age or older. All models appearing on this website were 18 years of age or older at the time of production."}),u.jsx(fe,{variant:"body2",sx:{color:"rgba(255,255,255,0.5)"},paragraph:!0,children:"USC 2257 Record-Keeping Requirements Compliance Statement"})]})]}),u.jsx(ya,{sx:{my:4,borderColor:"rgba(255,255,255,0.1)"}}),u.jsxs(re,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},alignItems:"center",justifyContent:"space-between"},children:[u.jsxs(fe,{variant:"body2",sx:{color:"rgba(255,255,255,0.5)"},children:[" ",n," ",t,". All rights reserved. Adults only."]}),u.jsxs(re,{sx:{display:"flex",alignItems:"center",mt:{xs:2,md:0}},children:[u.jsx(fe,{variant:"body2",sx:{color:"rgba(255,255,255,0.5)",mr:2},children:"By accessing this site you agree that you are at least 18 years old"}),u.jsx(Xe,{variant:"contained",size:"small",startIcon:u.jsx(ah,{}),onClick:l,sx:{bgcolor:"#FF0F50","&:hover":{bgcolor:"#D00030"}},children:"Admin"}),i&&u.jsx(Xe,{variant:"outlined",size:"small",startIcon:u.jsx(Ao,{}),onClick:f,sx:{ml:1,borderColor:"#FF0F50",color:"#FF0F50","&:hover":{borderColor:"#D00030",color:"#D00030"}},children:"Config"})]})]})]})]})},I5=()=>{var k;const[n,e]=F.useState(""),[t,r]=F.useState(""),i=Po(),{login:s,loading:a,error:c,user:l,isAuthenticated:f}=ts(),p=Bn(),y=((k=Xn().state)==null?void 0:k.from)||"/admin";F.useEffect(()=>{f&&l&&p(y,{replace:!0})},[f,l,p,y]);const v=async S=>{S.preventDefault(),await s(n,t,y)};return u.jsx(mi,{maxWidth:"sm",sx:{py:8},children:u.jsxs(yn,{elevation:3,sx:{p:4,display:"flex",flexDirection:"column",alignItems:"center",bgcolor:i.palette.background.paper},children:[u.jsx(fe,{variant:"h4",component:"h1",gutterBottom:!0,children:"Login"}),c&&u.jsx(Qt,{severity:"error",sx:{width:"100%",mb:2},children:c}),u.jsxs(re,{component:"form",onSubmit:v,sx:{width:"100%"},children:[u.jsx(Rt,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email",name:"email",autoComplete:"email",autoFocus:!0,value:n,onChange:S=>e(S.target.value),disabled:a}),u.jsx(Rt,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Senha",type:"password",id:"password",autoComplete:"current-password",value:t,onChange:S=>r(S.target.value),disabled:a}),u.jsx(Xe,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",sx:{mt:3,mb:2},disabled:a,children:a?u.jsx(Cr,{size:24}):"Entrar"})]})]})})},N5=({children:n})=>{const{user:e,loading:t,isAuthenticated:r,checkSession:i,sessionCheckedAt:s}=ts(),[a,c]=F.useState(!0),[l,f]=F.useState(null),p=Xn();return F.useEffect(()=>{let m=!0;return(async()=>{if(m){c(!0),f(null);try{Date.now()-s>1e4&&await i()}catch(v){console.error("Error verifying session:",v),m&&f("Erro ao verificar autenticao. Por favor, faa login novamente.")}finally{m&&c(!1)}}})(),()=>{m=!1}},[p.pathname,i,s]),t||a?u.jsxs(re,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100vh"},children:[u.jsx(Cr,{size:40}),u.jsx(fe,{variant:"body1",sx:{mt:2},children:"Verificando autenticao..."})]}):l?u.jsxs(re,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100vh",p:2},children:[u.jsx(Qt,{severity:"error",sx:{mb:2,width:"100%",maxWidth:500},children:l}),u.jsx(Xe,{variant:"contained",color:"primary",onClick:()=>{localStorage.removeItem("sessionToken"),window.location.href="/login"},children:"Ir para login"})]}):!e||!r?u.jsx(y2,{to:"/login",replace:!0,state:{from:p.pathname}}):u.jsx(u.Fragment,{children:n})};var lh={},E5=Lt;Object.defineProperty(lh,"__esModule",{value:!0});var gp=lh.default=void 0,T5=E5(Pt()),R5=u;gp=lh.default=(0,T5.default)((0,R5.jsx)("path",{d:"M10 18h4v-2h-4zM3 6v2h18V6zm3 7h12v-2H6z"}),"FilterList");var ch={},O5=Lt;Object.defineProperty(ch,"__esModule",{value:!0});var xa=ch.default=void 0,F5=O5(Pt()),D5=u;xa=ch.default=(0,F5.default)((0,D5.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility");var uh={},M5=Lt;Object.defineProperty(uh,"__esModule",{value:!0});var _a=uh.default=void 0,B5=M5(Pt()),$d=u;_a=uh.default=(0,B5.default)([(0,$d.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),(0,$d.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"AccessTime");var hh={},U5=Lt;Object.defineProperty(hh,"__esModule",{value:!0});var mp=hh.default=void 0,$5=U5(Pt()),q5=u;mp=hh.default=(0,$5.default)((0,q5.jsx)("path",{d:"M8 5v14l11-7z"}),"PlayArrow");var dh={},z5=Lt;Object.defineProperty(dh,"__esModule",{value:!0});var Gi=dh.default=void 0;H5(F);var W5=z5(Pt()),V5=u;function vp(n){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(vp=function(r){return r?t:e})(n)}function H5(n,e){if(n&&n.__esModule)return n;if(n===null||typeof n!="object"&&typeof n!="function")return{default:n};var t=vp(e);if(t&&t.has(n))return t.get(n);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in n)if(s!=="default"&&Object.prototype.hasOwnProperty.call(n,s)){var a=i?Object.getOwnPropertyDescriptor(n,s):null;a&&(a.get||a.set)?Object.defineProperty(r,s,a):r[s]=n[s]}return r.default=n,t&&t.set(n,r),r}Gi=dh.default=(0,W5.default)((0,V5.jsx)("path",{d:"M9.78 18.65l.28-4.23 7.68-6.92c.34-.31-.07-.46-.52-.19L7.74 13.3 3.64 12c-.88-.25-.89-.86.2-1.3l15.97-6.16c.73-.33 1.43.18 1.15 1.3l-2.72 12.81c-.19.91-.74 1.13-1.5.71L12.6 16.3l-1.99 1.93c-.23.23-.42.42-.83.42z"}),"Telegram");var fh={},G5=Lt;Object.defineProperty(fh,"__esModule",{value:!0});var bp=fh.default=void 0,K5=G5(Pt()),J5=u;bp=fh.default=(0,K5.default)((0,J5.jsx)("path",{d:"m10 16.5 6-4.5-6-4.5zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"PlayCircleOutline");const Y5=({width:n="100%",height:e="56.25%",title:t="Video Thumbnail"})=>u.jsxs(re,{sx:{width:n,height:e,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0, 0, 0, 0.05)",borderRadius:1,position:"relative",overflow:"hidden"},children:[u.jsx(dr,{variant:"rectangular",width:"100%",height:"100%",animation:"wave",sx:{position:"absolute",top:0,left:0,zIndex:1}}),u.jsxs(re,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:2,textAlign:"center",p:2},children:[u.jsx(n0,{sx:{fontSize:48,color:"text.secondary",mb:1,opacity:.7}}),u.jsx(fe,{variant:"caption",sx:{color:"text.secondary",fontWeight:"bold",opacity:.8},children:t})]})]}),ph=({video:n})=>{const e=Bn(),{telegramUsername:t}=Qn(),[r,i]=F.useState(!1),[s,a]=F.useState(!0),[c,l]=F.useState(!1),f=async()=>{try{await Wt.incrementViews(n.$id),e(`/video/${n.$id}`)}catch(L){console.error("Error handling video card click:",L),e(`/video/${n.$id}`)}},p=L=>{L.stopPropagation(),e(`/video/${n.$id}`)},m=L=>{if(L.stopPropagation(),t){const R=`
 *${n.title}*

 *Price:* $${n.price.toFixed(2)}
 *Duration:* ${n.duration?y(n.duration):"N/A"}
 *Views:* ${v(n.views)}
 *Added:* ${n.createdAt||n.created_at?k(typeof(n.createdAt||n.created_at)=="string"?n.createdAt||n.created_at:(n.createdAt||n.created_at).toString()):"N/A"}

 *Description:*
${n.description||"No description available"}
      `.trim(),J=encodeURIComponent(R);window.open(`https://t.me/${t}?text=${J}`,"_blank")}},y=L=>{if(L==null)return"00:00";if(typeof L=="number"){const R=Math.floor(L/60),J=Math.floor(L%60);return`${R}min ${J}s`}if(typeof L=="string")try{const R=L.split(":");if(R.length===2)return`${R[0]}min ${R[1]}s`;if(R.length===3)return`${R[0]}h ${R[1]}m ${R[2]}s`}catch(R){return console.error("Error formatting duration:",R),L}return String(L)},v=L=>L===void 0?"0 views":L<1e3?`${L} views`:L<1e6?`${(L/1e3).toFixed(1)}K views`:`${(L/1e6).toFixed(1)}M views`,k=L=>{if(!L)return"";const R=new Date(L),te=Math.abs(new Date().getTime()-R.getTime()),he=Math.ceil(te/(1e3*60*60*24));return he===1?"Yesterday":he<7?`${he} days ago`:he<30?`${Math.floor(he/7)} weeks ago`:he<365?`${Math.floor(he/30)} months ago`:`${Math.floor(he/365)} years ago`},S=n.createdAt||n.created_at;F.useEffect(()=>{n.thumbnailUrl?(a(!0),l(!1)):(a(!1),l(!0))},[n.thumbnailUrl]);const P=()=>{console.log(`Thumbnail loaded successfully for video: ${n.title}`),a(!1),l(!1)},w=()=>{console.warn(`Thumbnail failed to load for video: ${n.title}`),l(!0),a(!1)};return u.jsxs(u.Fragment,{children:[u.jsx("style",{children:`
          @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
          }
        `}),u.jsxs(Xi,{sx:{height:"100%",display:"flex",flexDirection:"column",transition:"all 0.3s ease",borderRadius:"12px",overflow:"hidden",boxShadow:L=>`0 8px 20px ${L.palette.mode==="dark"?"rgba(0,0,0,0.4)":"rgba(0,0,0,0.15)"}`,cursor:"pointer",backgroundColor:L=>L.palette.mode==="dark"?"#121212":"#ffffff",border:"1px solid rgba(255,15,80,0.1)","&:hover":{transform:"translateY(-10px) scale(1.02)",boxShadow:"0 16px 30px rgba(0,0,0,0.25)",borderColor:"#FF0F50"}},onClick:f,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:[u.jsxs(re,{sx:{position:"relative",paddingTop:"56.25%"},children:[n.thumbnailUrl&&!c?u.jsx(Du,{component:"img",image:n.thumbnailUrl,alt:n.title,sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover",backgroundColor:"#0A0A0A",filter:"brightness(0.9)"},onLoad:P,onError:w}):u.jsx(dr,{variant:"rectangular",sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"#0A0A0A"},animation:"wave"}),s&&n.thumbnailUrl&&u.jsxs(re,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0.7)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:3},children:[u.jsx(Cr,{size:40,thickness:4,sx:{color:"#FF0F50",mb:1,animation:"pulse 1.5s ease-in-out infinite"}}),u.jsx(fe,{variant:"caption",sx:{color:"white",fontWeight:"bold",textAlign:"center",fontSize:"0.75rem"},children:"Loading..."})]}),c&&u.jsx(Y5,{width:"100%",height:"100%",title:n.title}),u.jsx(zt,{label:"18+",size:"small",sx:{position:"absolute",top:8,left:8,backgroundColor:"#FF0F50",color:"white",fontWeight:"bold",fontSize:"0.7rem",height:"22px",zIndex:2}}),u.jsx(re,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"linear-gradient(to top, rgba(0,0,0,0.8) 0%, rgba(0,0,0,0.3) 50%, rgba(0,0,0,0.3) 100%)",display:"flex",alignItems:"center",justifyContent:"center",opacity:r?1:.4,transition:"all 0.3s ease"},children:u.jsx(re,{sx:{width:"70px",height:"70px",borderRadius:"50%",backgroundColor:"rgba(255,15,80,0.7)",display:"flex",alignItems:"center",justifyContent:"center",transform:r?"scale(1.1)":"scale(0.9)",transition:"all 0.3s ease",boxShadow:"0 4px 12px rgba(0,0,0,0.3)"},children:n.isPurchased?u.jsx(mp,{sx:{fontSize:45,color:"white"}}):u.jsx(ah,{sx:{fontSize:35,color:"white"}})})}),n.duration&&u.jsx(zt,{label:y(n.duration),size:"small",sx:{position:"absolute",bottom:8,right:8,backgroundColor:"rgba(0,0,0,0.8)",color:"white",fontWeight:"bold",height:"24px","& .MuiChip-label":{px:1}},icon:u.jsx(_a,{sx:{color:"white",fontSize:"14px"}})}),u.jsx(zt,{label:`$${n.price.toFixed(2)}`,color:"primary",size:"medium",sx:{position:"absolute",top:8,right:8,fontWeight:"bold",fontSize:"0.9rem",height:"32px",boxShadow:"0 4px 12px rgba(255, 15, 80, 0.4)",backgroundColor:"#FF0F50",border:"2px solid rgba(255, 255, 255, 0.3)","& .MuiChip-label":{color:"white",fontWeight:"bold",px:1.5},"&:hover":{backgroundColor:"#D10D42",transform:"scale(1.05)",transition:"all 0.2s ease"}}})]}),u.jsxs(ks,{sx:{flexGrow:1,p:2,pt:1.5},children:[u.jsx(fe,{gutterBottom:!0,variant:"h6",component:"div",sx:{fontWeight:"bold",fontSize:"1rem",lineHeight:1.2,mb:1,height:"2.4rem",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",color:L=>L.palette.mode==="dark"?"white":"text.primary"},children:n.title}),u.jsxs(re,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[u.jsxs(re,{sx:{display:"flex",alignItems:"center",gap:.5,color:L=>L.palette.mode==="dark"?"#FF69B4":"text.secondary"},children:[u.jsx(xa,{sx:{fontSize:16}}),u.jsx(fe,{variant:"caption",children:v(n.views)})]}),S&&u.jsx(fe,{variant:"caption",sx:{color:"text.secondary"},children:k(S)})]}),u.jsx(re,{sx:{display:"flex",justifyContent:"center",alignItems:"center",mt:1,p:1,backgroundColor:"rgba(255, 15, 80, 0.1)",borderRadius:1,border:"1px solid rgba(255, 15, 80, 0.2)"},children:u.jsxs(fe,{variant:"h6",sx:{color:"#FF0F50",fontWeight:"bold",fontSize:"1.1rem",textAlign:"center"},children:["$",n.price.toFixed(2)]})}),u.jsxs(re,{sx:{display:"flex",gap:1,justifyContent:"center",mt:1.5,px:1},children:[u.jsx(wo,{title:"Watch Preview",arrow:!0,children:u.jsx(Xe,{variant:"contained",size:"small",startIcon:u.jsx(bp,{}),onClick:p,sx:{backgroundColor:"rgba(33, 150, 243, 0.9)",color:"white",fontWeight:"bold",fontSize:"0.75rem",minWidth:"auto",px:1.5,py:.5,"&:hover":{backgroundColor:"rgba(33, 150, 243, 1)",transform:"scale(1.05)"}},children:"Preview"})}),t&&u.jsx(wo,{title:"Contact on Telegram",arrow:!0,children:u.jsx(xn,{size:"small",onClick:m,sx:{backgroundColor:"rgba(0, 136, 204, 0.9)",color:"white",width:36,height:36,"&:hover":{backgroundColor:"rgba(0, 136, 204, 1)",transform:"scale(1.05)"}},children:u.jsx(Gi,{sx:{fontSize:18}})})})]})]})]})]})};function Z5(n,e){const[t,r]=F.useState(n);return F.useEffect(()=>{const i=setTimeout(()=>{r(n)},e);return()=>{clearTimeout(i)}},[n,e]),t}const yp=()=>{const{telegramUsername:n}=Qn(),e=()=>{if(n){const t=`https://t.me/${n.replace("@","")}`;window.open(t,"_blank")}};return u.jsx(re,{sx:{py:6,bgcolor:"background.default"},children:u.jsx(mi,{maxWidth:"md",children:u.jsxs(yn,{elevation:2,sx:t=>({p:4,textAlign:"center",borderRadius:2,background:`linear-gradient(135deg, ${t.palette.secondary.main} 0%, ${t.palette.primary.main} 100%)`,color:t.palette.getContrastText(t.palette.primary.main)}),children:[u.jsx(fe,{variant:"h5",component:"h2",gutterBottom:!0,sx:{fontWeight:600},children:"For more VIP content or all content"}),u.jsx(fe,{variant:"body1",sx:{mb:3,opacity:.9},children:"Get in touch with us for exclusive access to premium videos and complete content library. Your privacy is our priority."}),u.jsx(Xe,{variant:"contained",color:"primary",size:"large",startIcon:u.jsx(Gi,{}),onClick:e,sx:t=>({px:4,py:1.5,fontSize:"1.1rem",fontWeight:600,boxShadow:`0 8px 25px ${t.palette.mode==="dark"?"rgba(255, 15, 80, 0.25)":"rgba(209, 13, 66, 0.25)"}`,"&:hover":{transform:"translateY(-2px)"},transition:"all 0.3s ease"}),children:"Contact via Telegram"})]})})})},X5=()=>u.jsxs(Xi,{sx:{height:"100%",display:"flex",flexDirection:"column",borderRadius:"8px",overflow:"hidden",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",bgcolor:"background.paper"},children:[u.jsx(dr,{variant:"rectangular",sx:{width:"100%",paddingTop:"56.25%"},animation:"wave"}),u.jsxs(ks,{children:[u.jsx(dr,{variant:"text",sx:{fontSize:"1.5rem",mb:1}}),u.jsx(dr,{variant:"text",sx:{fontSize:"1rem",width:"60%"}}),u.jsxs(re,{sx:{mt:2,display:"flex",justifyContent:"space-between"},children:[u.jsx(dr,{variant:"text",sx:{width:"30%"}}),u.jsx(dr,{variant:"text",sx:{width:"20%"}})]})]})]}),Q5=({index:n})=>u.jsxs(Xi,{sx:{height:"100%",display:"flex",flexDirection:"column",borderRadius:"8px",overflow:"hidden",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",bgcolor:"background.paper",position:"relative"},children:[u.jsx(re,{sx:{width:"100%",paddingTop:"56.25%",position:"relative",bgcolor:"rgba(0,0,0,0.05)",display:"flex",alignItems:"center",justifyContent:"center"},children:u.jsxs(re,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[u.jsx(Cr,{size:40,thickness:4,sx:{color:"primary.main",animation:"pulse 1.5s ease-in-out infinite"}}),u.jsxs(fe,{variant:"caption",sx:{color:"text.secondary",fontWeight:"bold",textAlign:"center"},children:["Loading video ",n+1,"..."]})]})}),u.jsxs(ks,{children:[u.jsx(dr,{variant:"text",sx:{fontSize:"1.5rem",mb:1}}),u.jsx(dr,{variant:"text",sx:{fontSize:"1rem",width:"60%"}}),u.jsxs(re,{sx:{mt:2,display:"flex",justifyContent:"space-between"},children:[u.jsx(dr,{variant:"text",sx:{width:"30%"}}),u.jsx(dr,{variant:"text",sx:{width:"20%"}})]})]})]}),ev=()=>{const[n,e]=T2(),[t,r]=F.useState([]),[i,s]=F.useState(!0),[a,c]=F.useState(null),[l,f]=F.useState(pi.NEWEST),[p,m]=F.useState(n.get("search")||""),y=Z5(p,500),[v,k]=F.useState(!1),[S,P]=F.useState([0,100]),[w,L]=F.useState(null),[R,J]=F.useState(!1),[te,he]=F.useState(!1),[Q,$]=F.useState([]),[H,Y]=F.useState(!1),{user:N}=ts(),{siteConfig:T}=Qn();F.useEffect(()=>{localStorage.getItem("adult_content_warning_seen")||J(!0)},[]),F.useEffect(()=>{he(!0);const Le=setTimeout(()=>{he(!1)},5e3);return()=>clearTimeout(Le)},[]),F.useEffect(()=>{const Le=n.get("search")||"";Le!==p&&m(Le)},[n]),F.useEffect(()=>{(async()=>{try{s(!0),c(null),$([]),r([]);let D=await Wt.getVideoIds(l);y&&(D=(await Wt.getAllVideos(l,y)).map(W=>W.$id)),s(!1),z(D)}catch(j){console.error("Error fetching videos:",j),c("Failed to load videos. Please try again later."),s(!1)}})()},[N,l,y,S,w]);const z=async Le=>{Y(!0);const j=Le.slice(0,3),D=Le.slice(3),U=j.map(async W=>{try{const Z=await Wt.getVideo(W);if(Z){const ie=Z.price>=S[0]&&Z.price<=S[1];let ue=!0;if(w){const ke=(Z.duration||"00:00").split(":").map(Number),Ae=ke.length===2?ke[0]*60+ke[1]:ke[0]*3600+ke[1]*60+ke[2];switch(w){case"short":ue=Ae<300;break;case"medium":ue=Ae>=300&&Ae<=900;break;case"long":ue=Ae>900;break;default:ue=!0}}ie&&ue&&($(ae=>ae.some(ke=>ke.$id===Z.$id)?ae:[...ae,Z]),r(ae=>ae.some(ke=>ke.$id===Z.$id)?ae:[...ae,Z]))}}catch(Z){console.error(`Error loading video ${W}:`,Z)}});await Promise.all(U);for(let W=0;W<D.length;W++){const Z=D[W];try{const ie=await Wt.getVideo(Z);if(ie){const ue=ie.price>=S[0]&&ie.price<=S[1];let ae=!0;if(w){const Ae=(ie.duration||"00:00").split(":").map(Number),Ee=Ae.length===2?Ae[0]*60+Ae[1]:Ae[0]*3600+Ae[1]*60+Ae[2];switch(w){case"short":ae=Ee<300;break;case"medium":ae=Ee>=300&&Ee<=900;break;case"long":ae=Ee>900;break;default:ae=!0}}ue&&ae&&($(ke=>ke.some(Ae=>Ae.$id===ie.$id)?ke:[...ke,ie]),r(ke=>ke.some(Ae=>Ae.$id===ie.$id)?ke:[...ke,ie]))}await new Promise(ue=>setTimeout(ue,150))}catch(ie){console.error(`Error loading video ${Z}:`,ie)}}Y(!1)};F.useEffect(()=>{const j=setInterval(async()=>{try{if((await fetch("/api/clear-cache",{method:"POST"})).ok){console.log("Cache clear signal received, refreshing videos..."),Wt.clearCachePublic();const U=await Wt.getAllVideos(l,y);r(U)}}catch(D){console.log("Cache check failed:",D)}},1e4);return()=>clearInterval(j)},[l,y]);const q=Le=>{f(Le.target.value)},de=(Le,j)=>{P(j)},ce=Le=>{L(Le===w?null:Le)},me=()=>{P([0,100]),L(null)},ne=()=>{localStorage.setItem("adult_content_warning_seen","true"),J(!1)},ge=()=>{const j=Q.length,D=Math.max(0,24-j);return Array(D).fill(0).map((U,W)=>u.jsx(Qe,{item:!0,xs:12,sm:6,md:4,lg:3,children:u.jsx(X5,{})},`skeleton-${W}`))},ve=()=>{const j=Q.length,D=Math.max(0,24-j);return Array(D).fill(0).map((U,W)=>u.jsx(Qe,{item:!0,xs:12,sm:6,md:4,lg:3,children:u.jsx(Q5,{index:j+W})},`loading-${W}`))};return u.jsxs(u.Fragment,{children:[u.jsx("style",{children:`
        @keyframes pulse {
          0% { opacity: 1; }
          50% { opacity: 0.7; }
          100% { opacity: 1; }
        }
        @keyframes loadingBar {
          0% { transform: translateX(-100%); }
          100% { transform: translateX(100%); }
        }
      `}),u.jsxs(mi,{maxWidth:"lg",sx:{py:4},children:[u.jsx(ho,{open:R,onClose:ne,closeAfterTransition:!0,BackdropComponent:fo,BackdropProps:{timeout:500},"aria-labelledby":"adult-content-warning",children:u.jsx(Mn,{in:R,children:u.jsxs(re,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:"90%",sm:"500px"},bgcolor:"background.paper",border:"2px solid #f44336",borderRadius:2,boxShadow:24,p:4},children:[u.jsxs(re,{sx:{display:"flex",alignItems:"center",mb:2},children:[u.jsx(ih,{color:"error",sx:{fontSize:40,mr:2}}),u.jsx(fe,{variant:"h5",component:"h2",sx:{fontWeight:"bold"},children:"Adult Content Warning"})]}),u.jsx(fe,{variant:"body1",sx:{mb:3},children:'This website contains adult material and is intended only for people 18 years of age or older. By clicking "Enter", you confirm that you are at least 18 years old and consent to viewing adult content.'}),u.jsxs(re,{sx:{display:"flex",justifyContent:"space-between"},children:[u.jsx(Xe,{variant:"outlined",color:"error",onClick:()=>window.history.back(),children:"Exit"}),u.jsx(Xe,{variant:"contained",color:"primary",onClick:ne,children:"Enter (18+)"})]})]})})}),u.jsx(ho,{open:te,closeAfterTransition:!0,BackdropComponent:fo,BackdropProps:{timeout:500},"aria-labelledby":"loading-modal",children:u.jsx(Mn,{in:te,children:u.jsxs(re,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:"90%",sm:"400px"},bgcolor:"background.paper",borderRadius:2,boxShadow:24,p:4,textAlign:"center"},children:[u.jsx(Cr,{size:60,thickness:4,sx:{color:"primary.main",mb:3,animation:"pulse 1.5s ease-in-out infinite"}}),u.jsx(fe,{variant:"h5",component:"h2",sx:{fontWeight:"bold",mb:2},children:"Loading Videos"}),u.jsx(fe,{variant:"body1",sx:{mb:3,color:"text.secondary"},children:"Please wait while we load the latest videos for you..."}),u.jsx(re,{sx:{width:"100%",height:4,backgroundColor:"rgba(0,0,0,0.1)",borderRadius:2,overflow:"hidden",mb:2},children:u.jsx(re,{sx:{width:"100%",height:"100%",background:"linear-gradient(90deg, #FF0F50 0%, #D10D42 100%)",borderRadius:2,animation:"loadingBar 10s linear infinite"}})}),u.jsx(fe,{variant:"caption",color:"text.secondary",children:"This will only take a moment..."})]})})}),u.jsxs(re,{"data-testid":"search-section",sx:{display:"flex",flexDirection:{xs:"column",md:"row"},justifyContent:"space-between",alignItems:{xs:"stretch",md:"center"},mb:3},children:[u.jsxs(re,{children:[u.jsx(fe,{variant:"h4",component:"h1",gutterBottom:!0,children:(T==null?void 0:T.video_list_title)||"Available Videos"}),!i&&t.length>0&&u.jsxs(re,{sx:{mt:-1},children:[u.jsxs(fe,{variant:"body2",color:"text.secondary",sx:{mb:1},children:["Showing ",t.length," video",t.length!==1?"s":""]}),u.jsxs(re,{sx:{display:"flex",gap:1.5,flexWrap:"wrap"},children:[u.jsx(zt,{label:`From $${Math.min(...t.map(Le=>Le.price)).toFixed(2)}`,size:"small",sx:{backgroundColor:"rgba(255, 15, 80, 0.1)",color:"#FF0F50",fontWeight:"bold",border:"1px solid rgba(255, 15, 80, 0.3)"}}),u.jsx(zt,{label:`Up to $${Math.max(...t.map(Le=>Le.price)).toFixed(2)}`,size:"small",sx:{backgroundColor:"rgba(255, 15, 80, 0.1)",color:"#FF0F50",fontWeight:"bold",border:"1px solid rgba(255, 15, 80, 0.3)"}}),u.jsx(zt,{label:`Avg: $${(t.reduce((Le,j)=>Le+j.price,0)/t.length).toFixed(2)}`,size:"small",sx:{backgroundColor:"rgba(255, 15, 80, 0.1)",color:"#FF0F50",fontWeight:"bold",border:"1px solid rgba(255, 15, 80, 0.3)"}})]})]})]}),u.jsxs(re,{sx:{display:"flex",gap:1,alignItems:"center",mt:{xs:2,md:0}},children:[u.jsxs(yf,{size:"small",sx:{minWidth:{xs:"100%",sm:"150px"}},children:[u.jsx(wf,{id:"sort-select-label",children:"Sort By"}),u.jsxs(xf,{labelId:"sort-select-label",value:l,label:"Sort By",onChange:q,children:[u.jsx(ca,{value:pi.NEWEST,children:"Newest"}),u.jsx(ca,{value:pi.PRICE_ASC,children:"Price: Low to High"}),u.jsx(ca,{value:pi.PRICE_DESC,children:"Price: High to Low"}),u.jsx(ca,{value:pi.VIEWS_DESC,children:"Most Viewed"}),u.jsx(ca,{value:pi.DURATION_DESC,children:"Longest"})]})]}),u.jsx(Xe,{variant:v?"contained":"outlined",color:"primary",startIcon:u.jsx(gp,{}),onClick:()=>k(!v),size:"small",children:"Filters"})]})]}),u.jsx(_f,{in:v,children:u.jsxs(yn,{sx:{p:3,mb:3},children:[u.jsx(fe,{variant:"h6",gutterBottom:!0,children:"Filter Options"}),u.jsx(ya,{sx:{mb:2}}),u.jsxs(Qe,{container:!0,spacing:3,children:[u.jsxs(Qe,{item:!0,xs:12,md:6,children:[u.jsxs(fe,{variant:"subtitle2",gutterBottom:!0,children:["Price Range ($",S[0]," - $",S[1],")"]}),u.jsx(i0,{value:S,onChange:de,valueLabelDisplay:"auto",min:0,max:100,sx:{mt:2}})]}),u.jsxs(Qe,{item:!0,xs:12,md:6,children:[u.jsx(fe,{variant:"subtitle2",gutterBottom:!0,children:"Duration"}),u.jsxs(re,{sx:{display:"flex",gap:1,mt:2},children:[u.jsx(zt,{label:"Short (<5 min)",onClick:()=>ce("short"),color:w==="short"?"primary":"default",variant:w==="short"?"filled":"outlined"}),u.jsx(zt,{label:"Medium (5-15 min)",onClick:()=>ce("medium"),color:w==="medium"?"primary":"default",variant:w==="medium"?"filled":"outlined"}),u.jsx(zt,{label:"Long (>15 min)",onClick:()=>ce("long"),color:w==="long"?"primary":"default",variant:w==="long"?"filled":"outlined"})]})]})]}),u.jsx(re,{sx:{mt:3,display:"flex",justifyContent:"flex-end"},children:u.jsx(Xe,{variant:"outlined",onClick:me,children:"Clear Filters"})})]})}),y&&u.jsx(yn,{sx:{p:2,mb:3,bgcolor:"background.paper",borderRadius:1},children:u.jsxs(fe,{variant:"body1",children:["Search results for: ",u.jsxs("strong",{children:['"',y,'"']})]})}),a&&u.jsx(Qt,{severity:"error",sx:{mb:3},children:a}),u.jsx(Mn,{in:!i,timeout:500,children:u.jsx(re,{children:i?u.jsx(Qe,{container:!0,spacing:3,children:ge()}):t.length===0&&!H?u.jsx(Ol,{in:!0,timeout:1e3,children:u.jsxs(yn,{sx:{p:4,my:3,textAlign:"center",borderRadius:2,background:"linear-gradient(135deg, rgba(255, 15, 80, 0.05) 0%, rgba(209, 13, 66, 0.05) 100%)"},children:[u.jsx(fe,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600},children:"No videos found"}),u.jsx(fe,{variant:"body2",color:"text.secondary",children:p?`No videos matching "${p}". Try a different search term.`:v?"No videos match your current filters. Try adjusting your filter settings.":"No videos available at the moment. Please check back later."})]})}):u.jsx(u.Fragment,{children:u.jsxs(Qe,{container:!0,spacing:3,children:[Q.map((Le,j)=>u.jsx(Ol,{in:!0,timeout:200,children:u.jsx(Qe,{item:!0,xs:12,sm:6,md:4,lg:3,children:u.jsx(ph,{video:Le})})},Le.$id)),H&&ve()]})})})})]}),u.jsx(yp,{})]})};var gh={},tv=Lt;Object.defineProperty(gh,"__esModule",{value:!0});var ko=gh.default=void 0,rv=tv(Pt()),nv=u;ko=gh.default=(0,rv.default)((0,nv.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBack");var mh={},iv=Lt;Object.defineProperty(mh,"__esModule",{value:!0});var wp=mh.default=void 0,sv=iv(Pt()),av=u;wp=mh.default=(0,sv.default)((0,av.jsx)("path",{d:"M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2M1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2"}),"ShoppingCart");const ov=()=>{const{id:n}=Rf(),e=Bn(),{user:t}=ts(),{telegramUsername:r}=Qn(),[i,s]=F.useState(null),[a,c]=F.useState(null),[l,f]=F.useState(!0),[p,m]=F.useState(null),[y,v]=F.useState(!1),[k,S]=F.useState(null),[P,w]=F.useState(!1),[L,R]=F.useState(!1);F.useEffect(()=>{(async()=>{if(!n){m("Invalid video ID"),f(!1);return}try{f(!0),m(null);const Y=await Wt.getVideo(n);if(!Y){m("Video not found"),f(!1);return}if(s(Y),await Wt.incrementViews(n),t){w(!1);const N=await Wt.getVideoFileUrl(n);c(N)}}catch(Y){console.error("Error loading video:",Y),m("An error occurred while loading the video")}finally{f(!1)}})()},[n,t]);const J=async()=>{if(!t){e("/login",{state:{from:`/video/${n}`}});return}if(!i){S("Video information not available");return}try{v(!0),S(null),setTimeout(()=>{R(!0),w(!0),Wt.getVideoFileUrl(n).then(H=>c(H)).catch(H=>console.error("Error getting video URL:",H)),v(!1)},1500)}catch(H){console.error("Purchase error:",H),S("Failed to complete purchase. Please try again."),v(!1)}},te=()=>{r&&i&&window.open(`https://t.me/${r}?start=${i.$id}`,"_blank")},he=()=>{e("/")},Q=H=>{if(H==null)return"00:00";if(typeof H=="number"){const Y=Math.floor(H/60),N=Math.floor(H%60);return`${Y}min ${N}s`}if(typeof H=="string")try{const Y=H.split(":");if(Y.length===2)return`${Y[0]}min ${Y[1]}s`;if(Y.length===3)return`${Y[0]}h ${Y[1]}m ${Y[2]}s`}catch(Y){return console.error("Error formatting duration:",Y),H}return String(H)},$=H=>H===void 0?"0 views":H<1e3?`${H} views`:H<1e6?`${(H/1e3).toFixed(1)}K views`:`${(H/1e6).toFixed(1)}M views`;return l?u.jsx(mi,{maxWidth:"lg",sx:{py:4},children:u.jsx(re,{sx:{display:"flex",justifyContent:"center",my:4},children:u.jsx(Cr,{size:60})})}):p?u.jsxs(mi,{maxWidth:"lg",sx:{py:4},children:[u.jsx(Xe,{startIcon:u.jsx(ko,{}),onClick:he,sx:{mb:2},children:"Back"}),u.jsx(Qt,{severity:"error",sx:{mb:3},children:p})]}):u.jsxs(mi,{maxWidth:"lg",sx:{py:4},children:[u.jsx(Xe,{startIcon:u.jsx(ko,{}),onClick:he,sx:{mb:3},children:"Back to videos"}),L&&u.jsx(Qt,{severity:"success",sx:{mb:3},children:"Purchase successful! You can now watch this video."}),k&&u.jsx(Qt,{severity:"error",sx:{mb:3},children:k}),u.jsxs(yn,{elevation:3,sx:{p:3},children:[u.jsx(fe,{variant:"h4",component:"h1",gutterBottom:!0,children:(i==null?void 0:i.title)||"Video Details"}),u.jsxs(Qe,{container:!0,spacing:3,children:[u.jsx(Qe,{item:!0,xs:12,md:P&&a?12:6,children:P&&a?u.jsx(re,{sx:{position:"relative",width:"100%",pt:"56.25%",mb:2},children:u.jsx("video",{controls:!0,autoPlay:!0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"contain",backgroundColor:"#000"},src:a,children:"Your browser does not support the video tag."})}):u.jsx(Xi,{children:u.jsx(Du,{component:"img",image:(i==null?void 0:i.thumbnailUrl)||"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAwIiBoZWlnaHQ9IjQwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNjAwIiBoZWlnaHQ9IjQwMCIgZmlsbD0iI2Y1ZjVmNSIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTgiIGZpbGw9IiM5OTk5OTkiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5WaWRlbyBUaHVtYm5haWw8L3RleHQ+PC9zdmc+",alt:i==null?void 0:i.title,sx:{height:300,objectFit:"cover"}})})}),(!P||!a)&&u.jsxs(Qe,{item:!0,xs:12,md:6,children:[u.jsx(fe,{variant:"h6",gutterBottom:!0,children:"Video Information"}),u.jsx(fe,{variant:"body1",paragraph:!0,children:i==null?void 0:i.description}),u.jsxs(re,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[u.jsxs(re,{sx:{display:"flex",alignItems:"center",gap:.5},children:[u.jsx(_a,{fontSize:"small",color:"action"}),u.jsx(fe,{variant:"body2",color:"text.secondary",children:i!=null&&i.duration?Q(i.duration):"N/A"})]}),u.jsxs(re,{sx:{display:"flex",alignItems:"center",gap:.5},children:[u.jsx(xa,{fontSize:"small",color:"action"}),u.jsx(fe,{variant:"body2",color:"text.secondary",children:$(i==null?void 0:i.views)})]})]}),u.jsx(ya,{sx:{my:2}}),u.jsx(re,{sx:{display:"flex",alignItems:"center",mb:2},children:u.jsxs(fe,{variant:"h5",component:"p",color:"primary",sx:{fontWeight:"bold"},children:["$",i==null?void 0:i.price.toFixed(2)]})}),u.jsxs(re,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},gap:2},children:[u.jsx(Xe,{variant:"contained",fullWidth:!0,startIcon:u.jsx(wp,{}),onClick:J,disabled:y||P||!t,children:y?u.jsxs(u.Fragment,{children:[u.jsx(Cr,{size:24,color:"inherit",sx:{mr:1}}),"Processing..."]}):P?"Already Purchased":"Purchase Now"}),r&&u.jsx(Xe,{variant:"outlined",color:"primary",fullWidth:!0,startIcon:u.jsx(Gi,{}),onClick:te,children:"Contact on Telegram"})]}),!t&&u.jsx(Qt,{severity:"info",sx:{mt:2},children:"Please log in to purchase this video."})]})]}),P&&a&&u.jsxs(u.Fragment,{children:[u.jsx(ya,{sx:{my:3}}),u.jsx(fe,{variant:"h6",gutterBottom:!0,children:"Description"}),u.jsx(fe,{variant:"body1",paragraph:!0,children:i==null?void 0:i.description}),u.jsxs(re,{sx:{display:"flex",alignItems:"center",gap:2},children:[u.jsxs(re,{sx:{display:"flex",alignItems:"center",gap:.5},children:[u.jsx(_a,{fontSize:"small",color:"action"}),u.jsx(fe,{variant:"body2",color:"text.secondary",children:i!=null&&i.duration?Q(i.duration):"N/A"})]}),u.jsxs(re,{sx:{display:"flex",alignItems:"center",gap:.5},children:[u.jsx(xa,{fontSize:"small",color:"action"}),u.jsx(fe,{variant:"body2",color:"text.secondary",children:$(i==null?void 0:i.views)})]})]})]})]})]})};var vh={},lv=Lt;Object.defineProperty(vh,"__esModule",{value:!0});var Ll=vh.default=void 0,cv=lv(Pt()),uv=u;Ll=vh.default=(0,cv.default)((0,uv.jsx)("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"}),"ContentCopy");var bh={},hv=Lt;Object.defineProperty(bh,"__esModule",{value:!0});var bs=bh.default=void 0,dv=hv(Pt()),fv=u;bs=bh.default=(0,dv.default)((0,fv.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"}),"CheckCircle");var yh={},pv=Lt;Object.defineProperty(yh,"__esModule",{value:!0});var xp=yh.default=void 0,gv=pv(Pt()),mv=u;xp=yh.default=(0,gv.default)((0,mv.jsx)("path",{d:"M20 2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m-8.5 7.5c0 .83-.67 1.5-1.5 1.5H9v2H7.5V7H10c.83 0 1.5.67 1.5 1.5zm5 2c0 .83-.67 1.5-1.5 1.5h-2.5V7H15c.83 0 1.5.67 1.5 1.5zm4-3H19v1h1.5V11H19v2h-1.5V7h3zM9 9.5h1v-1H9zM4 6H2v14c0 1.1.9 2 2 2h14v-2H4zm10 5.5h1v-3h-1z"}),"PictureAsPdf");var wh={},vv=Lt;Object.defineProperty(wh,"__esModule",{value:!0});var Pl=wh.default=void 0,bv=vv(Pt()),yv=u;Pl=wh.default=(0,bv.default)((0,yv.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");var xh={},wv=Lt;Object.defineProperty(xh,"__esModule",{value:!0});var _u=xh.default=void 0,xv=wv(Pt()),_v=u;_u=xh.default=(0,xv.default)((0,_v.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1.41 16.09V20h-2.67v-1.93c-1.71-.36-3.16-1.46-3.27-3.4h1.96c.1 1.05.82 1.87 2.65 1.87 1.96 0 2.4-.98 2.4-1.59 0-.83-.44-1.61-2.67-2.14-2.48-.6-4.18-1.62-4.18-3.67 0-1.72 1.39-2.84 3.11-3.21V4h2.67v1.95c1.86.45 2.79 1.86 2.85 3.39H14.3c-.05-1.11-.64-1.87-2.22-1.87-1.5 0-2.4.68-2.4 1.64 0 .84.65 1.39 2.67 1.91s4.18 1.39 4.18 3.91c-.01 1.83-1.38 2.83-3.12 3.16"}),"MonetizationOn");/*!
 * react-paypal-js v8.8.3 (2025-04-11T19:50:46.506Z)
 * Copyright 2020-present, PayPal, Inc. All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zr;(function(n){n.INITIAL="initial",n.PENDING="pending",n.REJECTED="rejected",n.RESOLVED="resolved"})(Zr||(Zr={}));var Ki;(function(n){n.LOADING_STATUS="setLoadingStatus",n.RESET_OPTIONS="resetOptions",n.SET_BRAINTREE_INSTANCE="braintreeInstance"})(Ki||(Ki={}));var qd;(function(n){n.NUMBER="number",n.CVV="cvv",n.EXPIRATION_DATE="expirationDate",n.EXPIRATION_MONTH="expirationMonth",n.EXPIRATION_YEAR="expirationYear",n.POSTAL_CODE="postalCode"})(qd||(qd={}));var hr=function(){return hr=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},hr.apply(this,arguments)};function _p(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function zd(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))}var Co="data-react-paypal-script-id",js={DATA_JS_SDK_LIBRARY:"dataJsSdkLibrary",DATA_LIBRARY_VALUE:"react-paypal-js",DATA_NAMESPACE:"dataNamespace",DATA_SDK_INTEGRATION_SOURCE:"dataSdkIntegrationSource"},Sv="Failed to load the PayPal JS SDK script.",Sp="paypal",jv="usePayPalScriptReducer must be used within a PayPalScriptProvider";function Av(n){return n===void 0&&(n=Sp),window[n]}function kv(n){for(var e="",t=0;t<n.length;t++){var r=n[t].charCodeAt(0)*t;n[t+1]&&(r+=n[t+1].charCodeAt(0)*(t-1)),e+=String.fromCharCode(97+Math.abs(r)%26)}return e}function Cv(n){var e=n.reactComponentName,t=n.sdkComponentKey,r=n.sdkRequestedComponents,i=r===void 0?"":r,s=n.sdkDataNamespace,a=s===void 0?Sp:s,c=t.charAt(0).toUpperCase().concat(t.substring(1)),l="Unable to render <".concat(e," /> because window.").concat(a,".").concat(c," is undefined."),f=typeof i=="string"?i:i.join(",");if(!f.includes(t)){var p=[f,t].filter(Boolean).join();l+=`
To fix the issue, add '`.concat(t,"' to the list of components passed to the parent PayPalScriptProvider:")+"\n`<PayPalScriptProvider options={{ components: '".concat(p,"'}}>`.")}return l}function jp(n){var e=n,t=Co;e[t];var r=_p(e,[t+""]);return"react-paypal-js-".concat(kv(JSON.stringify(r)))}function Lv(n){var e=self.document.querySelector("script[".concat(Co,'="').concat(n,'"]'));e!=null&&e.parentNode&&e.parentNode.removeChild(e)}function Pv(n,e){var t,r;switch(e.type){case Ki.LOADING_STATUS:return typeof e.value=="object"?hr(hr({},n),{loadingStatus:e.value.state,loadingStatusErrorMessage:e.value.message}):hr(hr({},n),{loadingStatus:e.value});case Ki.RESET_OPTIONS:return Lv(n.options[Co]),hr(hr({},n),{loadingStatus:Zr.PENDING,options:hr(hr((t={},t[js.DATA_SDK_INTEGRATION_SOURCE]=js.DATA_LIBRARY_VALUE,t),e.value),(r={},r[Co]="".concat(jp(e.value)),r))});case Ki.SET_BRAINTREE_INSTANCE:return hr(hr({},n),{braintreePayPalCheckoutInstance:e.value});default:return n}}var Ap=F.createContext(null);function Iv(n){if(typeof(n==null?void 0:n.dispatch)=="function"&&n.dispatch.length!==0)return n;throw new Error(jv)}function Nv(){var n=Iv(F.useContext(Ap)),e=hr(hr({},n),{isInitial:n.loadingStatus===Zr.INITIAL,isPending:n.loadingStatus===Zr.PENDING,isResolved:n.loadingStatus===Zr.RESOLVED,isRejected:n.loadingStatus===Zr.REJECTED});return[e,n.dispatch]}F.createContext({});function Ev(n){var e=F.useRef(new Proxy({},{get:function(t,r,i){return typeof t[r]=="function"?function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];return t[r].apply(t,s)}:Reflect.get(t,r,i)}}));return e.current=Object.assign(e.current,n),e.current}var _h=function(n){var e,t=n.className,r=t===void 0?"":t,i=n.disabled,s=i===void 0?!1:i,a=n.children,c=n.forceReRender,l=c===void 0?[]:c,f=_p(n,["className","disabled","children","forceReRender"]),p=s?{opacity:.38}:{},m="".concat(r," ").concat(s?"paypal-buttons-disabled":"").trim(),y=F.useRef(null),v=F.useRef(null),k=Ev(f),S=Nv()[0],P=S.isResolved,w=S.options,L=F.useState(null),R=L[0],J=L[1],te=F.useState(!0),he=te[0],Q=te[1],$=F.useState(null),H=$[1];function Y(){v.current!==null&&v.current.close().catch(function(){})}return!((e=v.current)===null||e===void 0)&&e.updateProps&&v.current.updateProps({message:f.message}),F.useEffect(function(){if(P===!1)return Y;var N=Av(w.dataNamespace);if(N===void 0||N.Buttons===void 0)return H(function(){throw new Error(Cv({reactComponentName:_h.displayName,sdkComponentKey:"buttons",sdkRequestedComponents:w.components,sdkDataNamespace:w[js.DATA_NAMESPACE]}))}),Y;var T=function(z,q){J(q),typeof f.onInit=="function"&&f.onInit(z,q)};try{v.current=N.Buttons(hr(hr({},k),{onInit:T}))}catch(z){return H(function(){throw new Error("Failed to render <PayPalButtons /> component. Failed to initialize:  ".concat(z))})}return v.current.isEligible()===!1?(Q(!1),Y):(y.current&&v.current.render(y.current).catch(function(z){y.current===null||y.current.children.length===0||H(function(){throw new Error("Failed to render <PayPalButtons /> component. ".concat(z))})}),Y)},zd(zd([P],l,!0),[f.fundingSource],!1)),F.useEffect(function(){R!==null&&(s===!0?R.disable().catch(function(){}):R.enable().catch(function(){}))},[s,R]),po.createElement(po.Fragment,null,he?po.createElement("div",{ref:y,style:p,className:m}):a)};_h.displayName="PayPalButtons";function Tv(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function Rv(n,e){var t=document.querySelector('script[src="'.concat(n,'"]'));if(t===null)return null;var r=kp(n,e),i=t.cloneNode();if(delete i.dataset.uidAuto,Object.keys(i.dataset).length!==Object.keys(r.dataset).length)return null;var s=!0;return Object.keys(i.dataset).forEach(function(a){i.dataset[a]!==r.dataset[a]&&(s=!1)}),s?t:null}function Ov(n){var e=n.url,t=n.attributes,r=n.onSuccess,i=n.onError,s=kp(e,t);s.onerror=i,s.onload=r,document.head.insertBefore(s,document.head.firstElementChild)}function Fv(n){var e=n.sdkBaseUrl,t=n.environment,r=Tv(n,["sdkBaseUrl","environment"]),i=e||Bv(t),s=r,a=Object.keys(s).filter(function(f){return typeof s[f]<"u"&&s[f]!==null&&s[f]!==""}).reduce(function(f,p){var m=s[p].toString();return p=Dv(p),p.substring(0,4)==="data"||p==="crossorigin"?f.attributes[p]=m:f.queryParams[p]=m,f},{queryParams:{},attributes:{}}),c=a.queryParams,l=a.attributes;return c["merchant-id"]&&c["merchant-id"].indexOf(",")!==-1&&(l["data-merchant-id"]=c["merchant-id"],c["merchant-id"]="*"),{url:"".concat(i,"?").concat(Mv(c)),attributes:l}}function Dv(n){var e=function(t,r){return(r?"-":"")+t.toLowerCase()};return n.replace(/[A-Z]+(?![a-z])|[A-Z]/g,e)}function Mv(n){var e="";return Object.keys(n).forEach(function(t){e.length!==0&&(e+="&"),e+=t+"="+n[t]}),e}function Bv(n){return n==="sandbox"?"https://www.sandbox.paypal.com/sdk/js":"https://www.paypal.com/sdk/js"}function kp(n,e){e===void 0&&(e={});var t=document.createElement("script");return t.src=n,Object.keys(e).forEach(function(r){t.setAttribute(r,e[r]),r==="data-csp-nonce"&&t.setAttribute("nonce",e["data-csp-nonce"])}),t}function Uv(n,e){if(e===void 0&&(e=Promise),Cp(n,e),typeof document>"u")return e.resolve(null);var t=Fv(n),r=t.url,i=t.attributes,s=i["data-namespace"]||"paypal",a=Wd(s);return i["data-js-sdk-library"]||(i["data-js-sdk-library"]="paypal-js"),Rv(r,i)&&a?e.resolve(a):$v({url:r,attributes:i},e).then(function(){var c=Wd(s);if(c)return c;throw new Error("The window.".concat(s," global variable is not available."))})}function $v(n,e){e===void 0&&(e=Promise),Cp(n,e);var t=n.url,r=n.attributes;if(typeof t!="string"||t.length===0)throw new Error("Invalid url.");if(typeof r<"u"&&typeof r!="object")throw new Error("Expected attributes to be an object.");return new e(function(i,s){if(typeof document>"u")return i();Ov({url:t,attributes:r,onSuccess:function(){return i()},onError:function(){var a=new Error('The script "'.concat(t,'" failed to load. Check the HTTP status code and response body in DevTools to learn more.'));return s(a)}})})}function Wd(n){return window[n]}function Cp(n,e){if(typeof n!="object"||n===null)throw new Error("Expected an options object.");var t=n.environment;if(t&&t!=="production"&&t!=="sandbox")throw new Error('The `environment` option must be either "production" or "sandbox".');if(typeof e<"u"&&typeof e!="function")throw new Error("Expected PromisePonyfill to be a function.")}var qv=function(n){var e,t=n.options,r=t===void 0?{clientId:"test"}:t,i=n.children,s=n.deferLoading,a=s===void 0?!1:s,c=F.useReducer(Pv,{options:hr(hr({},r),(e={},e[js.DATA_JS_SDK_LIBRARY]=js.DATA_LIBRARY_VALUE,e[js.DATA_SDK_INTEGRATION_SOURCE]=js.DATA_LIBRARY_VALUE,e[Co]="".concat(jp(r)),e)),loadingStatus:a?Zr.INITIAL:Zr.PENDING}),l=c[0],f=c[1];return F.useEffect(function(){if(a===!1&&l.loadingStatus===Zr.INITIAL)return f({type:Ki.LOADING_STATUS,value:Zr.PENDING});if(l.loadingStatus===Zr.PENDING){var p=!0;return Uv(l.options).then(function(){p&&f({type:Ki.LOADING_STATUS,value:Zr.RESOLVED})}).catch(function(m){console.error("".concat(Sv," ").concat(m)),p&&f({type:Ki.LOADING_STATUS,value:{state:Zr.REJECTED,message:String(m)}})}),function(){p=!1}}},[l.options,a,l.loadingStatus]),po.createElement(Ap.Provider,{value:hr(hr({},l),{dispatch:f})},i)};function Vd(){}F.createContext({cardFieldsForm:null,fields:{},registerField:Vd,unregisterField:Vd});var Mr=Uint8Array,cn=Uint16Array,Sh=Int32Array,Zl=new Mr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Xl=new Mr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Su=new Mr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Lp=function(n,e){for(var t=new cn(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new Sh(t[30]),r=1;r<30;++r)for(var s=t[r];s<t[r+1];++s)i[s]=s-t[r]<<5|r;return{b:t,r:i}},Pp=Lp(Zl,2),Ip=Pp.b,ju=Pp.r;Ip[28]=258,ju[258]=28;var Np=Lp(Xl,0),zv=Np.b,Hd=Np.r,Au=new cn(32768);for(var Vt=0;Vt<32768;++Vt){var Mi=(Vt&43690)>>1|(Vt&21845)<<1;Mi=(Mi&52428)>>2|(Mi&13107)<<2,Mi=(Mi&61680)>>4|(Mi&3855)<<4,Au[Vt]=((Mi&65280)>>8|(Mi&255)<<8)>>1}var Zn=function(n,e,t){for(var r=n.length,i=0,s=new cn(e);i<r;++i)n[i]&&++s[n[i]-1];var a=new cn(e);for(i=1;i<e;++i)a[i]=a[i-1]+s[i-1]<<1;var c;if(t){c=new cn(1<<e);var l=15-e;for(i=0;i<r;++i)if(n[i])for(var f=i<<4|n[i],p=e-n[i],m=a[n[i]-1]++<<p,y=m|(1<<p)-1;m<=y;++m)c[Au[m]>>l]=f}else for(c=new cn(r),i=0;i<r;++i)n[i]&&(c[i]=Au[a[n[i]-1]++]>>15-n[i]);return c},Yi=new Mr(288);for(var Vt=0;Vt<144;++Vt)Yi[Vt]=8;for(var Vt=144;Vt<256;++Vt)Yi[Vt]=9;for(var Vt=256;Vt<280;++Vt)Yi[Vt]=7;for(var Vt=280;Vt<288;++Vt)Yi[Vt]=8;var Lo=new Mr(32);for(var Vt=0;Vt<32;++Vt)Lo[Vt]=5;var Wv=Zn(Yi,9,0),Vv=Zn(Yi,9,1),Hv=Zn(Lo,5,0),Gv=Zn(Lo,5,1),Jc=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},In=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},Yc=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},jh=function(n){return(n+7)/8|0},Ep=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new Mr(n.subarray(e,t))},Kv=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Fn=function(n,e,t){var r=new Error(e||Kv[n]);if(r.code=n,Error.captureStackTrace&&Error.captureStackTrace(r,Fn),!t)throw r;return r},Jv=function(n,e,t,r){var i=n.length,s=0;if(!i||e.f&&!e.l)return t||new Mr(0);var a=!t,c=a||e.i!=2,l=e.i;a&&(t=new Mr(i*3));var f=function(Ae){var Ee=t.length;if(Ae>Ee){var Ne=new Mr(Math.max(Ee*2,Ae));Ne.set(t),t=Ne}},p=e.f||0,m=e.p||0,y=e.b||0,v=e.l,k=e.d,S=e.m,P=e.n,w=i*8;do{if(!v){p=In(n,m,1);var L=In(n,m+1,3);if(m+=3,L)if(L==1)v=Vv,k=Gv,S=9,P=5;else if(L==2){var he=In(n,m,31)+257,Q=In(n,m+10,15)+4,$=he+In(n,m+5,31)+1;m+=14;for(var H=new Mr($),Y=new Mr(19),N=0;N<Q;++N)Y[Su[N]]=In(n,m+N*3,7);m+=Q*3;for(var T=Jc(Y),z=(1<<T)-1,q=Zn(Y,T,1),N=0;N<$;){var de=q[In(n,m,z)];m+=de&15;var R=de>>4;if(R<16)H[N++]=R;else{var ce=0,me=0;for(R==16?(me=3+In(n,m,3),m+=2,ce=H[N-1]):R==17?(me=3+In(n,m,7),m+=3):R==18&&(me=11+In(n,m,127),m+=7);me--;)H[N++]=ce}}var ne=H.subarray(0,he),ge=H.subarray(he);S=Jc(ne),P=Jc(ge),v=Zn(ne,S,1),k=Zn(ge,P,1)}else Fn(1);else{var R=jh(m)+4,J=n[R-4]|n[R-3]<<8,te=R+J;if(te>i){l&&Fn(0);break}c&&f(y+J),t.set(n.subarray(R,te),y),e.b=y+=J,e.p=m=te*8,e.f=p;continue}if(m>w){l&&Fn(0);break}}c&&f(y+131072);for(var ve=(1<<S)-1,Le=(1<<P)-1,j=m;;j=m){var ce=v[Yc(n,m)&ve],D=ce>>4;if(m+=ce&15,m>w){l&&Fn(0);break}if(ce||Fn(2),D<256)t[y++]=D;else if(D==256){j=m,v=null;break}else{var U=D-254;if(D>264){var N=D-257,W=Zl[N];U=In(n,m,(1<<W)-1)+Ip[N],m+=W}var Z=k[Yc(n,m)&Le],ie=Z>>4;Z||Fn(3),m+=Z&15;var ge=zv[ie];if(ie>3){var W=Xl[ie];ge+=Yc(n,m)&(1<<W)-1,m+=W}if(m>w){l&&Fn(0);break}c&&f(y+131072);var ue=y+U;if(y<ge){var ae=s-ge,ke=Math.min(ge,ue);for(ae+y<0&&Fn(3);y<ke;++y)t[y]=r[ae+y]}for(;y<ue;++y)t[y]=t[y-ge]}}e.l=v,e.p=j,e.b=y,e.f=p,v&&(p=1,e.m=S,e.d=k,e.n=P)}while(!p);return y!=t.length&&a?Ep(t,0,y):t.subarray(0,y)},hi=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8},so=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8,n[r+2]|=t>>16},Zc=function(n,e){for(var t=[],r=0;r<n.length;++r)n[r]&&t.push({s:r,f:n[r]});var i=t.length,s=t.slice();if(!i)return{t:Rp,l:0};if(i==1){var a=new Mr(t[0].s+1);return a[t[0].s]=1,{t:a,l:1}}t.sort(function(te,he){return te.f-he.f}),t.push({s:-1,f:25001});var c=t[0],l=t[1],f=0,p=1,m=2;for(t[0]={s:-1,f:c.f+l.f,l:c,r:l};p!=i-1;)c=t[t[f].f<t[m].f?f++:m++],l=t[f!=p&&t[f].f<t[m].f?f++:m++],t[p++]={s:-1,f:c.f+l.f,l:c,r:l};for(var y=s[0].s,r=1;r<i;++r)s[r].s>y&&(y=s[r].s);var v=new cn(y+1),k=ku(t[p-1],v,0);if(k>e){var r=0,S=0,P=k-e,w=1<<P;for(s.sort(function(he,Q){return v[Q.s]-v[he.s]||he.f-Q.f});r<i;++r){var L=s[r].s;if(v[L]>e)S+=w-(1<<k-v[L]),v[L]=e;else break}for(S>>=P;S>0;){var R=s[r].s;v[R]<e?S-=1<<e-v[R]++-1:++r}for(;r>=0&&S;--r){var J=s[r].s;v[J]==e&&(--v[J],++S)}k=e}return{t:new Mr(v),l:k}},ku=function(n,e,t){return n.s==-1?Math.max(ku(n.l,e,t+1),ku(n.r,e,t+1)):e[n.s]=t},Gd=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new cn(++e),r=0,i=n[0],s=1,a=function(l){t[r++]=l},c=1;c<=e;++c)if(n[c]==i&&c!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)a(32754);s>2&&(a(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(a(i),--s;s>6;s-=6)a(8304);s>2&&(a(s-3<<5|8208),s=0)}for(;s--;)a(i);s=1,i=n[c]}return{c:t.subarray(0,r),n:e}},ao=function(n,e){for(var t=0,r=0;r<e.length;++r)t+=n[r]*e[r];return t},Tp=function(n,e,t){var r=t.length,i=jh(e+2);n[i]=r&255,n[i+1]=r>>8,n[i+2]=n[i]^255,n[i+3]=n[i+1]^255;for(var s=0;s<r;++s)n[i+s+4]=t[s];return(i+4+r)*8},Kd=function(n,e,t,r,i,s,a,c,l,f,p){hi(e,p++,t),++i[256];for(var m=Zc(i,15),y=m.t,v=m.l,k=Zc(s,15),S=k.t,P=k.l,w=Gd(y),L=w.c,R=w.n,J=Gd(S),te=J.c,he=J.n,Q=new cn(19),$=0;$<L.length;++$)++Q[L[$]&31];for(var $=0;$<te.length;++$)++Q[te[$]&31];for(var H=Zc(Q,7),Y=H.t,N=H.l,T=19;T>4&&!Y[Su[T-1]];--T);var z=f+5<<3,q=ao(i,Yi)+ao(s,Lo)+a,de=ao(i,y)+ao(s,S)+a+14+3*T+ao(Q,Y)+2*Q[16]+3*Q[17]+7*Q[18];if(l>=0&&z<=q&&z<=de)return Tp(e,p,n.subarray(l,l+f));var ce,me,ne,ge;if(hi(e,p,1+(de<q)),p+=2,de<q){ce=Zn(y,v,0),me=y,ne=Zn(S,P,0),ge=S;var ve=Zn(Y,N,0);hi(e,p,R-257),hi(e,p+5,he-1),hi(e,p+10,T-4),p+=14;for(var $=0;$<T;++$)hi(e,p+3*$,Y[Su[$]]);p+=3*T;for(var Le=[L,te],j=0;j<2;++j)for(var D=Le[j],$=0;$<D.length;++$){var U=D[$]&31;hi(e,p,ve[U]),p+=Y[U],U>15&&(hi(e,p,D[$]>>5&127),p+=D[$]>>12)}}else ce=Wv,me=Yi,ne=Hv,ge=Lo;for(var $=0;$<c;++$){var W=r[$];if(W>255){var U=W>>18&31;so(e,p,ce[U+257]),p+=me[U+257],U>7&&(hi(e,p,W>>23&31),p+=Zl[U]);var Z=W&31;so(e,p,ne[Z]),p+=ge[Z],Z>3&&(so(e,p,W>>5&8191),p+=Xl[Z])}else so(e,p,ce[W]),p+=me[W]}return so(e,p,ce[256]),p+me[256]},Yv=new Sh([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Rp=new Mr(0),Zv=function(n,e,t,r,i,s){var a=s.z||n.length,c=new Mr(r+a+5*(1+Math.ceil(a/7e3))+i),l=c.subarray(r,c.length-i),f=s.l,p=(s.r||0)&7;if(e){p&&(l[0]=s.r>>3);for(var m=Yv[e-1],y=m>>13,v=m&8191,k=(1<<t)-1,S=s.p||new cn(32768),P=s.h||new cn(k+1),w=Math.ceil(t/3),L=2*w,R=function(Ke){return(n[Ke]^n[Ke+1]<<w^n[Ke+2]<<L)&k},J=new Sh(25e3),te=new cn(288),he=new cn(32),Q=0,$=0,H=s.i||0,Y=0,N=s.w||0,T=0;H+2<a;++H){var z=R(H),q=H&32767,de=P[z];if(S[q]=de,P[z]=q,N<=H){var ce=a-H;if((Q>7e3||Y>24576)&&(ce>423||!f)){p=Kd(n,l,0,J,te,he,$,Y,T,H-T,p),Y=Q=$=0,T=H;for(var me=0;me<286;++me)te[me]=0;for(var me=0;me<30;++me)he[me]=0}var ne=2,ge=0,ve=v,Le=q-de&32767;if(ce>2&&z==R(H-Le))for(var j=Math.min(y,ce)-1,D=Math.min(32767,H),U=Math.min(258,ce);Le<=D&&--ve&&q!=de;){if(n[H+ne]==n[H+ne-Le]){for(var W=0;W<U&&n[H+W]==n[H+W-Le];++W);if(W>ne){if(ne=W,ge=Le,W>j)break;for(var Z=Math.min(Le,W-2),ie=0,me=0;me<Z;++me){var ue=H-Le+me&32767,ae=S[ue],ke=ue-ae&32767;ke>ie&&(ie=ke,de=ue)}}}q=de,de=S[q],Le+=q-de&32767}if(ge){J[Y++]=268435456|ju[ne]<<18|Hd[ge];var Ae=ju[ne]&31,Ee=Hd[ge]&31;$+=Zl[Ae]+Xl[Ee],++te[257+Ae],++he[Ee],N=H+ne,++Q}else J[Y++]=n[H],++te[n[H]]}}for(H=Math.max(H,N);H<a;++H)J[Y++]=n[H],++te[n[H]];p=Kd(n,l,f,J,te,he,$,Y,T,H-T,p),f||(s.r=p&7|l[p/8|0]<<3,p-=7,s.h=P,s.p=S,s.i=H,s.w=N)}else{for(var H=s.w||0;H<a+f;H+=65535){var Ne=H+65535;Ne>=a&&(l[p/8|0]=f,Ne=a),p=Tp(l,p+1,n.subarray(H,Ne))}s.i=a}return Ep(c,0,r+jh(p)+i)},Op=function(){var n=1,e=0;return{p:function(t){for(var r=n,i=e,s=t.length|0,a=0;a!=s;){for(var c=Math.min(a+2655,s);a<c;++a)i+=r+=t[a];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}n=r,e=i},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},Xv=function(n,e,t,r,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),a=new Mr(s.length+n.length);a.set(s),a.set(n,s.length),n=a,i.w=s.length}return Zv(n,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,r,i)},Fp=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},Qv=function(n,e){var t=e.level,r=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=r<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var i=Op();i.p(e.dictionary),Fp(n,2,i.d())}},eb=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&Fn(6,"invalid zlib data"),(n[1]>>5&1)==1&&Fn(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function Cu(n,e){e||(e={});var t=Op();t.p(n);var r=Xv(n,e,e.dictionary?6:2,4);return Qv(r,e),Fp(r,r.length-4,t.d()),r}function tb(n,e){return Jv(n.subarray(eb(n),-4),{i:2},e,e)}var rb=typeof TextDecoder<"u"&&new TextDecoder,nb=0;try{rb.decode(Rp,{stream:!0}),nb=1}catch{}var it=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Xc(){it.console&&typeof it.console.log=="function"&&it.console.log.apply(it.console,arguments)}var Mt={log:Xc,warn:function(n){it.console&&(typeof it.console.warn=="function"?it.console.warn.apply(it.console,arguments):Xc.call(null,arguments))},error:function(n){it.console&&(typeof it.console.error=="function"?it.console.error.apply(it.console,arguments):Xc(n))}};function Qc(n,e,t){var r=new XMLHttpRequest;r.open("GET",n),r.responseType="blob",r.onload=function(){ys(r.response,e,t)},r.onerror=function(){Mt.error("could not download file")},r.send()}function Jd(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function xl(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var bo,Lu,ys=it.saveAs||((typeof window>"u"?"undefined":Bt(window))!=="object"||window!==it?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var r=it.URL||it.webkitURL,i=document.createElement("a");e=e||n.name||"download",i.download=e,i.rel="noopener",typeof n=="string"?(i.href=n,i.origin!==location.origin?Jd(i.href)?Qc(n,e,t):xl(i,i.target="_blank"):xl(i)):(i.href=r.createObjectURL(n),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){xl(i)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(Jd(n))Qc(n,e,t);else{var r=document.createElement("a");r.href=n,r.target="_blank",setTimeout(function(){xl(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:Bt(s)!=="object"&&(Mt.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(n,t),e)}:function(n,e,t,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof n=="string")return Qc(n,e,t);var i=n.type==="application/octet-stream",s=/constructor/i.test(it.HTMLElement)||it.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||i&&s)&&(typeof FileReader>"u"?"undefined":Bt(FileReader))==="object"){var c=new FileReader;c.onloadend=function(){var p=c.result;p=a?p:p.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=p:location=p,r=null},c.readAsDataURL(n)}else{var l=it.URL||it.webkitURL,f=l.createObjectURL(n);r?r.location=f:location.href=f,r=null,setTimeout(function(){l.revokeObjectURL(f)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Dp(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(c){return[parseInt(c[1]),parseInt(c[2]),parseInt(c[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(c){return[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(c){return[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]}}],r=0;r<t.length;r++){var i=t[r].re,s=t[r].process,a=i.exec(n);a&&(e=s(a),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var c=this.r.toString(16),l=this.g.toString(16),f=this.b.toString(16);return c.length==1&&(c="0"+c),l.length==1&&(l="0"+l),f.length==1&&(f="0"+f),"#"+c+l+f}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function eu(n,e){var t=n[0],r=n[1],i=n[2],s=n[3];t=Rr(t,r,i,s,e[0],7,-680876936),s=Rr(s,t,r,i,e[1],12,-389564586),i=Rr(i,s,t,r,e[2],17,606105819),r=Rr(r,i,s,t,e[3],22,-1044525330),t=Rr(t,r,i,s,e[4],7,-176418897),s=Rr(s,t,r,i,e[5],12,1200080426),i=Rr(i,s,t,r,e[6],17,-1473231341),r=Rr(r,i,s,t,e[7],22,-45705983),t=Rr(t,r,i,s,e[8],7,1770035416),s=Rr(s,t,r,i,e[9],12,-1958414417),i=Rr(i,s,t,r,e[10],17,-42063),r=Rr(r,i,s,t,e[11],22,-1990404162),t=Rr(t,r,i,s,e[12],7,1804603682),s=Rr(s,t,r,i,e[13],12,-40341101),i=Rr(i,s,t,r,e[14],17,-1502002290),t=Or(t,r=Rr(r,i,s,t,e[15],22,1236535329),i,s,e[1],5,-165796510),s=Or(s,t,r,i,e[6],9,-1069501632),i=Or(i,s,t,r,e[11],14,643717713),r=Or(r,i,s,t,e[0],20,-373897302),t=Or(t,r,i,s,e[5],5,-701558691),s=Or(s,t,r,i,e[10],9,38016083),i=Or(i,s,t,r,e[15],14,-660478335),r=Or(r,i,s,t,e[4],20,-405537848),t=Or(t,r,i,s,e[9],5,568446438),s=Or(s,t,r,i,e[14],9,-1019803690),i=Or(i,s,t,r,e[3],14,-187363961),r=Or(r,i,s,t,e[8],20,1163531501),t=Or(t,r,i,s,e[13],5,-1444681467),s=Or(s,t,r,i,e[2],9,-51403784),i=Or(i,s,t,r,e[7],14,1735328473),t=Fr(t,r=Or(r,i,s,t,e[12],20,-1926607734),i,s,e[5],4,-378558),s=Fr(s,t,r,i,e[8],11,-2022574463),i=Fr(i,s,t,r,e[11],16,1839030562),r=Fr(r,i,s,t,e[14],23,-35309556),t=Fr(t,r,i,s,e[1],4,-1530992060),s=Fr(s,t,r,i,e[4],11,1272893353),i=Fr(i,s,t,r,e[7],16,-155497632),r=Fr(r,i,s,t,e[10],23,-1094730640),t=Fr(t,r,i,s,e[13],4,681279174),s=Fr(s,t,r,i,e[0],11,-358537222),i=Fr(i,s,t,r,e[3],16,-722521979),r=Fr(r,i,s,t,e[6],23,76029189),t=Fr(t,r,i,s,e[9],4,-640364487),s=Fr(s,t,r,i,e[12],11,-421815835),i=Fr(i,s,t,r,e[15],16,530742520),t=Dr(t,r=Fr(r,i,s,t,e[2],23,-995338651),i,s,e[0],6,-198630844),s=Dr(s,t,r,i,e[7],10,1126891415),i=Dr(i,s,t,r,e[14],15,-1416354905),r=Dr(r,i,s,t,e[5],21,-57434055),t=Dr(t,r,i,s,e[12],6,1700485571),s=Dr(s,t,r,i,e[3],10,-1894986606),i=Dr(i,s,t,r,e[10],15,-1051523),r=Dr(r,i,s,t,e[1],21,-2054922799),t=Dr(t,r,i,s,e[8],6,1873313359),s=Dr(s,t,r,i,e[15],10,-30611744),i=Dr(i,s,t,r,e[6],15,-1560198380),r=Dr(r,i,s,t,e[13],21,1309151649),t=Dr(t,r,i,s,e[4],6,-145523070),s=Dr(s,t,r,i,e[11],10,-1120210379),i=Dr(i,s,t,r,e[2],15,718787259),r=Dr(r,i,s,t,e[9],21,-343485551),n[0]=Vi(t,n[0]),n[1]=Vi(r,n[1]),n[2]=Vi(i,n[2]),n[3]=Vi(s,n[3])}function Ql(n,e,t,r,i,s){return e=Vi(Vi(e,n),Vi(r,s)),Vi(e<<i|e>>>32-i,t)}function Rr(n,e,t,r,i,s,a){return Ql(e&t|~e&r,n,e,i,s,a)}function Or(n,e,t,r,i,s,a){return Ql(e&r|t&~r,n,e,i,s,a)}function Fr(n,e,t,r,i,s,a){return Ql(e^t^r,n,e,i,s,a)}function Dr(n,e,t,r,i,s,a){return Ql(t^(e|~r),n,e,i,s,a)}function Mp(n){var e,t=n.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)eu(r,ib(n.substring(e-64,e)));n=n.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)i[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(eu(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*t,eu(r,i),r}function ib(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}bo=it.atob.bind(it),Lu=it.btoa.bind(it);var Yd="0123456789abcdef".split("");function sb(n){for(var e="",t=0;t<4;t++)e+=Yd[n>>8*t+4&15]+Yd[n>>8*t&15];return e}function ab(n){return String.fromCharCode((255&n)>>0,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function Pu(n){return Mp(n).map(ab).join("")}var ob=function(n){for(var e=0;e<n.length;e++)n[e]=sb(n[e]);return n.join("")}(Mp("hello"))!="5d41402abc4b2a76b9719d911017c592";function Vi(n,e){if(ob){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Iu(n,e){var t,r,i,s;if(n!==t){for(var a=(i=n,s=1+(256/n.length>>0),new Array(s+1).join(i)),c=[],l=0;l<256;l++)c[l]=l;var f=0;for(l=0;l<256;l++){var p=c[l];f=(f+p+a.charCodeAt(l))%256,c[l]=c[f],c[f]=p}t=n,r=c}else c=r;var m=e.length,y=0,v=0,k="";for(l=0;l<m;l++)v=(v+(p=c[y=(y+1)%256]))%256,c[y]=c[v],c[v]=p,a=c[(c[y]+c[v])%256],k+=String.fromCharCode(e.charCodeAt(l)^a);return k}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Zd={print:4,modify:8,copy:16,"annot-forms":32};function da(n,e,t,r){this.v=1,this.r=2;var i=192;n.forEach(function(c){if(Zd.perm!==void 0)throw new Error("Invalid permission: "+c);i+=Zd[c]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),a=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,a),this.P=-(1+(255^i)),this.encryptionKey=Pu(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=Iu(this.encryptionKey,this.padding)}function fa(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,r=0;r<t;r++){var i=n.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=n[r]}return e}function Xd(n){if(Bt(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,r,i){if(i=i||!1,typeof t!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var s=Math.random().toString(35);return e[t][s]=[r,!!i],s},this.unsubscribe=function(t){for(var r in e)if(e[r][t])return delete e[r][t],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[t]){var a=e[t][s];try{a[0].apply(n,r)}catch(c){it.console&&Mt.error("jsPDF PubSub Error",c.message,c)}a[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function $l(n){if(!(this instanceof $l))return new $l(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function Bp(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function xs(n,e,t,r,i){if(!(this instanceof xs))return new xs(n,e,t,r,i);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,Bp.call(this,r,i)}function pa(n,e,t,r,i){if(!(this instanceof pa))return new pa(n,e,t,r,i);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,Bp.call(this,r,i)}function rt(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],a=[],c=1,l=16,f="S",p=null;Bt(n=n||{})==="object"&&(t=n.orientation,r=n.unit||r,i=n.format||i,s=n.compress||n.compressPdf||s,(p=n.encryption||null)!==null&&(p.userPassword=p.userPassword||"",p.ownerPassword=p.ownerPassword||"",p.userPermissions=p.userPermissions||[]),c=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(l=n.floatPrecision),f=n.defaultPathOperation||"S"),a=n.filters||(s===!0?["FlateEncode"]:a),r=r||"mm",t=(""+(t||"P")).toLowerCase();var m=n.putOnlyUsedFonts||!1,y={},v={internal:{},__private__:{}};v.__private__.PubSub=Xd;var k="1.3",S=v.__private__.getPdfVersion=function(){return k};v.__private__.setPdfVersion=function(d){k=d};var P={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};v.__private__.getPageFormats=function(){return P};var w=v.__private__.getPageFormat=function(d){return P[d]};i=i||"a4";var L={COMPAT:"compat",ADVANCED:"advanced"},R=L.COMPAT;function J(){this.saveGraphicsState(),M(new Ye(De,0,0,-De,0,Ai()*De).toString()+" cm"),this.setFontSize(this.getFontSize()/De),f="n",R=L.ADVANCED}function te(){this.restoreGraphicsState(),f="S",R=L.COMPAT}var he=v.__private__.combineFontStyleAndFontWeight=function(d,_){if(d=="bold"&&_=="normal"||d=="bold"&&_==400||d=="normal"&&_=="italic"||d=="bold"&&_=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return _&&(d=_==400||_==="normal"?d==="italic"?"italic":"normal":_!=700&&_!=="bold"||d!=="normal"?(_==700?"bold":_)+""+d:"bold"),d};v.advancedAPI=function(d){var _=R===L.COMPAT;return _&&J.call(this),typeof d!="function"||(d(this),_&&te.call(this)),this},v.compatAPI=function(d){var _=R===L.ADVANCED;return _&&te.call(this),typeof d!="function"||(d(this),_&&J.call(this)),this},v.isAdvancedAPI=function(){return R===L.ADVANCED};var Q,$=function(d){if(R!==L.ADVANCED)throw new Error(d+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},H=v.roundToPrecision=v.__private__.roundToPrecision=function(d,_){var B=e||_;if(isNaN(d)||isNaN(B))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return d.toFixed(B).replace(/0+$/,"")};Q=v.hpf=v.__private__.hpf=typeof l=="number"?function(d){if(isNaN(d))throw new Error("Invalid argument passed to jsPDF.hpf");return H(d,l)}:l==="smart"?function(d){if(isNaN(d))throw new Error("Invalid argument passed to jsPDF.hpf");return H(d,d>-1&&d<1?16:5)}:function(d){if(isNaN(d))throw new Error("Invalid argument passed to jsPDF.hpf");return H(d,16)};var Y=v.f2=v.__private__.f2=function(d){if(isNaN(d))throw new Error("Invalid argument passed to jsPDF.f2");return H(d,2)},N=v.__private__.f3=function(d){if(isNaN(d))throw new Error("Invalid argument passed to jsPDF.f3");return H(d,3)},T=v.scale=v.__private__.scale=function(d){if(isNaN(d))throw new Error("Invalid argument passed to jsPDF.scale");return R===L.COMPAT?d*De:R===L.ADVANCED?d:void 0},z=function(d){return R===L.COMPAT?Ai()-d:R===L.ADVANCED?d:void 0},q=function(d){return T(z(d))};v.__private__.setPrecision=v.setPrecision=function(d){typeof parseInt(d,10)=="number"&&(e=parseInt(d,10))};var de,ce="00000000000000000000000000000000",me=v.__private__.getFileId=function(){return ce},ne=v.__private__.setFileId=function(d){return ce=d!==void 0&&/^[a-fA-F0-9]{32}$/.test(d)?d.toUpperCase():ce.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),p!==null&&(Er=new da(p.userPermissions,p.userPassword,p.ownerPassword,ce)),ce};v.setFileId=function(d){return ne(d),this},v.getFileId=function(){return me()};var ge=v.__private__.convertDateToPDFDate=function(d){var _=d.getTimezoneOffset(),B=_<0?"+":"-",V=Math.floor(Math.abs(_/60)),se=Math.abs(_%60),xe=[B,U(V),"'",U(se),"'"].join("");return["D:",d.getFullYear(),U(d.getMonth()+1),U(d.getDate()),U(d.getHours()),U(d.getMinutes()),U(d.getSeconds()),xe].join("")},ve=v.__private__.convertPDFDateToDate=function(d){var _=parseInt(d.substr(2,4),10),B=parseInt(d.substr(6,2),10)-1,V=parseInt(d.substr(8,2),10),se=parseInt(d.substr(10,2),10),xe=parseInt(d.substr(12,2),10),Pe=parseInt(d.substr(14,2),10);return new Date(_,B,V,se,xe,Pe,0)},Le=v.__private__.setCreationDate=function(d){var _;if(d===void 0&&(d=new Date),d instanceof Date)_=ge(d);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(d))throw new Error("Invalid argument passed to jsPDF.setCreationDate");_=d}return de=_},j=v.__private__.getCreationDate=function(d){var _=de;return d==="jsDate"&&(_=ve(de)),_};v.setCreationDate=function(d){return Le(d),this},v.getCreationDate=function(d){return j(d)};var D,U=v.__private__.padd2=function(d){return("0"+parseInt(d)).slice(-2)},W=v.__private__.padd2Hex=function(d){return("00"+(d=d.toString())).substr(d.length)},Z=0,ie=[],ue=[],ae=0,ke=[],Ae=[],Ee=!1,Ne=ue,Ke=function(){Z=0,ae=0,ue=[],ie=[],ke=[],un=Gt(),rn=Gt()};v.__private__.setCustomOutputDestination=function(d){Ee=!0,Ne=d};var ye=function(d){Ee||(Ne=d)};v.__private__.resetCustomOutputDestination=function(){Ee=!1,Ne=ue};var M=v.__private__.out=function(d){return d=d.toString(),ae+=d.length+1,Ne.push(d),Ne},et=v.__private__.write=function(d){return M(arguments.length===1?d.toString():Array.prototype.join.call(arguments," "))},qe=v.__private__.getArrayBuffer=function(d){for(var _=d.length,B=new ArrayBuffer(_),V=new Uint8Array(B);_--;)V[_]=d.charCodeAt(_);return B},Ie=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];v.__private__.getStandardFonts=function(){return Ie};var Te=n.fontSize||16;v.__private__.setFontSize=v.setFontSize=function(d){return Te=R===L.ADVANCED?d/De:d,this};var Fe,Re=v.__private__.getFontSize=v.getFontSize=function(){return R===L.COMPAT?Te:Te*De},Ve=n.R2L||!1;v.__private__.setR2L=v.setR2L=function(d){return Ve=d,this},v.__private__.getR2L=v.getR2L=function(){return Ve};var tt,st=v.__private__.setZoomMode=function(d){var _=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(d))Fe=d;else if(isNaN(d)){if(_.indexOf(d)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+d+'" is not recognized.');Fe=d}else Fe=parseInt(d,10)};v.__private__.getZoomMode=function(){return Fe};var ct,mt=v.__private__.setPageMode=function(d){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(d)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+d+'" is not recognized.');tt=d};v.__private__.getPageMode=function(){return tt};var yt=v.__private__.setLayoutMode=function(d){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(d)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+d+'" is not recognized.');ct=d};v.__private__.getLayoutMode=function(){return ct},v.__private__.setDisplayMode=v.setDisplayMode=function(d,_,B){return st(d),yt(_),mt(B),this};var Ge={title:"",subject:"",author:"",keywords:"",creator:""};v.__private__.getDocumentProperty=function(d){if(Object.keys(Ge).indexOf(d)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ge[d]},v.__private__.getDocumentProperties=function(){return Ge},v.__private__.setDocumentProperties=v.setProperties=v.setDocumentProperties=function(d){for(var _ in Ge)Ge.hasOwnProperty(_)&&d[_]&&(Ge[_]=d[_]);return this},v.__private__.setDocumentProperty=function(d,_){if(Object.keys(Ge).indexOf(d)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ge[d]=_};var ut,De,er,wt,Lr,_t={},It={},Br=[],pe={},He={},$e={},vt={},Ot=null,Nt=0,ze=[],jt=new Xd(v),Pr=n.hotfixes||[],Ht={},Ur={},en=[],Ye=function d(_,B,V,se,xe,Pe){if(!(this instanceof d))return new d(_,B,V,se,xe,Pe);isNaN(_)&&(_=1),isNaN(B)&&(B=0),isNaN(V)&&(V=0),isNaN(se)&&(se=1),isNaN(xe)&&(xe=0),isNaN(Pe)&&(Pe=0),this._matrix=[_,B,V,se,xe,Pe]};Object.defineProperty(Ye.prototype,"sx",{get:function(){return this._matrix[0]},set:function(d){this._matrix[0]=d}}),Object.defineProperty(Ye.prototype,"shy",{get:function(){return this._matrix[1]},set:function(d){this._matrix[1]=d}}),Object.defineProperty(Ye.prototype,"shx",{get:function(){return this._matrix[2]},set:function(d){this._matrix[2]=d}}),Object.defineProperty(Ye.prototype,"sy",{get:function(){return this._matrix[3]},set:function(d){this._matrix[3]=d}}),Object.defineProperty(Ye.prototype,"tx",{get:function(){return this._matrix[4]},set:function(d){this._matrix[4]=d}}),Object.defineProperty(Ye.prototype,"ty",{get:function(){return this._matrix[5]},set:function(d){this._matrix[5]=d}}),Object.defineProperty(Ye.prototype,"a",{get:function(){return this._matrix[0]},set:function(d){this._matrix[0]=d}}),Object.defineProperty(Ye.prototype,"b",{get:function(){return this._matrix[1]},set:function(d){this._matrix[1]=d}}),Object.defineProperty(Ye.prototype,"c",{get:function(){return this._matrix[2]},set:function(d){this._matrix[2]=d}}),Object.defineProperty(Ye.prototype,"d",{get:function(){return this._matrix[3]},set:function(d){this._matrix[3]=d}}),Object.defineProperty(Ye.prototype,"e",{get:function(){return this._matrix[4]},set:function(d){this._matrix[4]=d}}),Object.defineProperty(Ye.prototype,"f",{get:function(){return this._matrix[5]},set:function(d){this._matrix[5]=d}}),Object.defineProperty(Ye.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ye.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ye.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ye.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Ye.prototype.join=function(d){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(Q).join(d)},Ye.prototype.multiply=function(d){var _=d.sx*this.sx+d.shy*this.shx,B=d.sx*this.shy+d.shy*this.sy,V=d.shx*this.sx+d.sy*this.shx,se=d.shx*this.shy+d.sy*this.sy,xe=d.tx*this.sx+d.ty*this.shx+this.tx,Pe=d.tx*this.shy+d.ty*this.sy+this.ty;return new Ye(_,B,V,se,xe,Pe)},Ye.prototype.decompose=function(){var d=this.sx,_=this.shy,B=this.shx,V=this.sy,se=this.tx,xe=this.ty,Pe=Math.sqrt(d*d+_*_),Be=(d/=Pe)*B+(_/=Pe)*V;B-=d*Be,V-=_*Be;var Je=Math.sqrt(B*B+V*V);return Be/=Je,d*(V/=Je)<_*(B/=Je)&&(d=-d,_=-_,Be=-Be,Pe=-Pe),{scale:new Ye(Pe,0,0,Je,0,0),translate:new Ye(1,0,0,1,se,xe),rotate:new Ye(d,_,-_,d,0,0),skew:new Ye(1,0,Be,1,0,0)}},Ye.prototype.toString=function(d){return this.join(" ")},Ye.prototype.inversed=function(){var d=this.sx,_=this.shy,B=this.shx,V=this.sy,se=this.tx,xe=this.ty,Pe=1/(d*V-_*B),Be=V*Pe,Je=-_*Pe,ht=-B*Pe,ot=d*Pe;return new Ye(Be,Je,ht,ot,-Be*se-ht*xe,-Je*se-ot*xe)},Ye.prototype.applyToPoint=function(d){var _=d.x*this.sx+d.y*this.shx+this.tx,B=d.x*this.shy+d.y*this.sy+this.ty;return new Us(_,B)},Ye.prototype.applyToRectangle=function(d){var _=this.applyToPoint(d),B=this.applyToPoint(new Us(d.x+d.w,d.y+d.h));return new Da(_.x,_.y,B.x-_.x,B.y-_.y)},Ye.prototype.clone=function(){var d=this.sx,_=this.shy,B=this.shx,V=this.sy,se=this.tx,xe=this.ty;return new Ye(d,_,B,V,se,xe)},v.Matrix=Ye;var Vr=v.matrixMult=function(d,_){return _.multiply(d)},tn=new Ye(1,0,0,1,0,0);v.unitMatrix=v.identityMatrix=tn;var _r=function(d,_){if(!He[d]){var B=(_ instanceof xs?"Sh":"P")+(Object.keys(pe).length+1).toString(10);_.id=B,He[d]=B,pe[B]=_,jt.publish("addPattern",_)}};v.ShadingPattern=xs,v.TilingPattern=pa,v.addShadingPattern=function(d,_){return $("addShadingPattern()"),_r(d,_),this},v.beginTilingPattern=function(d){$("beginTilingPattern()"),Vo(d.boundingBox[0],d.boundingBox[1],d.boundingBox[2]-d.boundingBox[0],d.boundingBox[3]-d.boundingBox[1],d.matrix)},v.endTilingPattern=function(d,_){$("endTilingPattern()"),_.stream=Ae[D].join(`
`),_r(d,_),jt.publish("endTilingPattern",_),en.pop().restore()};var Jt=v.__private__.newObject=function(){var d=Gt();return Ir(d,!0),d},Gt=v.__private__.newObjectDeferred=function(){return Z++,ie[Z]=function(){return ae},Z},Ir=function(d,_){return _=typeof _=="boolean"&&_,ie[d]=ae,_&&M(d+" 0 obj"),d},ti=v.__private__.newAdditionalObject=function(){var d={objId:Gt(),content:""};return ke.push(d),d},un=Gt(),rn=Gt(),nn=v.__private__.decodeColorString=function(d){var _=d.split(" ");if(_.length!==2||_[1]!=="g"&&_[1]!=="G")_.length===5&&(_[4]==="k"||_[4]==="K")&&(_=[(1-_[0])*(1-_[3]),(1-_[1])*(1-_[3]),(1-_[2])*(1-_[3]),"r"]);else{var B=parseFloat(_[0]);_=[B,B,B,"r"]}for(var V="#",se=0;se<3;se++)V+=("0"+Math.floor(255*parseFloat(_[se])).toString(16)).slice(-2);return V},Sr=v.__private__.encodeColorString=function(d){var _;typeof d=="string"&&(d={ch1:d});var B=d.ch1,V=d.ch2,se=d.ch3,xe=d.ch4,Pe=d.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof B=="string"&&B.charAt(0)!=="#"){var Be=new Dp(B);if(Be.ok)B=Be.toHex();else if(!/^\d*\.?\d*$/.test(B))throw new Error('Invalid color "'+B+'" passed to jsPDF.encodeColorString.')}if(typeof B=="string"&&/^#[0-9A-Fa-f]{3}$/.test(B)&&(B="#"+B[1]+B[1]+B[2]+B[2]+B[3]+B[3]),typeof B=="string"&&/^#[0-9A-Fa-f]{6}$/.test(B)){var Je=parseInt(B.substr(1),16);B=Je>>16&255,V=Je>>8&255,se=255&Je}if(V===void 0||xe===void 0&&B===V&&V===se)if(typeof B=="string")_=B+" "+Pe[0];else switch(d.precision){case 2:_=Y(B/255)+" "+Pe[0];break;case 3:default:_=N(B/255)+" "+Pe[0]}else if(xe===void 0||Bt(xe)==="object"){if(xe&&!isNaN(xe.a)&&xe.a===0)return _=["1.","1.","1.",Pe[1]].join(" ");if(typeof B=="string")_=[B,V,se,Pe[1]].join(" ");else switch(d.precision){case 2:_=[Y(B/255),Y(V/255),Y(se/255),Pe[1]].join(" ");break;default:case 3:_=[N(B/255),N(V/255),N(se/255),Pe[1]].join(" ")}}else if(typeof B=="string")_=[B,V,se,xe,Pe[2]].join(" ");else switch(d.precision){case 2:_=[Y(B),Y(V),Y(se),Y(xe),Pe[2]].join(" ");break;case 3:default:_=[N(B),N(V),N(se),N(xe),Pe[2]].join(" ")}return _},mr=v.__private__.getFilters=function(){return a},Nr=v.__private__.putStream=function(d){var _=(d=d||{}).data||"",B=d.filters||mr(),V=d.alreadyAppliedFilters||[],se=d.addLength1||!1,xe=_.length,Pe=d.objectId,Be=function(Tr){return Tr};if(p!==null&&Pe===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");p!==null&&(Be=Er.encryptor(Pe,0));var Je={};B===!0&&(B=["FlateEncode"]);var ht=d.additionalKeyValues||[],ot=(Je=rt.API.processDataByFilters!==void 0?rt.API.processDataByFilters(_,B):{data:_,reverseChain:[]}).reverseChain+(Array.isArray(V)?V.join(" "):V.toString());if(Je.data.length!==0&&(ht.push({key:"Length",value:Je.data.length}),se===!0&&ht.push({key:"Length1",value:xe})),ot.length!=0)if(ot.split("/").length-1==1)ht.push({key:"Filter",value:ot});else{ht.push({key:"Filter",value:"["+ot+"]"});for(var At=0;At<ht.length;At+=1)if(ht[At].key==="DecodeParms"){for(var Kt=[],Yt=0;Yt<Je.reverseChain.split("/").length-1;Yt+=1)Kt.push("null");Kt.push(ht[At].value),ht[At].value="["+Kt.join(" ")+"]"}}M("<<");for(var lr=0;lr<ht.length;lr++)M("/"+ht[lr].key+" "+ht[lr].value);M(">>"),Je.data.length!==0&&(M("stream"),M(Be(Je.data)),M("endstream"))},hn=v.__private__.putPage=function(d){var _=d.number,B=d.data,V=d.objId,se=d.contentsObjId;Ir(V,!0),M("<</Type /Page"),M("/Parent "+d.rootDictionaryObjId+" 0 R"),M("/Resources "+d.resourceDictionaryObjId+" 0 R"),M("/MediaBox ["+parseFloat(Q(d.mediaBox.bottomLeftX))+" "+parseFloat(Q(d.mediaBox.bottomLeftY))+" "+Q(d.mediaBox.topRightX)+" "+Q(d.mediaBox.topRightY)+"]"),d.cropBox!==null&&M("/CropBox ["+Q(d.cropBox.bottomLeftX)+" "+Q(d.cropBox.bottomLeftY)+" "+Q(d.cropBox.topRightX)+" "+Q(d.cropBox.topRightY)+"]"),d.bleedBox!==null&&M("/BleedBox ["+Q(d.bleedBox.bottomLeftX)+" "+Q(d.bleedBox.bottomLeftY)+" "+Q(d.bleedBox.topRightX)+" "+Q(d.bleedBox.topRightY)+"]"),d.trimBox!==null&&M("/TrimBox ["+Q(d.trimBox.bottomLeftX)+" "+Q(d.trimBox.bottomLeftY)+" "+Q(d.trimBox.topRightX)+" "+Q(d.trimBox.topRightY)+"]"),d.artBox!==null&&M("/ArtBox ["+Q(d.artBox.bottomLeftX)+" "+Q(d.artBox.bottomLeftY)+" "+Q(d.artBox.topRightX)+" "+Q(d.artBox.topRightY)+"]"),typeof d.userUnit=="number"&&d.userUnit!==1&&M("/UserUnit "+d.userUnit),jt.publish("putPage",{objId:V,pageContext:ze[_],pageNumber:_,page:B}),M("/Contents "+se+" 0 R"),M(">>"),M("endobj");var xe=B.join(`
`);return R===L.ADVANCED&&(xe+=`
Q`),Ir(se,!0),Nr({data:xe,filters:mr(),objectId:se}),M("endobj"),V},Sn=v.__private__.putPages=function(){var d,_,B=[];for(d=1;d<=Nt;d++)ze[d].objId=Gt(),ze[d].contentsObjId=Gt();for(d=1;d<=Nt;d++)B.push(hn({number:d,data:Ae[d],objId:ze[d].objId,contentsObjId:ze[d].contentsObjId,mediaBox:ze[d].mediaBox,cropBox:ze[d].cropBox,bleedBox:ze[d].bleedBox,trimBox:ze[d].trimBox,artBox:ze[d].artBox,userUnit:ze[d].userUnit,rootDictionaryObjId:un,resourceDictionaryObjId:rn}));Ir(un,!0),M("<</Type /Pages");var V="/Kids [";for(_=0;_<Nt;_++)V+=B[_]+" 0 R ";M(V+"]"),M("/Count "+Nt),M(">>"),M("endobj"),jt.publish("postPutPages")},bi=function(d){jt.publish("putFont",{font:d,out:M,newObject:Jt,putStream:Nr}),d.isAlreadyPutted!==!0&&(d.objectNumber=Jt(),M("<<"),M("/Type /Font"),M("/BaseFont /"+fa(d.postScriptName)),M("/Subtype /Type1"),typeof d.encoding=="string"&&M("/Encoding /"+d.encoding),M("/FirstChar 32"),M("/LastChar 255"),M(">>"),M("endobj"))},yi=function(){for(var d in _t)_t.hasOwnProperty(d)&&(m===!1||m===!0&&y.hasOwnProperty(d))&&bi(_t[d])},wi=function(d){d.objectNumber=Jt();var _=[];_.push({key:"Type",value:"/XObject"}),_.push({key:"Subtype",value:"/Form"}),_.push({key:"BBox",value:"["+[Q(d.x),Q(d.y),Q(d.x+d.width),Q(d.y+d.height)].join(" ")+"]"}),_.push({key:"Matrix",value:"["+d.matrix.toString()+"]"});var B=d.pages[1].join(`
`);Nr({data:B,additionalKeyValues:_,objectId:d.objectNumber}),M("endobj")},xi=function(){for(var d in Ht)Ht.hasOwnProperty(d)&&wi(Ht[d])},Is=function(d,_){var B,V=[],se=1/(_-1);for(B=0;B<1;B+=se)V.push(B);if(V.push(1),d[0].offset!=0){var xe={offset:0,color:d[0].color};d.unshift(xe)}if(d[d.length-1].offset!=1){var Pe={offset:1,color:d[d.length-1].color};d.push(Pe)}for(var Be="",Je=0,ht=0;ht<V.length;ht++){for(B=V[ht];B>d[Je+1].offset;)Je++;var ot=d[Je].offset,At=(B-ot)/(d[Je+1].offset-ot),Kt=d[Je].color,Yt=d[Je+1].color;Be+=W(Math.round((1-At)*Kt[0]+At*Yt[0]).toString(16))+W(Math.round((1-At)*Kt[1]+At*Yt[1]).toString(16))+W(Math.round((1-At)*Kt[2]+At*Yt[2]).toString(16))}return Be.trim()},_i=function(d,_){_||(_=21);var B=Jt(),V=Is(d.colors,_),se=[];se.push({key:"FunctionType",value:"0"}),se.push({key:"Domain",value:"[0.0 1.0]"}),se.push({key:"Size",value:"["+_+"]"}),se.push({key:"BitsPerSample",value:"8"}),se.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),se.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Nr({data:V,additionalKeyValues:se,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:B}),M("endobj"),d.objectNumber=Jt(),M("<< /ShadingType "+d.type),M("/ColorSpace /DeviceRGB");var xe="/Coords ["+Q(parseFloat(d.coords[0]))+" "+Q(parseFloat(d.coords[1]))+" ";d.type===2?xe+=Q(parseFloat(d.coords[2]))+" "+Q(parseFloat(d.coords[3])):xe+=Q(parseFloat(d.coords[2]))+" "+Q(parseFloat(d.coords[3]))+" "+Q(parseFloat(d.coords[4]))+" "+Q(parseFloat(d.coords[5])),M(xe+="]"),d.matrix&&M("/Matrix ["+d.matrix.toString()+"]"),M("/Function "+B+" 0 R"),M("/Extend [true true]"),M(">>"),M("endobj")},Ns=function(d,_){var B=Gt(),V=Jt();_.push({resourcesOid:B,objectOid:V}),d.objectNumber=V;var se=[];se.push({key:"Type",value:"/Pattern"}),se.push({key:"PatternType",value:"1"}),se.push({key:"PaintType",value:"1"}),se.push({key:"TilingType",value:"1"}),se.push({key:"BBox",value:"["+d.boundingBox.map(Q).join(" ")+"]"}),se.push({key:"XStep",value:Q(d.xStep)}),se.push({key:"YStep",value:Q(d.yStep)}),se.push({key:"Resources",value:B+" 0 R"}),d.matrix&&se.push({key:"Matrix",value:"["+d.matrix.toString()+"]"}),Nr({data:d.stream,additionalKeyValues:se,objectId:d.objectNumber}),M("endobj")},qn=function(d){var _;for(_ in pe)pe.hasOwnProperty(_)&&(pe[_]instanceof xs?_i(pe[_]):pe[_]instanceof pa&&Ns(pe[_],d))},Es=function(d){for(var _ in d.objectNumber=Jt(),M("<<"),d)switch(_){case"opacity":M("/ca "+Y(d[_]));break;case"stroke-opacity":M("/CA "+Y(d[_]))}M(">>"),M("endobj")},ka=function(){var d;for(d in $e)$e.hasOwnProperty(d)&&Es($e[d])},rs=function(){for(var d in M("/XObject <<"),Ht)Ht.hasOwnProperty(d)&&Ht[d].objectNumber>=0&&M("/"+d+" "+Ht[d].objectNumber+" 0 R");jt.publish("putXobjectDict"),M(">>")},Ca=function(){Er.oid=Jt(),M("<<"),M("/Filter /Standard"),M("/V "+Er.v),M("/R "+Er.r),M("/U <"+Er.toHexString(Er.U)+">"),M("/O <"+Er.toHexString(Er.O)+">"),M("/P "+Er.P),M(">>"),M("endobj")},ns=function(){for(var d in M("/Font <<"),_t)_t.hasOwnProperty(d)&&(m===!1||m===!0&&y.hasOwnProperty(d))&&M("/"+d+" "+_t[d].objectNumber+" 0 R");M(">>")},we=function(){if(Object.keys(pe).length>0){for(var d in M("/Shading <<"),pe)pe.hasOwnProperty(d)&&pe[d]instanceof xs&&pe[d].objectNumber>=0&&M("/"+d+" "+pe[d].objectNumber+" 0 R");jt.publish("putShadingPatternDict"),M(">>")}},nt=function(d){if(Object.keys(pe).length>0){for(var _ in M("/Pattern <<"),pe)pe.hasOwnProperty(_)&&pe[_]instanceof v.TilingPattern&&pe[_].objectNumber>=0&&pe[_].objectNumber<d&&M("/"+_+" "+pe[_].objectNumber+" 0 R");jt.publish("putTilingPatternDict"),M(">>")}},gt=function(){if(Object.keys($e).length>0){var d;for(d in M("/ExtGState <<"),$e)$e.hasOwnProperty(d)&&$e[d].objectNumber>=0&&M("/"+d+" "+$e[d].objectNumber+" 0 R");jt.publish("putGStateDict"),M(">>")}},bt=function(d){Ir(d.resourcesOid,!0),M("<<"),M("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),ns(),we(),nt(d.objectOid),gt(),rs(),M(">>"),M("endobj")},or=function(){var d=[];yi(),ka(),xi(),qn(d),jt.publish("putResources"),d.forEach(bt),bt({resourcesOid:rn,objectOid:Number.MAX_SAFE_INTEGER}),jt.publish("postPutResources")},Ts=function(){jt.publish("putAdditionalObjects");for(var d=0;d<ke.length;d++){var _=ke[d];Ir(_.objId,!0),M(_.content),M("endobj")}jt.publish("postPutAdditionalObjects")},Eo=function(d){It[d.fontName]=It[d.fontName]||{},It[d.fontName][d.fontStyle]=d.id},La=function(d,_,B,V,se){var xe={id:"F"+(Object.keys(_t).length+1).toString(10),postScriptName:d,fontName:_,fontStyle:B,encoding:V,isStandardFont:se||!1,metadata:{}};return jt.publish("addFont",{font:xe,instance:this}),_t[xe.id]=xe,Eo(xe),xe.id},ec=function(d){for(var _=0,B=Ie.length;_<B;_++){var V=La.call(this,d[_][0],d[_][1],d[_][2],Ie[_][3],!0);m===!1&&(y[V]=!0);var se=d[_][0].split("-");Eo({id:V,fontName:se[0],fontStyle:se[1]||""})}jt.publish("addFonts",{fonts:_t,dictionary:It})},jn=function(d){return d.foo=function(){try{return d.apply(this,arguments)}catch(V){var _=V.stack||"";~_.indexOf(" at ")&&(_=_.split(" at ")[1]);var B="Error in function "+_.split(`
`)[0].split("<")[0]+": "+V.message;if(!it.console)throw new Error(B);it.console.error(B,V),it.alert&&alert(B)}},d.foo.bar=d,d.foo},Rs=function(d,_){var B,V,se,xe,Pe,Be,Je,ht,ot;if(se=(_=_||{}).sourceEncoding||"Unicode",Pe=_.outputEncoding,(_.autoencode||Pe)&&_t[ut].metadata&&_t[ut].metadata[se]&&_t[ut].metadata[se].encoding&&(xe=_t[ut].metadata[se].encoding,!Pe&&_t[ut].encoding&&(Pe=_t[ut].encoding),!Pe&&xe.codePages&&(Pe=xe.codePages[0]),typeof Pe=="string"&&(Pe=xe[Pe]),Pe)){for(Je=!1,Be=[],B=0,V=d.length;B<V;B++)(ht=Pe[d.charCodeAt(B)])?Be.push(String.fromCharCode(ht)):Be.push(d[B]),Be[B].charCodeAt(0)>>8&&(Je=!0);d=Be.join("")}for(B=d.length;Je===void 0&&B!==0;)d.charCodeAt(B-1)>>8&&(Je=!0),B--;if(!Je)return d;for(Be=_.noBOM?[]:[254,255],B=0,V=d.length;B<V;B++){if((ot=(ht=d.charCodeAt(B))>>8)>>8)throw new Error("Character at position "+B+" of string '"+d+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Be.push(ot),Be.push(ht-(ot<<8))}return String.fromCharCode.apply(void 0,Be)},Hr=v.__private__.pdfEscape=v.pdfEscape=function(d,_){return Rs(d,_).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Pa=v.__private__.beginPage=function(d){Ae[++Nt]=[],ze[Nt]={objId:0,contentsObjId:0,userUnit:Number(c),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(d[0]),topRightY:Number(d[1])}},Ro(Nt),ye(Ae[D])},To=function(d,_){var B,V,se;switch(t=_||t,typeof d=="string"&&(B=w(d.toLowerCase()),Array.isArray(B)&&(V=B[0],se=B[1])),Array.isArray(d)&&(V=d[0]*De,se=d[1]*De),isNaN(V)&&(V=i[0],se=i[1]),(V>14400||se>14400)&&(Mt.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),V=Math.min(14400,V),se=Math.min(14400,se)),i=[V,se],t.substr(0,1)){case"l":se>V&&(i=[se,V]);break;case"p":V>se&&(i=[se,V])}Pa(i),Uo(Ta),M(An),Oa!==0&&M(Oa+" J"),Fa!==0&&M(Fa+" j"),jt.publish("addPage",{pageNumber:Nt})},tc=function(d){d>0&&d<=Nt&&(Ae.splice(d,1),ze.splice(d,1),Nt--,D>Nt&&(D=Nt),this.setPage(D))},Ro=function(d){d>0&&d<=Nt&&(D=d)},rc=v.__private__.getNumberOfPages=v.getNumberOfPages=function(){return Ae.length-1},Oo=function(d,_,B){var V,se=void 0;return B=B||{},d=d!==void 0?d:_t[ut].fontName,_=_!==void 0?_:_t[ut].fontStyle,V=d.toLowerCase(),It[V]!==void 0&&It[V][_]!==void 0?se=It[V][_]:It[d]!==void 0&&It[d][_]!==void 0?se=It[d][_]:B.disableWarning===!1&&Mt.warn("Unable to look up font label for font '"+d+"', '"+_+"'. Refer to getFontList() for available fonts."),se||B.noFallback||(se=It.times[_])==null&&(se=It.times.normal),se},nc=v.__private__.putInfo=function(){var d=Jt(),_=function(V){return V};for(var B in p!==null&&(_=Er.encryptor(d,0)),M("<<"),M("/Producer ("+Hr(_("jsPDF "+rt.version))+")"),Ge)Ge.hasOwnProperty(B)&&Ge[B]&&M("/"+B.substr(0,1).toUpperCase()+B.substr(1)+" ("+Hr(_(Ge[B]))+")");M("/CreationDate ("+Hr(_(de))+")"),M(">>"),M("endobj")},Ia=v.__private__.putCatalog=function(d){var _=(d=d||{}).rootDictionaryObjId||un;switch(Jt(),M("<<"),M("/Type /Catalog"),M("/Pages "+_+" 0 R"),Fe||(Fe="fullwidth"),Fe){case"fullwidth":M("/OpenAction [3 0 R /FitH null]");break;case"fullheight":M("/OpenAction [3 0 R /FitV null]");break;case"fullpage":M("/OpenAction [3 0 R /Fit]");break;case"original":M("/OpenAction [3 0 R /XYZ null null 1]");break;default:var B=""+Fe;B.substr(B.length-1)==="%"&&(Fe=parseInt(Fe)/100),typeof Fe=="number"&&M("/OpenAction [3 0 R /XYZ null null "+Y(Fe)+"]")}switch(ct||(ct="continuous"),ct){case"continuous":M("/PageLayout /OneColumn");break;case"single":M("/PageLayout /SinglePage");break;case"two":case"twoleft":M("/PageLayout /TwoColumnLeft");break;case"tworight":M("/PageLayout /TwoColumnRight")}tt&&M("/PageMode /"+tt),jt.publish("putCatalog"),M(">>"),M("endobj")},ic=v.__private__.putTrailer=function(){M("trailer"),M("<<"),M("/Size "+(Z+1)),M("/Root "+Z+" 0 R"),M("/Info "+(Z-1)+" 0 R"),p!==null&&M("/Encrypt "+Er.oid+" 0 R"),M("/ID [ <"+ce+"> <"+ce+"> ]"),M(">>")},sc=v.__private__.putHeader=function(){M("%PDF-"+k),M("%")},ac=v.__private__.putXRef=function(){var d="0000000000";M("xref"),M("0 "+(Z+1)),M("0000000000 65535 f ");for(var _=1;_<=Z;_++)typeof ie[_]=="function"?M((d+ie[_]()).slice(-10)+" 00000 n "):ie[_]!==void 0?M((d+ie[_]).slice(-10)+" 00000 n "):M("0000000000 00000 n ")},ri=v.__private__.buildDocument=function(){Ke(),ye(ue),jt.publish("buildDocument"),sc(),Sn(),Ts(),or(),p!==null&&Ca(),nc(),Ia();var d=ae;return ac(),ic(),M("startxref"),M(""+d),M("%%EOF"),ye(Ae[D]),ue.join(`
`)},Os=v.__private__.getBlob=function(d){return new Blob([qe(d)],{type:"application/pdf"})},Fs=v.output=v.__private__.output=jn(function(d,_){switch(typeof(_=_||{})=="string"?_={filename:_}:_.filename=_.filename||"generated.pdf",d){case void 0:return ri();case"save":v.save(_.filename);break;case"arraybuffer":return qe(ri());case"blob":return Os(ri());case"bloburi":case"bloburl":if(it.URL!==void 0&&typeof it.URL.createObjectURL=="function")return it.URL&&it.URL.createObjectURL(Os(ri()))||void 0;Mt.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var B="",V=ri();try{B=Lu(V)}catch{B=Lu(unescape(encodeURIComponent(V)))}return"data:application/pdf;filename="+_.filename+";base64,"+B;case"pdfobjectnewwindow":if(Object.prototype.toString.call(it)==="[object Window]"){var se="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",xe=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';_.pdfObjectUrl&&(se=_.pdfObjectUrl,xe="");var Pe='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+se+'"'+xe+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(_)+");<\/script></body></html>",Be=it.open();return Be!==null&&Be.document.write(Pe),Be}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(it)==="[object Window]"){var Je='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(_.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+_.filename+'" width="500px" height="400px" /></body></html>',ht=it.open();if(ht!==null){ht.document.write(Je);var ot=this;ht.document.documentElement.querySelector("#pdfViewer").onload=function(){ht.document.title=_.filename,ht.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(ot.output("bloburl"))}}return ht}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(it)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var At='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",_)+'"></iframe></body></html>',Kt=it.open();if(Kt!==null&&(Kt.document.write(At),Kt.document.title=_.filename),Kt||typeof safari>"u")return Kt;break;case"datauri":case"dataurl":return it.document.location.href=this.output("datauristring",_);default:return null}}),Fo=function(d){return Array.isArray(Pr)===!0&&Pr.indexOf(d)>-1};switch(r){case"pt":De=1;break;case"mm":De=72/25.4;break;case"cm":De=72/2.54;break;case"in":De=72;break;case"px":De=Fo("px_scaling")==1?.75:96/72;break;case"pc":case"em":De=12;break;case"ex":De=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);De=r}var Er=null;Le(),ne();var oc=function(d){return p!==null?Er.encryptor(d,0):function(_){return _}},Do=v.__private__.getPageInfo=v.getPageInfo=function(d){if(isNaN(d)||d%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:ze[d].objId,pageNumber:d,pageContext:ze[d]}},at=v.__private__.getPageInfoByObjId=function(d){if(isNaN(d)||d%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var _ in ze)if(ze[_].objId===d)break;return Do(_)},lc=v.__private__.getCurrentPageInfo=v.getCurrentPageInfo=function(){return{objId:ze[D].objId,pageNumber:D,pageContext:ze[D]}};v.addPage=function(){return To.apply(this,arguments),this},v.setPage=function(){return Ro.apply(this,arguments),ye.call(this,Ae[D]),this},v.insertPage=function(d){return this.addPage(),this.movePage(D,d),this},v.movePage=function(d,_){var B,V;if(d>_){B=Ae[d],V=ze[d];for(var se=d;se>_;se--)Ae[se]=Ae[se-1],ze[se]=ze[se-1];Ae[_]=B,ze[_]=V,this.setPage(_)}else if(d<_){B=Ae[d],V=ze[d];for(var xe=d;xe<_;xe++)Ae[xe]=Ae[xe+1],ze[xe]=ze[xe+1];Ae[_]=B,ze[_]=V,this.setPage(_)}return this},v.deletePage=function(){return tc.apply(this,arguments),this},v.__private__.text=v.text=function(d,_,B,V,se){var xe,Pe,Be,Je,ht,ot,At,Kt,Yt,lr=(V=V||{}).scope||this;if(typeof d=="number"&&typeof _=="number"&&(typeof B=="string"||Array.isArray(B))){var Tr=B;B=_,_=d,d=Tr}if(arguments[3]instanceof Ye?($("The transform parameter of text() with a Matrix value"),Yt=se):(Be=arguments[4],Je=arguments[5],Bt(At=arguments[3])==="object"&&At!==null||(typeof Be=="string"&&(Je=Be,Be=null),typeof At=="string"&&(Je=At,At=null),typeof At=="number"&&(Be=At,At=null),V={flags:At,angle:Be,align:Je})),isNaN(_)||isNaN(B)||d==null)throw new Error("Invalid arguments passed to jsPDF.text");if(d.length===0)return lr;var vr="",kn=!1,sn=typeof V.lineHeightFactor=="number"?V.lineHeightFactor:ss,Vn=lr.internal.scaleFactor;function Ho(Ut){return Ut=Ut.split("	").join(Array(V.TabLen||9).join(" ")),Hr(Ut,At)}function $a(Ut){for(var $t,rr=Ut.concat(),fr=[],oi=rr.length;oi--;)typeof($t=rr.shift())=="string"?fr.push($t):Array.isArray(Ut)&&($t.length===1||$t[1]===void 0&&$t[2]===void 0)?fr.push($t[0]):fr.push([$t[0],$t[1],$t[2]]);return fr}function qa(Ut,$t){var rr;if(typeof Ut=="string")rr=$t(Ut)[0];else if(Array.isArray(Ut)){for(var fr,oi,Ya=Ut.concat(),Zs=[],Zo=Ya.length;Zo--;)typeof(fr=Ya.shift())=="string"?Zs.push($t(fr)[0]):Array.isArray(fr)&&typeof fr[0]=="string"&&(oi=$t(fr[0],fr[1],fr[2]),Zs.push([oi[0],oi[1],oi[2]]));rr=Zs}return rr}var qs=!1,za=!0;if(typeof d=="string")qs=!0;else if(Array.isArray(d)){var Wa=d.concat();Pe=[];for(var zs,jr=Wa.length;jr--;)(typeof(zs=Wa.shift())!="string"||Array.isArray(zs)&&typeof zs[0]!="string")&&(za=!1);qs=za}if(qs===!1)throw new Error('Type of text must be string or Array. "'+d+'" is not recognized.');typeof d=="string"&&(d=d.match(/[\r?\n]/)?d.split(/\r\n|\r|\n/g):[d]);var Ws=Te/lr.internal.scaleFactor,Vs=Ws*(sn-1);switch(V.baseline){case"bottom":B-=Vs;break;case"top":B+=Ws-Vs;break;case"hanging":B+=Ws-2*Vs;break;case"middle":B+=Ws/2-Vs}if((ot=V.maxWidth||0)>0&&(typeof d=="string"?d=lr.splitTextToSize(d,ot):Object.prototype.toString.call(d)==="[object Array]"&&(d=d.reduce(function(Ut,$t){return Ut.concat(lr.splitTextToSize($t,ot))},[]))),xe={text:d,x:_,y:B,options:V,mutex:{pdfEscape:Hr,activeFontKey:ut,fonts:_t,activeFontSize:Te}},jt.publish("preProcessText",xe),d=xe.text,Be=(V=xe.options).angle,!(Yt instanceof Ye)&&Be&&typeof Be=="number"){Be*=Math.PI/180,V.rotationDirection===0&&(Be=-Be),R===L.ADVANCED&&(Be=-Be);var Hs=Math.cos(Be),Va=Math.sin(Be);Yt=new Ye(Hs,Va,-Va,Hs,0,0)}else Be&&Be instanceof Ye&&(Yt=Be);R!==L.ADVANCED||Yt||(Yt=tn),(ht=V.charSpace||Bs)!==void 0&&(vr+=Q(T(ht))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Kt=V.horizontalScale)!==void 0&&(vr+=Q(100*Kt)+` Tz
`),V.lang;var Gr=-1,bc=V.renderingMode!==void 0?V.renderingMode:V.stroke,Ha=lr.internal.getCurrentPageInfo().pageContext;switch(bc){case 0:case!1:case"fill":Gr=0;break;case 1:case!0:case"stroke":Gr=1;break;case 2:case"fillThenStroke":Gr=2;break;case 3:case"invisible":Gr=3;break;case 4:case"fillAndAddForClipping":Gr=4;break;case 5:case"strokeAndAddPathForClipping":Gr=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Gr=6;break;case 7:case"addToPathForClipping":Gr=7}var Go=Ha.usedRenderingMode!==void 0?Ha.usedRenderingMode:-1;Gr!==-1?vr+=Gr+` Tr
`:Go!==-1&&(vr+=`0 Tr
`),Gr!==-1&&(Ha.usedRenderingMode=Gr),Je=V.align||"left";var dn,Gs=Te*sn,Ko=lr.internal.pageSize.getWidth(),Jo=_t[ut];ht=V.charSpace||Bs,ot=V.maxWidth||0,At=Object.assign({autoencode:!0,noBOM:!0},V.flags);var ki=[],ls=function(Ut){return lr.getStringUnitWidth(Ut,{font:Jo,charSpace:ht,fontSize:Te,doKerning:!1})*Te/Vn};if(Object.prototype.toString.call(d)==="[object Array]"){var Kr;Pe=$a(d),Je!=="left"&&(dn=Pe.map(ls));var $r,Ci=0;if(Je==="right"){_-=dn[0],d=[],jr=Pe.length;for(var ii=0;ii<jr;ii++)ii===0?($r=Wn(_),Kr=ni(B)):($r=T(Ci-dn[ii]),Kr=-Gs),d.push([Pe[ii],$r,Kr]),Ci=dn[ii]}else if(Je==="center"){_-=dn[0]/2,d=[],jr=Pe.length;for(var si=0;si<jr;si++)si===0?($r=Wn(_),Kr=ni(B)):($r=T((Ci-dn[si])/2),Kr=-Gs),d.push([Pe[si],$r,Kr]),Ci=dn[si]}else if(Je==="left"){d=[],jr=Pe.length;for(var Ks=0;Ks<jr;Ks++)d.push(Pe[Ks])}else if(Je==="justify"&&Jo.encoding==="Identity-H"){d=[],jr=Pe.length,ot=ot!==0?ot:Ko;for(var ai=0,tr=0;tr<jr;tr++)if(Kr=tr===0?ni(B):-Gs,$r=tr===0?Wn(_):ai,tr<jr-1){var Ga=T((ot-dn[tr])/(Pe[tr].split(" ").length-1)),qr=Pe[tr].split(" ");d.push([qr[0]+" ",$r,Kr]),ai=0;for(var fn=1;fn<qr.length;fn++){var Js=(ls(qr[fn-1]+" "+qr[fn])-ls(qr[fn]))*Vn+Ga;fn==qr.length-1?d.push([qr[fn],Js,0]):d.push([qr[fn]+" ",Js,0]),ai-=Js}}else d.push([Pe[tr],$r,Kr]);d.push(["",ai,0])}else{if(Je!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(d=[],jr=Pe.length,ot=ot!==0?ot:Ko,tr=0;tr<jr;tr++)Kr=tr===0?ni(B):-Gs,$r=tr===0?Wn(_):0,tr<jr-1?ki.push(Q(T((ot-dn[tr])/(Pe[tr].split(" ").length-1)))):ki.push(0),d.push([Pe[tr],$r,Kr])}}var Yo=typeof V.R2L=="boolean"?V.R2L:Ve;Yo===!0&&(d=qa(d,function(Ut,$t,rr){return[Ut.split("").reverse().join(""),$t,rr]})),xe={text:d,x:_,y:B,options:V,mutex:{pdfEscape:Hr,activeFontKey:ut,fonts:_t,activeFontSize:Te}},jt.publish("postProcessText",xe),d=xe.text,kn=xe.mutex.isHex||!1;var Ka=_t[ut].encoding;Ka!=="WinAnsiEncoding"&&Ka!=="StandardEncoding"||(d=qa(d,function(Ut,$t,rr){return[Ho(Ut),$t,rr]})),Pe=$a(d),d=[];for(var cs,us,Li,hs=0,Ys=1,ds=Array.isArray(Pe[0])?Ys:hs,Pi="",Ja=function(Ut,$t,rr){var fr="";return rr instanceof Ye?(rr=typeof V.angle=="number"?Vr(rr,new Ye(1,0,0,1,Ut,$t)):Vr(new Ye(1,0,0,1,Ut,$t),rr),R===L.ADVANCED&&(rr=Vr(new Ye(1,0,0,-1,0,0),rr)),fr=rr.join(" ")+` Tm
`):fr=Q(Ut)+" "+Q($t)+` Td
`,fr},pn=0;pn<Pe.length;pn++){switch(Pi="",ds){case Ys:Li=(kn?"<":"(")+Pe[pn][0]+(kn?">":")"),cs=parseFloat(Pe[pn][1]),us=parseFloat(Pe[pn][2]);break;case hs:Li=(kn?"<":"(")+Pe[pn]+(kn?">":")"),cs=Wn(_),us=ni(B)}ki!==void 0&&ki[pn]!==void 0&&(Pi=ki[pn]+` Tw
`),pn===0?d.push(Pi+Ja(cs,us,Yt)+Li):ds===hs?d.push(Pi+Li):ds===Ys&&d.push(Pi+Ja(cs,us,Yt)+Li)}d=ds===hs?d.join(` Tj
T* `):d.join(` Tj
`),d+=` Tj
`;var gn=`BT
/`;return gn+=ut+" "+Te+` Tf
`,gn+=Q(Te*sn)+` TL
`,gn+=as+`
`,gn+=vr,gn+=d,M(gn+="ET"),y[ut]=!0,lr};var cc=v.__private__.clip=v.clip=function(d){return M(d==="evenodd"?"W*":"W"),this};v.clipEvenOdd=function(){return cc("evenodd")},v.__private__.discardPath=v.discardPath=function(){return M("n"),this};var zn=v.__private__.isValidStyle=function(d){var _=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(d)!==-1&&(_=!0),_};v.__private__.setDefaultPathOperation=v.setDefaultPathOperation=function(d){return zn(d)&&(f=d),this};var Mo=v.__private__.getStyle=v.getStyle=function(d){var _=f;switch(d){case"D":case"S":_="S";break;case"F":_="f";break;case"FD":case"DF":_="B";break;case"f":case"f*":case"B":case"B*":_=d}return _},Bo=v.close=function(){return M("h"),this};v.stroke=function(){return M("S"),this},v.fill=function(d){return Ds("f",d),this},v.fillEvenOdd=function(d){return Ds("f*",d),this},v.fillStroke=function(d){return Ds("B",d),this},v.fillStrokeEvenOdd=function(d){return Ds("B*",d),this};var Ds=function(d,_){Bt(_)==="object"?hc(_,d):M(d)},Na=function(d){d===null||R===L.ADVANCED&&d===void 0||(d=Mo(d),M(d))};function uc(d,_,B,V,se){var xe=new pa(_||this.boundingBox,B||this.xStep,V||this.yStep,this.gState,se||this.matrix);xe.stream=this.stream;var Pe=d+"$$"+this.cloneIndex+++"$$";return _r(Pe,xe),xe}var hc=function(d,_){var B=He[d.key],V=pe[B];if(V instanceof xs)M("q"),M(dc(_)),V.gState&&v.setGState(V.gState),M(d.matrix.toString()+" cm"),M("/"+B+" sh"),M("Q");else if(V instanceof pa){var se=new Ye(1,0,0,-1,0,Ai());d.matrix&&(se=se.multiply(d.matrix||tn),B=uc.call(V,d.key,d.boundingBox,d.xStep,d.yStep,se).id),M("q"),M("/Pattern cs"),M("/"+B+" scn"),V.gState&&v.setGState(V.gState),M(_),M("Q")}},dc=function(d){switch(d){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Ea=v.moveTo=function(d,_){return M(Q(T(d))+" "+Q(q(_))+" m"),this},is=v.lineTo=function(d,_){return M(Q(T(d))+" "+Q(q(_))+" l"),this},Si=v.curveTo=function(d,_,B,V,se,xe){return M([Q(T(d)),Q(q(_)),Q(T(B)),Q(q(V)),Q(T(se)),Q(q(xe)),"c"].join(" ")),this};v.__private__.line=v.line=function(d,_,B,V,se){if(isNaN(d)||isNaN(_)||isNaN(B)||isNaN(V)||!zn(se))throw new Error("Invalid arguments passed to jsPDF.line");return R===L.COMPAT?this.lines([[B-d,V-_]],d,_,[1,1],se||"S"):this.lines([[B-d,V-_]],d,_,[1,1]).stroke()},v.__private__.lines=v.lines=function(d,_,B,V,se,xe){var Pe,Be,Je,ht,ot,At,Kt,Yt,lr,Tr,vr,kn;if(typeof d=="number"&&(kn=B,B=_,_=d,d=kn),V=V||[1,1],xe=xe||!1,isNaN(_)||isNaN(B)||!Array.isArray(d)||!Array.isArray(V)||!zn(se)||typeof xe!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Ea(_,B),Pe=V[0],Be=V[1],ht=d.length,Tr=_,vr=B,Je=0;Je<ht;Je++)(ot=d[Je]).length===2?(Tr=ot[0]*Pe+Tr,vr=ot[1]*Be+vr,is(Tr,vr)):(At=ot[0]*Pe+Tr,Kt=ot[1]*Be+vr,Yt=ot[2]*Pe+Tr,lr=ot[3]*Be+vr,Tr=ot[4]*Pe+Tr,vr=ot[5]*Be+vr,Si(At,Kt,Yt,lr,Tr,vr));return xe&&Bo(),Na(se),this},v.path=function(d){for(var _=0;_<d.length;_++){var B=d[_],V=B.c;switch(B.op){case"m":Ea(V[0],V[1]);break;case"l":is(V[0],V[1]);break;case"c":Si.apply(this,V);break;case"h":Bo()}}return this},v.__private__.rect=v.rect=function(d,_,B,V,se){if(isNaN(d)||isNaN(_)||isNaN(B)||isNaN(V)||!zn(se))throw new Error("Invalid arguments passed to jsPDF.rect");return R===L.COMPAT&&(V=-V),M([Q(T(d)),Q(q(_)),Q(T(B)),Q(T(V)),"re"].join(" ")),Na(se),this},v.__private__.triangle=v.triangle=function(d,_,B,V,se,xe,Pe){if(isNaN(d)||isNaN(_)||isNaN(B)||isNaN(V)||isNaN(se)||isNaN(xe)||!zn(Pe))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[B-d,V-_],[se-B,xe-V],[d-se,_-xe]],d,_,[1,1],Pe,!0),this},v.__private__.roundedRect=v.roundedRect=function(d,_,B,V,se,xe,Pe){if(isNaN(d)||isNaN(_)||isNaN(B)||isNaN(V)||isNaN(se)||isNaN(xe)||!zn(Pe))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Be=4/3*(Math.SQRT2-1);return se=Math.min(se,.5*B),xe=Math.min(xe,.5*V),this.lines([[B-2*se,0],[se*Be,0,se,xe-xe*Be,se,xe],[0,V-2*xe],[0,xe*Be,-se*Be,xe,-se,xe],[2*se-B,0],[-se*Be,0,-se,-xe*Be,-se,-xe],[0,2*xe-V],[0,-xe*Be,se*Be,-xe,se,-xe]],d+se,_,[1,1],Pe,!0),this},v.__private__.ellipse=v.ellipse=function(d,_,B,V,se){if(isNaN(d)||isNaN(_)||isNaN(B)||isNaN(V)||!zn(se))throw new Error("Invalid arguments passed to jsPDF.ellipse");var xe=4/3*(Math.SQRT2-1)*B,Pe=4/3*(Math.SQRT2-1)*V;return Ea(d+B,_),Si(d+B,_-Pe,d+xe,_-V,d,_-V),Si(d-xe,_-V,d-B,_-Pe,d-B,_),Si(d-B,_+Pe,d-xe,_+V,d,_+V),Si(d+xe,_+V,d+B,_+Pe,d+B,_),Na(se),this},v.__private__.circle=v.circle=function(d,_,B,V){if(isNaN(d)||isNaN(_)||isNaN(B)||!zn(V))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(d,_,B,B,V)},v.setFont=function(d,_,B){return B&&(_=he(_,B)),ut=Oo(d,_,{disableWarning:!1}),this};var fc=v.__private__.getFont=v.getFont=function(){return _t[Oo.apply(v,arguments)]};v.__private__.getFontList=v.getFontList=function(){var d,_,B={};for(d in It)if(It.hasOwnProperty(d))for(_ in B[d]=[],It[d])It[d].hasOwnProperty(_)&&B[d].push(_);return B},v.addFont=function(d,_,B,V,se){var xe=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&xe.indexOf(arguments[3])!==-1?se=arguments[3]:arguments[3]&&xe.indexOf(arguments[3])==-1&&(B=he(B,V)),se=se||"Identity-H",La.call(this,d,_,B,se)};var ss,Ta=n.lineWidth||.200025,Ms=v.__private__.getLineWidth=v.getLineWidth=function(){return Ta},Uo=v.__private__.setLineWidth=v.setLineWidth=function(d){return Ta=d,M(Q(T(d))+" w"),this};v.__private__.setLineDash=rt.API.setLineDash=rt.API.setLineDashPattern=function(d,_){if(d=d||[],_=_||0,isNaN(_)||!Array.isArray(d))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return d=d.map(function(B){return Q(T(B))}).join(" "),_=Q(T(_)),M("["+d+"] "+_+" d"),this};var $o=v.__private__.getLineHeight=v.getLineHeight=function(){return Te*ss};v.__private__.getLineHeight=v.getLineHeight=function(){return Te*ss};var qo=v.__private__.setLineHeightFactor=v.setLineHeightFactor=function(d){return typeof(d=d||1.15)=="number"&&(ss=d),this},zo=v.__private__.getLineHeightFactor=v.getLineHeightFactor=function(){return ss};qo(n.lineHeight);var Wn=v.__private__.getHorizontalCoordinate=function(d){return T(d)},ni=v.__private__.getVerticalCoordinate=function(d){return R===L.ADVANCED?d:ze[D].mediaBox.topRightY-ze[D].mediaBox.bottomLeftY-T(d)},pc=v.__private__.getHorizontalCoordinateString=v.getHorizontalCoordinateString=function(d){return Q(Wn(d))},ji=v.__private__.getVerticalCoordinateString=v.getVerticalCoordinateString=function(d){return Q(ni(d))},An=n.strokeColor||"0 G";v.__private__.getStrokeColor=v.getDrawColor=function(){return nn(An)},v.__private__.setStrokeColor=v.setDrawColor=function(d,_,B,V){return An=Sr({ch1:d,ch2:_,ch3:B,ch4:V,pdfColorType:"draw",precision:2}),M(An),this};var Ra=n.fillColor||"0 g";v.__private__.getFillColor=v.getFillColor=function(){return nn(Ra)},v.__private__.setFillColor=v.setFillColor=function(d,_,B,V){return Ra=Sr({ch1:d,ch2:_,ch3:B,ch4:V,pdfColorType:"fill",precision:2}),M(Ra),this};var as=n.textColor||"0 g",gc=v.__private__.getTextColor=v.getTextColor=function(){return nn(as)};v.__private__.setTextColor=v.setTextColor=function(d,_,B,V){return as=Sr({ch1:d,ch2:_,ch3:B,ch4:V,pdfColorType:"text",precision:3}),this};var Bs=n.charSpace,mc=v.__private__.getCharSpace=v.getCharSpace=function(){return parseFloat(Bs||0)};v.__private__.setCharSpace=v.setCharSpace=function(d){if(isNaN(d))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Bs=d,this};var Oa=0;v.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},v.__private__.setLineCap=v.setLineCap=function(d){var _=v.CapJoinStyles[d];if(_===void 0)throw new Error("Line cap style of '"+d+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Oa=_,M(_+" J"),this};var Fa=0;v.__private__.setLineJoin=v.setLineJoin=function(d){var _=v.CapJoinStyles[d];if(_===void 0)throw new Error("Line join style of '"+d+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Fa=_,M(_+" j"),this},v.__private__.setLineMiterLimit=v.__private__.setMiterLimit=v.setLineMiterLimit=v.setMiterLimit=function(d){if(d=d||0,isNaN(d))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return M(Q(T(d))+" M"),this},v.GState=$l,v.setGState=function(d){(d=typeof d=="string"?$e[vt[d]]:Wo(null,d)).equals(Ot)||(M("/"+d.id+" gs"),Ot=d)};var Wo=function(d,_){if(!d||!vt[d]){var B=!1;for(var V in $e)if($e.hasOwnProperty(V)&&$e[V].equals(_)){B=!0;break}if(B)_=$e[V];else{var se="GS"+(Object.keys($e).length+1).toString(10);$e[se]=_,_.id=se}return d&&(vt[d]=_.id),jt.publish("addGState",_),_}};v.addGState=function(d,_){return Wo(d,_),this},v.saveGraphicsState=function(){return M("q"),Br.push({key:ut,size:Te,color:as}),this},v.restoreGraphicsState=function(){M("Q");var d=Br.pop();return ut=d.key,Te=d.size,as=d.color,Ot=null,this},v.setCurrentTransformationMatrix=function(d){return M(d.toString()+" cm"),this},v.comment=function(d){return M("#"+d),this};var Us=function(d,_){var B=d||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return B},set:function(xe){isNaN(xe)||(B=parseFloat(xe))}});var V=_||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return V},set:function(xe){isNaN(xe)||(V=parseFloat(xe))}});var se="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return se},set:function(xe){se=xe.toString()}}),this},Da=function(d,_,B,V){Us.call(this,d,_),this.type="rect";var se=B||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return se},set:function(Pe){isNaN(Pe)||(se=parseFloat(Pe))}});var xe=V||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return xe},set:function(Pe){isNaN(Pe)||(xe=parseFloat(Pe))}}),this},Ma=function(){this.page=Nt,this.currentPage=D,this.pages=Ae.slice(0),this.pagesContext=ze.slice(0),this.x=er,this.y=wt,this.matrix=Lr,this.width=os(D),this.height=Ai(D),this.outputDestination=Ne,this.id="",this.objectNumber=-1};Ma.prototype.restore=function(){Nt=this.page,D=this.currentPage,ze=this.pagesContext,Ae=this.pages,er=this.x,wt=this.y,Lr=this.matrix,Ba(D,this.width),Ua(D,this.height),Ne=this.outputDestination};var Vo=function(d,_,B,V,se){en.push(new Ma),Nt=D=0,Ae=[],er=d,wt=_,Lr=se,Pa([B,V])},vc=function(d){if(Ur[d])en.pop().restore();else{var _=new Ma,B="Xo"+(Object.keys(Ht).length+1).toString(10);_.id=B,Ur[d]=B,Ht[B]=_,jt.publish("addFormObject",_),en.pop().restore()}};for(var $s in v.beginFormObject=function(d,_,B,V,se){return Vo(d,_,B,V,se),this},v.endFormObject=function(d){return vc(d),this},v.doFormObject=function(d,_){var B=Ht[Ur[d]];return M("q"),M(_.toString()+" cm"),M("/"+B.id+" Do"),M("Q"),this},v.getFormObject=function(d){var _=Ht[Ur[d]];return{x:_.x,y:_.y,width:_.width,height:_.height,matrix:_.matrix}},v.save=function(d,_){return d=d||"generated.pdf",(_=_||{}).returnPromise=_.returnPromise||!1,_.returnPromise===!1?(ys(Os(ri()),d),typeof ys.unload=="function"&&it.setTimeout&&setTimeout(ys.unload,911),this):new Promise(function(B,V){try{var se=ys(Os(ri()),d);typeof ys.unload=="function"&&it.setTimeout&&setTimeout(ys.unload,911),B(se)}catch(xe){V(xe.message)}})},rt.API)rt.API.hasOwnProperty($s)&&($s==="events"&&rt.API.events.length?function(d,_){var B,V,se;for(se=_.length-1;se!==-1;se--)B=_[se][0],V=_[se][1],d.subscribe.apply(d,[B].concat(typeof V=="function"?[V]:V))}(jt,rt.API.events):v[$s]=rt.API[$s]);var os=v.getPageWidth=function(d){return(ze[d=d||D].mediaBox.topRightX-ze[d].mediaBox.bottomLeftX)/De},Ba=v.setPageWidth=function(d,_){ze[d].mediaBox.topRightX=_*De+ze[d].mediaBox.bottomLeftX},Ai=v.getPageHeight=function(d){return(ze[d=d||D].mediaBox.topRightY-ze[d].mediaBox.bottomLeftY)/De},Ua=v.setPageHeight=function(d,_){ze[d].mediaBox.topRightY=_*De+ze[d].mediaBox.bottomLeftY};return v.internal={pdfEscape:Hr,getStyle:Mo,getFont:fc,getFontSize:Re,getCharSpace:mc,getTextColor:gc,getLineHeight:$o,getLineHeightFactor:zo,getLineWidth:Ms,write:et,getHorizontalCoordinate:Wn,getVerticalCoordinate:ni,getCoordinateString:pc,getVerticalCoordinateString:ji,collections:{},newObject:Jt,newAdditionalObject:ti,newObjectDeferred:Gt,newObjectDeferredBegin:Ir,getFilters:mr,putStream:Nr,events:jt,scaleFactor:De,pageSize:{getWidth:function(){return os(D)},setWidth:function(d){Ba(D,d)},getHeight:function(){return Ai(D)},setHeight:function(d){Ua(D,d)}},encryptionOptions:p,encryption:Er,getEncryptor:oc,output:Fs,getNumberOfPages:rc,pages:Ae,out:M,f2:Y,f3:N,getPageInfo:Do,getPageInfoByObjId:at,getCurrentPageInfo:lc,getPDFVersion:S,Point:Us,Rectangle:Da,Matrix:Ye,hasHotfix:Fo},Object.defineProperty(v.internal.pageSize,"width",{get:function(){return os(D)},set:function(d){Ba(D,d)},enumerable:!0,configurable:!0}),Object.defineProperty(v.internal.pageSize,"height",{get:function(){return Ai(D)},set:function(d){Ua(D,d)},enumerable:!0,configurable:!0}),ec.call(v,Ie),ut="F1",To(i,t),jt.publish("initialized"),v}da.prototype.lsbFirstWord=function(n){return String.fromCharCode(n>>0&255,n>>8&255,n>>16&255,n>>24&255)},da.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},da.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},da.prototype.processOwnerPassword=function(n,e){return Iu(Pu(e).substr(0,5),n)},da.prototype.encryptor=function(n,e){var t=Pu(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return Iu(t,r)}},$l.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||Bt(n)!==Bt(this))return!1;var r=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;r++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&r--;return r===0},rt.API={events:[]},rt.version="3.0.1";var Xt=rt.API,Ah=1,Ps=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},oa=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},lt=function(n){return n.toFixed(2)},Bi=function(n){return n.toFixed(5)};Xt.__acroform__={};var Qr=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},Qd=function(n){return n*Ah},Gn=function(n){var e=new $p,t=We.internal.getHeight(n)||0,r=We.internal.getWidth(n)||0;return e.BBox=[0,0,Number(lt(r)),Number(lt(t))],e},lb=Xt.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|=1<<e},cb=Xt.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&=~(1<<e)},ub=Xt.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<e?1:0},nr=Xt.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return ub(n,e-1)},ir=Xt.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return lb(n,e-1)},sr=Xt.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return cb(n,e-1)},hb=Xt.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=n[0],s=n[1],a=n[2],c=n[3],l={};return l.lowerLeft_X=t(i)||0,l.lowerLeft_Y=r(s+c)||0,l.upperRight_X=t(i+a)||0,l.upperRight_Y=r(s)||0,[Number(lt(l.lowerLeft_X)),Number(lt(l.lowerLeft_Y)),Number(lt(l.upperRight_X)),Number(lt(l.upperRight_Y))]},db=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,r=Nu(n,t),i=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+i+" "+lt(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=Gn(n);return s.scope=n.scope,s.stream=e.join(`
`),s}},Nu=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=n.multiline?i.map(function(N){return N.split(`
`)}):i.map(function(N){return[N]});var s=t,a=We.internal.getHeight(n)||0;a=a<0?-a:a;var c=We.internal.getWidth(n)||0;c=c<0?-c:c;var l=function(N,T,z){if(N+1<i.length){var q=T+" "+i[N+1][0];return _l(q,n,z).width<=c-4}return!1};s++;e:for(;s>0;){e="",s--;var f,p,m=_l("3",n,s).height,y=n.multiline?a-s:(a-m)/2,v=y+=2,k=0,S=0,P=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+_l(e,n,s=12).width+", FieldWidth:"+c+`
`;break}for(var w="",L=0,R=0;R<i.length;R++)if(i.hasOwnProperty(R)){var J=!1;if(i[R].length!==1&&P!==i[R].length-1){if((m+2)*(L+2)+2>a)continue e;w+=i[R][P],J=!0,S=R,R--}else{w=(w+=i[R][P]+" ").substr(w.length-1)==" "?w.substr(0,w.length-1):w;var te=parseInt(R),he=l(te,w,s),Q=R>=i.length-1;if(he&&!Q){w+=" ",P=0;continue}if(he||Q){if(Q)S=te;else if(n.multiline&&(m+2)*(L+2)+2>a)continue e}else{if(!n.multiline||(m+2)*(L+2)+2>a)continue e;S=te}}for(var $="",H=k;H<=S;H++){var Y=i[H];if(n.multiline){if(H===S){$+=Y[P]+" ",P=(P+1)%Y.length;continue}if(H===k){$+=Y[Y.length-1]+" ";continue}}$+=Y[0]+" "}switch($=$.substr($.length-1)==" "?$.substr(0,$.length-1):$,p=_l($,n,s).width,n.textAlign){case"right":f=c-p-2;break;case"center":f=(c-p)/2;break;case"left":default:f=2}e+=lt(f)+" "+lt(v)+` Td
`,e+="("+Ps($)+`) Tj
`,e+=-lt(f)+` 0 Td
`,v=-(s+2),p=0,k=J?S:S+1,L++,w=""}break}return r.text=e,r.fontSize=s,r},_l=function(n,e,t){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(n,{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:i}},fb={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},pb=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(r){return r.type===t.type&&r.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},gb=function(n,e){for(var t in n)if(n.hasOwnProperty(t)){var r=t,i=n[t];e.internal.newObjectDeferredBegin(i.objId,!0),Bt(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete n[r]}},mb=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(Un.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(fb)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Ah=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new qp,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&pb(s,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(r,i){var s=!r;for(var a in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(a)){var c=r[a],l=[],f=c.Rect;if(c.Rect&&(c.Rect=hb(c.Rect,i)),i.internal.newObjectDeferredBegin(c.objId,!0),c.DA=We.createDefaultAppearanceStream(c),Bt(c)==="object"&&typeof c.getKeyValueListForStream=="function"&&(l=c.getKeyValueListForStream()),c.Rect=f,c.hasAppearanceStream&&!c.appearanceStreamContent){var p=db(c);l.push({key:"AP",value:"<</N "+p+">>"}),i.internal.acroformPlugin.xForms.push(p)}if(c.appearanceStreamContent){var m="";for(var y in c.appearanceStreamContent)if(c.appearanceStreamContent.hasOwnProperty(y)){var v=c.appearanceStreamContent[y];if(m+="/"+y+" ",m+="<<",Object.keys(v).length>=1||Array.isArray(v)){for(var a in v)if(v.hasOwnProperty(a)){var k=v[a];typeof k=="function"&&(k=k.call(i,c)),m+="/"+a+" "+k+" ",i.internal.acroformPlugin.xForms.indexOf(k)>=0||i.internal.acroformPlugin.xForms.push(k)}}else typeof(k=v)=="function"&&(k=k.call(i,c)),m+="/"+a+" "+k,i.internal.acroformPlugin.xForms.indexOf(k)>=0||i.internal.acroformPlugin.xForms.push(k);m+=">>"}l.push({key:"AP",value:`<<
`+m+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:c.objId}),i.internal.out("endobj")}s&&gb(i.internal.acroformPlugin.xForms,i)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},Up=Xt.__acroform__.arrayToPdfArray=function(n,e,t){var r=function(a){return a};if(Array.isArray(n)){for(var i="[",s=0;s<n.length;s++)switch(s!==0&&(i+=" "),Bt(n[s])){case"boolean":case"number":case"object":i+=n[s].toString();break;case"string":n[s].substr(0,1)!=="/"?(e!==void 0&&t&&(r=t.internal.getEncryptor(e)),i+="("+Ps(r(n[s].toString()))+")"):i+=n[s].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},tu=function(n,e,t){var r=function(i){return i};return e!==void 0&&t&&(r=t.internal.getEncryptor(e)),(n=n||"").toString(),n="("+Ps(r(n))+")"},Yn=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Yn.prototype.toString=function(){return this.objId+" 0 R"},Yn.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},Yn.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var r=e[t],i=this[r];i&&(Array.isArray(i)?n.push({key:r,value:Up(i,this.objId,this.scope)}):i instanceof Yn?(i.scope=this.scope,n.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&n.push({key:r,value:i}))}return n};var $p=function(){Yn.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};Qr($p,Yn);var qp=function(){Yn.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(r){return r};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Ps(t(n))+")"}},set:function(t){n=t}})};Qr(qp,Yn);var Un=function n(){Yn.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute F supplied.');e=w}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!nr(e,3)},set:function(w){w?this.F=ir(e,3):this.F=sr(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute Ff supplied.');t=w}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(w){r=w!==void 0?w:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(w){r[0]=w}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(w){r[1]=w}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(w){r[2]=w}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(w){r[3]=w}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(w){switch(w){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=w;break;default:throw new Error('Invalid value "'+w+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof ql)return;s="FieldObject"+n.FieldNum++}var w=function(L){return L};return this.scope&&(w=this.scope.internal.getEncryptor(this.objId)),"("+Ps(w(s))+")"},set:function(w){s=w.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(w){s=w}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(w){a=w}});var c="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return c},set:function(w){c=w}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(w){l=w}});var f=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return f===void 0?50/Ah:f},set:function(w){f=w}});var p="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return p},set:function(w){p=w}});var m="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!m||this instanceof ql||this instanceof As))return tu(m,this.objId,this.scope)},set:function(w){w=w.toString(),m=w}});var y=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(y)return this instanceof xr?y:tu(y,this.objId,this.scope)},set:function(w){w=w.toString(),y=this instanceof xr?w:w.substr(0,1)==="("?oa(w.substr(1,w.length-2)):oa(w)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof xr?oa(y.substr(1,y.length-1)):y},set:function(w){w=w.toString(),y=this instanceof xr?"/"+w:w}});var v=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(v)return v},set:function(w){this.V=w}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof xr?v:tu(v,this.objId,this.scope)},set:function(w){w=w.toString(),v=this instanceof xr?w:w.substr(0,1)==="("?oa(w.substr(1,w.length-2)):oa(w)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof xr?oa(v.substr(1,v.length-1)):v},set:function(w){w=w.toString(),v=this instanceof xr?"/"+w:w}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var k,S=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return S},set:function(w){w=!!w,S=w}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(k)return k},set:function(w){k=w}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!nr(this.Ff,1)},set:function(w){w?this.Ff=ir(this.Ff,1):this.Ff=sr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!nr(this.Ff,2)},set:function(w){w?this.Ff=ir(this.Ff,2):this.Ff=sr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!nr(this.Ff,3)},set:function(w){w?this.Ff=ir(this.Ff,3):this.Ff=sr(this.Ff,3)}});var P=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(P!==null)return P},set:function(w){if([0,1,2].indexOf(w)===-1)throw new Error('Invalid value "'+w+'" for attribute Q supplied.');P=w}}),Object.defineProperty(this,"textAlign",{get:function(){var w;switch(P){case 0:default:w="left";break;case 1:w="center";break;case 2:w="right"}return w},configurable:!0,enumerable:!0,set:function(w){switch(w){case"right":case 2:P=2;break;case"center":case 1:P=1;break;case"left":case 0:default:P=0}}})};Qr(Un,Yn);var ga=function(){Un.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Up(e,this.objId,this.scope)},set:function(t){var r,i;i=[],typeof(r=t)=="string"&&(i=function(s,a,c){c||(c=1);for(var l,f=[];l=a.exec(s);)f.push(l[c]);return f}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,r){for(r=r||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!nr(this.Ff,18)},set:function(t){t?this.Ff=ir(this.Ff,18):this.Ff=sr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!nr(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=ir(this.Ff,19):this.Ff=sr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!nr(this.Ff,20)},set:function(t){t?(this.Ff=ir(this.Ff,20),e.sort()):this.Ff=sr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!nr(this.Ff,22)},set:function(t){t?this.Ff=ir(this.Ff,22):this.Ff=sr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!nr(this.Ff,23)},set:function(t){t?this.Ff=ir(this.Ff,23):this.Ff=sr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!nr(this.Ff,27)},set:function(t){t?this.Ff=ir(this.Ff,27):this.Ff=sr(this.Ff,27)}}),this.hasAppearanceStream=!1};Qr(ga,Un);var ma=function(){ga.call(this),this.fontName="helvetica",this.combo=!1};Qr(ma,ga);var va=function(){ma.call(this),this.combo=!0};Qr(va,ma);var Il=function(){va.call(this),this.edit=!0};Qr(Il,va);var xr=function(){Un.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!nr(this.Ff,15)},set:function(t){t?this.Ff=ir(this.Ff,15):this.Ff=sr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!nr(this.Ff,16)},set:function(t){t?this.Ff=ir(this.Ff,16):this.Ff=sr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!nr(this.Ff,17)},set:function(t){t?this.Ff=ir(this.Ff,17):this.Ff=sr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!nr(this.Ff,26)},set:function(t){t?this.Ff=ir(this.Ff,26):this.Ff=sr(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(s){return s};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+Ps(t(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(t){Bt(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};Qr(xr,Un);var Nl=function(){xr.call(this),this.pushButton=!0};Qr(Nl,xr);var ba=function(){xr.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};Qr(ba,xr);var ql=function(){var n,e;Un.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(c){return c};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,a=[];for(s in a.push("<<"),r)a.push("/"+s+" ("+Ps(i(r[s]))+")");return a.push(">>"),a.join(`
`)},set:function(i){Bt(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(i){t="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=We.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Qr(ql,Un),ba.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},ba.prototype.createOption=function(n){var e=new ql;return e.Parent=this,e.optionName=n,this.Kids.push(e),vb.call(this.scope,e),e};var El=function(){xr.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=We.CheckBox.createAppearanceStream()};Qr(El,xr);var As=function(){Un.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!nr(this.Ff,13)},set:function(e){e?this.Ff=ir(this.Ff,13):this.Ff=sr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!nr(this.Ff,21)},set:function(e){e?this.Ff=ir(this.Ff,21):this.Ff=sr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!nr(this.Ff,23)},set:function(e){e?this.Ff=ir(this.Ff,23):this.Ff=sr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!nr(this.Ff,24)},set:function(e){e?this.Ff=ir(this.Ff,24):this.Ff=sr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!nr(this.Ff,25)},set:function(e){e?this.Ff=ir(this.Ff,25):this.Ff=sr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!nr(this.Ff,26)},set:function(e){e?this.Ff=ir(this.Ff,26):this.Ff=sr(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Qr(As,Un);var Tl=function(){As.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!nr(this.Ff,14)},set:function(n){n?this.Ff=ir(this.Ff,14):this.Ff=sr(this.Ff,14)}}),this.password=!0};Qr(Tl,As);var We={CheckBox:{createAppearanceStream:function(){return{N:{On:We.CheckBox.YesNormal},D:{On:We.CheckBox.YesPushDown,Off:We.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=Gn(n);e.scope=n.scope;var t=[],r=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color),s=Nu(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+lt(We.internal.getWidth(n))+" "+lt(We.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+r+" "+lt(s.fontSize)+" Tf "+i),t.push("BT"),t.push(s.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=Gn(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),i=[],s=We.internal.getHeight(n),a=We.internal.getWidth(n),c=Nu(n,n.caption);return i.push("1 g"),i.push("0 0 "+lt(a)+" "+lt(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+lt(a-1)+" "+lt(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+t+" "+lt(c.fontSize)+" Tf "+r),i.push(c.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(n){var e=Gn(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+lt(We.internal.getWidth(n))+" "+lt(We.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:We.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=We.RadioButton.Circle.YesNormal,e.D[n]=We.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=Gn(n);e.scope=n.scope;var t=[],r=We.internal.getWidth(n)<=We.internal.getHeight(n)?We.internal.getWidth(n)/4:We.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=We.internal.Bezier_C,s=Number((r*i).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+Bi(We.internal.getWidth(n)/2)+" "+Bi(We.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),t.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),t.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),t.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=Gn(n);e.scope=n.scope;var t=[],r=We.internal.getWidth(n)<=We.internal.getHeight(n)?We.internal.getWidth(n)/4:We.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*We.internal.Bezier_C).toFixed(5)),a=Number((r*We.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Bi(We.internal.getWidth(n)/2)+" "+Bi(We.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),t.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),t.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),t.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+Bi(We.internal.getWidth(n)/2)+" "+Bi(We.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),t.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),t.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),t.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=Gn(n);e.scope=n.scope;var t=[],r=We.internal.getWidth(n)<=We.internal.getHeight(n)?We.internal.getWidth(n)/4:We.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*We.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Bi(We.internal.getWidth(n)/2)+" "+Bi(We.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),t.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),t.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),t.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:We.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=We.RadioButton.Cross.YesNormal,e.D[n]=We.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=Gn(n);e.scope=n.scope;var t=[],r=We.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+lt(We.internal.getWidth(n)-2)+" "+lt(We.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(lt(r.x1.x)+" "+lt(r.x1.y)+" m"),t.push(lt(r.x2.x)+" "+lt(r.x2.y)+" l"),t.push(lt(r.x4.x)+" "+lt(r.x4.y)+" m"),t.push(lt(r.x3.x)+" "+lt(r.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=Gn(n);e.scope=n.scope;var t=We.internal.calculateCross(n),r=[];return r.push("0.749023 g"),r.push("0 0 "+lt(We.internal.getWidth(n))+" "+lt(We.internal.getHeight(n))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+lt(We.internal.getWidth(n)-2)+" "+lt(We.internal.getHeight(n)-2)+" re"),r.push("W"),r.push("n"),r.push(lt(t.x1.x)+" "+lt(t.x1.y)+" m"),r.push(lt(t.x2.x)+" "+lt(t.x2.y)+" l"),r.push(lt(t.x4.x)+" "+lt(t.x4.y)+" m"),r.push(lt(t.x3.x)+" "+lt(t.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(n){var e=Gn(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+lt(We.internal.getWidth(n))+" "+lt(We.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};We.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=We.internal.getWidth(n),t=We.internal.getHeight(n),r=Math.min(e,t);return{x1:{x:(e-r)/2,y:(t-r)/2+r},x2:{x:(e-r)/2+r,y:(t-r)/2},x3:{x:(e-r)/2,y:(t-r)/2},x4:{x:(e-r)/2+r,y:(t-r)/2+r}}}},We.internal.getWidth=function(n){var e=0;return Bt(n)==="object"&&(e=Qd(n.Rect[2])),e},We.internal.getHeight=function(n){var e=0;return Bt(n)==="object"&&(e=Qd(n.Rect[3])),e};var vb=Xt.addField=function(n){if(mb(this,n),!(n instanceof Un))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};Xt.AcroFormChoiceField=ga,Xt.AcroFormListBox=ma,Xt.AcroFormComboBox=va,Xt.AcroFormEditBox=Il,Xt.AcroFormButton=xr,Xt.AcroFormPushButton=Nl,Xt.AcroFormRadioButton=ba,Xt.AcroFormCheckBox=El,Xt.AcroFormTextField=As,Xt.AcroFormPasswordField=Tl,Xt.AcroFormAppearance=We,Xt.AcroForm={ChoiceField:ga,ListBox:ma,ComboBox:va,EditBox:Il,Button:xr,PushButton:Nl,RadioButton:ba,CheckBox:El,TextField:As,PasswordField:Tl,Appearance:We},rt.AcroForm={ChoiceField:ga,ListBox:ma,ComboBox:va,EditBox:Il,Button:xr,PushButton:Nl,RadioButton:ba,CheckBox:El,TextField:As,PasswordField:Tl,Appearance:We};rt.AcroForm;function zp(n){return n.reduce(function(e,t,r){return e[t]=r,e},{})}(function(n){n.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=n.__addimage__.getImageFileTypeByImageData=function(N,T){var z,q,de,ce,me,ne=e;if((T=T||e)==="RGBA"||N.data!==void 0&&N.data instanceof Uint8ClampedArray&&"height"in N&&"width"in N)return"RGBA";if(he(N))for(me in t)for(de=t[me],z=0;z<de.length;z+=1){for(ce=!0,q=0;q<de[z].length;q+=1)if(de[z][q]!==void 0&&de[z][q]!==N[q]){ce=!1;break}if(ce===!0){ne=me;break}}else for(me in t)for(de=t[me],z=0;z<de.length;z+=1){for(ce=!0,q=0;q<de[z].length;q+=1)if(de[z][q]!==void 0&&de[z][q]!==N.charCodeAt(q)){ce=!1;break}if(ce===!0){ne=me;break}}return ne===e&&T!==e&&(ne=T),ne},i=function N(T){for(var z=this.internal.write,q=this.internal.putStream,de=(0,this.internal.getFilters)();de.indexOf("FlateEncode")!==-1;)de.splice(de.indexOf("FlateEncode"),1);T.objectId=this.internal.newObject();var ce=[];if(ce.push({key:"Type",value:"/XObject"}),ce.push({key:"Subtype",value:"/Image"}),ce.push({key:"Width",value:T.width}),ce.push({key:"Height",value:T.height}),T.colorSpace===P.INDEXED?ce.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(T.palette.length/3-1)+" "+("sMask"in T&&T.sMask!==void 0?T.objectId+2:T.objectId+1)+" 0 R]"}):(ce.push({key:"ColorSpace",value:"/"+T.colorSpace}),T.colorSpace===P.DEVICE_CMYK&&ce.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ce.push({key:"BitsPerComponent",value:T.bitsPerComponent}),"decodeParameters"in T&&T.decodeParameters!==void 0&&ce.push({key:"DecodeParms",value:"<<"+T.decodeParameters+">>"}),"transparency"in T&&Array.isArray(T.transparency)){for(var me="",ne=0,ge=T.transparency.length;ne<ge;ne++)me+=T.transparency[ne]+" "+T.transparency[ne]+" ";ce.push({key:"Mask",value:"["+me+"]"})}T.sMask!==void 0&&ce.push({key:"SMask",value:T.objectId+1+" 0 R"});var ve=T.filter!==void 0?["/"+T.filter]:void 0;if(q({data:T.data,additionalKeyValues:ce,alreadyAppliedFilters:ve,objectId:T.objectId}),z("endobj"),"sMask"in T&&T.sMask!==void 0){var Le="/Predictor "+T.predictor+" /Colors 1 /BitsPerComponent "+T.bitsPerComponent+" /Columns "+T.width,j={width:T.width,height:T.height,colorSpace:"DeviceGray",bitsPerComponent:T.bitsPerComponent,decodeParameters:Le,data:T.sMask};"filter"in T&&(j.filter=T.filter),N.call(this,j)}if(T.colorSpace===P.INDEXED){var D=this.internal.newObject();q({data:$(new Uint8Array(T.palette)),objectId:D}),z("endobj")}},s=function(){var N=this.internal.collections.addImage_images;for(var T in N)i.call(this,N[T])},a=function(){var N,T=this.internal.collections.addImage_images,z=this.internal.write;for(var q in T)z("/I"+(N=T[q]).index,N.objectId,"0","R")},c=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",a))},l=function(){var N=this.internal.collections.addImage_images;return c.call(this),N},f=function(){return Object.keys(this.internal.collections.addImage_images).length},p=function(N){return typeof n["process"+N.toUpperCase()]=="function"},m=function(N){return Bt(N)==="object"&&N.nodeType===1},y=function(N,T){if(N.nodeName==="IMG"&&N.hasAttribute("src")){var z=""+N.getAttribute("src");if(z.indexOf("data:image/")===0)return bo(unescape(z).split("base64,").pop());var q=n.loadFile(z,!0);if(q!==void 0)return q}if(N.nodeName==="CANVAS"){if(N.width===0||N.height===0)throw new Error("Given canvas must have data. Canvas width: "+N.width+", height: "+N.height);var de;switch(T){case"PNG":de="image/png";break;case"WEBP":de="image/webp";break;case"JPEG":case"JPG":default:de="image/jpeg"}return bo(N.toDataURL(de,1).split("base64,").pop())}},v=function(N){var T=this.internal.collections.addImage_images;if(T){for(var z in T)if(N===T[z].alias)return T[z]}},k=function(N,T,z){return N||T||(N=-96,T=-96),N<0&&(N=-1*z.width*72/N/this.internal.scaleFactor),T<0&&(T=-1*z.height*72/T/this.internal.scaleFactor),N===0&&(N=T*z.width/z.height),T===0&&(T=N*z.height/z.width),[N,T]},S=function(N,T,z,q,de,ce){var me=k.call(this,z,q,de),ne=this.internal.getCoordinateString,ge=this.internal.getVerticalCoordinateString,ve=l.call(this);if(z=me[0],q=me[1],ve[de.index]=de,ce){ce*=Math.PI/180;var Le=Math.cos(ce),j=Math.sin(ce),D=function(W){return W.toFixed(4)},U=[D(Le),D(j),D(-1*j),D(Le),0,0,"cm"]}this.internal.write("q"),ce?(this.internal.write([1,"0","0",1,ne(N),ge(T+q),"cm"].join(" ")),this.internal.write(U.join(" ")),this.internal.write([ne(z),"0","0",ne(q),"0","0","cm"].join(" "))):this.internal.write([ne(z),"0","0",ne(q),ne(N),ge(T+q),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+de.index+" Do"),this.internal.write("Q")},P=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var w=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},L=n.__addimage__.sHashCode=function(N){var T,z,q=0;if(typeof N=="string")for(z=N.length,T=0;T<z;T++)q=(q<<5)-q+N.charCodeAt(T),q|=0;else if(he(N))for(z=N.byteLength/2,T=0;T<z;T++)q=(q<<5)-q+N[T],q|=0;return q},R=n.__addimage__.validateStringAsBase64=function(N){(N=N||"").toString().trim();var T=!0;return N.length===0&&(T=!1),N.length%4!=0&&(T=!1),/^[A-Za-z0-9+/]+$/.test(N.substr(0,N.length-2))===!1&&(T=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(N.substr(-2))===!1&&(T=!1),T},J=n.__addimage__.extractImageFromDataUrl=function(N){if(N==null||!(N=N.trim()).startsWith("data:"))return null;var T=N.indexOf(",");return T<0?null:N.substring(0,T).trim().endsWith("base64")?N.substring(T+1):null},te=n.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};n.__addimage__.isArrayBuffer=function(N){return te()&&N instanceof ArrayBuffer};var he=n.__addimage__.isArrayBufferView=function(N){return te()&&typeof Uint32Array<"u"&&(N instanceof Int8Array||N instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&N instanceof Uint8ClampedArray||N instanceof Int16Array||N instanceof Uint16Array||N instanceof Int32Array||N instanceof Uint32Array||N instanceof Float32Array||N instanceof Float64Array)},Q=n.__addimage__.binaryStringToUint8Array=function(N){for(var T=N.length,z=new Uint8Array(T),q=0;q<T;q++)z[q]=N.charCodeAt(q);return z},$=n.__addimage__.arrayBufferToBinaryString=function(N){for(var T="",z=he(N)?N:new Uint8Array(N),q=0;q<z.length;q+=8192)T+=String.fromCharCode.apply(null,z.subarray(q,q+8192));return T};n.addImage=function(){var N,T,z,q,de,ce,me,ne,ge;if(typeof arguments[1]=="number"?(T=e,z=arguments[1],q=arguments[2],de=arguments[3],ce=arguments[4],me=arguments[5],ne=arguments[6],ge=arguments[7]):(T=arguments[1],z=arguments[2],q=arguments[3],de=arguments[4],ce=arguments[5],me=arguments[6],ne=arguments[7],ge=arguments[8]),Bt(N=arguments[0])==="object"&&!m(N)&&"imageData"in N){var ve=N;N=ve.imageData,T=ve.format||T||e,z=ve.x||z||0,q=ve.y||q||0,de=ve.w||ve.width||de,ce=ve.h||ve.height||ce,me=ve.alias||me,ne=ve.compression||ne,ge=ve.rotation||ve.angle||ge}var Le=this.internal.getFilters();if(ne===void 0&&Le.indexOf("FlateEncode")!==-1&&(ne="SLOW"),isNaN(z)||isNaN(q))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var j=H.call(this,N,T,me,ne);return S.call(this,z,q,de,ce,j,ge),this};var H=function(N,T,z,q){var de,ce,me;if(typeof N=="string"&&r(N)===e){N=unescape(N);var ne=Y(N,!1);(ne!==""||(ne=n.loadFile(N,!0))!==void 0)&&(N=ne)}if(m(N)&&(N=y(N,T)),T=r(N,T),!p(T))throw new Error("addImage does not support files of type '"+T+"', please ensure that a plugin for '"+T+"' support is added.");if(((me=z)==null||me.length===0)&&(z=function(ge){return typeof ge=="string"||he(ge)?L(ge):he(ge.data)?L(ge.data):null}(N)),(de=v.call(this,z))||(te()&&(N instanceof Uint8Array||T==="RGBA"||(ce=N,N=Q(N))),de=this["process"+T.toUpperCase()](N,f.call(this),z,function(ge){return ge&&typeof ge=="string"&&(ge=ge.toUpperCase()),ge in n.image_compression?ge:w.NONE}(q),ce)),!de)throw new Error("An unknown error occurred whilst processing the image.");return de},Y=n.__addimage__.convertBase64ToBinaryString=function(N,T){T=typeof T!="boolean"||T;var z,q="";if(typeof N=="string"){var de;z=(de=J(N))!==null&&de!==void 0?de:N;try{q=bo(z)}catch(ce){if(T)throw R(z)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ce.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return q};n.getImageProperties=function(N){var T,z,q="";if(m(N)&&(N=y(N)),typeof N=="string"&&r(N)===e&&((q=Y(N,!1))===""&&(q=n.loadFile(N)||""),N=q),z=r(N),!p(z))throw new Error("addImage does not support files of type '"+z+"', please ensure that a plugin for '"+z+"' support is added.");if(!te()||N instanceof Uint8Array||(N=Q(N)),!(T=this["process"+z.toUpperCase()](N)))throw new Error("An unknown error occurred whilst processing the image");return T.fileType=z,T}})(rt.API),function(n){var e=function(t){if(t!==void 0&&t!="")return!0};rt.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var r,i,s,a=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(t.objId),f=t.pageContext.annotations,p=!1,m=0;m<f.length&&!p;m++)switch((r=f[m]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(p=!0);break;case"reference":case"text":case"freetext":p=!0}if(p!=0){this.internal.write("/Annots [");for(var y=0;y<f.length;y++){r=f[y];var v=this.internal.pdfEscape,k=this.internal.getEncryptor(t.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var S=this.internal.newAdditionalObject(),P=this.internal.newAdditionalObject(),w=this.internal.getEncryptor(S.objId),L=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+a(r.bounds.x)+" "+c(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w)+" "+c(r.bounds.y)+"] ")+"/Contents ("+v(w(r.contents))+")",s+=" /Popup "+P.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+v(w(L))+") >>",S.content=s;var R=S.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+a(r.bounds.x+30)+" "+c(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w+30)+" "+c(r.bounds.y)+"] ")+" /Parent "+R,r.open&&(s+=" /Open true"),s+=" >>",P.content=s,this.internal.write(S.objId,"0 R",P.objId,"0 R");break;case"freetext":i="/Rect ["+a(r.bounds.x)+" "+c(r.bounds.y)+" "+a(r.bounds.x+r.bounds.w)+" "+c(r.bounds.y+r.bounds.h)+"] ";var J=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+v(k(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+J+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var te=this.annotations._nameMap[r.options.name];r.options.pageNumber=te.page,r.options.top=te.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+v(k(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var he=c(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+he+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var r=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":r.pageContext.annotations.push(t)}},n.link=function(t,r,i,s,a){var c=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,f=this.internal.getVerticalCoordinateString;c.pageContext.annotations.push({finalBounds:{x:l(t),y:f(r),w:l(t+i),h:f(r+s)},options:a,type:"link"})},n.textWithLink=function(t,r,i,s){var a,c,l=this.getTextWidth(t),f=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){c=s.maxWidth;var p=this.splitTextToSize(t,c).length;a=Math.ceil(f*p)}else c=l,a=f;return this.text(t,r,i,s),i+=.2*f,s.align==="center"&&(r-=l/2),s.align==="right"&&(r-=l),this.link(r,i-f,c,a,s),l},n.getTextWidth=function(t){var r=this.internal.getFontSize();return this.getStringUnitWidth(t)*r/this.internal.scaleFactor}}(rt.API),function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];n.__arabicParser__={};var s=n.__arabicParser__.isInArabicSubstitutionA=function(S){return e[S.charCodeAt(0)]!==void 0},a=n.__arabicParser__.isArabicLetter=function(S){return typeof S=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(S)},c=n.__arabicParser__.isArabicEndLetter=function(S){return a(S)&&s(S)&&e[S.charCodeAt(0)].length<=2},l=n.__arabicParser__.isArabicAlfLetter=function(S){return a(S)&&i.indexOf(S.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(S){return a(S)&&s(S)&&e[S.charCodeAt(0)].length>=1};var f=n.__arabicParser__.arabicLetterHasFinalForm=function(S){return a(S)&&s(S)&&e[S.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(S){return a(S)&&s(S)&&e[S.charCodeAt(0)].length>=3};var p=n.__arabicParser__.arabicLetterHasMedialForm=function(S){return a(S)&&s(S)&&e[S.charCodeAt(0)].length==4},m=n.__arabicParser__.resolveLigatures=function(S){var P=0,w=t,L="",R=0;for(P=0;P<S.length;P+=1)w[S.charCodeAt(P)]!==void 0?(R++,typeof(w=w[S.charCodeAt(P)])=="number"&&(L+=String.fromCharCode(w),w=t,R=0),P===S.length-1&&(w=t,L+=S.charAt(P-(R-1)),P-=R-1,R=0)):(w=t,L+=S.charAt(P-R),P-=R,R=0);return L};n.__arabicParser__.isArabicDiacritic=function(S){return S!==void 0&&r[S.charCodeAt(0)]!==void 0};var y=n.__arabicParser__.getCorrectForm=function(S,P,w){return a(S)?s(S)===!1?-1:!f(S)||!a(P)&&!a(w)||!a(w)&&c(P)||c(S)&&!a(P)||c(S)&&l(P)||c(S)&&c(P)?0:p(S)&&a(P)&&!c(P)&&a(w)&&f(w)?3:c(S)||!a(w)?1:2:-1},v=function(S){var P=0,w=0,L=0,R="",J="",te="",he=(S=S||"").split("\\s+"),Q=[];for(P=0;P<he.length;P+=1){for(Q.push(""),w=0;w<he[P].length;w+=1)R=he[P][w],J=he[P][w-1],te=he[P][w+1],a(R)?(L=y(R,J,te),Q[P]+=L!==-1?String.fromCharCode(e[R.charCodeAt(0)][L]):R):Q[P]+=R;Q[P]=m(Q[P])}return Q.join(" ")},k=n.__arabicParser__.processArabic=n.processArabic=function(){var S,P=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,w=[];if(Array.isArray(P)){var L=0;for(w=[],L=0;L<P.length;L+=1)Array.isArray(P[L])?w.push([v(P[L][0]),P[L][1],P[L][2]]):w.push([v(P[L])]);S=w}else S=v(P);return typeof arguments[0]=="string"?S:(arguments[0].text=S,arguments[0])};n.events.push(["preProcessText",k])}(rt.API),rt.API.autoPrint=function(n){var e;switch((n=n||{}).variant=n.variant||"non-conform",n.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(c){t=c}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(c){r=isNaN(c)||Number.isInteger(c)===!1||c<0?150:c,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(c){i=isNaN(c)||Number.isInteger(c)===!1||c<0?300:c,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(c){s=c}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(c){a=c}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,r){var i;if((t=t||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(rt.API),function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(S){l=S}});var f=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return f},set:function(S){f=S}});var p=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return p},set:function(S){p=S}});var m=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return m},set:function(S){m=S}});var y=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return y},set:function(S){y=S}});var v=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return v},set:function(S){v=S}});var k=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return k},set:function(S){k=S}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},n.getTextDimensions=function(l,f){r.call(this);var p=(f=f||{}).fontSize||this.getFontSize(),m=f.font||this.getFont(),y=f.scaleFactor||this.internal.scaleFactor,v=0,k=0,S=0,P=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var w=f.maxWidth;w>0?typeof l=="string"?l=this.splitTextToSize(l,w):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(R,J){return R.concat(P.splitTextToSize(J,w))},[])):l=Array.isArray(l)?l:[l];for(var L=0;L<l.length;L++)v<(S=this.getStringUnitWidth(l[L],{font:m})*p)&&(v=S);return v!==0&&(k=l.length),{w:v/=y,h:Math.max((k*p*this.getLineHeightFactor()-p*(this.getLineHeightFactor()-1))/y,0)}},n.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=n.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var f=this.internal.__cell__.lastCell,p=this.internal.__cell__.padding,m=this.internal.__cell__.margins||e,y=this.internal.__cell__.tableHeaderRow,v=this.internal.__cell__.printHeaders;return f.lineNumber!==void 0&&(f.lineNumber===l.lineNumber?(l.x=(f.x||0)+(f.width||0),l.y=f.y||0):f.y+f.height+l.height+m.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=m.top,v&&y&&(this.printHeaderRow(l.lineNumber,!0),l.y+=y[0].height)):l.y=f.y+f.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,t===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-p,l.y+p,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+p,{align:"center",baseline:"top",maxWidth:l.width-p-p}):this.text(l.text,l.x+p,l.y+p,{align:"left",baseline:"top",maxWidth:l.width-p-p})),this.internal.__cell__.lastCell=l,this};n.table=function(l,f,p,m,y){if(r.call(this),!p)throw new Error("No data for PDF table.");var v,k,S,P,w=[],L=[],R=[],J={},te={},he=[],Q=[],$=(y=y||{}).autoSize||!1,H=y.printHeaders!==!1,Y=y.css&&y.css["font-size"]!==void 0?16*y.css["font-size"]:y.fontSize||12,N=y.margins||Object.assign({width:this.getPageWidth()},e),T=typeof y.padding=="number"?y.padding:3,z=y.headerBackgroundColor||"#c8c8c8",q=y.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=H,this.internal.__cell__.margins=N,this.internal.__cell__.table_font_size=Y,this.internal.__cell__.padding=T,this.internal.__cell__.headerBackgroundColor=z,this.internal.__cell__.headerTextColor=q,this.setFontSize(Y),m==null)L=w=Object.keys(p[0]),R=w.map(function(){return"left"});else if(Array.isArray(m)&&Bt(m[0])==="object")for(w=m.map(function(ve){return ve.name}),L=m.map(function(ve){return ve.prompt||ve.name||""}),R=m.map(function(ve){return ve.align||"left"}),v=0;v<m.length;v+=1)te[m[v].name]=m[v].width*(19.049976/25.4);else Array.isArray(m)&&typeof m[0]=="string"&&(L=w=m,R=w.map(function(){return"left"}));if($||Array.isArray(m)&&typeof m[0]=="string")for(v=0;v<w.length;v+=1){for(J[P=w[v]]=p.map(function(ve){return ve[P]}),this.setFont(void 0,"bold"),he.push(this.getTextDimensions(L[v],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),k=J[P],this.setFont(void 0,"normal"),S=0;S<k.length;S+=1)he.push(this.getTextDimensions(k[S],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);te[P]=Math.max.apply(null,he)+T+T,he=[]}if(H){var de={};for(v=0;v<w.length;v+=1)de[w[v]]={},de[w[v]].text=L[v],de[w[v]].align=R[v];var ce=c.call(this,de,te);Q=w.map(function(ve){return new s(l,f,te[ve],ce,de[ve].text,void 0,de[ve].align)}),this.setTableHeaderRow(Q),this.printHeaderRow(1,!1)}var me=m.reduce(function(ve,Le){return ve[Le.name]=Le.align,ve},{});for(v=0;v<p.length;v+=1){"rowStart"in y&&y.rowStart instanceof Function&&y.rowStart({row:v,data:p[v]},this);var ne=c.call(this,p[v],te);for(S=0;S<w.length;S+=1){var ge=p[v][w[S]];"cellStart"in y&&y.cellStart instanceof Function&&y.cellStart({row:v,col:S,data:ge},this),a.call(this,new s(l,f,te[w[S]],ne,ge,v+2,me[w[S]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=f,this};var c=function(l,f){var p=this.internal.__cell__.padding,m=this.internal.__cell__.table_font_size,y=this.internal.scaleFactor;return Object.keys(l).map(function(v){var k=l[v];return this.splitTextToSize(k.hasOwnProperty("text")?k.text:k,f[v]-p-p)},this).map(function(v){return this.getLineHeightFactor()*v.length*m/y+p+p},this).reduce(function(v,k){return Math.max(v,k)},0)};n.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},n.printHeaderRow=function(l,f){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var p;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var m=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(m[0],m[1],m[2],m[3],void 0,-1)}this.setFont(void 0,"bold");for(var y=[],v=0;v<this.internal.__cell__.tableHeaderRow.length;v+=1){p=this.internal.__cell__.tableHeaderRow[v].clone(),f&&(p.y=this.internal.__cell__.margins.top||0,y.push(p)),p.lineNumber=l;var k=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,p),this.setTextColor(k)}y.length>0&&this.setTableHeaderRow(y),this.setFont(void 0,"normal"),t=!1}}(rt.API);var Wp={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Vp=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Eu=zp(Vp),Hp=[100,200,300,400,500,600,700,800,900],bb=zp(Hp);function Tu(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=function(s){return Wp[s=s||"normal"]?s:"normal"}(n.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(n.weight),i=function(s){return typeof Eu[s=s||"normal"]=="number"?s:"normal"}(n.stretch);return{family:e,style:t,weight:r,stretch:i,src:n.src||[],ref:n.ref||{name:e,style:[i,t,r].join(" ")}}}function ef(n,e,t,r){var i;for(i=t;i>=0&&i<e.length;i+=r)if(n[e[i]])return n[e[i]];for(i=t;i>=0&&i<e.length;i-=r)if(n[e[i]])return n[e[i]]}var yb={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},tf={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function rf(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function wb(n,e,t){for(var r=(t=t||{}).defaultFontFamily||"times",i=Object.assign({},yb,t.genericFontFamilies||{}),s=null,a=null,c=0;c<e.length;++c)if(i[(s=Tu(e[c])).family]&&(s.family=i[s.family]),n.hasOwnProperty(s.family)){a=n[s.family];break}if(!(a=a||n[r]))throw new Error("Could not find a font-family for the rule '"+rf(s)+"' and default family '"+r+"'.");if(a=function(l,f){if(f[l])return f[l];var p=Eu[l],m=p<=Eu.normal?-1:1,y=ef(f,Vp,p,m);if(!y)throw new Error("Could not find a matching font-stretch value for "+l);return y}(s.stretch,a),a=function(l,f){if(f[l])return f[l];for(var p=Wp[l],m=0;m<p.length;++m)if(f[p[m]])return f[p[m]];throw new Error("Could not find a matching font-style for "+l)}(s.style,a),!(a=function(l,f){if(f[l])return f[l];if(l===400&&f[500])return f[500];if(l===500&&f[400])return f[400];var p=bb[l],m=ef(f,Hp,p,l<400?-1:1);if(!m)throw new Error("Could not find a matching font-weight for value "+l);return m}(s.weight,a)))throw new Error("Failed to resolve a font for the rule '"+rf(s)+"'.");return a}function nf(n){return n.trimLeft()}function xb(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function _b(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var Sl,sf,af,ru=["times"];(function(n){var e,t,r,i,s,a,c,l,f,p=function(j){return j=j||{},this.isStrokeTransparent=j.isStrokeTransparent||!1,this.strokeOpacity=j.strokeOpacity||1,this.strokeStyle=j.strokeStyle||"#000000",this.fillStyle=j.fillStyle||"#000000",this.isFillTransparent=j.isFillTransparent||!1,this.fillOpacity=j.fillOpacity||1,this.font=j.font||"10px sans-serif",this.textBaseline=j.textBaseline||"alphabetic",this.textAlign=j.textAlign||"left",this.lineWidth=j.lineWidth||1,this.lineJoin=j.lineJoin||"miter",this.lineCap=j.lineCap||"butt",this.path=j.path||[],this.transform=j.transform!==void 0?j.transform.clone():new l,this.globalCompositeOperation=j.globalCompositeOperation||"normal",this.globalAlpha=j.globalAlpha||1,this.clip_path=j.clip_path||[],this.currentPoint=j.currentPoint||new a,this.miterLimit=j.miterLimit||10,this.lastPoint=j.lastPoint||new a,this.lineDashOffset=j.lineDashOffset||0,this.lineDash=j.lineDash||[],this.margin=j.margin||[0,0,0,0],this.prevPageLastElemOffset=j.prevPageLastElemOffset||0,this.ignoreClearRect=typeof j.ignoreClearRect!="boolean"||j.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new m(this),e=this.internal.f2,t=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,a=this.internal.Point,c=this.internal.Rectangle,l=this.internal.Matrix,f=new p}]);var m=function(j){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var D=j;Object.defineProperty(this,"pdf",{get:function(){return D}});var U=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return U},set:function(ye){U=!!ye}});var W=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return W},set:function(ye){W=!!ye}});var Z=0;Object.defineProperty(this,"posX",{get:function(){return Z},set:function(ye){isNaN(ye)||(Z=ye)}});var ie=0;Object.defineProperty(this,"posY",{get:function(){return ie},set:function(ye){isNaN(ye)||(ie=ye)}}),Object.defineProperty(this,"margin",{get:function(){return f.margin},set:function(ye){var M;typeof ye=="number"?M=[ye,ye,ye,ye]:((M=new Array(4))[0]=ye[0],M[1]=ye.length>=2?ye[1]:M[0],M[2]=ye.length>=3?ye[2]:M[0],M[3]=ye.length>=4?ye[3]:M[1]),f.margin=M}});var ue=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ue},set:function(ye){ue=ye}});var ae=0;Object.defineProperty(this,"lastBreak",{get:function(){return ae},set:function(ye){ae=ye}});var ke=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ke},set:function(ye){ke=ye}}),Object.defineProperty(this,"ctx",{get:function(){return f},set:function(ye){ye instanceof p&&(f=ye)}}),Object.defineProperty(this,"path",{get:function(){return f.path},set:function(ye){f.path=ye}});var Ae=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ae},set:function(ye){Ae=ye}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ye){var M;M=y(ye),this.ctx.fillStyle=M.style,this.ctx.isFillTransparent=M.a===0,this.ctx.fillOpacity=M.a,this.pdf.setFillColor(M.r,M.g,M.b,{a:M.a}),this.pdf.setTextColor(M.r,M.g,M.b,{a:M.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ye){var M=y(ye);this.ctx.strokeStyle=M.style,this.ctx.isStrokeTransparent=M.a===0,this.ctx.strokeOpacity=M.a,M.a===0?this.pdf.setDrawColor(255,255,255):(M.a,this.pdf.setDrawColor(M.r,M.g,M.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ye){["butt","round","square"].indexOf(ye)!==-1&&(this.ctx.lineCap=ye,this.pdf.setLineCap(ye))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ye){isNaN(ye)||(this.ctx.lineWidth=ye,this.pdf.setLineWidth(ye))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ye){["bevel","round","miter"].indexOf(ye)!==-1&&(this.ctx.lineJoin=ye,this.pdf.setLineJoin(ye))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ye){isNaN(ye)||(this.ctx.miterLimit=ye,this.pdf.setMiterLimit(ye))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ye){this.ctx.textBaseline=ye}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ye){["right","end","center","left","start"].indexOf(ye)!==-1&&(this.ctx.textAlign=ye)}});var Ee=null;function Ne(ye,M){if(Ee===null){var et=function(qe){var Ie=[];return Object.keys(qe).forEach(function(Te){qe[Te].forEach(function(Fe){var Re=null;switch(Fe){case"bold":Re={family:Te,weight:"bold"};break;case"italic":Re={family:Te,style:"italic"};break;case"bolditalic":Re={family:Te,weight:"bold",style:"italic"};break;case"":case"normal":Re={family:Te}}Re!==null&&(Re.ref={name:Te,style:Fe},Ie.push(Re))})}),Ie}(ye.getFontList());Ee=function(qe){for(var Ie={},Te=0;Te<qe.length;++Te){var Fe=Tu(qe[Te]),Re=Fe.family,Ve=Fe.stretch,tt=Fe.style,st=Fe.weight;Ie[Re]=Ie[Re]||{},Ie[Re][Ve]=Ie[Re][Ve]||{},Ie[Re][Ve][tt]=Ie[Re][Ve][tt]||{},Ie[Re][Ve][tt][st]=Fe}return Ie}(et.concat(M))}return Ee}var Ke=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ke},set:function(ye){Ee=null,Ke=ye}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ye){var M;if(this.ctx.font=ye,(M=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ye))!==null){var et=M[1];M[2];var qe=M[3],Ie=M[4];M[5];var Te=M[6],Fe=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ie)[2];Ie=Math.floor(Fe==="px"?parseFloat(Ie)*this.pdf.internal.scaleFactor:Fe==="em"?parseFloat(Ie)*this.pdf.getFontSize():parseFloat(Ie)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ie);var Re=function(Ge){var ut,De,er=[],wt=Ge.trim();if(wt==="")return ru;if(wt in tf)return[tf[wt]];for(;wt!=="";){switch(De=null,ut=(wt=nf(wt)).charAt(0)){case'"':case"'":De=xb(wt.substring(1),ut);break;default:De=_b(wt)}if(De===null||(er.push(De[0]),(wt=nf(De[1]))!==""&&wt.charAt(0)!==","))return ru;wt=wt.replace(/^,/,"")}return er}(Te);if(this.fontFaces){var Ve=wb(Ne(this.pdf,this.fontFaces),Re.map(function(Ge){return{family:Ge,stretch:"normal",weight:qe,style:et}}));this.pdf.setFont(Ve.ref.name,Ve.ref.style)}else{var tt="";(qe==="bold"||parseInt(qe,10)>=700||et==="bold")&&(tt="bold"),et==="italic"&&(tt+="italic"),tt.length===0&&(tt="normal");for(var st="",ct={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},mt=0;mt<Re.length;mt++){if(this.pdf.internal.getFont(Re[mt],tt,{noFallback:!0,disableWarning:!0})!==void 0){st=Re[mt];break}if(tt==="bolditalic"&&this.pdf.internal.getFont(Re[mt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)st=Re[mt],tt="bold";else if(this.pdf.internal.getFont(Re[mt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){st=Re[mt],tt="normal";break}}if(st===""){for(var yt=0;yt<Re.length;yt++)if(ct[Re[yt]]){st=ct[Re[yt]];break}}st=st===""?"Times":st,this.pdf.setFont(st,tt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ye){this.ctx.globalCompositeOperation=ye}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ye){this.ctx.globalAlpha=ye}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ye){this.ctx.lineDashOffset=ye,Le.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ye){this.ctx.lineDash=ye,Le.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ye){this.ctx.ignoreClearRect=!!ye}})};m.prototype.setLineDash=function(j){this.lineDash=j},m.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},m.prototype.fill=function(){J.call(this,"fill",!1)},m.prototype.stroke=function(){J.call(this,"stroke",!1)},m.prototype.beginPath=function(){this.path=[{type:"begin"}]},m.prototype.moveTo=function(j,D){if(isNaN(j)||isNaN(D))throw Mt.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var U=this.ctx.transform.applyToPoint(new a(j,D));this.path.push({type:"mt",x:U.x,y:U.y}),this.ctx.lastPoint=new a(j,D)},m.prototype.closePath=function(){var j=new a(0,0),D=0;for(D=this.path.length-1;D!==-1;D--)if(this.path[D].type==="begin"&&Bt(this.path[D+1])==="object"&&typeof this.path[D+1].x=="number"){j=new a(this.path[D+1].x,this.path[D+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(j.x,j.y)},m.prototype.lineTo=function(j,D){if(isNaN(j)||isNaN(D))throw Mt.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var U=this.ctx.transform.applyToPoint(new a(j,D));this.path.push({type:"lt",x:U.x,y:U.y}),this.ctx.lastPoint=new a(U.x,U.y)},m.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),J.call(this,null,!0)},m.prototype.quadraticCurveTo=function(j,D,U,W){if(isNaN(U)||isNaN(W)||isNaN(j)||isNaN(D))throw Mt.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Z=this.ctx.transform.applyToPoint(new a(U,W)),ie=this.ctx.transform.applyToPoint(new a(j,D));this.path.push({type:"qct",x1:ie.x,y1:ie.y,x:Z.x,y:Z.y}),this.ctx.lastPoint=new a(Z.x,Z.y)},m.prototype.bezierCurveTo=function(j,D,U,W,Z,ie){if(isNaN(Z)||isNaN(ie)||isNaN(j)||isNaN(D)||isNaN(U)||isNaN(W))throw Mt.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ue=this.ctx.transform.applyToPoint(new a(Z,ie)),ae=this.ctx.transform.applyToPoint(new a(j,D)),ke=this.ctx.transform.applyToPoint(new a(U,W));this.path.push({type:"bct",x1:ae.x,y1:ae.y,x2:ke.x,y2:ke.y,x:ue.x,y:ue.y}),this.ctx.lastPoint=new a(ue.x,ue.y)},m.prototype.arc=function(j,D,U,W,Z,ie){if(isNaN(j)||isNaN(D)||isNaN(U)||isNaN(W)||isNaN(Z))throw Mt.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ie=!!ie,!this.ctx.transform.isIdentity){var ue=this.ctx.transform.applyToPoint(new a(j,D));j=ue.x,D=ue.y;var ae=this.ctx.transform.applyToPoint(new a(0,U)),ke=this.ctx.transform.applyToPoint(new a(0,0));U=Math.sqrt(Math.pow(ae.x-ke.x,2)+Math.pow(ae.y-ke.y,2))}Math.abs(Z-W)>=2*Math.PI&&(W=0,Z=2*Math.PI),this.path.push({type:"arc",x:j,y:D,radius:U,startAngle:W,endAngle:Z,counterclockwise:ie})},m.prototype.arcTo=function(j,D,U,W,Z){throw new Error("arcTo not implemented.")},m.prototype.rect=function(j,D,U,W){if(isNaN(j)||isNaN(D)||isNaN(U)||isNaN(W))throw Mt.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(j,D),this.lineTo(j+U,D),this.lineTo(j+U,D+W),this.lineTo(j,D+W),this.lineTo(j,D),this.lineTo(j+U,D),this.lineTo(j,D)},m.prototype.fillRect=function(j,D,U,W){if(isNaN(j)||isNaN(D)||isNaN(U)||isNaN(W))throw Mt.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!v.call(this)){var Z={};this.lineCap!=="butt"&&(Z.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Z.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(j,D,U,W),this.fill(),Z.hasOwnProperty("lineCap")&&(this.lineCap=Z.lineCap),Z.hasOwnProperty("lineJoin")&&(this.lineJoin=Z.lineJoin)}},m.prototype.strokeRect=function(j,D,U,W){if(isNaN(j)||isNaN(D)||isNaN(U)||isNaN(W))throw Mt.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");k.call(this)||(this.beginPath(),this.rect(j,D,U,W),this.stroke())},m.prototype.clearRect=function(j,D,U,W){if(isNaN(j)||isNaN(D)||isNaN(U)||isNaN(W))throw Mt.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(j,D,U,W))},m.prototype.save=function(j){j=typeof j!="boolean"||j;for(var D=this.pdf.internal.getCurrentPageInfo().pageNumber,U=0;U<this.pdf.internal.getNumberOfPages();U++)this.pdf.setPage(U+1),this.pdf.internal.out("q");if(this.pdf.setPage(D),j){this.ctx.fontSize=this.pdf.internal.getFontSize();var W=new p(this.ctx);this.ctxStack.push(this.ctx),this.ctx=W}},m.prototype.restore=function(j){j=typeof j!="boolean"||j;for(var D=this.pdf.internal.getCurrentPageInfo().pageNumber,U=0;U<this.pdf.internal.getNumberOfPages();U++)this.pdf.setPage(U+1),this.pdf.internal.out("Q");this.pdf.setPage(D),j&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},m.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var y=function(j){var D,U,W,Z;if(j.isCanvasGradient===!0&&(j=j.getColor()),!j)return{r:0,g:0,b:0,a:0,style:j};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(j))D=0,U=0,W=0,Z=0;else{var ie=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(j);if(ie!==null)D=parseInt(ie[1]),U=parseInt(ie[2]),W=parseInt(ie[3]),Z=1;else if((ie=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(j))!==null)D=parseInt(ie[1]),U=parseInt(ie[2]),W=parseInt(ie[3]),Z=parseFloat(ie[4]);else{if(Z=1,typeof j=="string"&&j.charAt(0)!=="#"){var ue=new Dp(j);j=ue.ok?ue.toHex():"#000000"}j.length===4?(D=j.substring(1,2),D+=D,U=j.substring(2,3),U+=U,W=j.substring(3,4),W+=W):(D=j.substring(1,3),U=j.substring(3,5),W=j.substring(5,7)),D=parseInt(D,16),U=parseInt(U,16),W=parseInt(W,16)}}return{r:D,g:U,b:W,a:Z,style:j}},v=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},k=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};m.prototype.fillText=function(j,D,U,W){if(isNaN(D)||isNaN(U)||typeof j!="string")throw Mt.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(W=isNaN(W)?void 0:W,!v.call(this)){var Z=ne(this.ctx.transform.rotation),ie=this.ctx.transform.scaleX;T.call(this,{text:j,x:D,y:U,scale:ie,angle:Z,align:this.textAlign,maxWidth:W})}},m.prototype.strokeText=function(j,D,U,W){if(isNaN(D)||isNaN(U)||typeof j!="string")throw Mt.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!k.call(this)){W=isNaN(W)?void 0:W;var Z=ne(this.ctx.transform.rotation),ie=this.ctx.transform.scaleX;T.call(this,{text:j,x:D,y:U,scale:ie,renderingMode:"stroke",angle:Z,align:this.textAlign,maxWidth:W})}},m.prototype.measureText=function(j){if(typeof j!="string")throw Mt.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var D=this.pdf,U=this.pdf.internal.scaleFactor,W=D.internal.getFontSize(),Z=D.getStringUnitWidth(j)*W/D.internal.scaleFactor,ie=function(ue){var ae=(ue=ue||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ae}}),this};return new ie({width:Z*=Math.round(96*U/72*1e4)/1e4})},m.prototype.scale=function(j,D){if(isNaN(j)||isNaN(D))throw Mt.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var U=new l(j,0,0,D,0,0);this.ctx.transform=this.ctx.transform.multiply(U)},m.prototype.rotate=function(j){if(isNaN(j))throw Mt.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var D=new l(Math.cos(j),Math.sin(j),-Math.sin(j),Math.cos(j),0,0);this.ctx.transform=this.ctx.transform.multiply(D)},m.prototype.translate=function(j,D){if(isNaN(j)||isNaN(D))throw Mt.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var U=new l(1,0,0,1,j,D);this.ctx.transform=this.ctx.transform.multiply(U)},m.prototype.transform=function(j,D,U,W,Z,ie){if(isNaN(j)||isNaN(D)||isNaN(U)||isNaN(W)||isNaN(Z)||isNaN(ie))throw Mt.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ue=new l(j,D,U,W,Z,ie);this.ctx.transform=this.ctx.transform.multiply(ue)},m.prototype.setTransform=function(j,D,U,W,Z,ie){j=isNaN(j)?1:j,D=isNaN(D)?0:D,U=isNaN(U)?0:U,W=isNaN(W)?1:W,Z=isNaN(Z)?0:Z,ie=isNaN(ie)?0:ie,this.ctx.transform=new l(j,D,U,W,Z,ie)};var S=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};m.prototype.drawImage=function(j,D,U,W,Z,ie,ue,ae,ke){var Ae=this.pdf.getImageProperties(j),Ee=1,Ne=1,Ke=1,ye=1;W!==void 0&&ae!==void 0&&(Ke=ae/W,ye=ke/Z,Ee=Ae.width/W*ae/W,Ne=Ae.height/Z*ke/Z),ie===void 0&&(ie=D,ue=U,D=0,U=0),W!==void 0&&ae===void 0&&(ae=W,ke=Z),W===void 0&&ae===void 0&&(ae=Ae.width,ke=Ae.height);for(var M,et=this.ctx.transform.decompose(),qe=ne(et.rotate.shx),Ie=new l,Te=(Ie=(Ie=(Ie=Ie.multiply(et.translate)).multiply(et.skew)).multiply(et.scale)).applyToRectangle(new c(ie-D*Ke,ue-U*ye,W*Ee,Z*Ne)),Fe=P.call(this,Te),Re=[],Ve=0;Ve<Fe.length;Ve+=1)Re.indexOf(Fe[Ve])===-1&&Re.push(Fe[Ve]);if(R(Re),this.autoPaging)for(var tt=Re[0],st=Re[Re.length-1],ct=tt;ct<st+1;ct++){this.pdf.setPage(ct);var mt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],yt=ct===1?this.posY+this.margin[0]:this.margin[0],Ge=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ut=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],De=ct===1?0:Ge+(ct-2)*ut;if(this.ctx.clip_path.length!==0){var er=this.path;M=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=L(M,this.posX+this.margin[3],-De+yt+this.ctx.prevPageLastElemOffset),te.call(this,"fill",!0),this.path=er}var wt=JSON.parse(JSON.stringify(Te));wt=L([wt],this.posX+this.margin[3],-De+yt+this.ctx.prevPageLastElemOffset)[0];var Lr=(ct>tt||ct<st)&&S.call(this);Lr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],mt,ut,null).clip().discardPath()),this.pdf.addImage(j,"JPEG",wt.x,wt.y,wt.w,wt.h,null,null,qe),Lr&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(j,"JPEG",Te.x,Te.y,Te.w,Te.h,null,null,qe)};var P=function(j,D,U){var W=[];D=D||this.pdf.internal.pageSize.width,U=U||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Z=this.posY+this.ctx.prevPageLastElemOffset;switch(j.type){default:case"mt":case"lt":W.push(Math.floor((j.y+Z)/U)+1);break;case"arc":W.push(Math.floor((j.y+Z-j.radius)/U)+1),W.push(Math.floor((j.y+Z+j.radius)/U)+1);break;case"qct":var ie=ge(this.ctx.lastPoint.x,this.ctx.lastPoint.y,j.x1,j.y1,j.x,j.y);W.push(Math.floor((ie.y+Z)/U)+1),W.push(Math.floor((ie.y+ie.h+Z)/U)+1);break;case"bct":var ue=ve(this.ctx.lastPoint.x,this.ctx.lastPoint.y,j.x1,j.y1,j.x2,j.y2,j.x,j.y);W.push(Math.floor((ue.y+Z)/U)+1),W.push(Math.floor((ue.y+ue.h+Z)/U)+1);break;case"rect":W.push(Math.floor((j.y+Z)/U)+1),W.push(Math.floor((j.y+j.h+Z)/U)+1)}for(var ae=0;ae<W.length;ae+=1)for(;this.pdf.internal.getNumberOfPages()<W[ae];)w.call(this);return W},w=function(){var j=this.fillStyle,D=this.strokeStyle,U=this.font,W=this.lineCap,Z=this.lineWidth,ie=this.lineJoin;this.pdf.addPage(),this.fillStyle=j,this.strokeStyle=D,this.font=U,this.lineCap=W,this.lineWidth=Z,this.lineJoin=ie},L=function(j,D,U){for(var W=0;W<j.length;W++)switch(j[W].type){case"bct":j[W].x2+=D,j[W].y2+=U;case"qct":j[W].x1+=D,j[W].y1+=U;case"mt":case"lt":case"arc":default:j[W].x+=D,j[W].y+=U}return j},R=function(j){return j.sort(function(D,U){return D-U})},J=function(j,D){for(var U,W,Z=this.fillStyle,ie=this.strokeStyle,ue=this.lineCap,ae=this.lineWidth,ke=Math.abs(ae*this.ctx.transform.scaleX),Ae=this.lineJoin,Ee=JSON.parse(JSON.stringify(this.path)),Ne=JSON.parse(JSON.stringify(this.path)),Ke=[],ye=0;ye<Ne.length;ye++)if(Ne[ye].x!==void 0)for(var M=P.call(this,Ne[ye]),et=0;et<M.length;et+=1)Ke.indexOf(M[et])===-1&&Ke.push(M[et]);for(var qe=0;qe<Ke.length;qe++)for(;this.pdf.internal.getNumberOfPages()<Ke[qe];)w.call(this);if(R(Ke),this.autoPaging)for(var Ie=Ke[0],Te=Ke[Ke.length-1],Fe=Ie;Fe<Te+1;Fe++){this.pdf.setPage(Fe),this.fillStyle=Z,this.strokeStyle=ie,this.lineCap=ue,this.lineWidth=ke,this.lineJoin=Ae;var Re=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ve=Fe===1?this.posY+this.margin[0]:this.margin[0],tt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],st=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ct=Fe===1?0:tt+(Fe-2)*st;if(this.ctx.clip_path.length!==0){var mt=this.path;U=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=L(U,this.posX+this.margin[3],-ct+Ve+this.ctx.prevPageLastElemOffset),te.call(this,j,!0),this.path=mt}if(W=JSON.parse(JSON.stringify(Ee)),this.path=L(W,this.posX+this.margin[3],-ct+Ve+this.ctx.prevPageLastElemOffset),D===!1||Fe===0){var yt=(Fe>Ie||Fe<Te)&&S.call(this);yt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Re,st,null).clip().discardPath()),te.call(this,j,D),yt&&this.pdf.restoreGraphicsState()}this.lineWidth=ae}else this.lineWidth=ke,te.call(this,j,D),this.lineWidth=ae;this.path=Ee},te=function(j,D){if((j!=="stroke"||D||!k.call(this))&&(j==="stroke"||D||!v.call(this))){for(var U,W,Z=[],ie=this.path,ue=0;ue<ie.length;ue++){var ae=ie[ue];switch(ae.type){case"begin":Z.push({begin:!0});break;case"close":Z.push({close:!0});break;case"mt":Z.push({start:ae,deltas:[],abs:[]});break;case"lt":var ke=Z.length;if(ie[ue-1]&&!isNaN(ie[ue-1].x)&&(U=[ae.x-ie[ue-1].x,ae.y-ie[ue-1].y],ke>0)){for(;ke>=0;ke--)if(Z[ke-1].close!==!0&&Z[ke-1].begin!==!0){Z[ke-1].deltas.push(U),Z[ke-1].abs.push(ae);break}}break;case"bct":U=[ae.x1-ie[ue-1].x,ae.y1-ie[ue-1].y,ae.x2-ie[ue-1].x,ae.y2-ie[ue-1].y,ae.x-ie[ue-1].x,ae.y-ie[ue-1].y],Z[Z.length-1].deltas.push(U);break;case"qct":var Ae=ie[ue-1].x+2/3*(ae.x1-ie[ue-1].x),Ee=ie[ue-1].y+2/3*(ae.y1-ie[ue-1].y),Ne=ae.x+2/3*(ae.x1-ae.x),Ke=ae.y+2/3*(ae.y1-ae.y),ye=ae.x,M=ae.y;U=[Ae-ie[ue-1].x,Ee-ie[ue-1].y,Ne-ie[ue-1].x,Ke-ie[ue-1].y,ye-ie[ue-1].x,M-ie[ue-1].y],Z[Z.length-1].deltas.push(U);break;case"arc":Z.push({deltas:[],abs:[],arc:!0}),Array.isArray(Z[Z.length-1].abs)&&Z[Z.length-1].abs.push(ae)}}W=D?null:j==="stroke"?"stroke":"fill";for(var et=!1,qe=0;qe<Z.length;qe++)if(Z[qe].arc)for(var Ie=Z[qe].abs,Te=0;Te<Ie.length;Te++){var Fe=Ie[Te];Fe.type==="arc"?$.call(this,Fe.x,Fe.y,Fe.radius,Fe.startAngle,Fe.endAngle,Fe.counterclockwise,void 0,D,!et):z.call(this,Fe.x,Fe.y),et=!0}else if(Z[qe].close===!0)this.pdf.internal.out("h"),et=!1;else if(Z[qe].begin!==!0){var Re=Z[qe].start.x,Ve=Z[qe].start.y;q.call(this,Z[qe].deltas,Re,Ve),et=!0}W&&H.call(this,W),D&&Y.call(this)}},he=function(j){var D=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,U=D*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return j-U;case"top":return j+D-U;case"hanging":return j+D-2*U;case"middle":return j+D/2-U;case"ideographic":return j;case"alphabetic":default:return j}},Q=function(j){return j+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};m.prototype.createLinearGradient=function(){var j=function(){};return j.colorStops=[],j.addColorStop=function(D,U){this.colorStops.push([D,U])},j.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},j.isCanvasGradient=!0,j},m.prototype.createPattern=function(){return this.createLinearGradient()},m.prototype.createRadialGradient=function(){return this.createLinearGradient()};var $=function(j,D,U,W,Z,ie,ue,ae,ke){for(var Ae=ce.call(this,U,W,Z,ie),Ee=0;Ee<Ae.length;Ee++){var Ne=Ae[Ee];Ee===0&&(ke?N.call(this,Ne.x1+j,Ne.y1+D):z.call(this,Ne.x1+j,Ne.y1+D)),de.call(this,j,D,Ne.x2,Ne.y2,Ne.x3,Ne.y3,Ne.x4,Ne.y4)}ae?Y.call(this):H.call(this,ue)},H=function(j){switch(j){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Y=function(){this.pdf.clip(),this.pdf.discardPath()},N=function(j,D){this.pdf.internal.out(t(j)+" "+r(D)+" m")},T=function(j){var D;switch(j.align){case"right":case"end":D="right";break;case"center":D="center";break;case"left":case"start":default:D="left"}var U=this.pdf.getTextDimensions(j.text),W=he.call(this,j.y),Z=Q.call(this,W)-U.h,ie=this.ctx.transform.applyToPoint(new a(j.x,W)),ue=this.ctx.transform.decompose(),ae=new l;ae=(ae=(ae=ae.multiply(ue.translate)).multiply(ue.skew)).multiply(ue.scale);for(var ke,Ae,Ee,Ne=this.ctx.transform.applyToRectangle(new c(j.x,W,U.w,U.h)),Ke=ae.applyToRectangle(new c(j.x,Z,U.w,U.h)),ye=P.call(this,Ke),M=[],et=0;et<ye.length;et+=1)M.indexOf(ye[et])===-1&&M.push(ye[et]);if(R(M),this.autoPaging)for(var qe=M[0],Ie=M[M.length-1],Te=qe;Te<Ie+1;Te++){this.pdf.setPage(Te);var Fe=Te===1?this.posY+this.margin[0]:this.margin[0],Re=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ve=this.pdf.internal.pageSize.height-this.margin[2],tt=Ve-this.margin[0],st=this.pdf.internal.pageSize.width-this.margin[1],ct=st-this.margin[3],mt=Te===1?0:Re+(Te-2)*tt;if(this.ctx.clip_path.length!==0){var yt=this.path;ke=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=L(ke,this.posX+this.margin[3],-1*mt+Fe),te.call(this,"fill",!0),this.path=yt}var Ge=L([JSON.parse(JSON.stringify(Ke))],this.posX+this.margin[3],-mt+Fe+this.ctx.prevPageLastElemOffset)[0];j.scale>=.01&&(Ae=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ae*j.scale),Ee=this.lineWidth,this.lineWidth=Ee*j.scale);var ut=this.autoPaging!=="text";if(ut||Ge.y+Ge.h<=Ve){if(ut||Ge.y>=Fe&&Ge.x<=st){var De=ut?j.text:this.pdf.splitTextToSize(j.text,j.maxWidth||st-Ge.x)[0],er=L([JSON.parse(JSON.stringify(Ne))],this.posX+this.margin[3],-mt+Fe+this.ctx.prevPageLastElemOffset)[0],wt=ut&&(Te>qe||Te<Ie)&&S.call(this);wt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ct,tt,null).clip().discardPath()),this.pdf.text(De,er.x,er.y,{angle:j.angle,align:D,renderingMode:j.renderingMode}),wt&&this.pdf.restoreGraphicsState()}}else Ge.y<Ve&&(this.ctx.prevPageLastElemOffset+=Ve-Ge.y);j.scale>=.01&&(this.pdf.setFontSize(Ae),this.lineWidth=Ee)}else j.scale>=.01&&(Ae=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ae*j.scale),Ee=this.lineWidth,this.lineWidth=Ee*j.scale),this.pdf.text(j.text,ie.x+this.posX,ie.y+this.posY,{angle:j.angle,align:D,renderingMode:j.renderingMode,maxWidth:j.maxWidth}),j.scale>=.01&&(this.pdf.setFontSize(Ae),this.lineWidth=Ee)},z=function(j,D,U,W){U=U||0,W=W||0,this.pdf.internal.out(t(j+U)+" "+r(D+W)+" l")},q=function(j,D,U){return this.pdf.lines(j,D,U,null,null)},de=function(j,D,U,W,Z,ie,ue,ae){this.pdf.internal.out([e(i(U+j)),e(s(W+D)),e(i(Z+j)),e(s(ie+D)),e(i(ue+j)),e(s(ae+D)),"c"].join(" "))},ce=function(j,D,U,W){for(var Z=2*Math.PI,ie=Math.PI/2;D>U;)D-=Z;var ue=Math.abs(U-D);ue<Z&&W&&(ue=Z-ue);for(var ae=[],ke=W?-1:1,Ae=D;ue>1e-5;){var Ee=Ae+ke*Math.min(ue,ie);ae.push(me.call(this,j,Ae,Ee)),ue-=Math.abs(Ee-Ae),Ae=Ee}return ae},me=function(j,D,U){var W=(U-D)/2,Z=j*Math.cos(W),ie=j*Math.sin(W),ue=Z,ae=-ie,ke=ue*ue+ae*ae,Ae=ke+ue*Z+ae*ie,Ee=4/3*(Math.sqrt(2*ke*Ae)-Ae)/(ue*ie-ae*Z),Ne=ue-Ee*ae,Ke=ae+Ee*ue,ye=Ne,M=-Ke,et=W+D,qe=Math.cos(et),Ie=Math.sin(et);return{x1:j*Math.cos(D),y1:j*Math.sin(D),x2:Ne*qe-Ke*Ie,y2:Ne*Ie+Ke*qe,x3:ye*qe-M*Ie,y3:ye*Ie+M*qe,x4:j*Math.cos(U),y4:j*Math.sin(U)}},ne=function(j){return 180*j/Math.PI},ge=function(j,D,U,W,Z,ie){var ue=j+.5*(U-j),ae=D+.5*(W-D),ke=Z+.5*(U-Z),Ae=ie+.5*(W-ie),Ee=Math.min(j,Z,ue,ke),Ne=Math.max(j,Z,ue,ke),Ke=Math.min(D,ie,ae,Ae),ye=Math.max(D,ie,ae,Ae);return new c(Ee,Ke,Ne-Ee,ye-Ke)},ve=function(j,D,U,W,Z,ie,ue,ae){var ke,Ae,Ee,Ne,Ke,ye,M,et,qe,Ie,Te,Fe,Re,Ve,tt=U-j,st=W-D,ct=Z-U,mt=ie-W,yt=ue-Z,Ge=ae-ie;for(Ae=0;Ae<41;Ae++)qe=(M=(Ee=j+(ke=Ae/40)*tt)+ke*((Ke=U+ke*ct)-Ee))+ke*(Ke+ke*(Z+ke*yt-Ke)-M),Ie=(et=(Ne=D+ke*st)+ke*((ye=W+ke*mt)-Ne))+ke*(ye+ke*(ie+ke*Ge-ye)-et),Ae==0?(Te=qe,Fe=Ie,Re=qe,Ve=Ie):(Te=Math.min(Te,qe),Fe=Math.min(Fe,Ie),Re=Math.max(Re,qe),Ve=Math.max(Ve,Ie));return new c(Math.round(Te),Math.round(Fe),Math.round(Re-Te),Math.round(Ve-Fe))},Le=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var j,D,U=(j=this.ctx.lineDash,D=this.ctx.lineDashOffset,JSON.stringify({lineDash:j,lineDashOffset:D}));this.prevLineDash!==U&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=U)}}})(rt.API),function(n){var e=function(s){var a,c,l,f,p,m,y,v,k,S;for(c=[],l=0,f=(s+=a="\0\0\0\0".slice(s.length%4||4)).length;f>l;l+=4)(p=(s.charCodeAt(l)<<24)+(s.charCodeAt(l+1)<<16)+(s.charCodeAt(l+2)<<8)+s.charCodeAt(l+3))!==0?(m=(p=((p=((p=((p=(p-(S=p%85))/85)-(k=p%85))/85)-(v=p%85))/85)-(y=p%85))/85)%85,c.push(m+33,y+33,v+33,k+33,S+33)):c.push(122);return function(P,w){for(var L=w;L>0;L--)P.pop()}(c,a.length),String.fromCharCode.apply(String,c)+"~>"},t=function(s){var a,c,l,f,p,m=String,y="length",v=255,k="charCodeAt",S="slice",P="replace";for(s[S](-2),s=s[S](0,-2)[P](/\s/g,"")[P]("z","!!!!!"),l=[],f=0,p=(s+=a="uuuuu"[S](s[y]%5||5))[y];p>f;f+=5)c=52200625*(s[k](f)-33)+614125*(s[k](f+1)-33)+7225*(s[k](f+2)-33)+85*(s[k](f+3)-33)+(s[k](f+4)-33),l.push(v&c>>24,v&c>>16,v&c>>8,v&c);return function(w,L){for(var R=L;R>0;R--)w.pop()}(l,a[y]),m.fromCharCode.apply(m,l)},r=function(s){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),a.test(s)===!1)return"";for(var c="",l=0;l<s.length;l+=2)c+=String.fromCharCode("0x"+(s[l]+s[l+1]));return c},i=function(s){for(var a=new Uint8Array(s.length),c=s.length;c--;)a[c]=s.charCodeAt(c);return s=(a=Cu(a)).reduce(function(l,f){return l+String.fromCharCode(f)},"")};n.processDataByFilters=function(s,a){var c=0,l=s||"",f=[];for(typeof(a=a||[])=="string"&&(a=[a]),c=0;c<a.length;c+=1)switch(a[c]){case"ASCII85Decode":case"/ASCII85Decode":l=t(l),f.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),f.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=r(l),f.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(p){return("0"+p.charCodeAt().toString(16)).slice(-2)}).join("")+">",f.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=i(l),f.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[c]+'" is not implemented')}return{data:l,reverseChain:f.reverse().join(" ")}}}(rt.API),function(n){n.loadFile=function(e,t,r){return function(i,s,a){s=s!==!1,a=typeof a=="function"?a:function(){};var c=void 0;try{c=function(l,f,p){var m=new XMLHttpRequest,y=0,v=function(k){var S=k.length,P=[],w=String.fromCharCode;for(y=0;y<S;y+=1)P.push(w(255&k.charCodeAt(y)));return P.join("")};if(m.open("GET",l,!f),m.overrideMimeType("text/plain; charset=x-user-defined"),f===!1&&(m.onload=function(){m.status===200?p(v(this.responseText)):p(void 0)}),m.send(null),f&&m.status===200)return v(m.responseText)}(i,s,a)}catch{}return c}(e,t,r)},n.loadImageFile=n.loadFile}(rt.API),function(n){function e(){return(it.html2canvas?Promise.resolve(it.html2canvas):Ji(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function t(){return(it.DOMPurify?Promise.resolve(it.DOMPurify):Ji(()=>import("./purify.es-Bf0oSh3b.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var r=function(a){var c=Bt(a);return c==="undefined"?"undefined":c==="string"||a instanceof String?"string":c==="number"||a instanceof Number?"number":c==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":c==="object"?"object":"unknown"},i=function(a,c){var l=document.createElement(a);for(var f in c.className&&(l.className=c.className),c.innerHTML&&c.dompurify&&(l.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)l.style[f]=c.style[f];return l},s=function a(c){var l=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),f=a.convert(Promise.resolve(),l);return f=(f=f.setProgress(1,a,1,[a])).set(c)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(a,c){return a.__proto__=c||s.prototype,a},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(a,c){return this.then(function(){switch(c=c||function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(a)){case"string":return this.then(t).then(function(l){return this.set({src:i("div",{innerHTML:a,dompurify:l})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},s.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=function l(f,p){for(var m=f.nodeType===3?document.createTextNode(f.nodeValue):f.cloneNode(!1),y=f.firstChild;y;y=y.nextSibling)p!==!0&&y.nodeType===1&&y.nodeName==="SCRIPT"||m.appendChild(l(y,p));return f.nodeType===1&&(f.nodeName==="CANVAS"?(m.width=f.width,m.height=f.height,m.getContext("2d").drawImage(f,0,0)):f.nodeName!=="TEXTAREA"&&f.nodeName!=="SELECT"||(m.value=f.value),m.addEventListener("load",function(){m.scrollTop=f.scrollTop,m.scrollLeft=f.scrollLeft},!0)),m}(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(c){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,c(this.prop.container,l)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(c){var l=this.opt.jsPDF,f=this.opt.fontFaces,p=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,m=Object.assign({async:!0,allowTaint:!0,scale:p,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete m.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=f,f)for(var y=0;y<f.length;++y){var v=f[y],k=v.src.find(function(S){return S.format==="truetype"});k&&l.addFont(k.url,v.ref.name,v.ref.style)}return m.windowHeight=m.windowHeight||0,m.windowHeight=m.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):m.windowHeight,l.context2d.save(!0),c(this.prop.container,m)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(a,c,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(a,c):this.outputPdf(a,c)},s.prototype.outputPdf=function(a,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,c)})},s.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},s.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(a){if(r(a)!=="object")return this;var c=Object.keys(a||{}).map(function(l){if(l in s.template.prop)return function(){this.prop[l]=a[l]};switch(l){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[l]=a[l]}}},this);return this.then(function(){return this.thenList(c)})},s.prototype.get=function(a,c){return this.then(function(){var l=a in s.template.prop?this.prop[a]:this.opt[a];return c?c(l):l})},s.prototype.setMargin=function(a){return this.then(function(){switch(r(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},s.prototype.setPageSize=function(a){function c(l,f){return Math.floor(l*f/72*96)}return this.then(function(){(a=a||rt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:c(a.inner.width,a.k),height:c(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},s.prototype.setProgress=function(a,c,l,f){return a!=null&&(this.progress.val=a),c!=null&&(this.progress.state=c),l!=null&&(this.progress.n=l),f!=null&&(this.progress.stack=f),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(a,c,l,f){return this.setProgress(a?this.progress.val+a:null,c||null,l?this.progress.n+l:null,f?this.progress.stack.concat(f):null)},s.prototype.then=function(a,c){var l=this;return this.thenCore(a,c,function(f,p){return l.updateProgress(null,null,1,[f]),Promise.prototype.then.call(this,function(m){return l.updateProgress(null,f),m}).then(f,p).then(function(m){return l.updateProgress(1),m})})},s.prototype.thenCore=function(a,c,l){l=l||Promise.prototype.then,a&&(a=a.bind(this)),c&&(c=c.bind(this));var f=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),p=l.call(f,a,c);return s.convert(p,this.__proto__)},s.prototype.thenExternal=function(a,c){return Promise.prototype.then.call(this,a,c)},s.prototype.thenList=function(a){var c=this;return a.forEach(function(l){c=c.thenCore(l)}),c},s.prototype.catch=function(a){a&&(a=a.bind(this));var c=Promise.prototype.catch.call(this,a);return s.convert(c,this)},s.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},s.prototype.error=function(a){return this.then(function(){throw new Error(a)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,rt.getPageSize=function(a,c,l){if(Bt(a)==="object"){var f=a;a=f.orientation,c=f.unit||c,l=f.format||l}c=c||"mm",l=l||"a4",a=(""+(a||"P")).toLowerCase();var p,m=(""+l).toLowerCase(),y={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":p=1;break;case"mm":p=72/25.4;break;case"cm":p=72/2.54;break;case"in":p=72;break;case"px":p=.75;break;case"pc":case"em":p=12;break;case"ex":p=6;break;default:throw"Invalid unit: "+c}var v,k=0,S=0;if(y.hasOwnProperty(m))k=y[m][1]/p,S=y[m][0]/p;else try{k=l[1],S=l[0]}catch{throw new Error("Invalid format: "+l)}if(a==="p"||a==="portrait")a="p",S>k&&(v=S,S=k,k=v);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",k>S&&(v=S,S=k,k=v)}return{width:S,height:k,unit:c,k:p,orientation:a}},n.html=function(a,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(Tu):null;var l=new s(c);return c.worker?l:l.from(a).doCallback()}}(rt.API),rt.API.addJS=function(n){return af=n,this.internal.events.subscribe("postPutResources",function(){Sl=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Sl+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),sf=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+af+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Sl!==void 0&&sf!==void 0&&this.internal.out("/Names <</JavaScript "+Sl+" 0 R>>")}),this},function(n){var e;n.events.push(["postPutResources",function(){var t=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=t.outline.render().split(/\r\n/),s=0;s<i.length;s++){var a=i[s],c=r.exec(a);if(c!=null){var l=c[1];t.internal.newObjectDeferredBegin(l,!1)}t.internal.write(a)}if(this.outline.createNamedDestinations){var f=this.internal.pages.length,p=[];for(s=0;s<f;s++){var m=t.internal.newObject();p.push(m);var y=t.internal.getPageInfo(s+1);t.internal.write("<< /D["+y.objId+" 0 R /XYZ null null null]>> endobj")}var v=t.internal.newObject();for(t.internal.write("<< /Names [ "),s=0;s<p.length;s++)t.internal.write("(page_"+(s+1)+")"+p[s]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+v+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(r,i,s){var a={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(a),a},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(r){r.id=t.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},t.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},t.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var a=r.children[s];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var c=this.count=this.count_r({count:0},a);if(c>0&&this.line("/Count "+c),a.options&&a.options.pageNumber){var l=t.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var f=0;f<r.children.length;f++)this.renderItems(r.children[f])},t.outline.line=function(r){this.ctx.val+=r+`\r
`},t.outline.makeRef=function(r){return r.id+" 0 R"},t.outline.makeString=function(r){return"("+t.internal.pdfEscape(r)+")"},t.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(rt.API),function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,r,i,s,a,c){var l,f=this.decode.DCT_DECODE,p=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=a||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(l=function(m){for(var y,v=256*m.charCodeAt(4)+m.charCodeAt(5),k=m.length,S={width:0,height:0,numcomponents:1},P=4;P<k;P+=2){if(P+=v,e.indexOf(m.charCodeAt(P+1))!==-1){y=256*m.charCodeAt(P+5)+m.charCodeAt(P+6),S={width:256*m.charCodeAt(P+7)+m.charCodeAt(P+8),height:y,numcomponents:m.charCodeAt(P+9)};break}v=256*m.charCodeAt(P+2)+m.charCodeAt(P+3)}return S}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:c=this.color_spaces.DEVICE_GRAY;break;case 4:c=this.color_spaces.DEVICE_CMYK;break;case 3:c=this.color_spaces.DEVICE_RGB}p={data:t,width:l.width,height:l.height,colorSpace:c,bitsPerComponent:8,filter:f,index:r,alias:i}}return p}}(rt.API);var la,jl,of,lf,cf,Sb=function(){var n,e,t;function r(s){var a,c,l,f,p,m,y,v,k,S,P,w,L,R;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},m=null;;){switch(a=this.readUInt32(),k=(function(){var J,te;for(te=[],J=0;J<4;++J)te.push(String.fromCharCode(this.data[this.pos++]));return te}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(a);break;case"fcTL":m&&this.animation.frames.push(m),this.pos+=4,m={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},p=this.readUInt16(),f=this.readUInt16()||100,m.delay=1e3*p/f,m.disposeOp=this.data[this.pos++],m.blendOp=this.data[this.pos++],m.data=[];break;case"IDAT":case"fdAT":for(k==="fdAT"&&(this.pos+=4,a-=4),s=(m!=null?m.data:void 0)||this.imgData,w=0;0<=a?w<a:w>a;0<=a?++w:--w)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(a),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((S=l-this.transparency.indexed.length)>0)for(L=0;0<=S?L<S:L>S;0<=S?++L:--L)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(a)[0];break;case 2:this.transparency.rgb=this.read(a)}break;case"tEXt":y=(P=this.read(a)).indexOf(0),v=String.fromCharCode.apply(String,P.slice(0,y)),this.text[v]=String.fromCharCode.apply(String,P.slice(y+1));break;case"IEND":return m&&this.animation.frames.push(m),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(R=this.colorType)===4||R===6,c=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*c,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=a}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var a,c;for(c=[],a=0;0<=s?a<s:a>s;0<=s?++a:--a)c.push(this.data[this.pos++]);return c},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var a=this.pixelBitlength/8,c=new Uint8Array(this.width*this.height*a),l=0,f=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function p(m,y,v,k){var S,P,w,L,R,J,te,he,Q,$,H,Y,N,T,z,q,de,ce,me,ne,ge,ve=Math.ceil((f.width-m)/v),Le=Math.ceil((f.height-y)/k),j=f.width==ve&&f.height==Le;for(T=a*ve,Y=j?c:new Uint8Array(T*Le),J=s.length,N=0,P=0;N<Le&&l<J;){switch(s[l++]){case 0:for(L=de=0;de<T;L=de+=1)Y[P++]=s[l++];break;case 1:for(L=ce=0;ce<T;L=ce+=1)S=s[l++],R=L<a?0:Y[P-a],Y[P++]=(S+R)%256;break;case 2:for(L=me=0;me<T;L=me+=1)S=s[l++],w=(L-L%a)/a,z=N&&Y[(N-1)*T+w*a+L%a],Y[P++]=(z+S)%256;break;case 3:for(L=ne=0;ne<T;L=ne+=1)S=s[l++],w=(L-L%a)/a,R=L<a?0:Y[P-a],z=N&&Y[(N-1)*T+w*a+L%a],Y[P++]=(S+Math.floor((R+z)/2))%256;break;case 4:for(L=ge=0;ge<T;L=ge+=1)S=s[l++],w=(L-L%a)/a,R=L<a?0:Y[P-a],N===0?z=q=0:(z=Y[(N-1)*T+w*a+L%a],q=w&&Y[(N-1)*T+(w-1)*a+L%a]),te=R+z-q,he=Math.abs(te-R),$=Math.abs(te-z),H=Math.abs(te-q),Q=he<=$&&he<=H?R:$<=H?z:q,Y[P++]=(S+Q)%256;break;default:throw new Error("Invalid filter algorithm: "+s[l-1])}if(!j){var D=((y+N*k)*f.width+m)*a,U=N*T;for(L=0;L<ve;L+=1){for(var W=0;W<a;W+=1)c[D++]=Y[U++];D+=(v-1)*a}}N++}}return s=tb(s),f.interlaceMethod==1?(p(0,0,8,8),p(4,0,8,8),p(0,4,4,8),p(2,0,4,4),p(0,2,2,4),p(1,0,2,2),p(0,1,1,2)):p(0,0,1,1),c},r.prototype.decodePalette=function(){var s,a,c,l,f,p,m,y,v;for(c=this.palette,p=this.transparency.indexed||[],f=new Uint8Array((p.length||0)+c.length),l=0,s=0,a=m=0,y=c.length;m<y;a=m+=3)f[l++]=c[a],f[l++]=c[a+1],f[l++]=c[a+2],f[l++]=(v=p[s++])!=null?v:255;return f},r.prototype.copyToImageData=function(s,a){var c,l,f,p,m,y,v,k,S,P,w;if(l=this.colors,S=null,c=this.hasAlphaChannel,this.palette.length&&(S=(w=this._decodedPalette)!=null?w:this._decodedPalette=this.decodePalette(),l=4,c=!0),k=(f=s.data||s).length,m=S||a,p=y=0,l===1)for(;p<k;)v=S?4*a[p/4]:y,P=m[v++],f[p++]=P,f[p++]=P,f[p++]=P,f[p++]=c?m[v++]:255,y=v;else for(;p<k;)v=S?4*a[p/4]:y,f[p++]=m[v++],f[p++]=m[v++],f[p++]=m[v++],f[p++]=c?m[v++]:255,y=v},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var i=function(){if(Object.prototype.toString.call(it)==="[object Window]"){try{e=it.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),n=function(s){var a;if(i()===!0)return t.width=s.width,t.height=s.height,t.clearRect(0,0,s.width,s.height),t.putImageData(s,0,0),(a=new Image).src=e.toDataURL(),a;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var a,c,l,f,p,m,y,v;if(this.animation){for(v=[],c=p=0,m=(y=this.animation.frames).length;p<m;c=++p)a=y[c],l=s.createImageData(a.width,a.height),f=this.decodePixels(new Uint8Array(a.data)),this.copyToImageData(l,f),a.imageData=l,v.push(a.image=n(l));return v}},r.prototype.renderFrame=function(s,a){var c,l,f;return c=(l=this.animation.frames)[a],f=l[a-1],a===0&&s.clearRect(0,0,this.width,this.height),(f!=null?f.disposeOp:void 0)===1?s.clearRect(f.xOffset,f.yOffset,f.width,f.height):(f!=null?f.disposeOp:void 0)===2&&s.putImageData(f.imageData,f.xOffset,f.yOffset),c.blendOp===0&&s.clearRect(c.xOffset,c.yOffset,c.width,c.height),s.drawImage(c.image,c.xOffset,c.yOffset)},r.prototype.animate=function(s){var a,c,l,f,p,m,y=this;return c=0,m=this.animation,f=m.numFrames,l=m.frames,p=m.numPlays,(a=function(){var v,k;if(v=c++%f,k=l[v],y.renderFrame(s,v),f>1&&c/f<p)return y.animation._timeout=setTimeout(a,k.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var a,c;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,a=s.getContext("2d"),this.animation?(this.decodeFrames(a),this.animate(a)):(c=a.createImageData(this.width,this.height),this.copyToImageData(c,this.decodePixels()),a.putImageData(c,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function jb(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,r=n[e++]|n[e++]<<8,i=n[e++],s=i>>7,a=1<<(7&i)+1;n[e++],n[e++];var c=null,l=null;s&&(c=e,l=a,e+=3*a);var f=!0,p=[],m=0,y=null,v=0,k=null;for(this.width=t,this.height=r;f&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,k=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((N=n[e++])>=0))throw Error("Invalid block size");if(N===0)break;e+=N}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var S=n[e++];m=n[e++]|n[e++]<<8,y=n[e++],!(1&S)&&(y=null),v=S>>2&7,e++;break;case 254:for(;;){if(!((N=n[e++])>=0))throw Error("Invalid block size");if(N===0)break;e+=N}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var P=n[e++]|n[e++]<<8,w=n[e++]|n[e++]<<8,L=n[e++]|n[e++]<<8,R=n[e++]|n[e++]<<8,J=n[e++],te=J>>6&1,he=1<<(7&J)+1,Q=c,$=l,H=!1;J>>7&&(H=!0,Q=e,$=he,e+=3*he);var Y=e;for(e++;;){var N;if(!((N=n[e++])>=0))throw Error("Invalid block size");if(N===0)break;e+=N}p.push({x:P,y:w,width:L,height:R,has_local_palette:H,palette_offset:Q,palette_size:$,data_offset:Y,data_length:e-Y,transparent_index:y,interlaced:!!te,delay:m,disposal:v});break;case 59:f=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return p.length},this.loopCount=function(){return k},this.frameInfo=function(T){if(T<0||T>=p.length)throw new Error("Frame index out of range.");return p[T]},this.decodeAndBlitFrameBGRA=function(T,z){var q=this.frameInfo(T),de=q.width*q.height,ce=new Uint8Array(de);uf(n,q.data_offset,ce,de);var me=q.palette_offset,ne=q.transparent_index;ne===null&&(ne=256);var ge=q.width,ve=t-ge,Le=ge,j=4*(q.y*t+q.x),D=4*((q.y+q.height)*t+q.x),U=j,W=4*ve;q.interlaced===!0&&(W+=4*t*7);for(var Z=8,ie=0,ue=ce.length;ie<ue;++ie){var ae=ce[ie];if(Le===0&&(Le=ge,(U+=W)>=D&&(W=4*ve+4*t*(Z-1),U=j+(ge+ve)*(Z<<1),Z>>=1)),ae===ne)U+=4;else{var ke=n[me+3*ae],Ae=n[me+3*ae+1],Ee=n[me+3*ae+2];z[U++]=Ee,z[U++]=Ae,z[U++]=ke,z[U++]=255}--Le}},this.decodeAndBlitFrameRGBA=function(T,z){var q=this.frameInfo(T),de=q.width*q.height,ce=new Uint8Array(de);uf(n,q.data_offset,ce,de);var me=q.palette_offset,ne=q.transparent_index;ne===null&&(ne=256);var ge=q.width,ve=t-ge,Le=ge,j=4*(q.y*t+q.x),D=4*((q.y+q.height)*t+q.x),U=j,W=4*ve;q.interlaced===!0&&(W+=4*t*7);for(var Z=8,ie=0,ue=ce.length;ie<ue;++ie){var ae=ce[ie];if(Le===0&&(Le=ge,(U+=W)>=D&&(W=4*ve+4*t*(Z-1),U=j+(ge+ve)*(Z<<1),Z>>=1)),ae===ne)U+=4;else{var ke=n[me+3*ae],Ae=n[me+3*ae+1],Ee=n[me+3*ae+2];z[U++]=ke,z[U++]=Ae,z[U++]=Ee,z[U++]=255}--Le}}}function uf(n,e,t,r){for(var i=n[e++],s=1<<i,a=s+1,c=a+1,l=i+1,f=(1<<l)-1,p=0,m=0,y=0,v=n[e++],k=new Int32Array(4096),S=null;;){for(;p<16&&v!==0;)m|=n[e++]<<p,p+=8,v===1?v=n[e++]:--v;if(p<l)break;var P=m&f;if(m>>=l,p-=l,P!==s){if(P===a)break;for(var w=P<c?P:S,L=0,R=w;R>s;)R=k[R]>>8,++L;var J=R;if(y+L+(w!==P?1:0)>r)return void Mt.log("Warning, gif stream longer than expected.");t[y++]=J;var te=y+=L;for(w!==P&&(t[y++]=J),R=w;L--;)R=k[R],t[--te]=255&R,R>>=8;S!==null&&c<4096&&(k[c++]=S<<8|J,c>=f+1&&l<12&&(++l,f=f<<1|1)),S=P}else c=a+1,f=(1<<(l=i+1))-1,S=null}return y!==r&&Mt.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function nu(n){var e,t,r,i,s,a=Math.floor,c=new Array(64),l=new Array(64),f=new Array(64),p=new Array(64),m=new Array(65535),y=new Array(65535),v=new Array(64),k=new Array(64),S=[],P=0,w=7,L=new Array(64),R=new Array(64),J=new Array(64),te=new Array(256),he=new Array(2048),Q=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],$=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],H=[0,1,2,3,4,5,6,7,8,9,10,11],Y=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],N=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],T=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],z=[0,1,2,3,4,5,6,7,8,9,10,11],q=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],de=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ce(j,D){for(var U=0,W=0,Z=new Array,ie=1;ie<=16;ie++){for(var ue=1;ue<=j[ie];ue++)Z[D[W]]=[],Z[D[W]][0]=U,Z[D[W]][1]=ie,W++,U++;U*=2}return Z}function me(j){for(var D=j[0],U=j[1]-1;U>=0;)D&1<<U&&(P|=1<<w),U--,--w<0&&(P==255?(ne(255),ne(0)):ne(P),w=7,P=0)}function ne(j){S.push(j)}function ge(j){ne(j>>8&255),ne(255&j)}function ve(j,D,U,W,Z){for(var ie,ue=Z[0],ae=Z[240],ke=function(Ie,Te){var Fe,Re,Ve,tt,st,ct,mt,yt,Ge,ut,De=0;for(Ge=0;Ge<8;++Ge){Fe=Ie[De],Re=Ie[De+1],Ve=Ie[De+2],tt=Ie[De+3],st=Ie[De+4],ct=Ie[De+5],mt=Ie[De+6];var er=Fe+(yt=Ie[De+7]),wt=Fe-yt,Lr=Re+mt,_t=Re-mt,It=Ve+ct,Br=Ve-ct,pe=tt+st,He=tt-st,$e=er+pe,vt=er-pe,Ot=Lr+It,Nt=Lr-It;Ie[De]=$e+Ot,Ie[De+4]=$e-Ot;var ze=.707106781*(Nt+vt);Ie[De+2]=vt+ze,Ie[De+6]=vt-ze;var jt=.382683433*(($e=He+Br)-(Nt=_t+wt)),Pr=.5411961*$e+jt,Ht=1.306562965*Nt+jt,Ur=.707106781*(Ot=Br+_t),en=wt+Ur,Ye=wt-Ur;Ie[De+5]=Ye+Pr,Ie[De+3]=Ye-Pr,Ie[De+1]=en+Ht,Ie[De+7]=en-Ht,De+=8}for(De=0,Ge=0;Ge<8;++Ge){Fe=Ie[De],Re=Ie[De+8],Ve=Ie[De+16],tt=Ie[De+24],st=Ie[De+32],ct=Ie[De+40],mt=Ie[De+48];var Vr=Fe+(yt=Ie[De+56]),tn=Fe-yt,_r=Re+mt,Jt=Re-mt,Gt=Ve+ct,Ir=Ve-ct,ti=tt+st,un=tt-st,rn=Vr+ti,nn=Vr-ti,Sr=_r+Gt,mr=_r-Gt;Ie[De]=rn+Sr,Ie[De+32]=rn-Sr;var Nr=.707106781*(mr+nn);Ie[De+16]=nn+Nr,Ie[De+48]=nn-Nr;var hn=.382683433*((rn=un+Ir)-(mr=Jt+tn)),Sn=.5411961*rn+hn,bi=1.306562965*mr+hn,yi=.707106781*(Sr=Ir+Jt),wi=tn+yi,xi=tn-yi;Ie[De+40]=xi+Sn,Ie[De+24]=xi-Sn,Ie[De+8]=wi+bi,Ie[De+56]=wi-bi,De++}for(Ge=0;Ge<64;++Ge)ut=Ie[Ge]*Te[Ge],v[Ge]=ut>0?ut+.5|0:ut-.5|0;return v}(j,D),Ae=0;Ae<64;++Ae)k[Q[Ae]]=ke[Ae];var Ee=k[0]-U;U=k[0],Ee==0?me(W[0]):(me(W[y[ie=32767+Ee]]),me(m[ie]));for(var Ne=63;Ne>0&&k[Ne]==0;)Ne--;if(Ne==0)return me(ue),U;for(var Ke,ye=1;ye<=Ne;){for(var M=ye;k[ye]==0&&ye<=Ne;)++ye;var et=ye-M;if(et>=16){Ke=et>>4;for(var qe=1;qe<=Ke;++qe)me(ae);et&=15}ie=32767+k[ye],me(Z[(et<<4)+y[ie]]),me(m[ie]),ye++}return Ne!=63&&me(ue),U}function Le(j){j=Math.min(Math.max(j,1),100),s!=j&&(function(D){for(var U=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],W=0;W<64;W++){var Z=a((U[W]*D+50)/100);Z=Math.min(Math.max(Z,1),255),c[Q[W]]=Z}for(var ie=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ue=0;ue<64;ue++){var ae=a((ie[ue]*D+50)/100);ae=Math.min(Math.max(ae,1),255),l[Q[ue]]=ae}for(var ke=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ae=0,Ee=0;Ee<8;Ee++)for(var Ne=0;Ne<8;Ne++)f[Ae]=1/(c[Q[Ae]]*ke[Ee]*ke[Ne]*8),p[Ae]=1/(l[Q[Ae]]*ke[Ee]*ke[Ne]*8),Ae++}(j<50?Math.floor(5e3/j):Math.floor(200-2*j)),s=j)}this.encode=function(j,D){D&&Le(D),S=new Array,P=0,w=7,ge(65496),ge(65504),ge(16),ne(74),ne(70),ne(73),ne(70),ne(0),ne(1),ne(1),ne(0),ge(1),ge(1),ne(0),ne(0),function(){ge(65499),ge(132),ne(0);for(var Re=0;Re<64;Re++)ne(c[Re]);ne(1);for(var Ve=0;Ve<64;Ve++)ne(l[Ve])}(),function(Re,Ve){ge(65472),ge(17),ne(8),ge(Ve),ge(Re),ne(3),ne(1),ne(17),ne(0),ne(2),ne(17),ne(1),ne(3),ne(17),ne(1)}(j.width,j.height),function(){ge(65476),ge(418),ne(0);for(var Re=0;Re<16;Re++)ne($[Re+1]);for(var Ve=0;Ve<=11;Ve++)ne(H[Ve]);ne(16);for(var tt=0;tt<16;tt++)ne(Y[tt+1]);for(var st=0;st<=161;st++)ne(N[st]);ne(1);for(var ct=0;ct<16;ct++)ne(T[ct+1]);for(var mt=0;mt<=11;mt++)ne(z[mt]);ne(17);for(var yt=0;yt<16;yt++)ne(q[yt+1]);for(var Ge=0;Ge<=161;Ge++)ne(de[Ge])}(),ge(65498),ge(12),ne(3),ne(1),ne(0),ne(2),ne(17),ne(3),ne(17),ne(0),ne(63),ne(0);var U=0,W=0,Z=0;P=0,w=7,this.encode.displayName="_encode_";for(var ie,ue,ae,ke,Ae,Ee,Ne,Ke,ye,M=j.data,et=j.width,qe=j.height,Ie=4*et,Te=0;Te<qe;){for(ie=0;ie<Ie;){for(Ae=Ie*Te+ie,Ne=-1,Ke=0,ye=0;ye<64;ye++)Ee=Ae+(Ke=ye>>3)*Ie+(Ne=4*(7&ye)),Te+Ke>=qe&&(Ee-=Ie*(Te+1+Ke-qe)),ie+Ne>=Ie&&(Ee-=ie+Ne-Ie+4),ue=M[Ee++],ae=M[Ee++],ke=M[Ee++],L[ye]=(he[ue]+he[ae+256>>0]+he[ke+512>>0]>>16)-128,R[ye]=(he[ue+768>>0]+he[ae+1024>>0]+he[ke+1280>>0]>>16)-128,J[ye]=(he[ue+1280>>0]+he[ae+1536>>0]+he[ke+1792>>0]>>16)-128;U=ve(L,f,U,e,r),W=ve(R,p,W,t,i),Z=ve(J,p,Z,t,i),ie+=32}Te+=8}if(w>=0){var Fe=[];Fe[1]=w+1,Fe[0]=(1<<w+1)-1,me(Fe)}return ge(65497),new Uint8Array(S)},n=n||50,function(){for(var j=String.fromCharCode,D=0;D<256;D++)te[D]=j(D)}(),e=ce($,H),t=ce(T,z),r=ce(Y,N),i=ce(q,de),function(){for(var j=1,D=2,U=1;U<=15;U++){for(var W=j;W<D;W++)y[32767+W]=U,m[32767+W]=[],m[32767+W][1]=U,m[32767+W][0]=W;for(var Z=-(D-1);Z<=-j;Z++)y[32767+Z]=U,m[32767+Z]=[],m[32767+Z][1]=U,m[32767+Z][0]=D-1+Z;j<<=1,D<<=1}}(),function(){for(var j=0;j<256;j++)he[j]=19595*j,he[j+256>>0]=38470*j,he[j+512>>0]=7471*j+32768,he[j+768>>0]=-11059*j,he[j+1024>>0]=-21709*j,he[j+1280>>0]=32768*j+8421375,he[j+1536>>0]=-27439*j,he[j+1792>>0]=-5329*j}(),Le(n)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Nn(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function hf(n){function e($){if(!$)throw Error("assert :P")}function t($,H,Y){for(var N=0;4>N;N++)if($[H+N]!=Y.charCodeAt(N))return!0;return!1}function r($,H,Y,N,T){for(var z=0;z<T;z++)$[H+z]=Y[N+z]}function i($,H,Y,N){for(var T=0;T<N;T++)$[H+T]=Y}function s($){return new Int32Array($)}function a($,H){for(var Y=[],N=0;N<$;N++)Y.push(new H);return Y}function c($,H){var Y=[];return function N(T,z,q){for(var de=q[z],ce=0;ce<de&&(T.push(q.length>z+1?[]:new H),!(q.length<z+1));ce++)N(T[ce],z+1,q)}(Y,0,$),Y}var l=function(){var $=this;function H(o,h){for(var g=1<<h-1>>>0;o&g;)g>>>=1;return g?(o&g-1)+g:o}function Y(o,h,g,b,x){e(!(b%g));do o[h+(b-=g)]=x;while(0<b)}function N(o,h,g,b,x){if(e(2328>=x),512>=x)var A=s(512);else if((A=s(x))==null)return 0;return function(C,I,E,O,G,oe){var le,ee,je=I,be=1<<E,K=s(16),X=s(16);for(e(G!=0),e(O!=null),e(C!=null),e(0<E),ee=0;ee<G;++ee){if(15<O[ee])return 0;++K[O[ee]]}if(K[0]==G)return 0;for(X[1]=0,le=1;15>le;++le){if(K[le]>1<<le)return 0;X[le+1]=X[le]+K[le]}for(ee=0;ee<G;++ee)le=O[ee],0<O[ee]&&(oe[X[le]++]=ee);if(X[15]==1)return(O=new T).g=0,O.value=oe[0],Y(C,je,1,be,O),be;var _e,Ce=-1,Se=be-1,Ue=0,Oe=1,Ze=1,Me=1<<E;for(ee=0,le=1,G=2;le<=E;++le,G<<=1){if(Oe+=Ze<<=1,0>(Ze-=K[le]))return 0;for(;0<K[le];--K[le])(O=new T).g=le,O.value=oe[ee++],Y(C,je+Ue,G,Me,O),Ue=H(Ue,le)}for(le=E+1,G=2;15>=le;++le,G<<=1){if(Oe+=Ze<<=1,0>(Ze-=K[le]))return 0;for(;0<K[le];--K[le]){if(O=new T,(Ue&Se)!=Ce){for(je+=Me,_e=1<<(Ce=le)-E;15>Ce&&!(0>=(_e-=K[Ce]));)++Ce,_e<<=1;be+=Me=1<<(_e=Ce-E),C[I+(Ce=Ue&Se)].g=_e+E,C[I+Ce].value=je-I-Ce}O.g=le-E,O.value=oe[ee++],Y(C,je+(Ue>>E),G,Me,O),Ue=H(Ue,le)}}return Oe!=2*X[15]-1?0:be}(o,h,g,b,x,A)}function T(){this.value=this.g=0}function z(){this.value=this.g=0}function q(){this.G=a(5,T),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(jr,z)}function de(o,h,g,b){e(o!=null),e(h!=null),e(2147483648>b),o.Ca=254,o.I=0,o.b=-8,o.Ka=0,o.oa=h,o.pa=g,o.Jd=h,o.Yc=g+b,o.Zc=4<=b?g+b-4+1:g,ie(o)}function ce(o,h){for(var g=0;0<h--;)g|=ae(o,128)<<h;return g}function me(o,h){var g=ce(o,h);return ue(o)?-g:g}function ne(o,h,g,b){var x,A=0;for(e(o!=null),e(h!=null),e(4294967288>b),o.Sb=b,o.Ra=0,o.u=0,o.h=0,4<b&&(b=4),x=0;x<b;++x)A+=h[g+x]<<8*x;o.Ra=A,o.bb=b,o.oa=h,o.pa=g}function ge(o){for(;8<=o.u&&o.bb<o.Sb;)o.Ra>>>=8,o.Ra+=o.oa[o.pa+o.bb]<<Hs-8>>>0,++o.bb,o.u-=8;U(o)&&(o.h=1,o.u=0)}function ve(o,h){if(e(0<=h),!o.h&&h<=Vs){var g=D(o)&Ws[h];return o.u+=h,ge(o),g}return o.h=1,o.u=0}function Le(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function j(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function D(o){return o.Ra>>>(o.u&Hs-1)>>>0}function U(o){return e(o.bb<=o.Sb),o.h||o.bb==o.Sb&&o.u>Hs}function W(o,h){o.u=h,o.h=U(o)}function Z(o){o.u>=Va&&(e(o.u>=Va),ge(o))}function ie(o){e(o!=null&&o.oa!=null),o.pa<o.Zc?(o.I=(o.oa[o.pa++]|o.I<<8)>>>0,o.b+=8):(e(o!=null&&o.oa!=null),o.pa<o.Yc?(o.b+=8,o.I=o.oa[o.pa++]|o.I<<8):o.Ka?o.b=0:(o.I<<=8,o.b+=8,o.Ka=1))}function ue(o){return ce(o,1)}function ae(o,h){var g=o.Ca;0>o.b&&ie(o);var b=o.b,x=g*h>>>8,A=(o.I>>>b>x)+0;for(A?(g-=x,o.I-=x+1<<b>>>0):g=x+1,b=g,x=0;256<=b;)x+=8,b>>=8;return b=7^x+Gr[b],o.b-=b,o.Ca=(g<<b)-1,A}function ke(o,h,g){o[h+0]=g>>24&255,o[h+1]=g>>16&255,o[h+2]=g>>8&255,o[h+3]=g>>0&255}function Ae(o,h){return o[h+0]<<0|o[h+1]<<8}function Ee(o,h){return Ae(o,h)|o[h+2]<<16}function Ne(o,h){return Ae(o,h)|Ae(o,h+2)<<16}function Ke(o,h){var g=1<<h;return e(o!=null),e(0<h),o.X=s(g),o.X==null?0:(o.Mb=32-h,o.Xa=h,1)}function ye(o,h){e(o!=null),e(h!=null),e(o.Xa==h.Xa),r(h.X,0,o.X,0,1<<h.Xa)}function M(){this.X=[],this.Xa=this.Mb=0}function et(o,h,g,b){e(g!=null),e(b!=null);var x=g[0],A=b[0];return x==0&&(x=(o*A+h/2)/h),A==0&&(A=(h*x+o/2)/o),0>=x||0>=A?0:(g[0]=x,b[0]=A,1)}function qe(o,h){return o+(1<<h)-1>>>h}function Ie(o,h){return((4278255360&o)+(4278255360&h)>>>0&4278255360)+((16711935&o)+(16711935&h)>>>0&16711935)>>>0}function Te(o,h){$[h]=function(g,b,x,A,C,I,E){var O;for(O=0;O<C;++O){var G=$[o](I[E+O-1],x,A+O);I[E+O]=Ie(g[b+O],G)}}}function Fe(){this.ud=this.hd=this.jd=0}function Re(o,h){return((4278124286&(o^h))>>>1)+(o&h)>>>0}function Ve(o){return 0<=o&&256>o?o:0>o?0:255<o?255:void 0}function tt(o,h){return Ve(o+(o-h+.5>>1))}function st(o,h,g){return Math.abs(h-g)-Math.abs(o-g)}function ct(o,h,g,b,x,A,C){for(b=A[C-1],g=0;g<x;++g)A[C+g]=b=Ie(o[h+g],b)}function mt(o,h,g,b,x){var A;for(A=0;A<g;++A){var C=o[h+A],I=C>>8&255,E=16711935&(E=(E=16711935&C)+((I<<16)+I));b[x+A]=(4278255360&C)+E>>>0}}function yt(o,h){h.jd=o>>0&255,h.hd=o>>8&255,h.ud=o>>16&255}function Ge(o,h,g,b,x,A){var C;for(C=0;C<b;++C){var I=h[g+C],E=I>>>8,O=I,G=255&(G=(G=I>>>16)+((o.jd<<24>>24)*(E<<24>>24)>>>5));O=255&(O=(O=O+((o.hd<<24>>24)*(E<<24>>24)>>>5))+((o.ud<<24>>24)*(G<<24>>24)>>>5)),x[A+C]=(4278255360&I)+(G<<16)+O}}function ut(o,h,g,b,x){$[h]=function(A,C,I,E,O,G,oe,le,ee){for(E=oe;E<le;++E)for(oe=0;oe<ee;++oe)O[G++]=x(I[b(A[C++])])},$[o]=function(A,C,I,E,O,G,oe){var le=8>>A.b,ee=A.Ea,je=A.K[0],be=A.w;if(8>le)for(A=(1<<A.b)-1,be=(1<<le)-1;C<I;++C){var K,X=0;for(K=0;K<ee;++K)K&A||(X=b(E[O++])),G[oe++]=x(je[X&be]),X>>=le}else $["VP8LMapColor"+g](E,O,je,be,G,oe,C,I,ee)}}function De(o,h,g,b,x){for(g=h+g;h<g;){var A=o[h++];b[x++]=A>>16&255,b[x++]=A>>8&255,b[x++]=A>>0&255}}function er(o,h,g,b,x){for(g=h+g;h<g;){var A=o[h++];b[x++]=A>>16&255,b[x++]=A>>8&255,b[x++]=A>>0&255,b[x++]=A>>24&255}}function wt(o,h,g,b,x){for(g=h+g;h<g;){var A=(C=o[h++])>>16&240|C>>12&15,C=C>>0&240|C>>28&15;b[x++]=A,b[x++]=C}}function Lr(o,h,g,b,x){for(g=h+g;h<g;){var A=(C=o[h++])>>16&248|C>>13&7,C=C>>5&224|C>>3&31;b[x++]=A,b[x++]=C}}function _t(o,h,g,b,x){for(g=h+g;h<g;){var A=o[h++];b[x++]=A>>0&255,b[x++]=A>>8&255,b[x++]=A>>16&255}}function It(o,h,g,b,x,A){if(A==0)for(g=h+g;h<g;)ke(b,((A=o[h++])[0]>>24|A[1]>>8&65280|A[2]<<8&16711680|A[3]<<24)>>>0),x+=32;else r(b,x,o,h,g)}function Br(o,h){$[h][0]=$[o+"0"],$[h][1]=$[o+"1"],$[h][2]=$[o+"2"],$[h][3]=$[o+"3"],$[h][4]=$[o+"4"],$[h][5]=$[o+"5"],$[h][6]=$[o+"6"],$[h][7]=$[o+"7"],$[h][8]=$[o+"8"],$[h][9]=$[o+"9"],$[h][10]=$[o+"10"],$[h][11]=$[o+"11"],$[h][12]=$[o+"12"],$[h][13]=$[o+"13"],$[h][14]=$[o+"0"],$[h][15]=$[o+"0"]}function pe(o){return o==xc||o==_c||o==nl||o==Sc}function He(){this.eb=[],this.size=this.A=this.fb=0}function $e(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function vt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new He,this.f.kb=new $e,this.sd=null}function Ot(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Nt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ze(o){return alert("todo:WebPSamplerProcessPlane"),o.T}function jt(o,h){var g=o.T,b=h.ba.f.RGBA,x=b.eb,A=b.fb+o.ka*b.A,C=vn[h.ba.S],I=o.y,E=o.O,O=o.f,G=o.N,oe=o.ea,le=o.W,ee=h.cc,je=h.dc,be=h.Mc,K=h.Nc,X=o.ka,_e=o.ka+o.T,Ce=o.U,Se=Ce+1>>1;for(X==0?C(I,E,null,null,O,G,oe,le,O,G,oe,le,x,A,null,null,Ce):(C(h.ec,h.fc,I,E,ee,je,be,K,O,G,oe,le,x,A-b.A,x,A,Ce),++g);X+2<_e;X+=2)ee=O,je=G,be=oe,K=le,G+=o.Rc,le+=o.Rc,A+=2*b.A,C(I,(E+=2*o.fa)-o.fa,I,E,ee,je,be,K,O,G,oe,le,x,A-b.A,x,A,Ce);return E+=o.fa,o.j+_e<o.o?(r(h.ec,h.fc,I,E,Ce),r(h.cc,h.dc,O,G,Se),r(h.Mc,h.Nc,oe,le,Se),g--):1&_e||C(I,E,null,null,O,G,oe,le,O,G,oe,le,x,A+b.A,null,null,Ce),g}function Pr(o,h,g){var b=o.F,x=[o.J];if(b!=null){var A=o.U,C=h.ba.S,I=C==rl||C==nl;h=h.ba.f.RGBA;var E=[0],O=o.ka;E[0]=o.T,o.Kb&&(O==0?--E[0]:(--O,x[0]-=o.width),o.j+o.ka+o.T==o.o&&(E[0]=o.o-o.j-O));var G=h.eb;O=h.fb+O*h.A,o=$t(b,x[0],o.width,A,E,G,O+(I?0:3),h.A),e(g==E),o&&pe(C)&&gn(G,O,I,A,E,h.A)}return 0}function Ht(o){var h=o.ma,g=h.ba.S,b=11>g,x=g==el||g==tl||g==rl||g==wc||g==12||pe(g);if(h.memory=null,h.Ib=null,h.Jb=null,h.Nd=null,!za(h.Oa,o,x?11:12))return 0;if(x&&pe(g)&&Pe(),o.da)alert("todo:use_scaling");else{if(b){if(h.Ib=ze,o.Kb){if(g=o.U+1>>1,h.memory=s(o.U+2*g),h.memory==null)return 0;h.ec=h.memory,h.fc=0,h.cc=h.ec,h.dc=h.fc+o.U,h.Mc=h.cc,h.Nc=h.dc+g,h.Ib=jt,Pe()}}else alert("todo:EmitYUV");x&&(h.Jb=Pr,b&&se())}if(b&&!Vh){for(o=0;256>o;++o)P1[o]=89858*(o-128)+sl>>il,E1[o]=-22014*(o-128)+sl,N1[o]=-45773*(o-128),I1[o]=113618*(o-128)+sl>>il;for(o=Xa;o<kc;++o)h=76283*(o-16)+sl>>il,T1[o-Xa]=sn(h,255),R1[o-Xa]=sn(h+8>>4,15);Vh=1}return 1}function Ur(o){var h=o.ma,g=o.U,b=o.T;return e(!(1&o.ka)),0>=g||0>=b?0:(g=h.Ib(o,h),h.Jb!=null&&h.Jb(o,h,g),h.Dc+=g,1)}function en(o){o.ma.memory=null}function Ye(o,h,g,b){return ve(o,8)!=47?0:(h[0]=ve(o,14)+1,g[0]=ve(o,14)+1,b[0]=ve(o,1),ve(o,3)!=0?0:!o.h)}function Vr(o,h){if(4>o)return o+1;var g=o-2>>1;return(2+(1&o)<<g)+ve(h,g)+1}function tn(o,h){return 120<h?h-120:1<=(g=((g=g1[h-1])>>4)*o+(8-(15&g)))?g:1;var g}function _r(o,h,g){var b=D(g),x=o[h+=255&b].g-8;return 0<x&&(W(g,g.u+8),b=D(g),h+=o[h].value,h+=b&(1<<x)-1),W(g,g.u+o[h].g),o[h].value}function Jt(o,h,g){return g.g+=o.g,g.value+=o.value<<h>>>0,e(8>=g.g),o.g}function Gt(o,h,g){var b=o.xc;return e((h=b==0?0:o.vc[o.md*(g>>b)+(h>>b)])<o.Wb),o.Ya[h]}function Ir(o,h,g,b){var x=o.ab,A=o.c*h,C=o.C;h=C+h;var I=g,E=b;for(b=o.Ta,g=o.Ua;0<x--;){var O=o.gc[x],G=C,oe=h,le=I,ee=E,je=(E=b,I=g,O.Ea);switch(e(G<oe),e(oe<=O.nc),O.hc){case 2:Go(le,ee,(oe-G)*je,E,I);break;case 0:var be=G,K=oe,X=E,_e=I,Ce=(Me=O).Ea;be==0&&(bc(le,ee,null,null,1,X,_e),ct(le,ee+1,0,0,Ce-1,X,_e+1),ee+=Ce,_e+=Ce,++be);for(var Se=1<<Me.b,Ue=Se-1,Oe=qe(Ce,Me.b),Ze=Me.K,Me=Me.w+(be>>Me.b)*Oe;be<K;){var Ct=Ze,Et=Me,kt=1;for(Ha(le,ee,X,_e-Ce,1,X,_e);kt<Ce;){var St=(kt&~Ue)+Se;St>Ce&&(St=Ce),(0,ki[Ct[Et++]>>8&15])(le,ee+ +kt,X,_e+kt-Ce,St-kt,X,_e+kt),kt=St}ee+=Ce,_e+=Ce,++be&Ue||(Me+=Oe)}oe!=O.nc&&r(E,I-je,E,I+(oe-G-1)*je,je);break;case 1:for(je=le,K=ee,Ce=(le=O.Ea)-(_e=le&~(X=(ee=1<<O.b)-1)),be=qe(le,O.b),Se=O.K,O=O.w+(G>>O.b)*be;G<oe;){for(Ue=Se,Oe=O,Ze=new Fe,Me=K+_e,Ct=K+le;K<Me;)yt(Ue[Oe++],Ze),ls(Ze,je,K,ee,E,I),K+=ee,I+=ee;K<Ct&&(yt(Ue[Oe++],Ze),ls(Ze,je,K,Ce,E,I),K+=Ce,I+=Ce),++G&X||(O+=be)}break;case 3:if(le==E&&ee==I&&0<O.b){for(K=E,le=je=I+(oe-G)*je-(_e=(oe-G)*qe(O.Ea,O.b)),ee=E,X=I,be=[],_e=(Ce=_e)-1;0<=_e;--_e)be[_e]=ee[X+_e];for(_e=Ce-1;0<=_e;--_e)K[le+_e]=be[_e];dn(O,G,oe,E,je,E,I)}else dn(O,G,oe,le,ee,E,I)}I=b,E=g}E!=g&&r(b,g,I,E,A)}function ti(o,h){var g=o.V,b=o.Ba+o.c*o.C,x=h-o.C;if(e(h<=o.l.o),e(16>=x),0<x){var A=o.l,C=o.Ta,I=o.Ua,E=A.width;if(Ir(o,x,g,b),x=I=[I],e((g=o.C)<(b=h)),e(A.v<A.va),b>A.o&&(b=A.o),g<A.j){var O=A.j-g;g=A.j,x[0]+=O*E}if(g>=b?g=0:(x[0]+=4*A.v,A.ka=g-A.j,A.U=A.va-A.v,A.T=b-g,g=1),g){if(I=I[0],11>(g=o.ca).S){var G=g.f.RGBA,oe=(b=g.S,x=A.U,A=A.T,O=G.eb,G.A),le=A;for(G=G.fb+o.Ma*G.A;0<le--;){var ee=C,je=I,be=x,K=O,X=G;switch(b){case Qo:Kr(ee,je,be,K,X);break;case el:$r(ee,je,be,K,X);break;case xc:$r(ee,je,be,K,X),gn(K,X,0,be,1,0);break;case Fh:si(ee,je,be,K,X);break;case tl:It(ee,je,be,K,X,1);break;case _c:It(ee,je,be,K,X,1),gn(K,X,0,be,1,0);break;case rl:It(ee,je,be,K,X,0);break;case nl:It(ee,je,be,K,X,0),gn(K,X,1,be,1,0);break;case wc:Ci(ee,je,be,K,X);break;case Sc:Ci(ee,je,be,K,X),Ut(K,X,be,1,0);break;case Dh:ii(ee,je,be,K,X);break;default:e(0)}I+=E,G+=oe}o.Ma+=A}else alert("todo:EmitRescaledRowsYUVA");e(o.Ma<=g.height)}}o.C=h,e(o.C<=o.i)}function un(o){var h;if(0<o.ua)return 0;for(h=0;h<o.Wb;++h){var g=o.Ya[h].G,b=o.Ya[h].H;if(0<g[1][b[1]+0].g||0<g[2][b[2]+0].g||0<g[3][b[3]+0].g)return 0}return 1}function rn(o,h,g,b,x,A){if(o.Z!=0){var C=o.qd,I=o.rd;for(e(Ni[o.Z]!=null);h<g;++h)Ni[o.Z](C,I,b,x,b,x,A),C=b,I=x,x+=A;o.qd=C,o.rd=I}}function nn(o,h){var g=o.l.ma,b=g.Z==0||g.Z==1?o.l.j:o.C;if(b=o.C<b?b:o.C,e(h<=o.l.o),h>b){var x=o.l.width,A=g.ca,C=g.tb+x*b,I=o.V,E=o.Ba+o.c*b,O=o.gc;e(o.ab==1),e(O[0].hc==3),Ko(O[0],b,h,I,E,A,C),rn(g,b,h,A,C,x)}o.C=o.Ma=h}function Sr(o,h,g,b,x,A,C){var I=o.$/b,E=o.$%b,O=o.m,G=o.s,oe=g+o.$,le=oe;x=g+b*x;var ee=g+b*A,je=280+G.ua,be=o.Pb?I:16777216,K=0<G.ua?G.Wa:null,X=G.wc,_e=oe<ee?Gt(G,E,I):null;e(o.C<A),e(ee<=x);var Ce=!1;e:for(;;){for(;Ce||oe<ee;){var Se=0;if(I>=be){var Ue=oe-g;e((be=o).Pb),be.wd=be.m,be.xd=Ue,0<be.s.ua&&ye(be.s.Wa,be.s.vb),be=I+v1}if(E&X||(_e=Gt(G,E,I)),e(_e!=null),_e.Qb&&(h[oe]=_e.qb,Ce=!0),!Ce)if(Z(O),_e.jc){Se=O,Ue=h;var Oe=oe,Ze=_e.pd[D(Se)&jr-1];e(_e.jc),256>Ze.g?(W(Se,Se.u+Ze.g),Ue[Oe]=Ze.value,Se=0):(W(Se,Se.u+Ze.g-256),e(256<=Ze.value),Se=Ze.value),Se==0&&(Ce=!0)}else Se=_r(_e.G[0],_e.H[0],O);if(O.h)break;if(Ce||256>Se){if(!Ce)if(_e.nd)h[oe]=(_e.qb|Se<<8)>>>0;else{if(Z(O),Ce=_r(_e.G[1],_e.H[1],O),Z(O),Ue=_r(_e.G[2],_e.H[2],O),Oe=_r(_e.G[3],_e.H[3],O),O.h)break;h[oe]=(Oe<<24|Ce<<16|Se<<8|Ue)>>>0}if(Ce=!1,++oe,++E>=b&&(E=0,++I,C!=null&&I<=A&&!(I%16)&&C(o,I),K!=null))for(;le<oe;)Se=h[le++],K.X[(506832829*Se&4294967295)>>>K.Mb]=Se}else if(280>Se){if(Se=Vr(Se-256,O),Ue=_r(_e.G[4],_e.H[4],O),Z(O),Ue=tn(b,Ue=Vr(Ue,O)),O.h)break;if(oe-g<Ue||x-oe<Se)break e;for(Oe=0;Oe<Se;++Oe)h[oe+Oe]=h[oe+Oe-Ue];for(oe+=Se,E+=Se;E>=b;)E-=b,++I,C!=null&&I<=A&&!(I%16)&&C(o,I);if(e(oe<=x),E&X&&(_e=Gt(G,E,I)),K!=null)for(;le<oe;)Se=h[le++],K.X[(506832829*Se&4294967295)>>>K.Mb]=Se}else{if(!(Se<je))break e;for(Ce=Se-280,e(K!=null);le<oe;)Se=h[le++],K.X[(506832829*Se&4294967295)>>>K.Mb]=Se;Se=oe,e(!(Ce>>>(Ue=K).Xa)),h[Se]=Ue.X[Ce],Ce=!0}Ce||e(O.h==U(O))}if(o.Pb&&O.h&&oe<x)e(o.m.h),o.a=5,o.m=o.wd,o.$=o.xd,0<o.s.ua&&ye(o.s.vb,o.s.Wa);else{if(O.h)break e;C!=null&&C(o,I>A?A:I),o.a=0,o.$=oe-g}return 1}return o.a=3,0}function mr(o){e(o!=null),o.vc=null,o.yc=null,o.Ya=null;var h=o.Wa;h!=null&&(h.X=null),o.vb=null,e(o!=null)}function Nr(){var o=new vc;return o==null?null:(o.a=0,o.xb=Uh,Br("Predictor","VP8LPredictors"),Br("Predictor","VP8LPredictors_C"),Br("PredictorAdd","VP8LPredictorsAdd"),Br("PredictorAdd","VP8LPredictorsAdd_C"),Go=mt,ls=Ge,Kr=De,$r=er,Ci=wt,ii=Lr,si=_t,$.VP8LMapColor32b=Gs,$.VP8LMapColor8b=Jo,o)}function hn(o,h,g,b,x){var A=1,C=[o],I=[h],E=b.m,O=b.s,G=null,oe=0;e:for(;;){if(g)for(;A&&ve(E,1);){var le=C,ee=I,je=b,be=1,K=je.m,X=je.gc[je.ab],_e=ve(K,2);if(je.Oc&1<<_e)A=0;else{switch(je.Oc|=1<<_e,X.hc=_e,X.Ea=le[0],X.nc=ee[0],X.K=[null],++je.ab,e(4>=je.ab),_e){case 0:case 1:X.b=ve(K,3)+2,be=hn(qe(X.Ea,X.b),qe(X.nc,X.b),0,je,X.K),X.K=X.K[0];break;case 3:var Ce,Se=ve(K,8)+1,Ue=16<Se?0:4<Se?1:2<Se?2:3;if(le[0]=qe(X.Ea,Ue),X.b=Ue,Ce=be=hn(Se,1,0,je,X.K)){var Oe,Ze=Se,Me=X,Ct=1<<(8>>Me.b),Et=s(Ct);if(Et==null)Ce=0;else{var kt=Me.K[0],St=Me.w;for(Et[0]=Me.K[0][0],Oe=1;Oe<1*Ze;++Oe)Et[Oe]=Ie(kt[St+Oe],Et[Oe-1]);for(;Oe<4*Ct;++Oe)Et[Oe]=0;Me.K[0]=null,Me.K[0]=Et,Ce=1}}be=Ce;break;case 2:break;default:e(0)}A=be}}if(C=C[0],I=I[0],A&&ve(E,1)&&!(A=1<=(oe=ve(E,4))&&11>=oe)){b.a=3;break e}var Dt;if(Dt=A)t:{var Ft,ft,cr,Jr=b,ur=C,Yr=I,Tt=oe,on=g,ln=Jr.m,br=Jr.s,Ar=[null],zr=1,bn=0,Hn=m1[Tt];r:for(;;){if(on&&ve(ln,1)){var yr=ve(ln,3)+2,ci=qe(ur,yr),fs=qe(Yr,yr),Xs=ci*fs;if(!hn(ci,fs,0,Jr,Ar))break r;for(Ar=Ar[0],br.xc=yr,Ft=0;Ft<Xs;++Ft){var Ei=Ar[Ft]>>8&65535;Ar[Ft]=Ei,Ei>=zr&&(zr=Ei+1)}}if(ln.h)break r;for(ft=0;5>ft;++ft){var Zt=Mh[ft];!ft&&0<Tt&&(Zt+=1<<Tt),bn<Zt&&(bn=Zt)}var Cc=a(zr*Hn,T),Kh=zr,Jh=a(Kh,q);if(Jh==null)var ol=null;else e(65536>=Kh),ol=Jh;var Qa=s(bn);if(ol==null||Qa==null||Cc==null){Jr.a=1;break r}var ll=Cc;for(Ft=cr=0;Ft<zr;++Ft){var Ln=ol[Ft],Qs=Ln.G,ea=Ln.H,Yh=0,cl=1,Zh=0;for(ft=0;5>ft;++ft){Zt=Mh[ft],Qs[ft]=ll,ea[ft]=cr,!ft&&0<Tt&&(Zt+=1<<Tt);i:{var ul,Lc=Zt,hl=Jr,eo=Qa,D1=ll,M1=cr,Pc=0,Ti=hl.m,B1=ve(Ti,1);if(i(eo,0,0,Lc),B1){var U1=ve(Ti,1)+1,$1=ve(Ti,1),Xh=ve(Ti,$1==0?1:8);eo[Xh]=1,U1==2&&(eo[Xh=ve(Ti,8)]=1);var dl=1}else{var Qh=s(19),ed=ve(Ti,4)+4;if(19<ed){hl.a=3;var fl=0;break i}for(ul=0;ul<ed;++ul)Qh[p1[ul]]=ve(Ti,3);var Ic=void 0,to=void 0,td=hl,q1=Qh,pl=Lc,rd=eo,Nc=0,Ri=td.m,nd=8,id=a(128,T);n:for(;N(id,0,7,q1,19);){if(ve(Ri,1)){var z1=2+2*ve(Ri,3);if((Ic=2+ve(Ri,z1))>pl)break n}else Ic=pl;for(to=0;to<pl&&Ic--;){Z(Ri);var sd=id[0+(127&D(Ri))];W(Ri,Ri.u+sd.g);var ta=sd.value;if(16>ta)rd[to++]=ta,ta!=0&&(nd=ta);else{var W1=ta==16,ad=ta-16,V1=d1[ad],od=ve(Ri,h1[ad])+V1;if(to+od>pl)break n;for(var H1=W1?nd:0;0<od--;)rd[to++]=H1}}Nc=1;break n}Nc||(td.a=3),dl=Nc}(dl=dl&&!Ti.h)&&(Pc=N(D1,M1,8,eo,Lc)),dl&&Pc!=0?fl=Pc:(hl.a=3,fl=0)}if(fl==0)break r;if(cl&&f1[ft]==1&&(cl=ll[cr].g==0),Yh+=ll[cr].g,cr+=fl,3>=ft){var ro,Ec=Qa[0];for(ro=1;ro<Zt;++ro)Qa[ro]>Ec&&(Ec=Qa[ro]);Zh+=Ec}}if(Ln.nd=cl,Ln.Qb=0,cl&&(Ln.qb=(Qs[3][ea[3]+0].value<<24|Qs[1][ea[1]+0].value<<16|Qs[2][ea[2]+0].value)>>>0,Yh==0&&256>Qs[0][ea[0]+0].value&&(Ln.Qb=1,Ln.qb+=Qs[0][ea[0]+0].value<<8)),Ln.jc=!Ln.Qb&&6>Zh,Ln.jc){var gl,ui=Ln;for(gl=0;gl<jr;++gl){var Oi=gl,Fi=ui.pd[Oi],ml=ui.G[0][ui.H[0]+Oi];256<=ml.value?(Fi.g=ml.g+256,Fi.value=ml.value):(Fi.g=0,Fi.value=0,Oi>>=Jt(ml,8,Fi),Oi>>=Jt(ui.G[1][ui.H[1]+Oi],16,Fi),Oi>>=Jt(ui.G[2][ui.H[2]+Oi],0,Fi),Jt(ui.G[3][ui.H[3]+Oi],24,Fi))}}}br.vc=Ar,br.Wb=zr,br.Ya=ol,br.yc=Cc,Dt=1;break t}Dt=0}if(!(A=Dt)){b.a=3;break e}if(0<oe){if(O.ua=1<<oe,!Ke(O.Wa,oe)){b.a=1,A=0;break e}}else O.ua=0;var Tc=b,ld=C,G1=I,Rc=Tc.s,Oc=Rc.xc;if(Tc.c=ld,Tc.i=G1,Rc.md=qe(ld,Oc),Rc.wc=Oc==0?-1:(1<<Oc)-1,g){b.xb=j1;break e}if((G=s(C*I))==null){b.a=1,A=0;break e}A=(A=Sr(b,G,0,C,I,I,null))&&!E.h;break e}return A?(x!=null?x[0]=G:(e(G==null),e(g)),b.$=0,g||mr(O)):mr(O),A}function Sn(o,h){var g=o.c*o.i,b=g+h+16*h;return e(o.c<=h),o.V=s(b),o.V==null?(o.Ta=null,o.Ua=0,o.a=1,0):(o.Ta=o.V,o.Ua=o.Ba+g+h,1)}function bi(o,h){var g=o.C,b=h-g,x=o.V,A=o.Ba+o.c*g;for(e(h<=o.l.o);0<b;){var C=16<b?16:b,I=o.l.ma,E=o.l.width,O=E*C,G=I.ca,oe=I.tb+E*g,le=o.Ta,ee=o.Ua;Ir(o,C,x,A),rr(le,ee,G,oe,O),rn(I,g,g+C,G,oe,E),b-=C,x+=C*o.c,g+=C}e(g==h),o.C=o.Ma=h}function yi(){this.ub=this.yd=this.td=this.Rb=0}function wi(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function xi(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Is(){this.Yb=function(){var o=[];return function h(g,b,x){for(var A=x[b],C=0;C<A&&(g.push(x.length>b+1?[]:0),!(x.length<b+1));C++)h(g[C],b+1,x)}(o,0,[3,11]),o}()}function _i(){this.jb=s(3),this.Wc=c([4,8],Is),this.Xc=c([4,17],Is)}function Ns(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function qn(){this.ld=this.La=this.dd=this.tc=0}function Es(){this.Na=this.la=0}function ka(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function rs(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Ca(){this.uc=this.M=this.Nb=0,this.wa=Array(new qn),this.Y=0,this.ya=Array(new rs),this.aa=0,this.l=new nt}function ns(){this.y=s(16),this.f=s(8),this.ea=s(8)}function we(){this.cb=this.a=0,this.sc="",this.m=new Le,this.Od=new yi,this.Kc=new wi,this.ed=new Ns,this.Qa=new xi,this.Ic=this.$c=this.Aa=0,this.D=new Ca,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,Le),this.ia=0,this.pb=a(4,ka),this.Pa=new _i,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ns),this.Hd=0,this.rb=Array(new Es),this.sb=0,this.wa=Array(new qn),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new rs),this.L=this.aa=0,this.gd=c([4,2],qn),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function nt(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function gt(){var o=new we;return o!=null&&(o.a=0,o.sc="OK",o.cb=0,o.Xb=0,Za||(Za=Eo)),o}function bt(o,h,g){return o.a==0&&(o.a=h,o.sc=g,o.cb=0),0}function or(o,h,g){return 3<=g&&o[h+0]==157&&o[h+1]==1&&o[h+2]==42}function Ts(o,h){if(o==null)return 0;if(o.a=0,o.sc="OK",h==null)return bt(o,2,"null VP8Io passed to VP8GetHeaders()");var g=h.data,b=h.w,x=h.ha;if(4>x)return bt(o,7,"Truncated header.");var A=g[b+0]|g[b+1]<<8|g[b+2]<<16,C=o.Od;if(C.Rb=!(1&A),C.td=A>>1&7,C.yd=A>>4&1,C.ub=A>>5,3<C.td)return bt(o,3,"Incorrect keyframe parameters.");if(!C.yd)return bt(o,4,"Frame not displayable.");b+=3,x-=3;var I=o.Kc;if(C.Rb){if(7>x)return bt(o,7,"cannot parse picture header");if(!or(g,b,x))return bt(o,3,"Bad code word");I.c=16383&(g[b+4]<<8|g[b+3]),I.Td=g[b+4]>>6,I.i=16383&(g[b+6]<<8|g[b+5]),I.Ud=g[b+6]>>6,b+=7,x-=7,o.za=I.c+15>>4,o.Ub=I.i+15>>4,h.width=I.c,h.height=I.i,h.Da=0,h.j=0,h.v=0,h.va=h.width,h.o=h.height,h.da=0,h.ib=h.width,h.hb=h.height,h.U=h.width,h.T=h.height,i((A=o.Pa).jb,0,255,A.jb.length),e((A=o.Qa)!=null),A.Cb=0,A.Bb=0,A.Fb=1,i(A.Zb,0,0,A.Zb.length),i(A.Lb,0,0,A.Lb)}if(C.ub>x)return bt(o,7,"bad partition length");de(A=o.m,g,b,C.ub),b+=C.ub,x-=C.ub,C.Rb&&(I.Ld=ue(A),I.Kd=ue(A)),I=o.Qa;var E,O=o.Pa;if(e(A!=null),e(I!=null),I.Cb=ue(A),I.Cb){if(I.Bb=ue(A),ue(A)){for(I.Fb=ue(A),E=0;4>E;++E)I.Zb[E]=ue(A)?me(A,7):0;for(E=0;4>E;++E)I.Lb[E]=ue(A)?me(A,6):0}if(I.Bb)for(E=0;3>E;++E)O.jb[E]=ue(A)?ce(A,8):255}else I.Bb=0;if(A.Ka)return bt(o,3,"cannot parse segment header");if((I=o.ed).zd=ue(A),I.Tb=ce(A,6),I.wb=ce(A,3),I.Pc=ue(A),I.Pc&&ue(A)){for(O=0;4>O;++O)ue(A)&&(I.vd[O]=me(A,6));for(O=0;4>O;++O)ue(A)&&(I.od[O]=me(A,6))}if(o.L=I.Tb==0?0:I.zd?1:2,A.Ka)return bt(o,3,"cannot parse filter header");var G=x;if(x=E=b,b=E+G,I=G,o.Xb=(1<<ce(o.m,2))-1,G<3*(O=o.Xb))g=7;else{for(E+=3*O,I-=3*O,G=0;G<O;++G){var oe=g[x+0]|g[x+1]<<8|g[x+2]<<16;oe>I&&(oe=I),de(o.Jc[+G],g,E,oe),E+=oe,I-=oe,x+=3}de(o.Jc[+O],g,E,I),g=E<b?0:5}if(g!=0)return bt(o,g,"cannot parse partitions");for(g=ce(E=o.m,7),x=ue(E)?me(E,4):0,b=ue(E)?me(E,4):0,I=ue(E)?me(E,4):0,O=ue(E)?me(E,4):0,E=ue(E)?me(E,4):0,G=o.Qa,oe=0;4>oe;++oe){if(G.Cb){var le=G.Zb[oe];G.Fb||(le+=g)}else{if(0<oe){o.pb[oe]=o.pb[0];continue}le=g}var ee=o.pb[oe];ee.Sc[0]=jc[sn(le+x,127)],ee.Sc[1]=Ac[sn(le+0,127)],ee.Eb[0]=2*jc[sn(le+b,127)],ee.Eb[1]=101581*Ac[sn(le+I,127)]>>16,8>ee.Eb[1]&&(ee.Eb[1]=8),ee.Qc[0]=jc[sn(le+O,117)],ee.Qc[1]=Ac[sn(le+E,127)],ee.lc=le+E}if(!C.Rb)return bt(o,4,"Not a key frame.");for(ue(A),C=o.Pa,g=0;4>g;++g){for(x=0;8>x;++x)for(b=0;3>b;++b)for(I=0;11>I;++I)O=ae(A,_1[g][x][b][I])?ce(A,8):w1[g][x][b][I],C.Wc[g][x].Yb[b][I]=O;for(x=0;17>x;++x)C.Xc[g][x]=C.Wc[g][S1[x]]}return o.kc=ue(A),o.kc&&(o.Bd=ce(A,8)),o.cb=1}function Eo(o,h,g,b,x,A,C){var I=h[x].Yb[g];for(g=0;16>x;++x){if(!ae(o,I[g+0]))return x;for(;!ae(o,I[g+1]);)if(I=h[++x].Yb[0],g=0,x==16)return 16;var E=h[x+1].Yb;if(ae(o,I[g+2])){var O=o,G=0;if(ae(O,(le=I)[(oe=g)+3]))if(ae(O,le[oe+6])){for(I=0,oe=2*(G=ae(O,le[oe+8]))+(le=ae(O,le[oe+9+G])),G=0,le=b1[oe];le[I];++I)G+=G+ae(O,le[I]);G+=3+(8<<oe)}else ae(O,le[oe+7])?(G=7+2*ae(O,165),G+=ae(O,145)):G=5+ae(O,159);else G=ae(O,le[oe+4])?3+ae(O,le[oe+5]):2;I=E[2]}else G=1,I=E[1];E=C+y1[x],0>(O=o).b&&ie(O);var oe,le=O.b,ee=(oe=O.Ca>>1)-(O.I>>le)>>31;--O.b,O.Ca+=ee,O.Ca|=1,O.I-=(oe+1&ee)<<le,A[E]=((G^ee)-ee)*b[(0<x)+0]}return 16}function La(o){var h=o.rb[o.sb-1];h.la=0,h.Na=0,i(o.zc,0,0,o.zc.length),o.ja=0}function ec(o,h){if(o==null)return 0;if(h==null)return bt(o,2,"NULL VP8Io parameter in VP8Decode().");if(!o.cb&&!Ts(o,h))return 0;if(e(o.cb),h.ac==null||h.ac(h)){h.ob&&(o.L=0);var g=al[o.L];if(o.L==2?(o.yb=0,o.zb=0):(o.yb=h.v-g>>4,o.zb=h.j-g>>4,0>o.yb&&(o.yb=0),0>o.zb&&(o.zb=0)),o.Va=h.o+15+g>>4,o.Hb=h.va+15+g>>4,o.Hb>o.za&&(o.Hb=o.za),o.Va>o.Ub&&(o.Va=o.Ub),0<o.L){var b=o.ed;for(g=0;4>g;++g){var x;if(o.Qa.Cb){var A=o.Qa.Lb[g];o.Qa.Fb||(A+=b.Tb)}else A=b.Tb;for(x=0;1>=x;++x){var C=o.gd[g][x],I=A;if(b.Pc&&(I+=b.vd[0],x&&(I+=b.od[0])),0<(I=0>I?0:63<I?63:I)){var E=I;0<b.wb&&(E=4<b.wb?E>>2:E>>1)>9-b.wb&&(E=9-b.wb),1>E&&(E=1),C.dd=E,C.tc=2*I+E,C.ld=40<=I?2:15<=I?1:0}else C.tc=0;C.La=x}}}g=0}else bt(o,6,"Frame setup failed"),g=o.a;if(g=g==0){if(g){o.$c=0,0<o.Aa||(o.Ic=F1);e:{g=o.Ic,b=4*(E=o.za);var O=32*E,G=E+1,oe=0<o.L?E*(0<o.Aa?2:1):0,le=(o.Aa==2?2:1)*E;if((C=b+832+(x=3*(16*g+al[o.L])/2*O)+(A=o.Fa!=null&&0<o.Fa.length?o.Kc.c*o.Kc.i:0))!=C)g=0;else{if(C>o.Vb){if(o.Vb=0,o.Ec=s(C),o.Fc=0,o.Ec==null){g=bt(o,1,"no memory during frame initialization.");break e}o.Vb=C}C=o.Ec,I=o.Fc,o.Ac=C,o.Bc=I,I+=b,o.Gd=a(O,ns),o.Hd=0,o.rb=a(G+1,Es),o.sb=1,o.wa=oe?a(oe,qn):null,o.Y=0,o.D.Nb=0,o.D.wa=o.wa,o.D.Y=o.Y,0<o.Aa&&(o.D.Y+=E),e(!0),o.oc=C,o.pc=I,I+=832,o.ya=a(le,rs),o.aa=0,o.D.ya=o.ya,o.D.aa=o.aa,o.Aa==2&&(o.D.aa+=E),o.R=16*E,o.B=8*E,E=(O=al[o.L])*o.R,O=O/2*o.B,o.sa=C,o.ta=I+E,o.qa=o.sa,o.ra=o.ta+16*g*o.R+O,o.Ha=o.qa,o.Ia=o.ra+8*g*o.B+O,o.$c=0,I+=x,o.mb=A?C:null,o.nb=A?I:null,e(I+A<=o.Fc+o.Vb),La(o),i(o.Ac,o.Bc,0,b),g=1}}if(g){if(h.ka=0,h.y=o.sa,h.O=o.ta,h.f=o.qa,h.N=o.ra,h.ea=o.Ha,h.Vd=o.Ia,h.fa=o.R,h.Rc=o.B,h.F=null,h.J=0,!Zo){for(g=-255;255>=g;++g)fr[255+g]=0>g?-g:g;for(g=-1020;1020>=g;++g)oi[1020+g]=-128>g?-128:127<g?127:g;for(g=-112;112>=g;++g)Ya[112+g]=-16>g?-16:15<g?15:g;for(g=-255;510>=g;++g)Zs[255+g]=0>g?0:255<g?255:g;Zo=1}Ks=nc,ai=tc,Ga=Ro,qr=rc,fn=Oo,tr=To,Js=Ra,Yo=as,Ka=mc,cs=Oa,us=gc,Li=Bs,hs=Fa,Ys=Wo,ds=zo,Pi=Wn,Ja=ni,pn=pc,Cn[0]=zn,Cn[1]=ic,Cn[2]=lc,Cn[3]=cc,Cn[4]=Mo,Cn[5]=Ds,Cn[6]=Bo,Cn[7]=Na,Cn[8]=hc,Cn[9]=uc,Ii[0]=Fo,Ii[1]=ac,Ii[2]=ri,Ii[3]=Os,Ii[4]=Er,Ii[5]=oc,Ii[6]=Do,li[0]=Si,li[1]=sc,li[2]=dc,li[3]=Ea,li[4]=ss,li[5]=fc,li[6]=Ta,g=1}else g=0}g&&(g=function(ee,je){for(ee.M=0;ee.M<ee.Va;++ee.M){var be,K=ee.Jc[ee.M&ee.Xb],X=ee.m,_e=ee;for(be=0;be<_e.za;++be){var Ce=X,Se=_e,Ue=Se.Ac,Oe=Se.Bc+4*be,Ze=Se.zc,Me=Se.ya[Se.aa+be];if(Se.Qa.Bb?Me.$b=ae(Ce,Se.Pa.jb[0])?2+ae(Ce,Se.Pa.jb[2]):ae(Ce,Se.Pa.jb[1]):Me.$b=0,Se.kc&&(Me.Ad=ae(Ce,Se.Bd)),Me.Za=!ae(Ce,145)+0,Me.Za){var Ct=Me.Ob,Et=0;for(Se=0;4>Se;++Se){var kt,St=Ze[0+Se];for(kt=0;4>kt;++kt){St=x1[Ue[Oe+kt]][St];for(var Dt=Bh[ae(Ce,St[0])];0<Dt;)Dt=Bh[2*Dt+ae(Ce,St[Dt])];St=-Dt,Ue[Oe+kt]=St}r(Ct,Et,Ue,Oe,4),Et+=4,Ze[0+Se]=St}}else St=ae(Ce,156)?ae(Ce,128)?1:3:ae(Ce,163)?2:0,Me.Ob[0]=St,i(Ue,Oe,St,4),i(Ze,0,St,4);Me.Dd=ae(Ce,142)?ae(Ce,114)?ae(Ce,183)?1:3:2:0}if(_e.m.Ka)return bt(ee,7,"Premature end-of-partition0 encountered.");for(;ee.ja<ee.za;++ee.ja){if(_e=K,Ce=(X=ee).rb[X.sb-1],Ue=X.rb[X.sb+X.ja],be=X.ya[X.aa+X.ja],Oe=X.kc?be.Ad:0)Ce.la=Ue.la=0,be.Za||(Ce.Na=Ue.Na=0),be.Hc=0,be.Gc=0,be.ia=0;else{var Ft,ft;if(Ce=Ue,Ue=_e,Oe=X.Pa.Xc,Ze=X.ya[X.aa+X.ja],Me=X.pb[Ze.$b],Se=Ze.ad,Ct=0,Et=X.rb[X.sb-1],St=kt=0,i(Se,Ct,0,384),Ze.Za)var cr=0,Jr=Oe[3];else{Dt=s(16);var ur=Ce.Na+Et.Na;if(ur=Za(Ue,Oe[1],ur,Me.Eb,0,Dt,0),Ce.Na=Et.Na=(0<ur)+0,1<ur)Ks(Dt,0,Se,Ct);else{var Yr=Dt[0]+3>>3;for(Dt=0;256>Dt;Dt+=16)Se[Ct+Dt]=Yr}cr=1,Jr=Oe[0]}var Tt=15&Ce.la,on=15&Et.la;for(Dt=0;4>Dt;++Dt){var ln=1&on;for(Yr=ft=0;4>Yr;++Yr)Tt=Tt>>1|(ln=(ur=Za(Ue,Jr,ur=ln+(1&Tt),Me.Sc,cr,Se,Ct))>cr)<<7,ft=ft<<2|(3<ur?3:1<ur?2:Se[Ct+0]!=0),Ct+=16;Tt>>=4,on=on>>1|ln<<7,kt=(kt<<8|ft)>>>0}for(Jr=Tt,cr=on>>4,Ft=0;4>Ft;Ft+=2){for(ft=0,Tt=Ce.la>>4+Ft,on=Et.la>>4+Ft,Dt=0;2>Dt;++Dt){for(ln=1&on,Yr=0;2>Yr;++Yr)ur=ln+(1&Tt),Tt=Tt>>1|(ln=0<(ur=Za(Ue,Oe[2],ur,Me.Qc,0,Se,Ct)))<<3,ft=ft<<2|(3<ur?3:1<ur?2:Se[Ct+0]!=0),Ct+=16;Tt>>=2,on=on>>1|ln<<5}St|=ft<<4*Ft,Jr|=Tt<<4<<Ft,cr|=(240&on)<<Ft}Ce.la=Jr,Et.la=cr,Ze.Hc=kt,Ze.Gc=St,Ze.ia=43690&St?0:Me.ia,Oe=!(kt|St)}if(0<X.L&&(X.wa[X.Y+X.ja]=X.gd[be.$b][be.Za],X.wa[X.Y+X.ja].La|=!Oe),_e.Ka)return bt(ee,7,"Premature end-of-file encountered.")}if(La(ee),X=je,_e=1,be=(K=ee).D,Ce=0<K.L&&K.M>=K.zb&&K.M<=K.Va,K.Aa==0)e:{if(be.M=K.M,be.uc=Ce,qa(K,be),_e=1,be=(ft=K.D).Nb,Ce=(St=al[K.L])*K.R,Ue=St/2*K.B,Dt=16*be*K.R,Yr=8*be*K.B,Oe=K.sa,Ze=K.ta-Ce+Dt,Me=K.qa,Se=K.ra-Ue+Yr,Ct=K.Ha,Et=K.Ia-Ue+Yr,on=(Tt=ft.M)==0,kt=Tt>=K.Va-1,K.Aa==2&&qa(K,ft),ft.uc)for(ln=(ur=K).D.M,e(ur.D.uc),ft=ur.yb;ft<ur.Hb;++ft){cr=ft,Jr=ln;var br=(Ar=(Zt=ur).D).Nb;Ft=Zt.R;var Ar=Ar.wa[Ar.Y+cr],zr=Zt.sa,bn=Zt.ta+16*br*Ft+16*cr,Hn=Ar.dd,yr=Ar.tc;if(yr!=0)if(e(3<=yr),Zt.L==1)0<cr&&Pi(zr,bn,Ft,yr+4),Ar.La&&pn(zr,bn,Ft,yr),0<Jr&&ds(zr,bn,Ft,yr+4),Ar.La&&Ja(zr,bn,Ft,yr);else{var ci=Zt.B,fs=Zt.qa,Xs=Zt.ra+8*br*ci+8*cr,Ei=Zt.Ha,Zt=Zt.Ia+8*br*ci+8*cr;br=Ar.ld,0<cr&&(Yo(zr,bn,Ft,yr+4,Hn,br),cs(fs,Xs,Ei,Zt,ci,yr+4,Hn,br)),Ar.La&&(Li(zr,bn,Ft,yr,Hn,br),Ys(fs,Xs,Ei,Zt,ci,yr,Hn,br)),0<Jr&&(Js(zr,bn,Ft,yr+4,Hn,br),Ka(fs,Xs,Ei,Zt,ci,yr+4,Hn,br)),Ar.La&&(us(zr,bn,Ft,yr,Hn,br),hs(fs,Xs,Ei,Zt,ci,yr,Hn,br))}}if(K.ia&&alert("todo:DitherRow"),X.put!=null){if(ft=16*Tt,Tt=16*(Tt+1),on?(X.y=K.sa,X.O=K.ta+Dt,X.f=K.qa,X.N=K.ra+Yr,X.ea=K.Ha,X.W=K.Ia+Yr):(ft-=St,X.y=Oe,X.O=Ze,X.f=Me,X.N=Se,X.ea=Ct,X.W=Et),kt||(Tt-=St),Tt>X.o&&(Tt=X.o),X.F=null,X.J=null,K.Fa!=null&&0<K.Fa.length&&ft<Tt&&(X.J=Ua(K,X,ft,Tt-ft),X.F=K.mb,X.F==null&&X.F.length==0)){_e=bt(K,3,"Could not decode alpha data.");break e}ft<X.j&&(St=X.j-ft,ft=X.j,e(!(1&St)),X.O+=K.R*St,X.N+=K.B*(St>>1),X.W+=K.B*(St>>1),X.F!=null&&(X.J+=X.width*St)),ft<Tt&&(X.O+=X.v,X.N+=X.v>>1,X.W+=X.v>>1,X.F!=null&&(X.J+=X.v),X.ka=ft-X.j,X.U=X.va-X.v,X.T=Tt-ft,_e=X.put(X))}be+1!=K.Ic||kt||(r(K.sa,K.ta-Ce,Oe,Ze+16*K.R,Ce),r(K.qa,K.ra-Ue,Me,Se+8*K.B,Ue),r(K.Ha,K.Ia-Ue,Ct,Et+8*K.B,Ue))}if(!_e)return bt(ee,6,"Output aborted.")}return 1}(o,h)),h.bc!=null&&h.bc(h),g&=1}return g?(o.cb=0,g):0}function jn(o,h,g,b,x){x=o[h+g+32*b]+(x>>3),o[h+g+32*b]=-256&x?0>x?0:255:x}function Rs(o,h,g,b,x,A){jn(o,h,0,g,b+x),jn(o,h,1,g,b+A),jn(o,h,2,g,b-A),jn(o,h,3,g,b-x)}function Hr(o){return(20091*o>>16)+o}function Pa(o,h,g,b){var x,A=0,C=s(16);for(x=0;4>x;++x){var I=o[h+0]+o[h+8],E=o[h+0]-o[h+8],O=(35468*o[h+4]>>16)-Hr(o[h+12]),G=Hr(o[h+4])+(35468*o[h+12]>>16);C[A+0]=I+G,C[A+1]=E+O,C[A+2]=E-O,C[A+3]=I-G,A+=4,h++}for(x=A=0;4>x;++x)I=(o=C[A+0]+4)+C[A+8],E=o-C[A+8],O=(35468*C[A+4]>>16)-Hr(C[A+12]),jn(g,b,0,0,I+(G=Hr(C[A+4])+(35468*C[A+12]>>16))),jn(g,b,1,0,E+O),jn(g,b,2,0,E-O),jn(g,b,3,0,I-G),A++,b+=32}function To(o,h,g,b){var x=o[h+0]+4,A=35468*o[h+4]>>16,C=Hr(o[h+4]),I=35468*o[h+1]>>16;Rs(g,b,0,x+C,o=Hr(o[h+1]),I),Rs(g,b,1,x+A,o,I),Rs(g,b,2,x-A,o,I),Rs(g,b,3,x-C,o,I)}function tc(o,h,g,b,x){Pa(o,h,g,b),x&&Pa(o,h+16,g,b+4)}function Ro(o,h,g,b){ai(o,h+0,g,b,1),ai(o,h+32,g,b+128,1)}function rc(o,h,g,b){var x;for(o=o[h+0]+4,x=0;4>x;++x)for(h=0;4>h;++h)jn(g,b,h,x,o)}function Oo(o,h,g,b){o[h+0]&&qr(o,h+0,g,b),o[h+16]&&qr(o,h+16,g,b+4),o[h+32]&&qr(o,h+32,g,b+128),o[h+48]&&qr(o,h+48,g,b+128+4)}function nc(o,h,g,b){var x,A=s(16);for(x=0;4>x;++x){var C=o[h+0+x]+o[h+12+x],I=o[h+4+x]+o[h+8+x],E=o[h+4+x]-o[h+8+x],O=o[h+0+x]-o[h+12+x];A[0+x]=C+I,A[8+x]=C-I,A[4+x]=O+E,A[12+x]=O-E}for(x=0;4>x;++x)C=(o=A[0+4*x]+3)+A[3+4*x],I=A[1+4*x]+A[2+4*x],E=A[1+4*x]-A[2+4*x],O=o-A[3+4*x],g[b+0]=C+I>>3,g[b+16]=O+E>>3,g[b+32]=C-I>>3,g[b+48]=O-E>>3,b+=64}function Ia(o,h,g){var b,x=h-32,A=an,C=255-o[x-1];for(b=0;b<g;++b){var I,E=A,O=C+o[h-1];for(I=0;I<g;++I)o[h+I]=E[O+o[x+I]];h+=32}}function ic(o,h){Ia(o,h,4)}function sc(o,h){Ia(o,h,8)}function ac(o,h){Ia(o,h,16)}function ri(o,h){var g;for(g=0;16>g;++g)r(o,h+32*g,o,h-32,16)}function Os(o,h){var g;for(g=16;0<g;--g)i(o,h,o[h-1],16),h+=32}function Fs(o,h,g){var b;for(b=0;16>b;++b)i(h,g+32*b,o,16)}function Fo(o,h){var g,b=16;for(g=0;16>g;++g)b+=o[h-1+32*g]+o[h+g-32];Fs(b>>5,o,h)}function Er(o,h){var g,b=8;for(g=0;16>g;++g)b+=o[h-1+32*g];Fs(b>>4,o,h)}function oc(o,h){var g,b=8;for(g=0;16>g;++g)b+=o[h+g-32];Fs(b>>4,o,h)}function Do(o,h){Fs(128,o,h)}function at(o,h,g){return o+2*h+g+2>>2}function lc(o,h){var g,b=h-32;for(b=new Uint8Array([at(o[b-1],o[b+0],o[b+1]),at(o[b+0],o[b+1],o[b+2]),at(o[b+1],o[b+2],o[b+3]),at(o[b+2],o[b+3],o[b+4])]),g=0;4>g;++g)r(o,h+32*g,b,0,b.length)}function cc(o,h){var g=o[h-1],b=o[h-1+32],x=o[h-1+64],A=o[h-1+96];ke(o,h+0,16843009*at(o[h-1-32],g,b)),ke(o,h+32,16843009*at(g,b,x)),ke(o,h+64,16843009*at(b,x,A)),ke(o,h+96,16843009*at(x,A,A))}function zn(o,h){var g,b=4;for(g=0;4>g;++g)b+=o[h+g-32]+o[h-1+32*g];for(b>>=3,g=0;4>g;++g)i(o,h+32*g,b,4)}function Mo(o,h){var g=o[h-1+0],b=o[h-1+32],x=o[h-1+64],A=o[h-1-32],C=o[h+0-32],I=o[h+1-32],E=o[h+2-32],O=o[h+3-32];o[h+0+96]=at(b,x,o[h-1+96]),o[h+1+96]=o[h+0+64]=at(g,b,x),o[h+2+96]=o[h+1+64]=o[h+0+32]=at(A,g,b),o[h+3+96]=o[h+2+64]=o[h+1+32]=o[h+0+0]=at(C,A,g),o[h+3+64]=o[h+2+32]=o[h+1+0]=at(I,C,A),o[h+3+32]=o[h+2+0]=at(E,I,C),o[h+3+0]=at(O,E,I)}function Bo(o,h){var g=o[h+1-32],b=o[h+2-32],x=o[h+3-32],A=o[h+4-32],C=o[h+5-32],I=o[h+6-32],E=o[h+7-32];o[h+0+0]=at(o[h+0-32],g,b),o[h+1+0]=o[h+0+32]=at(g,b,x),o[h+2+0]=o[h+1+32]=o[h+0+64]=at(b,x,A),o[h+3+0]=o[h+2+32]=o[h+1+64]=o[h+0+96]=at(x,A,C),o[h+3+32]=o[h+2+64]=o[h+1+96]=at(A,C,I),o[h+3+64]=o[h+2+96]=at(C,I,E),o[h+3+96]=at(I,E,E)}function Ds(o,h){var g=o[h-1+0],b=o[h-1+32],x=o[h-1+64],A=o[h-1-32],C=o[h+0-32],I=o[h+1-32],E=o[h+2-32],O=o[h+3-32];o[h+0+0]=o[h+1+64]=A+C+1>>1,o[h+1+0]=o[h+2+64]=C+I+1>>1,o[h+2+0]=o[h+3+64]=I+E+1>>1,o[h+3+0]=E+O+1>>1,o[h+0+96]=at(x,b,g),o[h+0+64]=at(b,g,A),o[h+0+32]=o[h+1+96]=at(g,A,C),o[h+1+32]=o[h+2+96]=at(A,C,I),o[h+2+32]=o[h+3+96]=at(C,I,E),o[h+3+32]=at(I,E,O)}function Na(o,h){var g=o[h+0-32],b=o[h+1-32],x=o[h+2-32],A=o[h+3-32],C=o[h+4-32],I=o[h+5-32],E=o[h+6-32],O=o[h+7-32];o[h+0+0]=g+b+1>>1,o[h+1+0]=o[h+0+64]=b+x+1>>1,o[h+2+0]=o[h+1+64]=x+A+1>>1,o[h+3+0]=o[h+2+64]=A+C+1>>1,o[h+0+32]=at(g,b,x),o[h+1+32]=o[h+0+96]=at(b,x,A),o[h+2+32]=o[h+1+96]=at(x,A,C),o[h+3+32]=o[h+2+96]=at(A,C,I),o[h+3+64]=at(C,I,E),o[h+3+96]=at(I,E,O)}function uc(o,h){var g=o[h-1+0],b=o[h-1+32],x=o[h-1+64],A=o[h-1+96];o[h+0+0]=g+b+1>>1,o[h+2+0]=o[h+0+32]=b+x+1>>1,o[h+2+32]=o[h+0+64]=x+A+1>>1,o[h+1+0]=at(g,b,x),o[h+3+0]=o[h+1+32]=at(b,x,A),o[h+3+32]=o[h+1+64]=at(x,A,A),o[h+3+64]=o[h+2+64]=o[h+0+96]=o[h+1+96]=o[h+2+96]=o[h+3+96]=A}function hc(o,h){var g=o[h-1+0],b=o[h-1+32],x=o[h-1+64],A=o[h-1+96],C=o[h-1-32],I=o[h+0-32],E=o[h+1-32],O=o[h+2-32];o[h+0+0]=o[h+2+32]=g+C+1>>1,o[h+0+32]=o[h+2+64]=b+g+1>>1,o[h+0+64]=o[h+2+96]=x+b+1>>1,o[h+0+96]=A+x+1>>1,o[h+3+0]=at(I,E,O),o[h+2+0]=at(C,I,E),o[h+1+0]=o[h+3+32]=at(g,C,I),o[h+1+32]=o[h+3+64]=at(b,g,C),o[h+1+64]=o[h+3+96]=at(x,b,g),o[h+1+96]=at(A,x,b)}function dc(o,h){var g;for(g=0;8>g;++g)r(o,h+32*g,o,h-32,8)}function Ea(o,h){var g;for(g=0;8>g;++g)i(o,h,o[h-1],8),h+=32}function is(o,h,g){var b;for(b=0;8>b;++b)i(h,g+32*b,o,8)}function Si(o,h){var g,b=8;for(g=0;8>g;++g)b+=o[h+g-32]+o[h-1+32*g];is(b>>4,o,h)}function fc(o,h){var g,b=4;for(g=0;8>g;++g)b+=o[h+g-32];is(b>>3,o,h)}function ss(o,h){var g,b=4;for(g=0;8>g;++g)b+=o[h-1+32*g];is(b>>3,o,h)}function Ta(o,h){is(128,o,h)}function Ms(o,h,g){var b=o[h-g],x=o[h+0],A=3*(x-b)+yc[1020+o[h-2*g]-o[h+g]],C=Xo[112+(A+4>>3)];o[h-g]=an[255+b+Xo[112+(A+3>>3)]],o[h+0]=an[255+x-C]}function Uo(o,h,g,b){var x=o[h+0],A=o[h+g];return mn[255+o[h-2*g]-o[h-g]]>b||mn[255+A-x]>b}function $o(o,h,g,b){return 4*mn[255+o[h-g]-o[h+0]]+mn[255+o[h-2*g]-o[h+g]]<=b}function qo(o,h,g,b,x){var A=o[h-3*g],C=o[h-2*g],I=o[h-g],E=o[h+0],O=o[h+g],G=o[h+2*g],oe=o[h+3*g];return 4*mn[255+I-E]+mn[255+C-O]>b?0:mn[255+o[h-4*g]-A]<=x&&mn[255+A-C]<=x&&mn[255+C-I]<=x&&mn[255+oe-G]<=x&&mn[255+G-O]<=x&&mn[255+O-E]<=x}function zo(o,h,g,b){var x=2*b+1;for(b=0;16>b;++b)$o(o,h+b,g,x)&&Ms(o,h+b,g)}function Wn(o,h,g,b){var x=2*b+1;for(b=0;16>b;++b)$o(o,h+b*g,1,x)&&Ms(o,h+b*g,1)}function ni(o,h,g,b){var x;for(x=3;0<x;--x)zo(o,h+=4*g,g,b)}function pc(o,h,g,b){var x;for(x=3;0<x;--x)Wn(o,h+=4,g,b)}function ji(o,h,g,b,x,A,C,I){for(A=2*A+1;0<x--;){if(qo(o,h,g,A,C))if(Uo(o,h,g,I))Ms(o,h,g);else{var E=o,O=h,G=g,oe=E[O-2*G],le=E[O-G],ee=E[O+0],je=E[O+G],be=E[O+2*G],K=27*(_e=yc[1020+3*(ee-le)+yc[1020+oe-je]])+63>>7,X=18*_e+63>>7,_e=9*_e+63>>7;E[O-3*G]=an[255+E[O-3*G]+_e],E[O-2*G]=an[255+oe+X],E[O-G]=an[255+le+K],E[O+0]=an[255+ee-K],E[O+G]=an[255+je-X],E[O+2*G]=an[255+be-_e]}h+=b}}function An(o,h,g,b,x,A,C,I){for(A=2*A+1;0<x--;){if(qo(o,h,g,A,C))if(Uo(o,h,g,I))Ms(o,h,g);else{var E=o,O=h,G=g,oe=E[O-G],le=E[O+0],ee=E[O+G],je=Xo[112+((be=3*(le-oe))+4>>3)],be=Xo[112+(be+3>>3)],K=je+1>>1;E[O-2*G]=an[255+E[O-2*G]+K],E[O-G]=an[255+oe+be],E[O+0]=an[255+le-je],E[O+G]=an[255+ee-K]}h+=b}}function Ra(o,h,g,b,x,A){ji(o,h,g,1,16,b,x,A)}function as(o,h,g,b,x,A){ji(o,h,1,g,16,b,x,A)}function gc(o,h,g,b,x,A){var C;for(C=3;0<C;--C)An(o,h+=4*g,g,1,16,b,x,A)}function Bs(o,h,g,b,x,A){var C;for(C=3;0<C;--C)An(o,h+=4,1,g,16,b,x,A)}function mc(o,h,g,b,x,A,C,I){ji(o,h,x,1,8,A,C,I),ji(g,b,x,1,8,A,C,I)}function Oa(o,h,g,b,x,A,C,I){ji(o,h,1,x,8,A,C,I),ji(g,b,1,x,8,A,C,I)}function Fa(o,h,g,b,x,A,C,I){An(o,h+4*x,x,1,8,A,C,I),An(g,b+4*x,x,1,8,A,C,I)}function Wo(o,h,g,b,x,A,C,I){An(o,h+4,1,x,8,A,C,I),An(g,b+4,1,x,8,A,C,I)}function Us(){this.ba=new vt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Nt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Da(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Ma(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Vo(){this.ua=0,this.Wa=new M,this.vb=new M,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new q,this.yc=new T}function vc(){this.xb=this.a=0,this.l=new nt,this.ca=new vt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new j,this.Pb=0,this.wd=new j,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Vo,this.ab=0,this.gc=a(4,Ma),this.Oc=0}function $s(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new nt,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function os(o,h,g,b,x,A,C){for(o=o==null?0:o[h+0],h=0;h<C;++h)x[A+h]=o+g[b+h]&255,o=x[A+h]}function Ba(o,h,g,b,x,A,C){var I;if(o==null)os(null,null,g,b,x,A,C);else for(I=0;I<C;++I)x[A+I]=o[h+I]+g[b+I]&255}function Ai(o,h,g,b,x,A,C){if(o==null)os(null,null,g,b,x,A,C);else{var I,E=o[h+0],O=E,G=E;for(I=0;I<C;++I)O=G+(E=o[h+I])-O,G=g[b+I]+(-256&O?0>O?0:255:O)&255,O=E,x[A+I]=G}}function Ua(o,h,g,b){var x=h.width,A=h.o;if(e(o!=null&&h!=null),0>g||0>=b||g+b>A)return null;if(!o.Cc){if(o.ga==null){var C;if(o.ga=new $s,(C=o.ga==null)||(C=h.width*h.o,e(o.Gb.length==0),o.Gb=s(C),o.Uc=0,o.Gb==null?C=0:(o.mb=o.Gb,o.nb=o.Uc,o.rc=null,C=1),C=!C),!C){C=o.ga;var I=o.Fa,E=o.P,O=o.qc,G=o.mb,oe=o.nb,le=E+1,ee=O-1,je=C.l;if(e(I!=null&&G!=null&&h!=null),Ni[0]=null,Ni[1]=os,Ni[2]=Ba,Ni[3]=Ai,C.ca=G,C.tb=oe,C.c=h.width,C.i=h.height,e(0<C.c&&0<C.i),1>=O)h=0;else if(C.$a=I[E+0]>>0&3,C.Z=I[E+0]>>2&3,C.Lc=I[E+0]>>4&3,E=I[E+0]>>6&3,0>C.$a||1<C.$a||4<=C.Z||1<C.Lc||E)h=0;else if(je.put=Ur,je.ac=Ht,je.bc=en,je.ma=C,je.width=h.width,je.height=h.height,je.Da=h.Da,je.v=h.v,je.va=h.va,je.j=h.j,je.o=h.o,C.$a)e:{e(C.$a==1),h=Nr();t:for(;;){if(h==null){h=0;break e}if(e(C!=null),C.mc=h,h.c=C.c,h.i=C.i,h.l=C.l,h.l.ma=C,h.l.width=C.c,h.l.height=C.i,h.a=0,ne(h.m,I,le,ee),!hn(C.c,C.i,1,h,null)||(h.ab==1&&h.gc[0].hc==3&&un(h.s)?(C.ic=1,I=h.c*h.i,h.Ta=null,h.Ua=0,h.V=s(I),h.Ba=0,h.V==null?(h.a=1,h=0):h=1):(C.ic=0,h=Sn(h,C.c)),!h))break t;h=1;break e}C.mc=null,h=0}else h=ee>=C.c*C.i;C=!h}if(C)return null;o.ga.Lc!=1?o.Ga=0:b=A-g}e(o.ga!=null),e(g+b<=A);e:{if(h=(I=o.ga).c,A=I.l.o,I.$a==0){if(le=o.rc,ee=o.Vc,je=o.Fa,E=o.P+1+g*h,O=o.mb,G=o.nb+g*h,e(E<=o.P+o.qc),I.Z!=0)for(e(Ni[I.Z]!=null),C=0;C<b;++C)Ni[I.Z](le,ee,je,E,O,G,h),le=O,ee=G,G+=h,E+=h;else for(C=0;C<b;++C)r(O,G,je,E,h),le=O,ee=G,G+=h,E+=h;o.rc=le,o.Vc=ee}else{if(e(I.mc!=null),h=g+b,e((C=I.mc)!=null),e(h<=C.i),C.C>=h)h=1;else if(I.ic||se(),I.ic){I=C.V,le=C.Ba,ee=C.c;var be=C.i,K=(je=1,E=C.$/ee,O=C.$%ee,G=C.m,oe=C.s,C.$),X=ee*be,_e=ee*h,Ce=oe.wc,Se=K<_e?Gt(oe,O,E):null;e(K<=X),e(h<=be),e(un(oe));t:for(;;){for(;!G.h&&K<_e;){if(O&Ce||(Se=Gt(oe,O,E)),e(Se!=null),Z(G),256>(be=_r(Se.G[0],Se.H[0],G)))I[le+K]=be,++K,++O>=ee&&(O=0,++E<=h&&!(E%16)&&nn(C,E));else{if(!(280>be)){je=0;break t}be=Vr(be-256,G);var Ue,Oe=_r(Se.G[4],Se.H[4],G);if(Z(G),!(K>=(Oe=tn(ee,Oe=Vr(Oe,G)))&&X-K>=be)){je=0;break t}for(Ue=0;Ue<be;++Ue)I[le+K+Ue]=I[le+K+Ue-Oe];for(K+=be,O+=be;O>=ee;)O-=ee,++E<=h&&!(E%16)&&nn(C,E);K<_e&&O&Ce&&(Se=Gt(oe,O,E))}e(G.h==U(G))}nn(C,E>h?h:E);break t}!je||G.h&&K<X?(je=0,C.a=G.h?5:3):C.$=K,h=je}else h=Sr(C,C.V,C.Ba,C.c,C.i,h,bi);if(!h){b=0;break e}}g+b>=A&&(o.Cc=1),b=1}if(!b)return null;if(o.Cc&&((b=o.ga)!=null&&(b.mc=null),o.ga=null,0<o.Ga))return alert("todo:WebPDequantizeLevels"),null}return o.nb+g*x}function d(o,h,g,b,x,A){for(;0<x--;){var C,I=o,E=h+(g?1:0),O=o,G=h+(g?0:3);for(C=0;C<b;++C){var oe=O[G+4*C];oe!=255&&(oe*=32897,I[E+4*C+0]=I[E+4*C+0]*oe>>23,I[E+4*C+1]=I[E+4*C+1]*oe>>23,I[E+4*C+2]=I[E+4*C+2]*oe>>23)}h+=A}}function _(o,h,g,b,x){for(;0<b--;){var A;for(A=0;A<g;++A){var C=o[h+2*A+0],I=15&(O=o[h+2*A+1]),E=4369*I,O=(240&O|O>>4)*E>>16;o[h+2*A+0]=(240&C|C>>4)*E>>16&240|(15&C|C<<4)*E>>16>>4&15,o[h+2*A+1]=240&O|I}h+=x}}function B(o,h,g,b,x,A,C,I){var E,O,G=255;for(O=0;O<x;++O){for(E=0;E<b;++E){var oe=o[h+E];A[C+4*E]=oe,G&=oe}h+=g,C+=I}return G!=255}function V(o,h,g,b,x){var A;for(A=0;A<x;++A)g[b+A]=o[h+A]>>8}function se(){gn=d,Ut=_,$t=B,rr=V}function xe(o,h,g){$[o]=function(b,x,A,C,I,E,O,G,oe,le,ee,je,be,K,X,_e,Ce){var Se,Ue=Ce-1>>1,Oe=I[E+0]|O[G+0]<<16,Ze=oe[le+0]|ee[je+0]<<16;e(b!=null);var Me=3*Oe+Ze+131074>>2;for(h(b[x+0],255&Me,Me>>16,be,K),A!=null&&(Me=3*Ze+Oe+131074>>2,h(A[C+0],255&Me,Me>>16,X,_e)),Se=1;Se<=Ue;++Se){var Ct=I[E+Se]|O[G+Se]<<16,Et=oe[le+Se]|ee[je+Se]<<16,kt=Oe+Ct+Ze+Et+524296,St=kt+2*(Ct+Ze)>>3;Me=St+Oe>>1,Oe=(kt=kt+2*(Oe+Et)>>3)+Ct>>1,h(b[x+2*Se-1],255&Me,Me>>16,be,K+(2*Se-1)*g),h(b[x+2*Se-0],255&Oe,Oe>>16,be,K+(2*Se-0)*g),A!=null&&(Me=kt+Ze>>1,Oe=St+Et>>1,h(A[C+2*Se-1],255&Me,Me>>16,X,_e+(2*Se-1)*g),h(A[C+2*Se+0],255&Oe,Oe>>16,X,_e+(2*Se+0)*g)),Oe=Ct,Ze=Et}1&Ce||(Me=3*Oe+Ze+131074>>2,h(b[x+Ce-1],255&Me,Me>>16,be,K+(Ce-1)*g),A!=null&&(Me=3*Ze+Oe+131074>>2,h(A[C+Ce-1],255&Me,Me>>16,X,_e+(Ce-1)*g)))}}function Pe(){vn[Qo]=A1,vn[el]=$h,vn[Fh]=k1,vn[tl]=qh,vn[rl]=zh,vn[wc]=Wh,vn[Dh]=C1,vn[xc]=$h,vn[_c]=qh,vn[nl]=zh,vn[Sc]=Wh}function Be(o){return o&-16384?0>o?0:255:o>>L1}function Je(o,h){return Be((19077*o>>8)+(26149*h>>8)-14234)}function ht(o,h,g){return Be((19077*o>>8)-(6419*h>>8)-(13320*g>>8)+8708)}function ot(o,h){return Be((19077*o>>8)+(33050*h>>8)-17685)}function At(o,h,g,b,x){b[x+0]=Je(o,g),b[x+1]=ht(o,h,g),b[x+2]=ot(o,h)}function Kt(o,h,g,b,x){b[x+0]=ot(o,h),b[x+1]=ht(o,h,g),b[x+2]=Je(o,g)}function Yt(o,h,g,b,x){var A=ht(o,h,g);h=A<<3&224|ot(o,h)>>3,b[x+0]=248&Je(o,g)|A>>5,b[x+1]=h}function lr(o,h,g,b,x){var A=240&ot(o,h)|15;b[x+0]=240&Je(o,g)|ht(o,h,g)>>4,b[x+1]=A}function Tr(o,h,g,b,x){b[x+0]=255,At(o,h,g,b,x+1)}function vr(o,h,g,b,x){Kt(o,h,g,b,x),b[x+3]=255}function kn(o,h,g,b,x){At(o,h,g,b,x),b[x+3]=255}function sn(o,h){return 0>o?0:o>h?h:o}function Vn(o,h,g){$[o]=function(b,x,A,C,I,E,O,G,oe){for(var le=G+(-2&oe)*g;G!=le;)h(b[x+0],A[C+0],I[E+0],O,G),h(b[x+1],A[C+0],I[E+0],O,G+g),x+=2,++C,++E,G+=2*g;1&oe&&h(b[x+0],A[C+0],I[E+0],O,G)}}function Ho(o,h,g){return g==0?o==0?h==0?6:5:h==0?4:0:g}function $a(o,h,g,b,x){switch(o>>>30){case 3:ai(h,g,b,x,0);break;case 2:tr(h,g,b,x);break;case 1:qr(h,g,b,x)}}function qa(o,h){var g,b,x=h.M,A=h.Nb,C=o.oc,I=o.pc+40,E=o.oc,O=o.pc+584,G=o.oc,oe=o.pc+600;for(g=0;16>g;++g)C[I+32*g-1]=129;for(g=0;8>g;++g)E[O+32*g-1]=129,G[oe+32*g-1]=129;for(0<x?C[I-1-32]=E[O-1-32]=G[oe-1-32]=129:(i(C,I-32-1,127,21),i(E,O-32-1,127,9),i(G,oe-32-1,127,9)),b=0;b<o.za;++b){var le=h.ya[h.aa+b];if(0<b){for(g=-1;16>g;++g)r(C,I+32*g-4,C,I+32*g+12,4);for(g=-1;8>g;++g)r(E,O+32*g-4,E,O+32*g+4,4),r(G,oe+32*g-4,G,oe+32*g+4,4)}var ee=o.Gd,je=o.Hd+b,be=le.ad,K=le.Hc;if(0<x&&(r(C,I-32,ee[je].y,0,16),r(E,O-32,ee[je].f,0,8),r(G,oe-32,ee[je].ea,0,8)),le.Za){var X=C,_e=I-32+16;for(0<x&&(b>=o.za-1?i(X,_e,ee[je].y[15],4):r(X,_e,ee[je+1].y,0,4)),g=0;4>g;g++)X[_e+128+g]=X[_e+256+g]=X[_e+384+g]=X[_e+0+g];for(g=0;16>g;++g,K<<=2)X=C,_e=I+Hh[g],Cn[le.Ob[g]](X,_e),$a(K,be,16*+g,X,_e)}else if(X=Ho(b,x,le.Ob[0]),Ii[X](C,I),K!=0)for(g=0;16>g;++g,K<<=2)$a(K,be,16*+g,C,I+Hh[g]);for(g=le.Gc,X=Ho(b,x,le.Dd),li[X](E,O),li[X](G,oe),K=be,X=E,_e=O,255&(le=g>>0)&&(170&le?Ga(K,256,X,_e):fn(K,256,X,_e)),le=G,K=oe,255&(g>>=8)&&(170&g?Ga(be,320,le,K):fn(be,320,le,K)),x<o.Ub-1&&(r(ee[je].y,0,C,I+480,16),r(ee[je].f,0,E,O+224,8),r(ee[je].ea,0,G,oe+224,8)),g=8*A*o.B,ee=o.sa,je=o.ta+16*b+16*A*o.R,be=o.qa,le=o.ra+8*b+g,K=o.Ha,X=o.Ia+8*b+g,g=0;16>g;++g)r(ee,je+g*o.R,C,I+32*g,16);for(g=0;8>g;++g)r(be,le+g*o.B,E,O+32*g,8),r(K,X+g*o.B,G,oe+32*g,8)}}function qs(o,h,g,b,x,A,C,I,E){var O=[0],G=[0],oe=0,le=E!=null?E.kd:0,ee=E??new Da;if(o==null||12>g)return 7;ee.data=o,ee.w=h,ee.ha=g,h=[h],g=[g],ee.gb=[ee.gb];e:{var je=h,be=g,K=ee.gb;if(e(o!=null),e(be!=null),e(K!=null),K[0]=0,12<=be[0]&&!t(o,je[0],"RIFF")){if(t(o,je[0]+8,"WEBP")){K=3;break e}var X=Ne(o,je[0]+4);if(12>X||4294967286<X){K=3;break e}if(le&&X>be[0]-8){K=7;break e}K[0]=X,je[0]+=12,be[0]-=12}K=0}if(K!=0)return K;for(X=0<ee.gb[0],g=g[0];;){e:{var _e=o;be=h,K=g;var Ce=O,Se=G,Ue=je=[0];if((Me=oe=[oe])[0]=0,8>K[0])K=7;else{if(!t(_e,be[0],"VP8X")){if(Ne(_e,be[0]+4)!=10){K=3;break e}if(18>K[0]){K=7;break e}var Oe=Ne(_e,be[0]+8),Ze=1+Ee(_e,be[0]+12);if(2147483648<=Ze*(_e=1+Ee(_e,be[0]+15))){K=3;break e}Ue!=null&&(Ue[0]=Oe),Ce!=null&&(Ce[0]=Ze),Se!=null&&(Se[0]=_e),be[0]+=18,K[0]-=18,Me[0]=1}K=0}}if(oe=oe[0],je=je[0],K!=0)return K;if(be=!!(2&je),!X&&oe)return 3;if(A!=null&&(A[0]=!!(16&je)),C!=null&&(C[0]=be),I!=null&&(I[0]=0),C=O[0],je=G[0],oe&&be&&E==null){K=0;break}if(4>g){K=7;break}if(X&&oe||!X&&!oe&&!t(o,h[0],"ALPH")){g=[g],ee.na=[ee.na],ee.P=[ee.P],ee.Sa=[ee.Sa];e:{Oe=o,K=h,X=g;var Me=ee.gb;Ce=ee.na,Se=ee.P,Ue=ee.Sa,Ze=22,e(Oe!=null),e(X!=null),_e=K[0];var Ct=X[0];for(e(Ce!=null),e(Ue!=null),Ce[0]=null,Se[0]=null,Ue[0]=0;;){if(K[0]=_e,X[0]=Ct,8>Ct){K=7;break e}var Et=Ne(Oe,_e+4);if(4294967286<Et){K=3;break e}var kt=8+Et+1&-2;if(Ze+=kt,0<Me&&Ze>Me){K=3;break e}if(!t(Oe,_e,"VP8 ")||!t(Oe,_e,"VP8L")){K=0;break e}if(Ct[0]<kt){K=7;break e}t(Oe,_e,"ALPH")||(Ce[0]=Oe,Se[0]=_e+8,Ue[0]=Et),_e+=kt,Ct-=kt}}if(g=g[0],ee.na=ee.na[0],ee.P=ee.P[0],ee.Sa=ee.Sa[0],K!=0)break}g=[g],ee.Ja=[ee.Ja],ee.xa=[ee.xa];e:if(Me=o,K=h,X=g,Ce=ee.gb[0],Se=ee.Ja,Ue=ee.xa,Oe=K[0],_e=!t(Me,Oe,"VP8 "),Ze=!t(Me,Oe,"VP8L"),e(Me!=null),e(X!=null),e(Se!=null),e(Ue!=null),8>X[0])K=7;else{if(_e||Ze){if(Me=Ne(Me,Oe+4),12<=Ce&&Me>Ce-12){K=3;break e}if(le&&Me>X[0]-8){K=7;break e}Se[0]=Me,K[0]+=8,X[0]-=8,Ue[0]=Ze}else Ue[0]=5<=X[0]&&Me[Oe+0]==47&&!(Me[Oe+4]>>5),Se[0]=X[0];K=0}if(g=g[0],ee.Ja=ee.Ja[0],ee.xa=ee.xa[0],h=h[0],K!=0)break;if(4294967286<ee.Ja)return 3;if(I==null||be||(I[0]=ee.xa?2:1),C=[C],je=[je],ee.xa){if(5>g){K=7;break}I=C,le=je,be=A,o==null||5>g?o=0:5<=g&&o[h+0]==47&&!(o[h+4]>>5)?(X=[0],Me=[0],Ce=[0],ne(Se=new j,o,h,g),Ye(Se,X,Me,Ce)?(I!=null&&(I[0]=X[0]),le!=null&&(le[0]=Me[0]),be!=null&&(be[0]=Ce[0]),o=1):o=0):o=0}else{if(10>g){K=7;break}I=je,o==null||10>g||!or(o,h+3,g-3)?o=0:(le=o[h+0]|o[h+1]<<8|o[h+2]<<16,be=16383&(o[h+7]<<8|o[h+6]),o=16383&(o[h+9]<<8|o[h+8]),1&le||3<(le>>1&7)||!(le>>4&1)||le>>5>=ee.Ja||!be||!o?o=0:(C&&(C[0]=be),I&&(I[0]=o),o=1))}if(!o||(C=C[0],je=je[0],oe&&(O[0]!=C||G[0]!=je)))return 3;E!=null&&(E[0]=ee,E.offset=h-E.w,e(4294967286>h-E.w),e(E.offset==E.ha-g));break}return K==0||K==7&&oe&&E==null?(A!=null&&(A[0]|=ee.na!=null&&0<ee.na.length),b!=null&&(b[0]=C),x!=null&&(x[0]=je),0):K}function za(o,h,g){var b=h.width,x=h.height,A=0,C=0,I=b,E=x;if(h.Da=o!=null&&0<o.Da,h.Da&&(I=o.cd,E=o.bd,A=o.v,C=o.j,11>g||(A&=-2,C&=-2),0>A||0>C||0>=I||0>=E||A+I>b||C+E>x))return 0;if(h.v=A,h.j=C,h.va=A+I,h.o=C+E,h.U=I,h.T=E,h.da=o!=null&&0<o.da,h.da){if(!et(I,E,g=[o.ib],A=[o.hb]))return 0;h.ib=g[0],h.hb=A[0]}return h.ob=o!=null&&o.ob,h.Kb=o==null||!o.Sd,h.da&&(h.ob=h.ib<3*b/4&&h.hb<3*x/4,h.Kb=0),1}function Wa(o){if(o==null)return 2;if(11>o.S){var h=o.f.RGBA;h.fb+=(o.height-1)*h.A,h.A=-h.A}else h=o.f.kb,o=o.height,h.O+=(o-1)*h.fa,h.fa=-h.fa,h.N+=(o-1>>1)*h.Ab,h.Ab=-h.Ab,h.W+=(o-1>>1)*h.Db,h.Db=-h.Db,h.F!=null&&(h.J+=(o-1)*h.lb,h.lb=-h.lb);return 0}function zs(o,h,g,b){if(b==null||0>=o||0>=h)return 2;if(g!=null){if(g.Da){var x=g.cd,A=g.bd,C=-2&g.v,I=-2&g.j;if(0>C||0>I||0>=x||0>=A||C+x>o||I+A>h)return 2;o=x,h=A}if(g.da){if(!et(o,h,x=[g.ib],A=[g.hb]))return 2;o=x[0],h=A[0]}}b.width=o,b.height=h;e:{var E=b.width,O=b.height;if(o=b.S,0>=E||0>=O||!(o>=Qo&&13>o))o=2;else{if(0>=b.Rd&&b.sd==null){C=A=x=h=0;var G=(I=E*Gh[o])*O;if(11>o||(A=(O+1)/2*(h=(E+1)/2),o==12&&(C=(x=E)*O)),(O=s(G+2*A+C))==null){o=1;break e}b.sd=O,11>o?((E=b.f.RGBA).eb=O,E.fb=0,E.A=I,E.size=G):((E=b.f.kb).y=O,E.O=0,E.fa=I,E.Fd=G,E.f=O,E.N=0+G,E.Ab=h,E.Cd=A,E.ea=O,E.W=0+G+A,E.Db=h,E.Ed=A,o==12&&(E.F=O,E.J=0+G+2*A),E.Tc=C,E.lb=x)}if(h=1,x=b.S,A=b.width,C=b.height,x>=Qo&&13>x)if(11>x)o=b.f.RGBA,h&=(I=Math.abs(o.A))*(C-1)+A<=o.size,h&=I>=A*Gh[x],h&=o.eb!=null;else{o=b.f.kb,I=(A+1)/2,G=(C+1)/2,E=Math.abs(o.fa),O=Math.abs(o.Ab);var oe=Math.abs(o.Db),le=Math.abs(o.lb),ee=le*(C-1)+A;h&=E*(C-1)+A<=o.Fd,h&=O*(G-1)+I<=o.Cd,h=(h&=oe*(G-1)+I<=o.Ed)&E>=A&O>=I&oe>=I,h&=o.y!=null,h&=o.f!=null,h&=o.ea!=null,x==12&&(h&=le>=A,h&=ee<=o.Tc,h&=o.F!=null)}else h=0;o=h?0:2}}return o!=0||g!=null&&g.fd&&(o=Wa(b)),o}var jr=64,Ws=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Vs=24,Hs=32,Va=8,Gr=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Te("Predictor0","PredictorAdd0"),$.Predictor0=function(){return 4278190080},$.Predictor1=function(o){return o},$.Predictor2=function(o,h,g){return h[g+0]},$.Predictor3=function(o,h,g){return h[g+1]},$.Predictor4=function(o,h,g){return h[g-1]},$.Predictor5=function(o,h,g){return Re(Re(o,h[g+1]),h[g+0])},$.Predictor6=function(o,h,g){return Re(o,h[g-1])},$.Predictor7=function(o,h,g){return Re(o,h[g+0])},$.Predictor8=function(o,h,g){return Re(h[g-1],h[g+0])},$.Predictor9=function(o,h,g){return Re(h[g+0],h[g+1])},$.Predictor10=function(o,h,g){return Re(Re(o,h[g-1]),Re(h[g+0],h[g+1]))},$.Predictor11=function(o,h,g){var b=h[g+0];return 0>=st(b>>24&255,o>>24&255,(h=h[g-1])>>24&255)+st(b>>16&255,o>>16&255,h>>16&255)+st(b>>8&255,o>>8&255,h>>8&255)+st(255&b,255&o,255&h)?b:o},$.Predictor12=function(o,h,g){var b=h[g+0];return(Ve((o>>24&255)+(b>>24&255)-((h=h[g-1])>>24&255))<<24|Ve((o>>16&255)+(b>>16&255)-(h>>16&255))<<16|Ve((o>>8&255)+(b>>8&255)-(h>>8&255))<<8|Ve((255&o)+(255&b)-(255&h)))>>>0},$.Predictor13=function(o,h,g){var b=h[g-1];return(tt((o=Re(o,h[g+0]))>>24&255,b>>24&255)<<24|tt(o>>16&255,b>>16&255)<<16|tt(o>>8&255,b>>8&255)<<8|tt(o>>0&255,b>>0&255))>>>0};var bc=$.PredictorAdd0;$.PredictorAdd1=ct,Te("Predictor2","PredictorAdd2"),Te("Predictor3","PredictorAdd3"),Te("Predictor4","PredictorAdd4"),Te("Predictor5","PredictorAdd5"),Te("Predictor6","PredictorAdd6"),Te("Predictor7","PredictorAdd7"),Te("Predictor8","PredictorAdd8"),Te("Predictor9","PredictorAdd9"),Te("Predictor10","PredictorAdd10"),Te("Predictor11","PredictorAdd11"),Te("Predictor12","PredictorAdd12"),Te("Predictor13","PredictorAdd13");var Ha=$.PredictorAdd2;ut("ColorIndexInverseTransform","MapARGB","32b",function(o){return o>>8&255},function(o){return o}),ut("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(o){return o},function(o){return o>>8&255});var Go,dn=$.ColorIndexInverseTransform,Gs=$.MapARGB,Ko=$.VP8LColorIndexInverseTransformAlpha,Jo=$.MapAlpha,ki=$.VP8LPredictorsAdd=[];ki.length=16,($.VP8LPredictors=[]).length=16,($.VP8LPredictorsAdd_C=[]).length=16,($.VP8LPredictors_C=[]).length=16;var ls,Kr,$r,Ci,ii,si,Ks,ai,tr,Ga,qr,fn,Js,Yo,Ka,cs,us,Li,hs,Ys,ds,Pi,Ja,pn,gn,Ut,$t,rr,fr=s(511),oi=s(2041),Ya=s(225),Zs=s(767),Zo=0,yc=oi,Xo=Ya,an=Zs,mn=fr,Qo=0,el=1,Fh=2,tl=3,rl=4,wc=5,Dh=6,xc=7,_c=8,nl=9,Sc=10,h1=[2,3,7],d1=[3,3,11],Mh=[280,256,256,256,40],f1=[0,1,1,1,0],p1=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],g1=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],m1=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],v1=8,jc=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Ac=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Za=null,b1=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],y1=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Bh=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],w1=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],x1=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],_1=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],S1=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ii=[],Cn=[],li=[],j1=1,Uh=2,Ni=[],vn=[];xe("UpsampleRgbLinePair",At,3),xe("UpsampleBgrLinePair",Kt,3),xe("UpsampleRgbaLinePair",kn,4),xe("UpsampleBgraLinePair",vr,4),xe("UpsampleArgbLinePair",Tr,4),xe("UpsampleRgba4444LinePair",lr,2),xe("UpsampleRgb565LinePair",Yt,2);var A1=$.UpsampleRgbLinePair,k1=$.UpsampleBgrLinePair,$h=$.UpsampleRgbaLinePair,qh=$.UpsampleBgraLinePair,zh=$.UpsampleArgbLinePair,Wh=$.UpsampleRgba4444LinePair,C1=$.UpsampleRgb565LinePair,il=16,sl=1<<il-1,Xa=-227,kc=482,L1=6,Vh=0,P1=s(256),I1=s(256),N1=s(256),E1=s(256),T1=s(kc-Xa),R1=s(kc-Xa);Vn("YuvToRgbRow",At,3),Vn("YuvToBgrRow",Kt,3),Vn("YuvToRgbaRow",kn,4),Vn("YuvToBgraRow",vr,4),Vn("YuvToArgbRow",Tr,4),Vn("YuvToRgba4444Row",lr,2),Vn("YuvToRgb565Row",Yt,2);var Hh=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],al=[0,2,8],O1=[8,7,6,4,4,2,2,2,1,1,1,1],F1=1;this.WebPDecodeRGBA=function(o,h,g,b,x){var A=el,C=new Us,I=new vt;C.ba=I,I.S=A,I.width=[I.width],I.height=[I.height];var E=I.width,O=I.height,G=new Ot;if(G==null||o==null)var oe=2;else e(G!=null),oe=qs(o,h,g,G.width,G.height,G.Pd,G.Qd,G.format,null);if(oe!=0?E=0:(E!=null&&(E[0]=G.width[0]),O!=null&&(O[0]=G.height[0]),E=1),E){I.width=I.width[0],I.height=I.height[0],b!=null&&(b[0]=I.width),x!=null&&(x[0]=I.height);e:{if(b=new nt,(x=new Da).data=o,x.w=h,x.ha=g,x.kd=1,h=[0],e(x!=null),((o=qs(x.data,x.w,x.ha,null,null,null,h,null,x))==0||o==7)&&h[0]&&(o=4),(h=o)==0){if(e(C!=null),b.data=x.data,b.w=x.w+x.offset,b.ha=x.ha-x.offset,b.put=Ur,b.ac=Ht,b.bc=en,b.ma=C,x.xa){if((o=Nr())==null){C=1;break e}if(function(le,ee){var je=[0],be=[0],K=[0];t:for(;;){if(le==null)return 0;if(ee==null)return le.a=2,0;if(le.l=ee,le.a=0,ne(le.m,ee.data,ee.w,ee.ha),!Ye(le.m,je,be,K)){le.a=3;break t}if(le.xb=Uh,ee.width=je[0],ee.height=be[0],!hn(je[0],be[0],1,le,null))break t;return 1}return e(le.a!=0),0}(o,b)){if(b=(h=zs(b.width,b.height,C.Oa,C.ba))==0){t:{b=o;r:for(;;){if(b==null){b=0;break t}if(e(b.s.yc!=null),e(b.s.Ya!=null),e(0<b.s.Wb),e((g=b.l)!=null),e((x=g.ma)!=null),b.xb!=0){if(b.ca=x.ba,b.tb=x.tb,e(b.ca!=null),!za(x.Oa,g,tl)){b.a=2;break r}if(!Sn(b,g.width)||g.da)break r;if((g.da||pe(b.ca.S))&&se(),11>b.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),b.ca.f.kb.F!=null&&se()),b.Pb&&0<b.s.ua&&b.s.vb.X==null&&!Ke(b.s.vb,b.s.Wa.Xa)){b.a=1;break r}b.xb=0}if(!Sr(b,b.V,b.Ba,b.c,b.i,g.o,ti))break r;x.Dc=b.Ma,b=1;break t}e(b.a!=0),b=0}b=!b}b&&(h=o.a)}else h=o.a}else{if((o=new gt)==null){C=1;break e}if(o.Fa=x.na,o.P=x.P,o.qc=x.Sa,Ts(o,b)){if((h=zs(b.width,b.height,C.Oa,C.ba))==0){if(o.Aa=0,g=C.Oa,e((x=o)!=null),g!=null){if(0<(E=0>(E=g.Md)?0:100<E?255:255*E/100)){for(O=G=0;4>O;++O)12>(oe=x.pb[O]).lc&&(oe.ia=E*O1[0>oe.lc?0:oe.lc]>>3),G|=oe.ia;G&&(alert("todo:VP8InitRandom"),x.ia=1)}x.Ga=g.Id,100<x.Ga?x.Ga=100:0>x.Ga&&(x.Ga=0)}ec(o,b)||(h=o.a)}}else h=o.a}h==0&&C.Oa!=null&&C.Oa.fd&&(h=Wa(C.ba))}C=h}A=C!=0?null:11>A?I.f.RGBA.eb:I.f.kb.y}else A=null;return A};var Gh=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function f($,H){for(var Y="",N=0;N<4;N++)Y+=String.fromCharCode($[H++]);return Y}function p($,H){return($[H+0]<<0|$[H+1]<<8|$[H+2]<<16)>>>0}function m($,H){return($[H+0]<<0|$[H+1]<<8|$[H+2]<<16|$[H+3]<<24)>>>0}new l;var y=[0],v=[0],k=[],S=new l,P=n,w=function($,H){var Y={},N=0,T=!1,z=0,q=0;if(Y.frames=[],!function(D,U,W,Z){for(var ie=0;ie<Z;ie++)if(D[U+ie]!=W.charCodeAt(ie))return!0;return!1}($,H,"RIFF",4)){for(m($,H+=4),H+=8;H<$.length;){var de=f($,H),ce=m($,H+=4);H+=4;var me=ce+(1&ce);switch(de){case"VP8 ":case"VP8L":Y.frames[N]===void 0&&(Y.frames[N]={}),(ve=Y.frames[N]).src_off=T?q:H-8,ve.src_size=z+ce+8,N++,T&&(T=!1,z=0,q=0);break;case"VP8X":(ve=Y.header={}).feature_flags=$[H];var ne=H+4;ve.canvas_width=1+p($,ne),ne+=3,ve.canvas_height=1+p($,ne),ne+=3;break;case"ALPH":T=!0,z=me+8,q=H-8;break;case"ANIM":(ve=Y.header).bgcolor=m($,H),ne=H+4,ve.loop_count=(Le=$)[(j=ne)+0]<<0|Le[j+1]<<8,ne+=2;break;case"ANMF":var ge,ve;(ve=Y.frames[N]={}).offset_x=2*p($,H),H+=3,ve.offset_y=2*p($,H),H+=3,ve.width=1+p($,H),H+=3,ve.height=1+p($,H),H+=3,ve.duration=p($,H),H+=3,ge=$[H++],ve.dispose=1&ge,ve.blend=ge>>1&1}de!="ANMF"&&(H+=me)}var Le,j;return Y}}(P,0);w.response=P,w.rgbaoutput=!0,w.dataurl=!1;var L=w.header?w.header:null,R=w.frames?w.frames:null;if(L){L.loop_counter=L.loop_count,y=[L.canvas_height],v=[L.canvas_width];for(var J=0;J<R.length&&R[J].blend!=0;J++);}var te=R[0],he=S.WebPDecodeRGBA(P,te.src_off,te.src_size,v,y);te.rgba=he,te.imgwidth=v[0],te.imgheight=y[0];for(var Q=0;Q<v[0]*y[0]*4;Q++)k[Q]=he[Q];return this.width=v,this.height=y,this.data=k,this}(function(n){var e=function(){return typeof Cu=="function"},t=function(y,v,k,S){var P=4,w=a;switch(S){case n.image_compression.FAST:P=1,w=s;break;case n.image_compression.MEDIUM:P=6,w=c;break;case n.image_compression.SLOW:P=9,w=l}y=r(y,v,k,w);var L=Cu(y,{level:P});return n.__addimage__.arrayBufferToBinaryString(L)},r=function(y,v,k,S){for(var P,w,L,R=y.length/v,J=new Uint8Array(y.length+R),te=p(),he=0;he<R;he+=1){if(L=he*v,P=y.subarray(L,L+v),S)J.set(S(P,k,w),L+he);else{for(var Q,$=te.length,H=[];Q<$;Q+=1)H[Q]=te[Q](P,k,w);var Y=m(H.concat());J.set(H[Y],L+he)}w=P}return J},i=function(y){var v=Array.apply([],y);return v.unshift(0),v},s=function(y,v){var k,S=[],P=y.length;S[0]=1;for(var w=0;w<P;w+=1)k=y[w-v]||0,S[w+1]=y[w]-k+256&255;return S},a=function(y,v,k){var S,P=[],w=y.length;P[0]=2;for(var L=0;L<w;L+=1)S=k&&k[L]||0,P[L+1]=y[L]-S+256&255;return P},c=function(y,v,k){var S,P,w=[],L=y.length;w[0]=3;for(var R=0;R<L;R+=1)S=y[R-v]||0,P=k&&k[R]||0,w[R+1]=y[R]+256-(S+P>>>1)&255;return w},l=function(y,v,k){var S,P,w,L,R=[],J=y.length;R[0]=4;for(var te=0;te<J;te+=1)S=y[te-v]||0,P=k&&k[te]||0,w=k&&k[te-v]||0,L=f(S,P,w),R[te+1]=y[te]-L+256&255;return R},f=function(y,v,k){if(y===v&&v===k)return y;var S=Math.abs(v-k),P=Math.abs(y-k),w=Math.abs(y+v-k-k);return S<=P&&S<=w?y:P<=w?v:k},p=function(){return[i,s,a,c,l]},m=function(y){var v=y.map(function(k){return k.reduce(function(S,P){return S+Math.abs(P)},0)});return v.indexOf(Math.min.apply(null,v))};n.processPNG=function(y,v,k,S){var P,w,L,R,J,te,he,Q,$,H,Y,N,T,z,q,de=this.decode.FLATE_DECODE,ce="";if(this.__addimage__.isArrayBuffer(y)&&(y=new Uint8Array(y)),this.__addimage__.isArrayBufferView(y)){if(y=(L=new Sb(y)).imgData,w=L.bits,P=L.colorSpace,J=L.colors,[4,6].indexOf(L.colorType)!==-1){if(L.bits===8){$=(Q=L.pixelBitlength==32?new Uint32Array(L.decodePixels().buffer):L.pixelBitlength==16?new Uint16Array(L.decodePixels().buffer):new Uint8Array(L.decodePixels().buffer)).length,Y=new Uint8Array($*L.colors),H=new Uint8Array($);var me,ne=L.pixelBitlength-L.bits;for(z=0,q=0;z<$;z++){for(T=Q[z],me=0;me<ne;)Y[q++]=T>>>me&255,me+=L.bits;H[z]=T>>>me&255}}if(L.bits===16){$=(Q=new Uint32Array(L.decodePixels().buffer)).length,Y=new Uint8Array($*(32/L.pixelBitlength)*L.colors),H=new Uint8Array($*(32/L.pixelBitlength)),N=L.colors>1,z=0,q=0;for(var ge=0;z<$;)T=Q[z++],Y[q++]=T>>>0&255,N&&(Y[q++]=T>>>16&255,T=Q[z++],Y[q++]=T>>>0&255),H[ge++]=T>>>16&255;w=8}S!==n.image_compression.NONE&&e()?(y=t(Y,L.width*L.colors,L.colors,S),he=t(H,L.width,1,S)):(y=Y,he=H,de=void 0)}if(L.colorType===3&&(P=this.color_spaces.INDEXED,te=L.palette,L.transparency.indexed)){var ve=L.transparency.indexed,Le=0;for(z=0,$=ve.length;z<$;++z)Le+=ve[z];if((Le/=255)===$-1&&ve.indexOf(0)!==-1)R=[ve.indexOf(0)];else if(Le!==$){for(Q=L.decodePixels(),H=new Uint8Array(Q.length),z=0,$=Q.length;z<$;z++)H[z]=ve[Q[z]];he=t(H,L.width,1)}}var j=function(D){var U;switch(D){case n.image_compression.FAST:U=11;break;case n.image_compression.MEDIUM:U=13;break;case n.image_compression.SLOW:U=14;break;default:U=12}return U}(S);return de===this.decode.FLATE_DECODE&&(ce="/Predictor "+j+" "),ce+="/Colors "+J+" /BitsPerComponent "+w+" /Columns "+L.width,(this.__addimage__.isArrayBuffer(y)||this.__addimage__.isArrayBufferView(y))&&(y=this.__addimage__.arrayBufferToBinaryString(y)),(he&&this.__addimage__.isArrayBuffer(he)||this.__addimage__.isArrayBufferView(he))&&(he=this.__addimage__.arrayBufferToBinaryString(he)),{alias:k,data:y,index:v,filter:de,decodeParameters:ce,transparency:R,palette:te,sMask:he,predictor:j,width:L.width,height:L.height,bitsPerComponent:w,colorSpace:P}}}})(rt.API),function(n){n.processGIF89A=function(e,t,r,i){var s=new jb(e),a=s.width,c=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var f={data:l,width:a,height:c},p=new nu(100).encode(f,100);return n.processJPEG.call(this,p,t,r,i)},n.processGIF87A=n.processGIF89A}(rt.API),Nn.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:t,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Nn.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){Mt.log("bit decode error:"+t)}},Nn.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+8*i*4,c=0;c<8&&8*i+c<this.width;c++){var l=this.palette[s>>7-c&1];this.data[a+4*c]=l.blue,this.data[a+4*c+1]=l.green,this.data[a+4*c+2]=l.red,this.data[a+4*c+3]=255}t!==0&&(this.pos+=4-t)}},Nn.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<n;i++){var s=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+2*i*4,c=s>>4,l=15&s,f=this.palette[c];if(this.data[a]=f.blue,this.data[a+1]=f.green,this.data[a+2]=f.red,this.data[a+3]=255,2*i+1>=this.width)break;f=this.palette[l],this.data[a+4]=f.blue,this.data[a+4+1]=f.green,this.data[a+4+2]=f.red,this.data[a+4+3]=255}e!==0&&(this.pos+=4-e)}},Nn.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*r;if(i<this.palette.length){var a=this.palette[i];this.data[s]=a.red,this.data[s+1]=a.green,this.data[s+2]=a.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}n!==0&&(this.pos+=4-n)}},Nn.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&e)/e*255|0,c=(s>>5&e)/e*255|0,l=(s>>10&e)/e*255|0,f=s>>15?255:0,p=r*this.width*4+4*i;this.data[p]=l,this.data[p+1]=c,this.data[p+2]=a,this.data[p+3]=f}this.pos+=n}},Nn.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(a&e)/e*255|0,l=(a>>5&t)/t*255|0,f=(a>>11)/e*255|0,p=i*this.width*4+4*s;this.data[p]=f,this.data[p+1]=l,this.data[p+2]=c,this.data[p+3]=255}this.pos+=n}},Nn.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*t;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=255}this.pos+=this.width%4}},Nn.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),c=e*this.width*4+4*t;this.data[c]=s,this.data[c+1]=i,this.data[c+2]=r,this.data[c+3]=a}},Nn.prototype.getData=function(){return this.data},function(n){n.processBMP=function(e,t,r,i){var s=new Nn(e,!1),a=s.width,c=s.height,l={data:s.getData(),width:a,height:c},f=new nu(100).encode(l,100);return n.processJPEG.call(this,f,t,r,i)}}(rt.API),hf.prototype.getData=function(){return this.data},function(n){n.processWEBP=function(e,t,r,i){var s=new hf(e),a=s.width,c=s.height,l={data:s.getData(),width:a,height:c},f=new nu(100).encode(l,100);return n.processJPEG.call(this,f,t,r,i)}}(rt.API),rt.API.processRGBA=function(n,e,t){for(var r=n.data,i=r.length,s=new Uint8Array(i/4*3),a=new Uint8Array(i/4),c=0,l=0,f=0;f<i;f+=4){var p=r[f],m=r[f+1],y=r[f+2],v=r[f+3];s[c++]=p,s[c++]=m,s[c++]=y,a[l++]=v}var k=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:k,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},rt.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},la=rt.API,jl=la.getCharWidthsArray=function(n,e){var t,r,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),a=e.charSpace||this.internal.getCharSpace(),c=e.widths?e.widths:i.metadata.Unicode.widths,l=c.fof?c.fof:1,f=e.kerning?e.kerning:i.metadata.Unicode.kerning,p=f.fof?f.fof:1,m=e.doKerning!==!1,y=0,v=n.length,k=0,S=c[0]||l,P=[];for(t=0;t<v;t++)r=n.charCodeAt(t),typeof i.metadata.widthOfString=="function"?P.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+a*(1e3/s)||0)/1e3):(y=m&&Bt(f[r])==="object"&&!isNaN(parseInt(f[r][k],10))?f[r][k]/p:0,P.push((c[r]||S)/l+y)),k=r;return P},of=la.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return la.processArabic&&(n=la.processArabic(n)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(n,t,i)/t:jl.apply(this,arguments).reduce(function(s,a){return s+a},0)},lf=function(n,e,t,r){for(var i=[],s=0,a=n.length,c=0;s!==a&&c+e[s]<t;)c+=e[s],s++;i.push(n.slice(0,s));var l=s;for(c=0;s!==a;)c+e[s]>r&&(i.push(n.slice(l,s)),c=0,l=s),c+=e[s],s++;return l!==s&&i.push(n.slice(l,s)),i},cf=function(n,e,t){t||(t={});var r,i,s,a,c,l,f,p=[],m=[p],y=t.textIndent||0,v=0,k=0,S=n.split(" "),P=jl.apply(this,[" ",t])[0];if(l=t.lineIndent===-1?S[0].length+2:t.lineIndent||0){var w=Array(l).join(" "),L=[];S.map(function(J){(J=J.split(/\s*\n/)).length>1?L=L.concat(J.map(function(te,he){return(he&&te.length?`
`:"")+te})):L.push(J[0])}),S=L,l=of.apply(this,[w,t])}for(s=0,a=S.length;s<a;s++){var R=0;if(r=S[s],l&&r[0]==`
`&&(r=r.substr(1),R=1),y+v+(k=(i=jl.apply(this,[r,t])).reduce(function(J,te){return J+te},0))>e||R){if(k>e){for(c=lf.apply(this,[r,i,e-(y+v),e]),p.push(c.shift()),p=[c.pop()];c.length;)m.push([c.shift()]);k=i.slice(r.length-(p[0]?p[0].length:0)).reduce(function(J,te){return J+te},0)}else p=[r];m.push(p),y=k+l,v=P}else p.push(r),y+=v+k,v=P}return f=l?function(J,te){return(te?w:"")+J.join(" ")}:function(J){return J.join(" ")},m.map(f)},la.splitTextToSize=function(n,e,t){var r,i=(t=t||{}).fontSize||this.internal.getFontSize(),s=(function(p){if(p.widths&&p.kerning)return{widths:p.widths,kerning:p.kerning};var m=this.internal.getFont(p.fontName,p.fontStyle);return m.metadata.Unicode?{widths:m.metadata.Unicode.widths||{0:1},kerning:m.metadata.Unicode.kerning||{}}:{font:m.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);r=Array.isArray(n)?n:String(n).split(/\r?\n/);var a=1*this.internal.scaleFactor*e/i;s.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=t.lineIndent;var c,l,f=[];for(c=0,l=r.length;c<l;c++)f=f.concat(cf.apply(this,[r[c],a,s]));return f},function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},r={},i=0;i<e.length;i++)t[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var s=function(m){return"0x"+parseInt(m,10).toString(16)},a=n.__fontmetrics__.compress=function(m){var y,v,k,S,P=["{"];for(var w in m){if(y=m[w],isNaN(parseInt(w,10))?v="'"+w+"'":(w=parseInt(w,10),v=(v=s(w).slice(2)).slice(0,-1)+r[v.slice(-1)]),typeof y=="number")y<0?(k=s(y).slice(3),S="-"):(k=s(y).slice(2),S=""),k=S+k.slice(0,-1)+r[k.slice(-1)];else{if(Bt(y)!=="object")throw new Error("Don't know what to do with value type "+Bt(y)+".");k=a(y)}P.push(v+k)}return P.push("}"),P.join("")},c=n.__fontmetrics__.uncompress=function(m){if(typeof m!="string")throw new Error("Invalid argument passed to uncompress.");for(var y,v,k,S,P={},w=1,L=P,R=[],J="",te="",he=m.length-1,Q=1;Q<he;Q+=1)(S=m[Q])=="'"?y?(k=y.join(""),y=void 0):y=[]:y?y.push(S):S=="{"?(R.push([L,k]),L={},k=void 0):S=="}"?((v=R.pop())[0][v[1]]=L,k=void 0,L=v[0]):S=="-"?w=-1:k===void 0?t.hasOwnProperty(S)?(J+=t[S],k=parseInt(J,16)*w,w=1,J=""):J+=S:t.hasOwnProperty(S)?(te+=t[S],L[k]=parseInt(te,16)*w,w=1,k=void 0,te=""):te+=S;return P},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},f={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},p={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(m){var y=m.font,v=p.Unicode[y.postScriptName];v&&(y.metadata.Unicode={},y.metadata.Unicode.widths=v.widths,y.metadata.Unicode.kerning=v.kerning);var k=f.Unicode[y.postScriptName];k&&(y.metadata.Unicode.encoding=k,y.encoding=k.codePages[0])}])}(rt.API),function(n){var e=function(t){for(var r=t.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=t.charCodeAt(s);return i};n.API.events.push(["addFont",function(t){var r=void 0,i=t.font,s=t.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(a,c){c=/^\x00\x01\x00\x00/.test(c)?e(c):e(bo(c)),a.metadata=n.API.TTFFont.open(c),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(i,r)}}])}(rt),function(n){function e(){return(it.canvg?Promise.resolve(it.canvg):Ji(()=>import("./index.es-BhtQeACu.js"),__vite__mapDeps([0,1,2]))).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}rt.API.addSvgAsImage=function(t,r,i,s,a,c,l,f){if(isNaN(r)||isNaN(i))throw Mt.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(a))throw Mt.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var p=document.createElement("canvas");p.width=s,p.height=a;var m=p.getContext("2d");m.fillStyle="#fff",m.fillRect(0,0,p.width,p.height);var y={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},v=this;return e().then(function(k){return k.fromString(m,t,y)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(k){return k.render(y)}).then(function(){v.addImage(p.toDataURL("image/jpeg",1),r,i,s,a,l,f)})}}(),rt.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,t);return this},rt.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var r,i,s,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},c=Object.keys(a),l=[],f=0,p=0,m=0;function y(k,S){var P,w=!1;for(P=0;P<k.length;P+=1)k[P]===S&&(w=!0);return w}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var v=c.length;for(m=0;m<v;m+=1)t[c[m]].value=t[c[m]].defaultValue,t[c[m]].explicitSet=!1}if(Bt(n)==="object"){for(i in n)if(s=n[i],y(c,i)&&s!==void 0){if(t[i].type==="boolean"&&typeof s=="boolean")t[i].value=s;else if(t[i].type==="name"&&y(t[i].valueSet,s))t[i].value=s;else if(t[i].type==="integer"&&Number.isInteger(s))t[i].value=s;else if(t[i].type==="array"){for(f=0;f<s.length;f+=1)if(r=!0,s[f].length===1&&typeof s[f][0]=="number")l.push(String(s[f]-1));else if(s[f].length>1){for(p=0;p<s[f].length;p+=1)typeof s[f][p]!="number"&&(r=!1);r===!0&&l.push([s[f][0]-1,s[f][1]-1].join(" "))}t[i].value="["+l.join(" ")+"]"}else t[i].value=t[i].defaultValue;t[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var k,S=[];for(k in t)t[k].explicitSet===!0&&(t[k].type==="name"?S.push("/"+k+" /"+t[k].value):S.push("/"+k+" "+t[k].value));S.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+S.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(n){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),c=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),f=s.length+a.length+c.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+f+" >>"),this.internal.write("stream"),this.internal.write(i+s+a+c+l),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(rt.API),function(n){var e=n.API,t=e.pdfEscape16=function(s,a){for(var c,l=a.metadata.Unicode.widths,f=["","0","00","000","0000"],p=[""],m=0,y=s.length;m<y;++m){if(c=a.metadata.characterToGlyph(s.charCodeAt(m)),a.metadata.glyIdsUsed.push(c),a.metadata.toUnicode[c]=s.charCodeAt(m),l.indexOf(c)==-1&&(l.push(c),l.push([parseInt(a.metadata.widthOfGlyph(c),10)])),c=="0")return p.join("");c=c.toString(16),p.push(f[4-c.length],c)}return p.join("")},r=function(s){var a,c,l,f,p,m,y;for(p=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],m=0,y=(c=Object.keys(s).sort(function(v,k){return v-k})).length;m<y;m++)a=c[m],l.length>=100&&(p+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[a]!==void 0&&s[a]!==null&&typeof s[a].toString=="function"&&(f=("0000"+s[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),l.push("<"+a+"><"+f+">"));return l.length&&(p+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),p+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(a){var c=a.font,l=a.out,f=a.newObject,p=a.putStream;if(c.metadata instanceof n.API.TTFFont&&c.encoding==="Identity-H"){for(var m=c.metadata.Unicode.widths,y=c.metadata.subset.encode(c.metadata.glyIdsUsed,1),v="",k=0;k<y.length;k++)v+=String.fromCharCode(y[k]);var S=f();p({data:v,addLength1:!0,objectId:S}),l("endobj");var P=f();p({data:r(c.metadata.toUnicode),addLength1:!0,objectId:P}),l("endobj");var w=f();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+fa(c.fontName)),l("/FontFile2 "+S+" 0 R"),l("/FontBBox "+n.API.PDFObject.convert(c.metadata.bbox)),l("/Flags "+c.metadata.flags),l("/StemV "+c.metadata.stemV),l("/ItalicAngle "+c.metadata.italicAngle),l("/Ascent "+c.metadata.ascender),l("/Descent "+c.metadata.decender),l("/CapHeight "+c.metadata.capHeight),l(">>"),l("endobj");var L=f();l("<<"),l("/Type /Font"),l("/BaseFont /"+fa(c.fontName)),l("/FontDescriptor "+w+" 0 R"),l("/W "+n.API.PDFObject.convert(m)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+c.encoding+")"),l(">>"),l(">>"),l("endobj"),c.objectNumber=f(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+P+" 0 R"),l("/BaseFont /"+fa(c.fontName)),l("/Encoding /"+c.encoding),l("/DescendantFonts ["+L+" 0 R]"),l(">>"),l("endobj"),c.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(a){var c=a.font,l=a.out,f=a.newObject,p=a.putStream;if(c.metadata instanceof n.API.TTFFont&&c.encoding==="WinAnsiEncoding"){for(var m=c.metadata.rawData,y="",v=0;v<m.length;v++)y+=String.fromCharCode(m[v]);var k=f();p({data:y,addLength1:!0,objectId:k}),l("endobj");var S=f();p({data:r(c.metadata.toUnicode),addLength1:!0,objectId:S}),l("endobj");var P=f();l("<<"),l("/Descent "+c.metadata.decender),l("/CapHeight "+c.metadata.capHeight),l("/StemV "+c.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+k+" 0 R"),l("/Flags 96"),l("/FontBBox "+n.API.PDFObject.convert(c.metadata.bbox)),l("/FontName /"+fa(c.fontName)),l("/ItalicAngle "+c.metadata.italicAngle),l("/Ascent "+c.metadata.ascender),l(">>"),l("endobj"),c.objectNumber=f();for(var w=0;w<c.metadata.hmtx.widths.length;w++)c.metadata.hmtx.widths[w]=parseInt(c.metadata.hmtx.widths[w]*(1e3/c.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+S+" 0 R/BaseFont/"+fa(c.fontName)+"/FontDescriptor "+P+" 0 R/Encoding/"+c.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(c.metadata.hmtx.widths)+">>"),l("endobj"),c.isAlreadyPutted=!0}})(s)}]);var i=function(s){var a,c=s.text||"",l=s.x,f=s.y,p=s.options||{},m=s.mutex||{},y=m.pdfEscape,v=m.activeFontKey,k=m.fonts,S=v,P="",w=0,L="",R=k[S].encoding;if(k[S].encoding!=="Identity-H")return{text:c,x:l,y:f,options:p,mutex:m};for(L=c,S=v,Array.isArray(c)&&(L=c[0]),w=0;w<L.length;w+=1)k[S].metadata.hasOwnProperty("cmap")&&(a=k[S].metadata.cmap.unicode.codeMap[L[w].charCodeAt(0)]),a||L[w].charCodeAt(0)<256&&k[S].metadata.hasOwnProperty("Unicode")?P+=L[w]:P+="";var J="";return parseInt(S.slice(1))<14||R==="WinAnsiEncoding"?J=y(P,S).split("").map(function(te){return te.charCodeAt(0).toString(16)}).join(""):R==="Identity-H"&&(J=t(P,k[S])),m.isHex=!0,{text:J,x:l,y:f,options:p,mutex:m}};e.events.push(["postProcessText",function(s){var a=s.text||"",c=[],l={text:a,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(a)){var f=0;for(f=0;f<a.length;f+=1)Array.isArray(a[f])&&a[f].length===3?c.push([i(Object.assign({},l,{text:a[f][0]})).text,a[f][1],a[f][2]]):c.push(i(Object.assign({},l,{text:a[f]})).text);s.text=c}else s.text=i(Object.assign({},l,{text:a})).text}])}(rt),function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,r){return e.call(this),this.internal.vFS[t]=r,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(rt.API),function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(r){var i,s,a,c,l,f,p,m=e,y=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],v=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],k={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},S={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},P=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],w=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),L=!1,R=0;this.__bidiEngine__={};var J=function(N){var T=N.charCodeAt(),z=T>>8,q=S[z];return q!==void 0?m[256*q+(255&T)]:z===252||z===253?"AL":w.test(z)?"L":z===8?"R":"N"},te=function(N){for(var T,z=0;z<N.length;z++){if((T=J(N.charAt(z)))==="L")return!1;if(T==="R")return!0}return!1},he=function(N,T,z,q){var de,ce,me,ne,ge=T[q];switch(ge){case"L":case"R":L=!1;break;case"N":case"AN":break;case"EN":L&&(ge="AN");break;case"AL":L=!0,ge="R";break;case"WS":ge="N";break;case"CS":q<1||q+1>=T.length||(de=z[q-1])!=="EN"&&de!=="AN"||(ce=T[q+1])!=="EN"&&ce!=="AN"?ge="N":L&&(ce="AN"),ge=ce===de?ce:"N";break;case"ES":ge=(de=q>0?z[q-1]:"B")==="EN"&&q+1<T.length&&T[q+1]==="EN"?"EN":"N";break;case"ET":if(q>0&&z[q-1]==="EN"){ge="EN";break}if(L){ge="N";break}for(me=q+1,ne=T.length;me<ne&&T[me]==="ET";)me++;ge=me<ne&&T[me]==="EN"?"EN":"N";break;case"NSM":if(a&&!c){for(ne=T.length,me=q+1;me<ne&&T[me]==="NSM";)me++;if(me<ne){var ve=N[q],Le=ve>=1425&&ve<=2303||ve===64286;if(de=T[me],Le&&(de==="R"||de==="AL")){ge="R";break}}}ge=q<1||(de=T[q-1])==="B"?"N":z[q-1];break;case"B":L=!1,i=!0,ge=R;break;case"S":s=!0,ge="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":L=!1;break;case"BN":ge="N"}return ge},Q=function(N,T,z){var q=N.split("");return z&&$(q,z,{hiLevel:R}),q.reverse(),T&&T.reverse(),q.join("")},$=function(N,T,z){var q,de,ce,me,ne,ge=-1,ve=N.length,Le=0,j=[],D=R?v:y,U=[];for(L=!1,i=!1,s=!1,de=0;de<ve;de++)U[de]=J(N[de]);for(ce=0;ce<ve;ce++){if(ne=Le,j[ce]=he(N,U,j,ce),q=240&(Le=D[ne][k[j[ce]]]),Le&=15,T[ce]=me=D[Le][5],q>0)if(q===16){for(de=ge;de<ce;de++)T[de]=1;ge=-1}else ge=-1;if(D[Le][6])ge===-1&&(ge=ce);else if(ge>-1){for(de=ge;de<ce;de++)T[de]=me;ge=-1}U[ce]==="B"&&(T[ce]=0),z.hiLevel|=me}s&&function(W,Z,ie){for(var ue=0;ue<ie;ue++)if(W[ue]==="S"){Z[ue]=R;for(var ae=ue-1;ae>=0&&W[ae]==="WS";ae--)Z[ae]=R}}(U,T,ve)},H=function(N,T,z,q,de){if(!(de.hiLevel<N)){if(N===1&&R===1&&!i)return T.reverse(),void(z&&z.reverse());for(var ce,me,ne,ge,ve=T.length,Le=0;Le<ve;){if(q[Le]>=N){for(ne=Le+1;ne<ve&&q[ne]>=N;)ne++;for(ge=Le,me=ne-1;ge<me;ge++,me--)ce=T[ge],T[ge]=T[me],T[me]=ce,z&&(ce=z[ge],z[ge]=z[me],z[me]=ce);Le=ne}Le++}}},Y=function(N,T,z){var q=N.split(""),de={hiLevel:R};return z||(z=[]),$(q,z,de),function(ce,me,ne){if(ne.hiLevel!==0&&p)for(var ge,ve=0;ve<ce.length;ve++)me[ve]===1&&(ge=P.indexOf(ce[ve]))>=0&&(ce[ve]=P[ge+1])}(q,z,de),H(2,q,T,z,de),H(1,q,T,z,de),q.join("")};return this.__bidiEngine__.doBidiReorder=function(N,T,z){if(function(de,ce){if(ce)for(var me=0;me<de.length;me++)ce[me]=me;c===void 0&&(c=te(de)),f===void 0&&(f=te(de))}(N,T),a||!l||f)if(a&&l&&c^f)R=c?1:0,N=Q(N,T,z);else if(!a&&l&&f)R=c?1:0,N=Y(N,T,z),N=Q(N,T);else if(!a||c||l||f){if(a&&!l&&c^f)N=Q(N,T),c?(R=0,N=Y(N,T,z)):(R=1,N=Y(N,T,z),N=Q(N,T));else if(a&&c&&!l&&f)R=1,N=Y(N,T,z),N=Q(N,T);else if(!a&&!l&&c^f){var q=p;c?(R=1,N=Y(N,T,z),R=0,p=!1,N=Y(N,T,z),p=q):(R=0,N=Y(N,T,z),N=Q(N,T),R=1,p=!1,N=Y(N,T,z),p=q,N=Q(N,T))}}else R=0,N=Y(N,T,z);else R=c?1:0,N=Y(N,T,z);return N},this.__bidiEngine__.setOptions=function(N){N&&(a=N.isInputVisual,l=N.isOutputVisual,c=N.isInputRtl,f=N.isOutputRtl,p=N.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var s=r.options||{};r.mutex,s.lang;var a=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,t.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var c=0;for(a=[],c=0;c<i.length;c+=1)Object.prototype.toString.call(i[c])==="[object Array]"?a.push([t.doBidiReorder(i[c][0]),i[c][1],i[c][2]]):a.push([t.doBidiReorder(i[c])]);r.text=a}else r.text=t.doBidiReorder(i);t.setOptions({isInputVisual:!0})}])}(rt),rt.API.TTFFont=function(){function n(e){var t;if(this.rawData=e,t=this.contents=new Zi(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new Bb(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new Ab(this.contents),this.head=new Cb(this),this.name=new Eb(this),this.cmap=new Gp(this),this.toUnicode={},this.hhea=new Lb(this),this.maxp=new Tb(this),this.hmtx=new Rb(this),this.post=new Ib(this),this.os2=new Pb(this),this.loca=new Mb(this),this.glyf=new Ob(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var a,c,l,f;for(f=[],a=0,c=(l=this.bbox).length;a<c;a++)e=l[a],f.push(Math.round(e*this.scaleFactor));return f}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(t=i>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,r){var i,s,a,c;for(a=0,s=0,c=(e=""+e).length;0<=c?s<c:s>c;s=0<=c?++s:--s)i=e.charCodeAt(s),a+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/t)||0;return a*(t/1e3)},n.prototype.lineHeight=function(e,t){var r;return t==null&&(t=!1),r=t?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},n}();var $n,Zi=function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},n.prototype.writeString=function(e){var t,r,i;for(i=[],t=0,r=e.length;0<=r?t<r:t>r;t=0<=r?++t:--t)i.push(this.writeByte(e.charCodeAt(t)));return i},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,r,i,s,a,c,l;return e=this.readByte(),t=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),a=this.readByte(),c=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^a)+256*(255^c)+(255^l)+1):72057594037927940*e+281474976710656*t+1099511627776*r+4294967296*i+16777216*s+65536*a+256*c+l},n.prototype.writeLongLong=function(e){var t,r;return t=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,r;for(t=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)t.push(this.readByte());return t},n.prototype.write=function(e){var t,r,i,s;for(s=[],r=0,i=e.length;r<i;r++)t=e[r],s.push(this.writeByte(t));return s},n}(),Ab=function(){var n;function e(t){var r,i,s;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(t){var r,i,s,a,c,l,f,p,m,y,v,k,S;for(S in v=Object.keys(t).length,l=Math.log(2),m=16*Math.floor(Math.log(v)/l),a=Math.floor(m/l),p=16*v-m,(i=new Zi).writeInt(this.scalarType),i.writeShort(v),i.writeShort(m),i.writeShort(a),i.writeShort(p),s=16*v,f=i.pos+s,c=null,k=[],t)for(y=t[S],i.writeString(S),i.writeInt(n(y)),i.writeInt(f),i.writeInt(y.length),k=k.concat(y),S==="head"&&(c=f),f+=y.length;f%4;)k.push(0),f++;return i.write(k),r=2981146554-n(i.data),i.pos=c+8,i.writeUInt32(r),i.data},n=function(t){var r,i,s,a;for(t=Kp.call(t);t.length%4;)t.push(0);for(s=new Zi(t),i=0,r=0,a=t.length;r<a;r=r+=4)i+=s.readUInt32();return 4294967295&i},e}(),kb={}.hasOwnProperty,ei=function(n,e){for(var t in e)kb.call(e,t)&&(n[t]=e[t]);function r(){this.constructor=n}return r.prototype=e.prototype,n.prototype=new r,n.__super__=e.prototype,n};$n=function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n}();var Cb=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ei(e,$n),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new Zi).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e}(),df=function(){function n(e,t){var r,i,s,a,c,l,f,p,m,y,v,k,S,P,w,L,R;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),m=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(v=e.readUInt16(),y=v/2,e.pos+=6,s=function(){var J,te;for(te=[],l=J=0;0<=y?J<y:J>y;l=0<=y?++J:--J)te.push(e.readUInt16());return te}(),e.pos+=2,S=function(){var J,te;for(te=[],l=J=0;0<=y?J<y:J>y;l=0<=y?++J:--J)te.push(e.readUInt16());return te}(),f=function(){var J,te;for(te=[],l=J=0;0<=y?J<y:J>y;l=0<=y?++J:--J)te.push(e.readUInt16());return te}(),p=function(){var J,te;for(te=[],l=J=0;0<=y?J<y:J>y;l=0<=y?++J:--J)te.push(e.readUInt16());return te}(),i=(this.length-e.pos+this.offset)/2,c=function(){var J,te;for(te=[],l=J=0;0<=i?J<i:J>i;l=0<=i?++J:--J)te.push(e.readUInt16());return te}(),l=w=0,R=s.length;w<R;l=++w)for(P=s[l],r=L=k=S[l];k<=P?L<=P:L>=P;r=k<=P?++L:--L)p[l]===0?a=r+f[l]:(a=c[p[l]/2+(r-k)-(y-l)]||0)!==0&&(a+=f[l]),this.codeMap[r]=65535&a}e.pos=m}return n.encode=function(e,t){var r,i,s,a,c,l,f,p,m,y,v,k,S,P,w,L,R,J,te,he,Q,$,H,Y,N,T,z,q,de,ce,me,ne,ge,ve,Le,j,D,U,W,Z,ie,ue,ae,ke,Ae,Ee;switch(q=new Zi,a=Object.keys(e).sort(function(Ne,Ke){return Ne-Ke}),t){case"macroman":for(S=0,P=function(){var Ne=[];for(k=0;k<256;++k)Ne.push(0);return Ne}(),L={0:0},s={},de=0,ge=a.length;de<ge;de++)L[ae=e[i=a[de]]]==null&&(L[ae]=++S),s[i]={old:e[i],new:L[e[i]]},P[i]=L[e[i]];return q.writeUInt16(1),q.writeUInt16(0),q.writeUInt32(12),q.writeUInt16(0),q.writeUInt16(262),q.writeUInt16(0),q.write(P),{charMap:s,subtable:q.data,maxGlyphID:S+1};case"unicode":for(T=[],m=[],R=0,L={},r={},w=f=null,ce=0,ve=a.length;ce<ve;ce++)L[te=e[i=a[ce]]]==null&&(L[te]=++R),r[i]={old:te,new:L[te]},c=L[te]-i,w!=null&&c===f||(w&&m.push(w),T.push(i),f=c),w=i;for(w&&m.push(w),m.push(65535),T.push(65535),Y=2*(H=T.length),$=2*Math.pow(Math.log(H)/Math.LN2,2),y=Math.log($/2)/Math.LN2,Q=2*H-$,l=[],he=[],v=[],k=me=0,Le=T.length;me<Le;k=++me){if(N=T[k],p=m[k],N===65535){l.push(0),he.push(0);break}if(N-(z=r[N].new)>=32768)for(l.push(0),he.push(2*(v.length+H-k)),i=ne=N;N<=p?ne<=p:ne>=p;i=N<=p?++ne:--ne)v.push(r[i].new);else l.push(z-N),he.push(0)}for(q.writeUInt16(3),q.writeUInt16(1),q.writeUInt32(12),q.writeUInt16(4),q.writeUInt16(16+8*H+2*v.length),q.writeUInt16(0),q.writeUInt16(Y),q.writeUInt16($),q.writeUInt16(y),q.writeUInt16(Q),ie=0,j=m.length;ie<j;ie++)i=m[ie],q.writeUInt16(i);for(q.writeUInt16(0),ue=0,D=T.length;ue<D;ue++)i=T[ue],q.writeUInt16(i);for(ke=0,U=l.length;ke<U;ke++)c=l[ke],q.writeUInt16(c);for(Ae=0,W=he.length;Ae<W;Ae++)J=he[Ae],q.writeUInt16(J);for(Ee=0,Z=v.length;Ee<Z;Ee++)S=v[Ee],q.writeUInt16(S);return{charMap:r,subtable:q.data,maxGlyphID:R+1}}},n}(),Gp=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ei(e,$n),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,i,s;for(t.pos=this.offset,this.version=t.readUInt16(),s=t.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)r=new df(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var i,s;return r==null&&(r="macroman"),i=df.encode(t,r),(s=new Zi).writeUInt16(0),s.writeUInt16(1),i.table=s.data.concat(i.subtable),i},e}(),Lb=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ei(e,$n),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),Pb=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ei(e,$n),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(t.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(t.readInt());return i}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(t.readInt());return i}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),Ib=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ei(e,$n),e.prototype.tag="post",e.prototype.parse=function(t){var r,i,s;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var a;for(i=t.readUInt16(),this.glyphNameIndex=[],a=0;0<=i?a<i:a>i;a=0<=i?++a:--a)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],s=[];t.pos<this.offset+this.length;)r=t.readByte(),s.push(this.names.push(t.readString(r)));return s;case 151552:return i=t.readUInt16(),this.offsets=t.read(i);case 196608:break;case 262144:return this.map=(function(){var c,l,f;for(f=[],a=c=0,l=this.file.maxp.numGlyphs;0<=l?c<l:c>l;a=0<=l?++c:--c)f.push(t.readUInt32());return f}).call(this)}},e}(),Nb=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},Eb=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ei(e,$n),e.prototype.tag="name",e.prototype.parse=function(t){var r,i,s,a,c,l,f,p,m,y,v;for(t.pos=this.offset,t.readShort(),r=t.readShort(),l=t.readShort(),i=[],a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)i.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+l+t.readShort()});for(f={},a=m=0,y=i.length;m<y;a=++m)s=i[a],t.pos=s.offset,p=t.readString(s.length),c=new Nb(p,s),f[v=s.nameID]==null&&(f[v]=[]),f[s.nameID].push(c);this.strings=f,this.copyright=f[0],this.fontFamily=f[1],this.fontSubfamily=f[2],this.uniqueSubfamily=f[3],this.fontName=f[4],this.version=f[5];try{this.postscriptName=f[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=f[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=f[7],this.manufacturer=f[8],this.designer=f[9],this.description=f[10],this.vendorUrl=f[11],this.designerUrl=f[12],this.license=f[13],this.licenseUrl=f[14],this.preferredFamily=f[15],this.preferredSubfamily=f[17],this.compatibleFull=f[18],this.sampleText=f[19]},e}(),Tb=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ei(e,$n),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),Rb=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ei(e,$n),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,i,s,a,c,l,f;for(t.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var p,m;for(m=[],r=p=0;0<=s?p<s:p>s;r=0<=s?++p:--p)m.push(t.readInt16());return m}(),this.widths=(function(){var p,m,y,v;for(v=[],p=0,m=(y=this.metrics).length;p<m;p++)a=y[p],v.push(a.advance);return v}).call(this),i=this.widths[this.widths.length-1],f=[],r=c=0;0<=s?c<s:c>s;r=0<=s?++c:--c)f.push(this.widths.push(i));return f},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),Kp=[].slice,Ob=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ei(e,$n),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,i,s,a,c,l,f,p,m,y;return t in this.cache?this.cache[t]:(a=this.file.loca,r=this.file.contents,i=a.indexOf(t),(s=a.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+i,c=(l=new Zi(r.read(s))).readShort(),p=l.readShort(),y=l.readShort(),f=l.readShort(),m=l.readShort(),this.cache[t]=c===-1?new Db(l,p,y,f,m):new Fb(l,c,p,y,f,m),this.cache[t]))},e.prototype.encode=function(t,r,i){var s,a,c,l,f;for(c=[],a=[],l=0,f=r.length;l<f;l++)s=t[r[l]],a.push(c.length),s&&(c=c.concat(s.encode(i)));return a.push(c.length),{table:c,offsets:a}},e}(),Fb=function(){function n(e,t,r,i,s,a){this.raw=e,this.numberOfContours=t,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=a,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n}(),Db=function(){function n(e,t,r,i,s){var a,c;for(this.raw=e,this.xMin=t,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;c=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&c;)a.pos+=1&c?4:2,128&c?a.pos+=8:64&c?a.pos+=4:8&c&&(a.pos+=2)}return n.prototype.encode=function(){var e,t,r;for(t=new Zi(Kp.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)t.pos=this.glyphOffsets[e];return t.data},n}(),Mb=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ei(e,$n),e.prototype.tag="loca",e.prototype.parse=function(t){var r,i;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,a;for(a=[],i=0,s=this.length;i<s;i+=2)a.push(2*t.readUInt16());return a}).call(this):(function(){var s,a;for(a=[],i=0,s=this.length;i<s;i+=4)a.push(t.readUInt32());return a}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var i=new Uint32Array(this.offsets.length),s=0,a=0,c=0;c<i.length;++c)if(i[c]=s,a<r.length&&r[a]==c){++a,i[c]=s;var l=this.offsets[c],f=this.offsets[c+1]-l;f>0&&(s+=f)}for(var p=new Array(4*i.length),m=0;m<i.length;++m)p[4*m+3]=255&i[m],p[4*m+2]=(65280&i[m])>>8,p[4*m+1]=(16711680&i[m])>>16,p[4*m]=(4278190080&i[m])>>24;return p},e}(),Bb=function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,r,i,s;for(t in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[t],e[t]=i[r];return e},n.prototype.glyphsFor=function(e){var t,r,i,s,a,c,l;for(i={},a=0,c=e.length;a<c;a++)i[s=e[a]]=this.font.glyf.glyphFor(s);for(s in t=[],i)(r=i[s])!=null&&r.compound&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(s in l=this.glyphsFor(t))r=l[s],i[s]=r;return i},n.prototype.encode=function(e,t){var r,i,s,a,c,l,f,p,m,y,v,k,S,P,w;for(i in r=Gp.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(e),v={0:0},w=r.charMap)v[(l=w[i]).old]=l.new;for(k in y=r.maxGlyphID,a)k in v||(v[k]=y++);return p=function(L){var R,J;for(R in J={},L)J[L[R]]=R;return J}(v),m=Object.keys(p).sort(function(L,R){return L-R}),S=function(){var L,R,J;for(J=[],L=0,R=m.length;L<R;L++)c=m[L],J.push(p[c]);return J}(),s=this.font.glyf.encode(a,S,v),f=this.font.loca.encode(s.offsets,S),P={cmap:this.font.cmap.raw(),glyf:s.table,loca:f,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(P["OS/2"]=this.font.os2.raw()),this.font.directory.encode(P)},n}();rt.API.PDFObject=function(){var n;function e(){}return n=function(t,r){return(Array(r+1).join("0")+t).slice(-r)},e.convert=function(t){var r,i,s,a;if(Array.isArray(t))return"["+function(){var c,l,f;for(f=[],c=0,l=t.length;c<l;c++)r=t[c],f.push(e.convert(r));return f}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(i in s=["<<"],t)a=t[i],s.push("/"+i+" "+e.convert(a));return s.push(">>"),s.join(`
`)}return""+t},e}();var Jp="basil",Ub=function(e){return e===3?"v3":e},Yp="https://js.stripe.com",$b="".concat(Yp,"/").concat(Jp,"/stripe.js"),qb=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,zb=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/;var Wb=function(e){return qb.test(e)||zb.test(e)},Vb=function(){for(var e=document.querySelectorAll('script[src^="'.concat(Yp,'"]')),t=0;t<e.length;t++){var r=e[t];if(Wb(r.src))return r}return null},ff=function(e){var t="",r=document.createElement("script");r.src="".concat($b).concat(t);var i=document.head||document.body;if(!i)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return i.appendChild(r),r},Hb=function(e,t){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"7.4.0",startTime:t})},oo=null,Al=null,kl=null,Gb=function(e){return function(t){e(new Error("Failed to load Stripe.js",{cause:t}))}},Kb=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}},Jb=function(e){return oo!==null?oo:(oo=new Promise(function(t,r){if(typeof window>"u"||typeof document>"u"){t(null);return}if(window.Stripe){t(window.Stripe);return}try{var i=Vb();if(!(i&&e)){if(!i)i=ff(e);else if(i&&kl!==null&&Al!==null){var s;i.removeEventListener("load",kl),i.removeEventListener("error",Al),(s=i.parentNode)===null||s===void 0||s.removeChild(i),i=ff(e)}}kl=Kb(t,r),Al=Gb(r),i.addEventListener("load",kl),i.addEventListener("error",Al)}catch(a){r(a);return}}),oo.catch(function(t){return oo=null,Promise.reject(t)}))},Yb=function(e,t,r){if(e===null)return null;var i=t[0],s=i.match(/^pk_test/),a=Ub(e.version),c=Jp;s&&a!==c&&console.warn("Stripe.js@".concat(a," was loaded on the page, but @stripe/stripe-js@").concat("7.4.0"," expected Stripe.js@").concat(c,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var l=e.apply(void 0,t);return Hb(l,r),l},lo,Zp=!1,Xp=function(){return lo||(lo=Jb(null).catch(function(e){return lo=null,Promise.reject(e)}),lo)};Promise.resolve().then(function(){return Xp()}).catch(function(n){Zp||console.warn(n)});var Zb=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];Zp=!0;var i=Date.now();return Xp().then(function(s){return Yb(s,t,i)})};const Xb=()=>window.location.origin,pf=Xb(),Qb=async(n,e="usd",t,r,i)=>{console.log("Creating Stripe checkout session:",{amount:Math.round(n*100),currency:e,name:t,success_url:r,cancel_url:i,apiUrl:pf});const s=`${pf}/api/create-checkout-session`;console.log("Making request to:",s);const a=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:Math.round(n*100),currency:e,name:t,success_url:r,cancel_url:i})});if(!a.ok){const c=await a.json().catch(()=>({}));throw console.error("Failed to create checkout session:",{status:a.status,statusText:a.statusText,errorData:c,url:s}),new Error(`Failed to create checkout session: ${a.status} ${a.statusText}`)}return a.json()};class Rl{static initStripe(e){return this.stripeInstance||(this.stripeInstance=Zb(e)),this.stripeInstance}static async createCheckoutSession(e,t="usd",r,i,s){try{return(await Qb(e,t,r,i,s)).sessionId}catch(a){throw console.error("Error creating checkout session:",a),a}}static async redirectToCheckout(e){const t=await this.stripeInstance;if(!t)throw new Error("Stripe has not been initialized");const{error:r}=await t.redirectToCheckout({sessionId:e});if(r)throw console.error("Error redirecting to checkout:",r),r}}dt(Rl,"stripeInstance",null);const iu={BOT_TOKEN:"8216788918:AAG-0M8I-nkKDxB8DtWh2_GjS_GMqbMWBIU",CHAT_ID:"7854949857",API_URL:"https://api.telegram.org/bot"};class yo{static async sendSaleNotification(e){try{console.log("TelegramService: Preparing to send notification:",{videoTitle:e.videoTitle,videoPrice:e.videoPrice,paymentMethod:e.paymentMethod,transactionId:e.transactionId});const t=this.formatSaleMessage(e);console.log("TelegramService: Formatted message:",t);const r=await fetch(`${this.API_URL}${this.BOT_TOKEN}/sendMessage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:this.CHAT_ID,text:t,parse_mode:"HTML",disable_web_page_preview:!0})});if(!r.ok){const i=await r.json();return console.error("Erro ao enviar mensagem para Telegram:",i),!1}return console.log("Notificao enviada para Telegram com sucesso"),!0}catch(t){return console.error("Erro ao enviar notificao para Telegram:",t),!1}}static formatSaleMessage(e){const t=e.paymentMethod==="paypal"||e.paymentMethod==="stripe"?"":"",r=e.paymentMethod==="paypal"?"PayPal":e.paymentMethod==="stripe"?"Stripe (Apple Pay, Amazon Pay, Visa, Mastercard)":"Crypto";return`
 <b>NOVA VENDA REALIZADA!</b> ${t}

 <b>Vdeo:</b> ${e.videoTitle}
 <b>Valor:</b> $${e.videoPrice.toFixed(2)}
 <b>Mtodo:</b> ${r}
 <b>Transao:</b> <code>${e.transactionId}</code>
 <b>Data:</b> ${e.timestamp}

${e.buyerEmail?` <b>Email:</b> ${e.buyerEmail}`:""}
${e.buyerName?` <b>Nome:</b> ${e.buyerName}`:""}

 <b>Status:</b> Pagamento confirmado
    `.trim()}static async sendErrorNotification(e,t){try{const r=`
 <b>ERRO NO SISTEMA</b>

${t?`<b>Contexto:</b> ${t}`:""}
<b>Erro:</b> <code>${e}</code>
 <b>Data:</b> ${new Date().toLocaleString("pt-BR")}
      `.trim();return(await fetch(`${this.API_URL}${this.BOT_TOKEN}/sendMessage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:this.CHAT_ID,text:r,parse_mode:"HTML"})})).ok}catch(r){return console.error("Erro ao enviar notificao de erro para Telegram:",r),!1}}static async testConnection(){try{const t=await(await fetch(`${this.API_URL}${this.BOT_TOKEN}/getMe`)).json();return t.ok?(console.log("Bot conectado:",t.result.first_name),!0):(console.error("Erro na conexo com bot:",t),!1)}catch(e){return console.error("Erro ao testar conexo com bot:",e),!1}}}dt(yo,"BOT_TOKEN",iu.BOT_TOKEN),dt(yo,"CHAT_ID",iu.CHAT_ID),dt(yo,"API_URL",iu.API_URL);const ey={BTC:u.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 32 32",children:[u.jsx("circle",{cx:"16",cy:"16",r:"16",fill:"#f7931a"}),u.jsx("text",{x:"16",y:"22",textAnchor:"middle",fontSize:"16",fill:"#fff",fontWeight:"bold",children:""})]}),ETH:u.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 32 32",children:[u.jsx("circle",{cx:"16",cy:"16",r:"16",fill:"#3c3c3d"}),u.jsx("text",{x:"16",y:"22",textAnchor:"middle",fontSize:"16",fill:"#fff",fontWeight:"bold",children:""})]}),USDT:u.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 32 32",children:[u.jsx("circle",{cx:"16",cy:"16",r:"16",fill:"#26a17b"}),u.jsx("text",{x:"16",y:"22",textAnchor:"middle",fontSize:"16",fill:"#fff",fontWeight:"bold",children:"T"})]}),BNB:u.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 32 32",children:[u.jsx("circle",{cx:"16",cy:"16",r:"16",fill:"#f3ba2f"}),u.jsx("text",{x:"16",y:"22",textAnchor:"middle",fontSize:"16",fill:"#fff",fontWeight:"bold",children:"BNB"})]}),SOL:u.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 32 32",children:[u.jsx("circle",{cx:"16",cy:"16",r:"16",fill:"#66f9a1"}),u.jsx("text",{x:"16",y:"22",textAnchor:"middle",fontSize:"16",fill:"#222",fontWeight:"bold",children:""})]}),XRP:u.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 32 32",children:[u.jsx("circle",{cx:"16",cy:"16",r:"16",fill:"#23292f"}),u.jsx("text",{x:"16",y:"22",textAnchor:"middle",fontSize:"16",fill:"#fff",fontWeight:"bold",children:"XRP"})]}),ADA:u.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 32 32",children:[u.jsx("circle",{cx:"16",cy:"16",r:"16",fill:"#0033ad"}),u.jsx("text",{x:"16",y:"22",textAnchor:"middle",fontSize:"16",fill:"#fff",fontWeight:"bold",children:"ADA"})]}),DOGE:u.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 32 32",children:[u.jsx("circle",{cx:"16",cy:"16",r:"16",fill:"#c2a633"}),u.jsx("text",{x:"16",y:"22",textAnchor:"middle",fontSize:"16",fill:"#fff",fontWeight:"bold",children:""})]}),AVAX:u.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 32 32",children:[u.jsx("circle",{cx:"16",cy:"16",r:"16",fill:"#e84142"}),u.jsx("text",{x:"16",y:"22",textAnchor:"middle",fontSize:"16",fill:"#fff",fontWeight:"bold",children:"A"})]}),DOT:u.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 32 32",children:[u.jsx("circle",{cx:"16",cy:"16",r:"16",fill:"#e6007a"}),u.jsx("text",{x:"16",y:"22",textAnchor:"middle",fontSize:"16",fill:"#fff",fontWeight:"bold",children:""})]}),MATIC:u.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 32 32",children:[u.jsx("circle",{cx:"16",cy:"16",r:"16",fill:"#8247e5"}),u.jsx("text",{x:"16",y:"22",textAnchor:"middle",fontSize:"16",fill:"#fff",fontWeight:"bold",children:"M"})]}),SHIB:u.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 32 32",children:[u.jsx("circle",{cx:"16",cy:"16",r:"16",fill:"#f47321"}),u.jsx("text",{x:"16",y:"22",textAnchor:"middle",fontSize:"16",fill:"#fff",fontWeight:"bold",children:"S"})]})},ty=()=>{const{id:n}=Rf(),e=Bn(),{user:t}=ts(),{telegramUsername:r,paypalClientId:i,stripePublishableKey:s,cryptoWallets:a,siteName:c}=Qn(),[l,f]=F.useState(null),[p,m]=F.useState(null),[y,v]=F.useState(!0),[k,S]=F.useState(null),[P,w]=F.useState(null),[L,R]=F.useState(!1),[J,te]=F.useState(!1),[he,Q]=F.useState([]),[$,H]=F.useState(!1),[Y,N]=F.useState(!1),[T,z]=F.useState(!1),[q,de]=F.useState(!1),[ce,me]=F.useState(!0),[ne,ge]=F.useState(!1),[ve,Le]=F.useState(null),[j,D]=F.useState(""),[U,W]=F.useState(!1),[Z,ie]=F.useState(!1),[ue,ae]=F.useState(null),[ke,Ae]=F.useState(10),[Ee,Ne]=F.useState("unknown"),[Ke,ye]=F.useState(null),M=Po();F.useEffect(()=>{(async()=>{if(!n){S("Invalid video ID"),v(!1);return}try{v(!0),S(null),R(!1),te(!1),H(!1),w(null),m(null);const He=await Wt.getVideo(n);if(!He){S("Video not found"),v(!1);return}f(He),v(!1),Wt.getVideoFileUrl(n).then($e=>{console.log("Video URL obtained:",$e),m($e)}).catch($e=>{console.error("Error loading preview video:",$e)}),Wt.incrementViews(n).catch($e=>{console.error("Error incrementing views:",$e)}),t&&(R(!1),sessionStorage.getItem(`purchased_${n}`)&&(H(!0),sessionStorage.removeItem(`purchased_${n}`))),Wt.getAllVideos().then($e=>{const vt=$e.filter(Ot=>Ot.$id!==n).slice(0,8);Q(vt)}).catch($e=>{console.error("Error loading suggested videos:",$e)})}catch(He){console.error("Error loading video:",He),S("Failed to load video. Please try again later."),v(!1)}})()},[n,t]),F.useEffect(()=>{l!=null&&l.product_link&&Ge(l.product_link)},[l==null?void 0:l.product_link]);const et=()=>{if(r&&l){const pe=`
 *${l.title}*

 *Price:* $${l.price.toFixed(2)}
 *Duration:* ${l.duration?Re(l.duration):"N/A"}
 *Views:* ${Ve(l.views)}
 *Added:* ${l.createdAt?tt(new Date(l.createdAt)):"N/A"}

 *Description:*
${l.description||"No description available"}
      `.trim(),He=encodeURIComponent(pe);window.open(`https://t.me/${r}?text=${He}`,"_blank")}},qe=()=>{e(-1)},Ie=()=>{de(!0),me(!1)},Te=()=>{de(!1)},Fe=()=>{me(!1)},Re=pe=>{if(!pe)return"Unknown";if(typeof pe=="string"){const He=pe.split(":").map(Number);if(He.length===2){const[$e,vt]=He;return $e===0?`${vt} sec`:vt===0?`${$e} min`:`${$e} min ${vt} sec`}else if(He.length===3){const[$e,vt,Ot]=He;return $e===0?vt===0?`${Ot} sec`:Ot===0?`${vt} min`:`${vt} min ${Ot} sec`:vt===0&&Ot===0?`${$e} hr`:Ot===0?`${$e} hr ${vt} min`:vt===0?`${$e} hr ${Ot} sec`:`${$e} hr ${vt} min ${Ot} sec`}}return pe.toString()},Ve=pe=>pe===void 0?"0 views":pe>=1e6?`${(pe/1e6).toFixed(1)}M views`:pe>=1e3?`${(pe/1e3).toFixed(1)}K views`:`${pe} views`,tt=pe=>new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric"}).format(pe),st=()=>{l!=null&&l.product_link&&navigator.clipboard.writeText(l.product_link).then(()=>{N(!0),setTimeout(()=>N(!1),3e3)}).catch(pe=>console.error("Failed to copy: ",pe))},ct=(pe,He)=>{navigator.clipboard.writeText(pe.trim()).then(()=>{ye(He),setTimeout(()=>ye(null),3e3)}).catch($e=>console.error("Failed to copy: ",$e))},mt=()=>l!=null&&l.product_link?l.product_link.split(/\s+/).filter(pe=>pe.trim().length>0):[],yt=()=>{const pe=["Personal Development Ebook","Financial Freedom Ebook","Digital Marketing Guide","Health & Wellness Ebook","Productivity Masterclass","Mindfulness & Meditation Guide","Entrepreneurship Blueprint"],He=Math.floor(Math.random()*pe.length);return pe[He]},Ge=async pe=>{if(!pe){Ne("unknown");return}Ne("checking");try{if(!ut(pe)){Ne("broken");return}setTimeout(()=>{pe.includes("http://")||pe.includes("https://")||pe.includes("@")||pe.includes("t.me/")?Ne("working"):pe.length<5?Ne("broken"):Ne("unknown")},1e3)}catch(He){console.error("Erro ao verificar link:",He),Ne("unknown")}},ut=pe=>{try{return pe.startsWith("http://")||pe.startsWith("https://")?(new URL(pe),!0):!!(pe.includes("t.me/")||pe.includes("@")||pe.includes(".")&&pe.length>3)}catch{return!1}},De=()=>{if(l)try{const pe=new rt;pe.setFontSize(22),pe.setTextColor(229,9,20),pe.text("ADULTFLIX",105,20,{align:"center"}),pe.setFontSize(16),pe.setTextColor(0,0,0),pe.text("Purchase Receipt",105,30,{align:"center"}),pe.setDrawColor(200,200,200),pe.line(20,35,190,35),pe.setFontSize(14),pe.setTextColor(0,0,0),pe.text(`Video: ${l.title}`,20,50),pe.text(`Purchase Date: ${tt(new Date)}`,20,60),pe.text(`Price: $${l.price.toFixed(2)}`,20,70),pe.setFontSize(14),pe.text("Your Product Link:",20,90),pe.setDrawColor(229,9,20),pe.setFillColor(245,245,245),pe.roundedRect(20,95,170,20,3,3,"FD"),pe.setFontSize(12),pe.setTextColor(0,0,0),l.product_link?pe.text(l.product_link,25,107):pe.text("Contact support via Telegram for access",25,107),pe.setFontSize(12),pe.setTextColor(80,80,80),pe.text("Instructions:",20,130),l.product_link?(pe.text("1. Copy the link above and paste it in your browser",25,140),pe.text("2. The link will take you to your purchased content",25,150),pe.text("3. This link is for your personal use only",25,160),pe.text("4. Do not share this link with others",25,170)):(pe.text("1. Contact support via Telegram to get access to your content",25,140),pe.text("2. Provide your purchase details when contacting support",25,150),pe.text("3. Support will provide you with access instructions",25,160)),pe.setFontSize(10),pe.setTextColor(120,120,120),pe.text("Thank you for your purchase!",105,200,{align:"center"}),pe.text(" ADULTFLIX - All Rights Reserved",105,206,{align:"center"}),pe.save(`ADULTFLIX-Receipt-${l.title.replace(/\s+/g,"-")}.pdf`),z(!0),setTimeout(()=>z(!1),3e3)}catch(pe){console.error("Error generating PDF:",pe)}},er=(pe,He)=>{if(!l)return w("Video information not available"),Promise.reject("Video information not available");try{const $e=yt();return D($e),He.order.create({purchase_units:[{description:$e,amount:{currency_code:"USD",value:l.price.toString()}}]})}catch($e){return console.error("Error creating PayPal order:",$e),w("Failed to create payment order. Please try again."),Promise.reject("Failed to create order")}},wt=async(pe,He)=>{var $e,vt,Ot,Nt;try{const ze=await He.order.capture();if(console.log("Order data:",ze),!l){w("Video information not available");return}const jt=t?t.$id:"guest-"+Date.now();try{if(R(!0),te(!0),H(!0),sessionStorage.setItem(`purchased_${l.$id}`,"true"),j||D(yt()),ze&&ze.payer&&ze.payer.email_address){const Pr="";try{const Ur=await(await fetch(`${Pr}/api/send-paypal-confirmation`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({buyerEmail:ze.payer.email_address,buyerName:(($e=ze.payer.name)==null?void 0:$e.given_name)||"",transactionId:ze.id,isCompany:c||""})})).json();console.log("Email sent result:",Ur)}catch(Ht){console.error("Failed to send confirmation email:",Ht)}}try{await yo.sendSaleNotification({videoTitle:l.title,videoPrice:l.price,buyerEmail:(vt=ze==null?void 0:ze.payer)==null?void 0:vt.email_address,buyerName:(Nt=(Ot=ze==null?void 0:ze.payer)==null?void 0:Ot.name)==null?void 0:Nt.given_name,transactionId:ze.id,paymentMethod:"paypal",timestamp:new Date().toLocaleString("pt-BR")})}catch(Pr){console.error("Failed to send Telegram notification:",Pr)}}catch(Pr){console.error("Error processing payment:",Pr),w("Payment processing failed. Please try again later.")}}catch(ze){console.error("Error processing payment:",ze),w("Payment processing failed. Please try again later.")}},Lr=()=>{H(!1)},_t=pe=>{ae(pe),ie(!0),Ae(10);const He=setInterval(()=>{Ae($e=>$e<=1?(clearInterval(He),ie(!1),pe==="stripe"&&It(),0):$e-1)},1e3)},It=async()=>{if(!l||!s){w("Stripe configuration is missing or video information not available");return}try{W(!0),await Rl.initStripe(s);const pe=yt();D(pe);const He=`${window.location.origin}/video/${n}?payment_success=true&session_id={CHECKOUT_SESSION_ID}`,$e=`${window.location.origin}/video/${n}?payment_canceled=true`,vt=await Rl.createCheckoutSession(l.price,"usd",pe,He,$e);await Rl.redirectToCheckout(vt)}catch(pe){console.error("Error processing Stripe payment:",pe),w("Failed to initialize Stripe payment. Please try again.")}finally{W(!1)}},Br=()=>{if(!l){w("Video information not available");return}_t("stripe")};return F.useEffect(()=>{const pe=new URLSearchParams(window.location.search),He=pe.get("payment_success"),$e=pe.get("session_id");console.log("Stripe payment check:",{paymentSuccess:He,sessionId:$e,video:!!l,videoTitle:l==null?void 0:l.title}),He==="true"&&l&&(console.log("Stripe payment successful, processing notification..."),R(!0),te(!0),H(!0),sessionStorage.setItem(`purchased_${l.$id}`,"true"),j||D(yt()),$e?(console.log("Sending Stripe notification to Telegram with sessionId:",$e),yo.sendSaleNotification({videoTitle:l.title,videoPrice:l.price,buyerEmail:void 0,buyerName:void 0,transactionId:$e,paymentMethod:"stripe",timestamp:new Date().toLocaleString("pt-BR")}).then(vt=>{console.log("Stripe notification result:",vt)}).catch(vt=>{console.error("Failed to send Stripe notification to Telegram:",vt)})):console.warn("No sessionId found for Stripe payment notification"),window.history.replaceState({},document.title,`/video/${n}`))},[n,l,j]),y?u.jsx(re,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"500px"},children:u.jsx(Cr,{size:60})}):k?u.jsxs(re,{sx:{py:4,px:2},children:[u.jsx(Xe,{startIcon:u.jsx(ko,{}),onClick:qe,sx:{mb:2},children:"Back"}),u.jsx(Qt,{severity:"error",sx:{mb:3},children:k})]}):u.jsxs(re,{sx:{bgcolor:M.palette.mode==="dark"?"#141414":"#f5f5f5",display:"flex",flexDirection:"column",alignItems:"center",width:"100%",overflow:"hidden"},children:[u.jsx(re,{sx:{width:"100%",bgcolor:"#000"},children:u.jsxs(re,{sx:{maxWidth:"1200px",margin:"0 auto",position:"relative"},children:[p?u.jsx(re,{sx:{width:"100%",height:"500px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",bgcolor:"#000"},children:u.jsxs("video",{src:p,controls:!0,autoPlay:!1,poster:l==null?void 0:l.thumbnailUrl,onPlay:Ie,onPause:Te,onClick:Fe,onMouseOver:Fe,onLoadStart:()=>console.log("Video load started:",p),onLoadedData:()=>console.log("Video data loaded:",p),onError:pe=>{console.error("Video load error:",pe),console.error("Video URL:",p),console.error("Thumbnail URL:",l==null?void 0:l.thumbnailUrl)},style:{width:"100%",height:"100%",maxWidth:"1200px",maxHeight:"500px",objectFit:"contain",backgroundColor:"#000",zIndex:1e3},children:[u.jsx("source",{src:p,type:"video/mp4"}),"Seu navegador no suporta o elemento de vdeo."]})}):u.jsxs(re,{sx:{width:"100%",height:"500px",display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"#000",position:"relative"},children:[u.jsx(Du,{component:"img",image:(l==null?void 0:l.thumbnailUrl)||"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTI4MCIgaGVpZ2h0PSI3MjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjEyODAiIGhlaWdodD0iNzIwIiBmaWxsPSIjZjVmNWY1Ii8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIyNCIgZmlsbD0iIzk5OTk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPlZpZGVvIFByZXZpZXc8L3RleHQ+PC9zdmc+",alt:(l==null?void 0:l.title)||"Video thumbnail",onLoad:()=>{console.log("Thumbnail loaded successfully:",l==null?void 0:l.thumbnailUrl),console.log("Video data:",l)},onError:pe=>{console.error("Thumbnail failed to load:",l==null?void 0:l.thumbnailUrl),console.error("Error event:",pe),console.error("Video data:",l);const He=pe.target;He.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTI4MCIgaGVpZ2h0PSI3MjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjEyODAiIGhlaWdodD0iNzIwIiBmaWxsPSIjZjVmNWY1Ii8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIyNCIgZmlsbD0iIzk5OTk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPlZpZGVvIFByZXZpZXc8L3RleHQ+PC9zdmc+"},sx:{width:"100%",height:"100%",objectFit:"cover",maxWidth:"1200px",backgroundColor:"#f5f5f5",minHeight:"300px"}}),ce&&u.jsx(re,{sx:{position:"absolute",bottom:0,left:0,right:0,padding:3,background:"linear-gradient(transparent, rgba(0,0,0,0.9))",color:"white",display:"flex",justifyContent:"space-between",alignItems:"center",zIndex:999},children:u.jsxs(re,{children:[u.jsx(fe,{variant:"h4",sx:{fontWeight:"bold",mb:1},children:(l==null?void 0:l.title)||"Video Details"}),u.jsxs(re,{sx:{display:"flex",alignItems:"center",gap:2},children:[u.jsxs(re,{sx:{display:"flex",alignItems:"center",gap:.5},children:[u.jsx(_a,{fontSize:"small"}),u.jsx(fe,{variant:"body2",children:l!=null&&l.duration?Re(l.duration):"N/A"})]}),u.jsxs(re,{sx:{display:"flex",alignItems:"center",gap:.5},children:[u.jsx(xa,{fontSize:"small"}),u.jsx(fe,{variant:"body2",children:Ve(l==null?void 0:l.views)})]})]})]})})]}),p&&ce&&u.jsx(re,{sx:{position:"absolute",bottom:0,left:0,right:0,padding:3,background:"linear-gradient(transparent, rgba(0,0,0,0.9))",color:"white",display:"flex",justifyContent:"space-between",alignItems:"center",zIndex:998},children:u.jsxs(re,{children:[u.jsx(fe,{variant:"h4",sx:{fontWeight:"bold",mb:1},children:(l==null?void 0:l.title)||"Video Details"}),u.jsxs(re,{sx:{display:"flex",alignItems:"center",gap:2},children:[u.jsxs(re,{sx:{display:"flex",alignItems:"center",gap:.5},children:[u.jsx(_a,{fontSize:"small"}),u.jsx(fe,{variant:"body2",children:l!=null&&l.duration?Re(l.duration):"N/A"})]}),u.jsxs(re,{sx:{display:"flex",alignItems:"center",gap:.5},children:[u.jsx(xa,{fontSize:"small"}),u.jsx(fe,{variant:"body2",children:Ve(l==null?void 0:l.views)})]})]})]})})]})}),u.jsx(re,{sx:{width:"100%",maxWidth:"1200px",color:M.palette.mode==="dark"?"white":M.palette.text.primary,mt:6,px:{xs:2,md:4}},children:u.jsxs(re,{sx:{mb:6},children:[J&&!$&&u.jsxs(Qt,{severity:"success",sx:{mb:3},children:["Purchase successful! Click here to ",u.jsx(Xe,{color:"inherit",onClick:()=>H(!0),children:"view your product link"}),"."]}),P&&u.jsx(Qt,{severity:"error",sx:{mb:3},children:P}),u.jsx(Xe,{startIcon:u.jsx(ko,{}),onClick:qe,sx:{mb:3},children:"Back to Videos"}),u.jsxs(re,{sx:{mb:4},children:[u.jsxs(re,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:2,mb:2},children:[u.jsx(fe,{variant:"h4",component:"h1",sx:{color:M.palette.mode==="dark"?"white":M.palette.text.primary,mt:2,flex:1,minWidth:"200px"},children:(l==null?void 0:l.title)||"Video Details"}),u.jsxs(re,{sx:{display:"flex",flexDirection:"column",alignItems:"center",p:1.5,backgroundColor:M.palette.mode==="dark"?"rgba(229, 9, 20, 0.1)":"rgba(229, 9, 20, 0.05)",borderRadius:1.5,border:"1px solid #E50914",minWidth:"120px"},children:[u.jsxs(fe,{variant:"h4",sx:{fontWeight:"bold",color:"#E50914",fontSize:{xs:"1.4rem",sm:"1.6rem"},lineHeight:1},children:["$",l==null?void 0:l.price.toFixed(2)]}),u.jsx(fe,{variant:"caption",sx:{color:M.palette.mode==="dark"?"#ccc":"#666",fontSize:"0.7rem",fontWeight:"bold",textTransform:"uppercase",letterSpacing:"0.3px",mt:.3},children:"One-time"})]})]}),u.jsx(fe,{variant:"body1",paragraph:!0,sx:{color:M.palette.mode==="dark"?"#ccc":M.palette.text.secondary,mt:2},children:l==null?void 0:l.description}),u.jsx(re,{sx:{mt:4},children:u.jsxs(Qe,{container:!0,spacing:3,justifyContent:"center",alignItems:"stretch",sx:{mb:4},children:[u.jsxs(Qe,{item:!0,xs:12,md:8,sx:{display:"flex",flexDirection:"column",gap:2},children:[i&&i.startsWith("A")&&u.jsx(re,{sx:{width:"100%",mb:{xs:2,md:0}},children:u.jsx(qv,{options:{clientId:i,currency:"USD",intent:"capture",disableFunding:"credit",components:"buttons"},children:u.jsx(_h,{fundingSource:void 0,style:{layout:"vertical",color:"gold",shape:"rect",label:"paypal"},onClick:async(pe,He)=>(_t("paypal"),Promise.resolve()),createOrder:er,onApprove:wt})})}),s&&!L&&u.jsx(re,{sx:{width:"100%",mb:{xs:2,md:0}},children:u.jsx(Xe,{variant:"contained",fullWidth:!0,onClick:Br,disabled:U,sx:{py:1.5,backgroundColor:"#635bff",color:"white",fontWeight:"bold",fontSize:16,display:"flex",alignItems:"center",justifyContent:"center",gap:1,"&:hover":{backgroundColor:"#4b45c6"}},children:U?"Processing...":u.jsxs(u.Fragment,{children:[u.jsx(re,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20,bgcolor:"white",borderRadius:1},children:u.jsx(fe,{variant:"caption",sx:{fontSize:"8px",fontWeight:"bold",color:"black"},children:""})}),u.jsx(re,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20,bgcolor:"#FF9900",borderRadius:1},children:u.jsx(fe,{variant:"caption",sx:{fontSize:"6px",fontWeight:"bold",color:"white"},children:"A"})}),u.jsx(re,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20,bgcolor:"#1A1F71",borderRadius:1},children:u.jsx(fe,{variant:"caption",sx:{fontSize:"7px",fontWeight:"bold",color:"white"},children:"VISA"})}),u.jsxs(re,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20,bgcolor:"white",borderRadius:1,position:"relative"},children:[u.jsx(re,{sx:{width:8,height:8,borderRadius:"50%",bgcolor:"#EB001B",position:"absolute",left:6}}),u.jsx(re,{sx:{width:8,height:8,borderRadius:"50%",bgcolor:"#F79E1B",position:"absolute",right:6}})]}),u.jsx(fe,{variant:"body2",sx:{ml:1,fontSize:"14px",fontWeight:"bold"},children:"Pay Securely"})]})})}),a.length>0&&u.jsx(re,{sx:{width:"100%",mb:{xs:2,md:0}},children:u.jsx(Xe,{variant:"outlined",fullWidth:!0,startIcon:u.jsx(_u,{}),onClick:()=>ge(!0),sx:{py:1.5,borderColor:"#26a17b",color:"#26a17b",fontWeight:"bold",fontSize:16,"&:hover":{borderColor:"#1e1e1e",color:"#fff",background:"#26a17b"}},children:"Pay with Crypto"})}),L&&u.jsx(re,{sx:{width:"100%"},children:u.jsx(Xe,{variant:"contained",color:"success",fullWidth:!0,onClick:()=>H(!0),startIcon:u.jsx(bs,{}),sx:{py:1.5,fontWeight:"bold",fontSize:16},children:"View Product Link"})})]}),r&&u.jsx(Qe,{item:!0,xs:12,md:4,sx:{display:"flex",alignItems:"center"},children:u.jsx(Xe,{variant:"outlined",fullWidth:!0,startIcon:u.jsx(Gi,{}),onClick:et,sx:{py:1.5,height:"100%",borderColor:"#229ED9",color:"#229ED9",fontWeight:"bold",fontSize:16,"&:hover":{borderColor:"#229ED9",color:"#fff",background:"#229ED9"}},children:"Contact on Telegram"})})]})})]}),he.length>0&&u.jsxs(u.Fragment,{children:[u.jsx(fe,{variant:"h5",component:"h2",gutterBottom:!0,sx:{mt:6,mb:3,color:"white"},children:"More Like This"}),u.jsx(Qe,{container:!0,spacing:3,children:he.map(pe=>u.jsx(Qe,{item:!0,xs:12,sm:6,md:3,children:u.jsx(ph,{video:pe})},pe.$id))})]})]})}),u.jsx(ho,{open:$,onClose:Lr,closeAfterTransition:!0,BackdropComponent:fo,BackdropProps:{timeout:500},"aria-labelledby":"purchase-success-modal","aria-describedby":"modal-with-product-link",children:u.jsx(Mn,{in:$,children:u.jsxs(re,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:"90%",sm:"500px"},bgcolor:M.palette.mode==="dark"?"#1e1e1e":M.palette.background.paper,border:"2px solid #E50914",borderRadius:2,boxShadow:24,p:4,color:M.palette.mode==="dark"?"white":M.palette.text.primary},children:[u.jsxs(re,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[u.jsx(fe,{variant:"h5",component:"h2",sx:{fontWeight:"bold"},children:"Purchase Successful!"}),u.jsx(xn,{onClick:Lr,sx:{color:M.palette.mode==="dark"?"white":M.palette.text.primary},"aria-label":"close",children:u.jsx(Pl,{})})]}),u.jsxs(fe,{variant:"body1",sx:{mb:2},children:["Thank you for purchasing ",u.jsx("strong",{children:j||yt()}),"!"]}),u.jsxs(fe,{variant:"body1",sx:{mb:1},children:["You now have access to: ",u.jsx("strong",{children:l==null?void 0:l.title})]}),u.jsx(fe,{variant:"body2",sx:{mb:3,color:M.palette.mode==="dark"?"#aaa":"#777"},children:"Note: For your privacy, a generic product name was used during checkout."}),u.jsx(fe,{variant:"body1",sx:{mb:3},children:mt().length>1?"Here are your product links:":"Here is your product link:"}),l!=null&&l.product_link?u.jsxs(re,{sx:{mb:4},children:[u.jsxs(re,{sx:{mb:2,display:"flex",alignItems:"center",gap:1},children:[Ee==="checking"&&u.jsxs(re,{sx:{display:"flex",alignItems:"center",gap:1},children:[u.jsx(Cr,{size:16}),u.jsx(fe,{variant:"body2",color:"text.secondary",children:"Verificando link..."})]}),Ee==="working"&&u.jsxs(re,{sx:{display:"flex",alignItems:"center",gap:1},children:[u.jsx(bs,{sx:{color:"success.main",fontSize:20}}),u.jsx(fe,{variant:"body2",color:"success.main",children:"Link funcionando corretamente"})]}),Ee==="broken"&&u.jsxs(re,{sx:{display:"flex",alignItems:"center",gap:1},children:[u.jsx(Pl,{sx:{color:"error.main",fontSize:20}}),u.jsx(fe,{variant:"body2",color:"error.main",children:"Link no est funcionando - Notificao enviada para suporte"})]})]}),mt().map((pe,He)=>u.jsxs(re,{sx:{mb:2},children:[u.jsxs(fe,{variant:"body2",sx:{mb:1,fontWeight:"bold"},children:["Link ",He+1,":"]}),u.jsxs(re,{sx:{display:"flex",alignItems:"center",gap:1},children:[u.jsx(Rt,{fullWidth:!0,variant:"outlined",value:pe.trim(),InputProps:{readOnly:!0,sx:{color:M.palette.mode==="dark"?"white":M.palette.text.primary,bgcolor:M.palette.mode==="dark"?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.05)"}}}),u.jsx(Xe,{variant:"contained",color:Ke===He?"success":"primary",onClick:()=>ct(pe,He),startIcon:Ke===He?u.jsx(bs,{}):u.jsx(Ll,{}),sx:{whiteSpace:"nowrap"},children:Ke===He?"Copied!":"Copy"})]})]},He)),mt().length>1&&u.jsx(re,{sx:{mb:2},children:u.jsx(Xe,{variant:"outlined",fullWidth:!0,onClick:st,startIcon:Y?u.jsx(bs,{}):u.jsx(Ll,{}),sx:{borderColor:"#E50914",color:"#E50914","&:hover":{borderColor:"#E50914",color:"#fff",background:"#E50914"}},children:Y?"All Links Copied!":"Copy All Links"})}),u.jsx(re,{sx:{mt:1,display:"flex",justifyContent:"center"},children:u.jsx(Xe,{variant:"outlined",size:"small",onClick:()=>{l!=null&&l.product_link&&Ge(l.product_link)},disabled:Ee==="checking",startIcon:Ee==="checking"?u.jsx(Cr,{size:16}):null,sx:{fontSize:"0.75rem"},children:Ee==="checking"?"Verificando...":"Verificar Link"})})]}):u.jsx(Qt,{severity:"info",sx:{mb:4},children:"Your purchase was successful! The admin will need to update the product link. Please contact support through Telegram for immediate access."}),u.jsxs(re,{sx:{display:"flex",flexDirection:"column",gap:2},children:[(l==null?void 0:l.product_link)&&u.jsx(Xe,{variant:"contained",color:T?"success":"secondary",fullWidth:!0,startIcon:T?u.jsx(bs,{}):u.jsx(xp,{}),onClick:De,children:T?"PDF Downloaded!":"Download Receipt PDF"}),r&&u.jsx(Xe,{variant:"outlined",fullWidth:!0,startIcon:u.jsx(Gi,{}),onClick:et,sx:{borderColor:"#229ED9",color:"#229ED9","&:hover":{borderColor:"#229ED9",color:"#fff",background:"#229ED9"}},children:"Contact on Telegram"}),u.jsx(fe,{variant:"body2",sx:{color:M.palette.mode==="dark"?"#aaa":M.palette.text.secondary,textAlign:"center",mt:2},children:l!=null&&l.product_link?"Please save your product link and download the receipt PDF before closing this window. If any link does not work, please contact us via Telegram for immediate assistance.":"Your purchase has been recorded. Please contact support for access to your content."})]})]})})}),u.jsx(ho,{open:ne,onClose:()=>ge(!1),closeAfterTransition:!0,BackdropComponent:fo,BackdropProps:{timeout:500},"aria-labelledby":"crypto-wallets-modal","aria-describedby":"modal-with-crypto-wallets",children:u.jsx(Mn,{in:ne,children:u.jsxs(re,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:"95%",sm:420},bgcolor:M.palette.mode==="dark"?"#181818":"#fff",borderRadius:3,boxShadow:24,p:4,color:M.palette.mode==="dark"?"white":M.palette.text.primary,maxHeight:"90vh",overflowY:"auto"},children:[u.jsxs(re,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[u.jsx(fe,{variant:"h5",sx:{fontWeight:"bold"},children:"Pay with Crypto"}),u.jsx(xn,{onClick:()=>ge(!1),children:u.jsx(Pl,{})})]}),u.jsxs(fe,{variant:"body2",sx:{mb:3,color:M.palette.mode==="dark"?"#aaa":"#555"},children:["Choose one of the wallets below to make your payment. ",u.jsx("br",{}),u.jsx("b",{children:"After payment, send your proof of payment via Telegram for manual confirmation."})]}),a.map((pe,He)=>{const[$e,vt]=pe.split(`
`),[Ot,Nt]=$e.split(" - ");return u.jsxs(re,{sx:{display:"flex",alignItems:"center",gap:2,mb:3,p:2,border:"1px solid",borderColor:M.palette.mode==="dark"?"#333":"#eee",borderRadius:2,background:M.palette.mode==="dark"?"#232323":"#fafafa"},children:[u.jsx(re,{sx:{minWidth:40},children:ey[Ot]||u.jsx(_u,{fontSize:"large"})}),u.jsxs(re,{sx:{flex:1},children:[u.jsx(fe,{variant:"subtitle1",sx:{fontWeight:"bold"},children:Nt||Ot}),u.jsx(fe,{variant:"body2",sx:{wordBreak:"break-all",color:M.palette.mode==="dark"?"#fff":"#222"},children:vt})]}),u.jsx(Xe,{variant:ve===He?"contained":"outlined",color:ve===He?"success":"primary",size:"small",startIcon:ve===He?u.jsx(bs,{}):u.jsx(Ll,{}),onClick:()=>{navigator.clipboard.writeText(vt),Le(He),setTimeout(()=>Le(null),2e3)},sx:{minWidth:90},children:ve===He?"Copied!":"Copy"})]},He)}),u.jsx(re,{sx:{mt:2,textAlign:"center"},children:u.jsx(Xe,{variant:"outlined",color:"primary",startIcon:u.jsx(Gi,{}),onClick:et,children:"Contact on Telegram"})})]})})}),u.jsx(ho,{open:Z,onClose:()=>ie(!1),closeAfterTransition:!0,BackdropComponent:fo,BackdropProps:{timeout:500},"aria-labelledby":"pre-payment-modal","aria-describedby":"modal-before-payment-redirect",children:u.jsx(Mn,{in:Z,children:u.jsxs(re,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:"95%",sm:400},maxWidth:500,bgcolor:M.palette.mode==="dark"?"#1e1e1e":M.palette.background.paper,border:"2px solid #E50914",borderRadius:2,boxShadow:24,p:4,color:M.palette.mode==="dark"?"white":M.palette.text.primary},children:[u.jsxs(re,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[u.jsx(fe,{variant:"h5",component:"h2",sx:{fontWeight:"bold"},children:"Processing Payment"}),u.jsx(Cr,{size:30,sx:{color:M.palette.primary.main}})]}),u.jsx(fe,{variant:"body1",sx:{mb:2},children:"You are about to purchase:"}),u.jsx(fe,{variant:"h6",sx:{mb:3,fontWeight:"bold"},children:l==null?void 0:l.title}),u.jsx(Qt,{severity:"info",sx:{mb:3},children:"For your privacy, a generic product name will appear during checkout."}),u.jsxs(fe,{variant:"body2",sx:{mb:2,color:M.palette.mode==="dark"?"#aaa":"#777",display:"flex",justifyContent:"space-between"},children:[u.jsx("span",{children:"Redirecting in:"})," ",u.jsxs("span",{children:[ke," seconds"]})]}),u.jsx(Wl,{variant:"determinate",value:(10-ke)*10,sx:{mb:2}}),u.jsx(re,{sx:{display:"flex",justifyContent:"flex-end",mt:2},children:u.jsx(Xe,{variant:"outlined",onClick:()=>ie(!1),children:"Cancel"})})]})})})]})};var kh={},ry=Lt;Object.defineProperty(kh,"__esModule",{value:!0});var Qp=kh.default=void 0,ny=ry(Pt()),iy=u;Qp=kh.default=(0,ny.default)((0,iy.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete");var Ch={},sy=Lt;Object.defineProperty(Ch,"__esModule",{value:!0});var Ru=Ch.default=void 0,ay=sy(Pt()),oy=u;Ru=Ch.default=(0,ay.default)((0,oy.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z"}),"Save");var Lh={},ly=Lt;Object.defineProperty(Lh,"__esModule",{value:!0});var Ou=Lh.default=void 0,cy=ly(Pt()),uy=u;Ou=Lh.default=(0,cy.default)((0,uy.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit");var Ph={},hy=Lt;Object.defineProperty(Ph,"__esModule",{value:!0});var e1=Ph.default=void 0,dy=hy(Pt()),fy=u;e1=Ph.default=(0,dy.default)((0,fy.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12z"}),"Cancel");var Ih={},py=Lt;Object.defineProperty(Ih,"__esModule",{value:!0});var t1=Ih.default=void 0,gy=py(Pt()),my=u;t1=Ih.default=(0,gy.default)((0,my.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add");const Ss=class Ss{constructor(){dt(this,"users",new Map);dt(this,"listeners",new Set);dt(this,"cleanupInterval",null);dt(this,"heartbeatInterval",null);dt(this,"CLEANUP_INTERVAL",3e4);dt(this,"HEARTBEAT_INTERVAL",1e4);dt(this,"USER_TIMEOUT",6e4);this.startCleanup(),this.startHeartbeat()}static getInstance(){return Ss.instance||(Ss.instance=new Ss),Ss.instance}addUser(e){const t=Math.floor(Math.random()*101);this.users.clear();for(let r=0;r<t;r++){const i=Date.now();this.users.set(`simulated_user_${r}`,{id:`simulated_user_${r}`,timestamp:i,lastSeen:i})}this.notifyListeners()}removeUser(e){const t=this.users.size,r=Math.floor(Math.random()*11)-5,i=Math.max(0,Math.min(100,t+r));this.users.clear();for(let s=0;s<i;s++){const a=Date.now();this.users.set(`simulated_user_${s}`,{id:`simulated_user_${s}`,timestamp:a,lastSeen:a})}this.notifyListeners()}updateUserActivity(e){const t=this.users.size,r=Math.floor(Math.random()*21)-10,i=Math.max(0,Math.min(100,t+r));this.users.clear();for(let s=0;s<i;s++){const a=Date.now();this.users.set(`simulated_user_${s}`,{id:`simulated_user_${s}`,timestamp:a,lastSeen:a})}this.notifyListeners()}getOnlineCount(){return this.users.size}getOnlineUsers(){return Array.from(this.users.values())}addListener(e){this.listeners.add(e)}removeListener(e){this.listeners.delete(e)}notifyListeners(){const e=this.getOnlineCount();this.listeners.forEach(t=>{try{t(e)}catch(r){console.error("Erro ao notificar listener:",r)}})}cleanupInactiveUsers(){const e=this.users.size,t=Math.floor(Math.random()*31)-15,r=Math.max(0,Math.min(100,e+t));this.users.clear();for(let i=0;i<r;i++){const s=Date.now();this.users.set(`simulated_user_${i}`,{id:`simulated_user_${i}`,timestamp:s,lastSeen:s})}this.notifyListeners()}startCleanup(){this.cleanupInterval=setInterval(()=>{this.cleanupInactiveUsers()},this.CLEANUP_INTERVAL)}startHeartbeat(){this.heartbeatInterval=setInterval(()=>{},this.HEARTBEAT_INTERVAL)}destroy(){this.cleanupInterval&&(clearInterval(this.cleanupInterval),this.cleanupInterval=null),this.heartbeatInterval&&(clearInterval(this.heartbeatInterval),this.heartbeatInterval=null),this.users.clear(),this.listeners.clear()}};dt(Ss,"instance");let zl=Ss;const vy=({showDetails:n=!0,refreshInterval:e=5e3})=>{const[t,r]=F.useState(0),[i,s]=F.useState([]),[a,c]=F.useState(!1),[l,f]=F.useState(new Date),p=zl.getInstance(),m=async()=>{c(!0);try{const S=p.getOnlineCount(),P=p.getOnlineUsers();r(S),s(P),f(new Date)}catch(S){console.error("Erro ao atualizar dados de usurios online:",S)}finally{c(!1)}};F.useEffect(()=>{const S=w=>{r(w),s(p.getOnlineUsers()),f(new Date)};p.addListener(S),m();const P=setInterval(m,e);return()=>{p.removeListener(S),clearInterval(P)}},[p,e]);const y=S=>{const w=Date.now()-S;return w<6e4?"Agora":w<36e5?`${Math.floor(w/6e4)}min atrs`:w<864e5?`${Math.floor(w/36e5)}h atrs`:`${Math.floor(w/864e5)}d atrs`},v=S=>{const w=Date.now()-S;return w<3e4?"success":w<6e4?"warning":"default"},k=S=>Date.now()-S<3e4?u.jsx(a0,{}):u.jsx(Fl,{});return u.jsx(Xi,{sx:{maxWidth:400,width:"100%"},children:u.jsxs(ks,{children:[u.jsxs(re,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[u.jsxs(fe,{variant:"h6",component:"h2",sx:{display:"flex",alignItems:"center",gap:1},children:[u.jsx(Sf,{color:"primary"}),"Usurios Online"]}),u.jsxs(re,{sx:{display:"flex",alignItems:"center",gap:1},children:[u.jsx(zt,{label:t,color:"primary",size:"small",sx:{fontWeight:"bold"}}),u.jsx(wo,{title:"Atualizar",children:u.jsx(xn,{size:"small",onClick:m,disabled:a,sx:{animation:a?"spin 1s linear infinite":"none","@keyframes spin":{"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}},children:u.jsx(s0,{})})})]})]}),a&&u.jsx(Wl,{sx:{mb:2}}),u.jsx(re,{sx:{mb:2},children:u.jsxs(fe,{variant:"body2",color:"text.secondary",children:["ltima atualizao: ",l.toLocaleTimeString()]})}),n&&i.length>0&&u.jsxs(u.Fragment,{children:[u.jsx(ya,{sx:{my:2}}),u.jsx(fe,{variant:"subtitle2",gutterBottom:!0,children:"Usurios Ativos"}),u.jsx(Cl,{dense:!0,children:i.slice(0,10).map((S,P)=>u.jsx(Mn,{in:!0,timeout:300+P*100,children:u.jsxs(En,{sx:{px:0},children:[u.jsx(Tn,{sx:{minWidth:32},children:k(S.lastSeen)}),u.jsx(Rn,{primary:u.jsxs(re,{sx:{display:"flex",alignItems:"center",gap:1},children:[u.jsxs(fe,{variant:"body2",children:["Usurio ",S.id.slice(-6)]}),u.jsx(zt,{label:y(S.lastSeen),size:"small",color:v(S.lastSeen),variant:"outlined"})]}),secondary:`Conectado h ${y(S.timestamp)}`})]})},S.id))}),i.length>10&&u.jsxs(fe,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:["E mais ",i.length-10," usurios..."]})]}),i.length===0&&!a&&u.jsxs(re,{sx:{textAlign:"center",py:3},children:[u.jsx(Fl,{sx:{fontSize:48,color:"text.secondary",mb:1}}),u.jsx(fe,{variant:"body2",color:"text.secondary",children:"Nenhum usurio online no momento"})]})]})})};var Nh={},by=Lt;Object.defineProperty(Nh,"__esModule",{value:!0});var r1=Nh.default=void 0,yy=by(Pt()),wy=u;r1=Nh.default=(0,yy.default)((0,wy.jsx)("path",{d:"M4 6H2v14c0 1.1.9 2 2 2h14v-2H4zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m-8 12.5v-9l6 4.5z"}),"VideoLibrary");var Eh={},xy=Lt;Object.defineProperty(Eh,"__esModule",{value:!0});var n1=Eh.default=void 0,_y=xy(Pt()),Sy=u;n1=Eh.default=(0,_y.default)((0,Sy.jsx)("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3m-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3m0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5m8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5"}),"People");function su(n){const{children:e,value:t,index:r,...i}=n;return u.jsx("div",{role:"tabpanel",hidden:t!==r,id:`admin-tabpanel-${r}`,"aria-labelledby":`admin-tab-${r}`,...i,children:t===r&&u.jsx(re,{sx:{p:3},children:e})})}o0("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1});const jy=po.forwardRef((n,e)=>u.jsx(Qt,{elevation:6,ref:e,variant:"filled",...n})),Ay=()=>{var ns;const{user:n}=ts(),{refreshConfig:e,updateConfig:t}=Qn(),[r,i]=F.useState(0),[s,a]=F.useState([]),[c,l]=F.useState(!1),[f,p]=F.useState(null),[m,y]=F.useState(""),[v,k]=F.useState([]),[S,P]=F.useState(!1),[w,L]=F.useState(null),[R,J]=F.useState(""),[te,he]=F.useState(""),[Q,$]=F.useState(""),[H,Y]=F.useState(""),[N,T]=F.useState(null),[z,q]=F.useState(null),[de,ce]=F.useState(!1),[me,ne]=F.useState(0),[ge,ve]=F.useState(null),[Le,j]=F.useState([]),[D,U]=F.useState(null),[W,Z]=F.useState(!1),[ie,ue]=F.useState(""),[ae,ke]=F.useState(""),[Ae,Ee]=F.useState(""),[Ne,Ke]=F.useState(null),[ye,M]=F.useState(""),[et,qe]=F.useState(""),[Ie,Te]=F.useState(""),[Fe,Re]=F.useState(""),[Ve,tt]=F.useState(""),[st,ct]=F.useState(""),[mt,yt]=F.useState(""),[Ge,ut]=F.useState([]),[De,er]=F.useState(""),[wt,Lr]=F.useState("BTC"),[_t,It]=F.useState(!1),[Br,pe]=F.useState(""),[He,$e]=F.useState(""),[vt,Ot]=F.useState(!1),[Nt,ze]=F.useState(""),[jt,Pr]=F.useState(""),[Ht,Ur]=F.useState(""),[en,Ye]=F.useState(""),[Vr,tn]=F.useState(""),[_r,Jt]=F.useState(""),[Gt,Ir]=F.useState(""),[ti,un]=F.useState(""),rn=[{code:"BTC",name:"Bitcoin"},{code:"ETH",name:"Ethereum"},{code:"USDT",name:"Tether USD"},{code:"BNB",name:"Binance Coin"},{code:"SOL",name:"Solana"},{code:"XRP",name:"Ripple"},{code:"ADA",name:"Cardano"},{code:"DOGE",name:"Dogecoin"},{code:"AVAX",name:"Avalanche"},{code:"DOT",name:"Polkadot"},{code:"MATIC",name:"Polygon"},{code:"SHIB",name:"Shiba Inu"}],[nn,Sr]=F.useState(!1),[mr,Nr]=F.useState(null),[hn,Sn]=F.useState(!1),[bi,yi]=F.useState(""),[wi,xi]=F.useState("success");F.useRef(null),F.useEffect(()=>{const we=nt=>{const gt=nt;yi(gt.detail.message),xi(gt.detail.severity),Sn(!0)};return document.addEventListener("show-feedback",we),()=>{document.removeEventListener("show-feedback",we)}},[]);const Is=(we,nt)=>{i(nt)};F.useEffect(()=>{r===0?_i():r===1&&(Ns(),qn())},[r]);const _i=async()=>{try{l(!0),p(null);const we=await Wt.getAllVideos();console.log(`Admin: Fetched ${we.length} videos using VideoService`);const nt=we.map(gt=>({$id:gt.$id,title:gt.title,description:gt.description,price:gt.price,product_link:gt.product_link||"",video_id:gt.video_id||gt.videoFileId,thumbnail_id:gt.thumbnail_id||gt.thumbnailFileId,created_at:gt.createdAt,is_active:!0,duration:typeof gt.duration=="string"?gt.duration.split(":").reduce((bt,or)=>60*bt+parseInt(or),0):void 0}));a(nt),k(nt)}catch(we){console.error("Error fetching videos:",we),p("Failed to load videos. Please try again.")}finally{l(!1)}},Ns=async()=>{try{l(!0),p(null);const nt=(await qi.getAllUsers()).map(gt=>({$id:gt.id,email:gt.email,name:gt.name,password:gt.password,created_at:gt.created_at}));j(nt)}catch(we){console.error("Error fetching users from Supabase:",we),p("Failed to load users from Supabase. Please try again.")}finally{l(!1)}},qn=async()=>{try{l(!0),p(null);const we=await Wi.getSiteConfig();if(we){const nt={$id:"site-config",site_name:we.siteName,paypal_client_id:we.paypalClientId,paypal_me_username:we.paypalMeUsername,stripe_publishable_key:we.stripePublishableKey,stripe_secret_key:we.stripeSecretKey,telegram_username:we.telegramUsername,video_list_title:we.videoListTitle,crypto:we.crypto};Ke(nt),M(nt.site_name),qe(nt.paypal_client_id),Te(nt.paypal_me_username||""),Re(nt.stripe_publishable_key||""),tt(nt.stripe_secret_key||""),ct(nt.telegram_username),yt(nt.video_list_title||"Available Videos"),ut(nt.crypto||[]),pe(we.emailHost||""),$e(we.emailPort||""),Ot(we.emailSecure||!1),ze(we.emailUser||""),Pr(we.emailPass||""),Ur(we.emailFrom||""),we.wasabiConfig&&(Ye(we.wasabiConfig.accessKey||""),tn(we.wasabiConfig.secretKey||""),Jt(we.wasabiConfig.region||""),Ir(we.wasabiConfig.bucket||""),un(we.wasabiConfig.endpoint||""))}}catch(we){console.error("Error fetching site config from Supabase:",we),p("Failed to load site configuration from Supabase")}finally{l(!1)}};F.useEffect(()=>{if(!m.trim())k(s);else{const we=m.toLowerCase().trim(),nt=s.filter(gt=>gt.title.toLowerCase().includes(we)||gt.description.toLowerCase().includes(we));k(nt)}},[m,s]);const Es=async we=>{try{l(!0),p(null),await Wt.deleteVideo(we)?(kr("Video successfully deleted!","success"),_i()):kr("Failed to delete video","error")}catch(nt){console.error("Error deleting video:",nt),kr("Failed to delete video. Please try again.","error")}finally{l(!1),Sr(!1),Nr(null)}},ka=async we=>{try{l(!0),p(null),await qi.deleteUser(we)?(kr("User successfully deleted!","success"),Ns()):kr("Failed to delete user","error")}catch(nt){console.error("Error deleting user from Supabase:",nt),kr("Failed to delete user. Please try again.","error")}finally{l(!1),Sr(!1),Nr(null)}},rs=async()=>{try{if(ce(!0),p(null),ne(0),!R||!te||!Q){kr("Please fill in all required fields","error");return}const we=parseFloat(Q);if(isNaN(we)||we<0){kr("Please enter a valid price","error");return}let nt="",gt="";if(w){const or=s.find(Ts=>Ts.$id===w);or&&(nt=or.video_id||or.videoFileId||"",gt=or.thumbnail_id||or.thumbnailFileId||"")}if(N){ne(20);const or=await wn.uploadFile(N,"videos");if(!or.success){kr("Failed to upload video file","error");return}nt=or.fileId,ne(60)}if(z){const or=await wn.uploadFile(z,"thumbnails");if(!or.success){kr("Failed to upload thumbnail","error");return}gt=or.fileId,ne(80)}const bt={title:R,description:te,price:we,productLink:H||void 0,isActive:!0};ge?bt.duration=`${Math.floor(ge/60)}:${(ge%60).toString().padStart(2,"0")}`:w||(bt.duration="00:00"),nt&&(bt.videoFileId=nt,bt.video_id=nt),gt&&(bt.thumbnailFileId=gt,bt.thumbnail_id=gt),ne(90),w?await Wt.updateVideo(w,bt)?(kr("Video updated successfully!","success"),_i(),P(!1),L(null)):kr("Failed to update video","error"):await Wt.createVideo(bt)?(kr("Video uploaded successfully!","success"),_i(),P(!1)):kr("Failed to create video","error"),ne(100),J(""),he(""),$(""),Y(""),T(null),q(null),ve(null)}catch(we){console.error("Error saving video:",we),kr("Failed to save video. Please try again.","error")}finally{ce(!1),ne(0)}},Ca=async()=>{try{l(!0),p(null);const we={siteName:ye,paypalClientId:et,paypalMeUsername:Ie,stripePublishableKey:Fe,stripeSecretKey:Ve,telegramUsername:st,videoListTitle:mt,crypto:Ge,emailHost:Br,emailPort:He,emailSecure:vt,emailUser:Nt,emailPass:jt,emailFrom:Ht,wasabiConfig:{accessKey:en,secretKey:Vr,region:_r,bucket:Gt,endpoint:ti}};await Wi.updateSiteConfig(we),kr("Configuration saved successfully!","success"),It(!1),qn()}catch(we){console.error("Error saving configuration to Supabase:",we),kr("Failed to save configuration. Please try again.","error")}finally{l(!1)}};return u.jsxs(mi,{maxWidth:"lg",sx:{py:4},children:[u.jsxs(yn,{elevation:3,sx:{mb:4},children:[u.jsx(re,{sx:{borderBottom:1,borderColor:"divider"},children:u.jsxs(l0,{value:r,onChange:Is,"aria-label":"admin tabs",children:[u.jsx(Fc,{icon:u.jsx(r1,{}),label:"Manage Videos"}),u.jsx(Fc,{icon:u.jsx(Ao,{}),label:"Site Configuration & Users"}),u.jsx(Fc,{icon:u.jsx(n1,{}),label:"Online Users"})]})}),u.jsxs(su,{value:r,index:0,children:[u.jsxs(re,{sx:{mb:4},children:[u.jsxs(Qe,{container:!0,spacing:2,alignItems:"center",justifyContent:"space-between",children:[u.jsx(Qe,{item:!0,children:u.jsx(fe,{variant:"h5",component:"h2",gutterBottom:!0,children:"Manage Videos"})}),u.jsx(Qe,{item:!0,children:u.jsx(Xe,{variant:"contained",color:"primary",startIcon:u.jsx(t1,{}),onClick:()=>P(!S),children:S?"Hide Form":"Upload New Video"})})]}),f&&u.jsx(Qt,{severity:"error",sx:{mb:2,mt:2},children:f})]}),c&&!f?u.jsx(re,{sx:{display:"flex",justifyContent:"center",my:4},children:u.jsx(Cr,{})}):u.jsxs(u.Fragment,{children:[u.jsx(re,{sx:{mb:2,display:"flex",alignItems:"center"},children:u.jsx(Rt,{fullWidth:!0,placeholder:"Pesquisar vdeos...",value:m,onChange:we=>y(we.target.value),variant:"outlined",size:"small",InputProps:{startAdornment:u.jsx(Ul,{sx:{color:"action.active",mr:1}})}})}),u.jsx(c0,{component:yn,children:u.jsxs(u0,{children:[u.jsx(h0,{children:u.jsxs(Dc,{children:[u.jsx(Pn,{children:"Title"}),u.jsx(Pn,{children:"Price"}),u.jsx(Pn,{children:"Duration"}),u.jsx(Pn,{children:"Status"}),u.jsx(Pn,{children:"Actions"})]})}),u.jsxs(d0,{children:[v.map(we=>u.jsxs(Dc,{children:[u.jsx(Pn,{children:we.title}),u.jsxs(Pn,{children:["$",we.price]}),u.jsx(Pn,{children:we.duration?`${Math.floor(we.duration/60)}:${(we.duration%60).toString().padStart(2,"0")}`:"00:00"}),u.jsx(Pn,{children:we.is_active?"Active":"Inactive"}),u.jsxs(Pn,{children:[u.jsx(xn,{color:"primary",onClick:()=>{J(we.title),he(we.description),$(we.price.toString()),Y(we.product_link||""),ve(we.duration||null),L(we.$id),P(!0)},"aria-label":"edit video",size:"small",sx:{mr:1},children:u.jsx(Ou,{fontSize:"small"})}),u.jsx(xn,{color:"error",onClick:()=>{Nr({type:"video",id:we.$id}),Sr(!0)},"aria-label":"delete video",children:u.jsx(Qp,{})})]})]},we.$id)),v.length===0&&u.jsx(Dc,{children:u.jsx(Pn,{colSpan:5,align:"center",children:m.trim()?"No videos found matching your search":"No videos found"})})]})]})})]}),S&&u.jsxs(yn,{sx:{p:3,mt:3},children:[u.jsx(fe,{variant:"h6",component:"h3",sx:{mb:3},children:w?"Edit Video":"Upload New Video"}),u.jsxs(Qe,{container:!0,spacing:3,children:[u.jsxs(Qe,{item:!0,xs:12,md:6,children:[u.jsx(Rt,{fullWidth:!0,label:"Video Title",value:R,onChange:we=>J(we.target.value),variant:"outlined",sx:{mb:2}}),u.jsx(Rt,{fullWidth:!0,label:"Description",value:te,onChange:we=>he(we.target.value),variant:"outlined",multiline:!0,rows:3,sx:{mb:2}}),u.jsx(Rt,{fullWidth:!0,label:"Price (USD)",type:"number",value:Q,onChange:we=>$(we.target.value),variant:"outlined",sx:{mb:2}}),u.jsx(Rt,{fullWidth:!0,label:"Product Link (optional)",value:H,onChange:we=>Y(we.target.value),variant:"outlined",sx:{mb:2}})]}),u.jsxs(Qe,{item:!0,xs:12,md:6,children:[u.jsxs(re,{sx:{mb:2},children:[u.jsx(fe,{variant:"subtitle2",sx:{mb:1},children:"Video File"}),u.jsx("input",{type:"file",accept:"video/*",onChange:we=>{var gt;const nt=(gt=we.target.files)==null?void 0:gt[0];if(nt){T(nt);const bt=document.createElement("video");bt.preload="metadata",bt.onloadedmetadata=()=>{ve(bt.duration)},bt.src=URL.createObjectURL(nt)}},style:{width:"100%"}})]}),u.jsxs(re,{sx:{mb:2},children:[u.jsx(fe,{variant:"subtitle2",sx:{mb:1},children:"Thumbnail Image"}),u.jsx("input",{type:"file",accept:"image/*",onChange:we=>{var gt;const nt=(gt=we.target.files)==null?void 0:gt[0];nt&&q(nt)},style:{width:"100%"}})]}),ge&&u.jsxs(fe,{variant:"body2",color:"text.secondary",children:["Duration: ",Math.floor(ge/60),":",(ge%60).toString().padStart(2,"0")]})]})]}),u.jsxs(re,{sx:{display:"flex",gap:2,mt:3},children:[u.jsx(Xe,{variant:"contained",color:"primary",onClick:rs,disabled:de||!R||!te||!Q,startIcon:de?u.jsx(Cr,{size:20}):u.jsx(Ru,{}),children:de?"Uploading...":w?"Update Video":"Upload Video"}),u.jsx(Xe,{variant:"outlined",onClick:()=>{P(!1),L(null),J(""),he(""),$(""),Y(""),T(null),q(null),ve(null)},children:"Cancel"})]}),me>0&&u.jsxs(re,{sx:{mt:2},children:[u.jsxs(fe,{variant:"body2",color:"text.secondary",children:["Upload Progress: ",me,"%"]}),u.jsx(Wl,{variant:"determinate",value:me})]})]})]}),u.jsxs(su,{value:r,index:1,children:[u.jsxs(re,{sx:{mb:4},children:[u.jsxs(Qe,{container:!0,spacing:2,alignItems:"center",justifyContent:"space-between",sx:{mb:2},children:[u.jsx(Qe,{item:!0,children:u.jsx(fe,{variant:"h5",component:"h2",children:"Site Configuration"})}),u.jsx(Qe,{item:!0,children:u.jsx(Xe,{variant:"contained",color:"primary",onClick:()=>It(!_t),startIcon:_t?u.jsx(e1,{}):u.jsx(Ou,{}),children:_t?"Cancel Edit":"Edit Config"})})]}),f&&u.jsx(Qt,{severity:"error",sx:{mb:2,mt:2},children:f})]}),_t&&u.jsxs(yn,{sx:{p:3,mb:3},children:[u.jsx(fe,{variant:"h6",component:"h3",sx:{mb:3},children:"Site Settings"}),u.jsxs(Qe,{container:!0,spacing:3,children:[u.jsxs(Qe,{item:!0,xs:12,md:6,children:[u.jsx(Rt,{fullWidth:!0,label:"Site Name",value:ye,onChange:we=>M(we.target.value),variant:"outlined",sx:{mb:2}}),u.jsx(Rt,{fullWidth:!0,label:"Video List Title",value:mt,onChange:we=>yt(we.target.value),variant:"outlined",sx:{mb:2}}),u.jsx(Rt,{fullWidth:!0,label:"Telegram Username",value:st,onChange:we=>ct(we.target.value),variant:"outlined",placeholder:"@username",sx:{mb:2}})]}),u.jsxs(Qe,{item:!0,xs:12,md:6,children:[u.jsx(fe,{variant:"subtitle1",sx:{mb:2,fontWeight:"bold"},children:"Payment Settings"}),u.jsx(Rt,{fullWidth:!0,label:"PayPal Client ID",value:et,onChange:we=>qe(we.target.value),variant:"outlined",sx:{mb:2}}),u.jsx(Rt,{fullWidth:!0,label:"PayPal.me Username",value:Ie,onChange:we=>Te(we.target.value),variant:"outlined",placeholder:"@username",sx:{mb:2}}),u.jsx(Rt,{fullWidth:!0,label:"Stripe Publishable Key",value:Fe,onChange:we=>Re(we.target.value),variant:"outlined",sx:{mb:2}}),u.jsx(Rt,{fullWidth:!0,label:"Stripe Secret Key",type:"password",value:Ve,onChange:we=>tt(we.target.value),variant:"outlined",sx:{mb:2}})]}),u.jsx(Qe,{item:!0,xs:12,children:u.jsx(fe,{variant:"subtitle1",sx:{mb:2,fontWeight:"bold"},children:"Email Settings"})}),u.jsxs(Qe,{item:!0,xs:12,md:4,children:[u.jsx(Rt,{fullWidth:!0,label:"SMTP Host",value:Br,onChange:we=>pe(we.target.value),variant:"outlined",sx:{mb:2}}),u.jsx(Rt,{fullWidth:!0,label:"SMTP Port",value:He,onChange:we=>$e(we.target.value),variant:"outlined",sx:{mb:2}}),u.jsx(f0,{control:u.jsx(p0,{checked:vt,onChange:we=>Ot(we.target.checked)}),label:"Use SSL/TLS",sx:{mb:2}})]}),u.jsxs(Qe,{item:!0,xs:12,md:4,children:[u.jsx(Rt,{fullWidth:!0,label:"Email Username",value:Nt,onChange:we=>ze(we.target.value),variant:"outlined",sx:{mb:2}}),u.jsx(Rt,{fullWidth:!0,label:"Email Password",type:"password",value:jt,onChange:we=>Pr(we.target.value),variant:"outlined",sx:{mb:2}})]}),u.jsx(Qe,{item:!0,xs:12,md:4,children:u.jsx(Rt,{fullWidth:!0,label:"From Email",value:Ht,onChange:we=>Ur(we.target.value),variant:"outlined",sx:{mb:2}})}),u.jsx(Qe,{item:!0,xs:12,children:u.jsx(fe,{variant:"subtitle1",sx:{mb:2,fontWeight:"bold"},children:"Wasabi Storage Settings"})}),u.jsxs(Qe,{item:!0,xs:12,md:6,children:[u.jsx(Rt,{fullWidth:!0,label:"Access Key",value:en,onChange:we=>Ye(we.target.value),variant:"outlined",sx:{mb:2}}),u.jsx(Rt,{fullWidth:!0,label:"Secret Key",type:"password",value:Vr,onChange:we=>tn(we.target.value),variant:"outlined",sx:{mb:2}}),u.jsx(Rt,{fullWidth:!0,label:"Region",value:_r,onChange:we=>Jt(we.target.value),variant:"outlined",sx:{mb:2}})]}),u.jsxs(Qe,{item:!0,xs:12,md:6,children:[u.jsx(Rt,{fullWidth:!0,label:"Bucket Name",value:Gt,onChange:we=>Ir(we.target.value),variant:"outlined",sx:{mb:2}}),u.jsx(Rt,{fullWidth:!0,label:"Endpoint",value:ti,onChange:we=>un(we.target.value),variant:"outlined",sx:{mb:2}})]}),u.jsxs(Qe,{item:!0,xs:12,children:[u.jsx(fe,{variant:"subtitle1",sx:{mb:2,fontWeight:"bold"},children:"Cryptocurrency Wallets"}),u.jsxs(re,{sx:{display:"flex",gap:2,mb:2},children:[u.jsxs(yf,{sx:{minWidth:120},children:[u.jsx(wf,{children:"Crypto"}),u.jsx(xf,{value:wt,onChange:we=>Lr(we.target.value),label:"Crypto",children:rn.map(we=>u.jsxs(ca,{value:we.code,children:[we.name," (",we.code,")"]},we.code))})]}),u.jsx(Rt,{label:"Wallet Address",value:De,onChange:we=>er(we.target.value),variant:"outlined",sx:{flexGrow:1}}),u.jsx(Xe,{variant:"outlined",onClick:()=>{De.trim()&&(ut([...Ge,`${wt}:${De}`]),er(""))},children:"Add"})]}),Ge.length>0&&u.jsx(re,{children:Ge.map((we,nt)=>u.jsx(zt,{label:we,onDelete:()=>{ut(Ge.filter((gt,bt)=>bt!==nt))},sx:{mr:1,mb:1}},nt))})]})]}),u.jsxs(re,{sx:{display:"flex",gap:2,mt:3},children:[u.jsx(Xe,{variant:"contained",color:"primary",onClick:Ca,startIcon:u.jsx(Ru,{}),children:"Save Configuration"}),u.jsx(Xe,{variant:"outlined",onClick:()=>{It(!1),qn()},children:"Cancel"})]})]}),!_t&&Ne&&u.jsxs(yn,{sx:{p:3},children:[u.jsx(fe,{variant:"h6",component:"h3",sx:{mb:3},children:"Current Configuration"}),u.jsxs(Qe,{container:!0,spacing:3,children:[u.jsxs(Qe,{item:!0,xs:12,md:6,children:[u.jsx(fe,{variant:"subtitle2",color:"text.secondary",children:"Site Name"}),u.jsx(fe,{variant:"body1",sx:{mb:2},children:Ne.site_name||"Not set"}),u.jsx(fe,{variant:"subtitle2",color:"text.secondary",children:"Video List Title"}),u.jsx(fe,{variant:"body1",sx:{mb:2},children:Ne.video_list_title||"Not set"}),u.jsx(fe,{variant:"subtitle2",color:"text.secondary",children:"Telegram Username"}),u.jsx(fe,{variant:"body1",sx:{mb:2},children:Ne.telegram_username||"Not set"})]}),u.jsxs(Qe,{item:!0,xs:12,md:6,children:[u.jsx(fe,{variant:"subtitle2",color:"text.secondary",children:"PayPal Client ID"}),u.jsx(fe,{variant:"body1",sx:{mb:2},children:Ne.paypal_client_id?"***"+Ne.paypal_client_id.slice(-4):"Not set"}),u.jsx(fe,{variant:"subtitle2",color:"text.secondary",children:"Stripe Publishable Key"}),u.jsx(fe,{variant:"body1",sx:{mb:2},children:Ne.stripe_publishable_key?"***"+Ne.stripe_publishable_key.slice(-4):"Not set"}),u.jsx(fe,{variant:"subtitle2",color:"text.secondary",children:"Wasabi Bucket"}),u.jsx(fe,{variant:"body1",sx:{mb:2},children:((ns=Ne.wasabi_config)==null?void 0:ns.bucket)||"Not set"})]})]})]})]}),u.jsx(su,{value:r,index:2,children:u.jsx(re,{sx:{mb:4},children:u.jsxs(Qe,{container:!0,spacing:3,children:[u.jsx(Qe,{item:!0,xs:12,md:6,children:u.jsx(vy,{showDetails:!0,refreshInterval:5e3})}),u.jsx(Qe,{item:!0,xs:12,md:6,children:u.jsx(Xi,{children:u.jsxs(ks,{children:[u.jsx(fe,{variant:"h6",gutterBottom:!0,children:"Estatsticas em Tempo Real"}),u.jsx(fe,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Monitore quantos usurios esto acessando seu site em tempo real. Os dados so atualizados automaticamente a cada 5 segundos."}),u.jsxs(re,{sx:{mt:2},children:[u.jsx(fe,{variant:"subtitle2",gutterBottom:!0,children:"Funcionalidades:"}),u.jsxs("ul",{children:[u.jsx("li",{children:"Contador de usurios online em tempo real"}),u.jsx("li",{children:"Lista de usurios ativos com timestamps"}),u.jsx("li",{children:"Status de conexo de cada usurio"}),u.jsx("li",{children:"Atualizao automtica dos dados"})]})]})]})})})]})})})]}),u.jsxs(Mu,{open:nn,onClose:()=>Sr(!1),"aria-labelledby":"delete-dialog-title","aria-describedby":"delete-dialog-description",children:[u.jsx(Bu,{id:"delete-dialog-title",children:"Confirm Deletion"}),u.jsx(Uu,{children:u.jsxs(g0,{id:"delete-dialog-description",children:["Are you sure you want to delete this ",mr==null?void 0:mr.type,"? This action cannot be undone."]})}),u.jsxs(jf,{children:[u.jsx(Xe,{onClick:()=>Sr(!1),children:"Cancel"}),u.jsx(Xe,{onClick:()=>{mr&&(mr.type==="video"?Es(mr.id):ka(mr.id))},color:"error",autoFocus:!0,children:"Delete"})]})]}),u.jsx(Af,{open:hn,autoHideDuration:6e3,onClose:()=>Sn(!1),children:u.jsx(jy,{onClose:()=>Sn(!1),severity:wi,children:bi})})]})};function kr(n,e){const t=new CustomEvent("show-feedback",{detail:{message:n,severity:e}});document.dispatchEvent(t)}var Th={},ky=Lt;Object.defineProperty(Th,"__esModule",{value:!0});var i1=Th.default=void 0,Cy=ky(Pt()),Ly=u;i1=Th.default=(0,Cy.default)((0,Ly.jsx)("path",{d:"m12 4-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"}),"ArrowForward");const Py=({open:n,onClose:e})=>{const[t,r]=F.useState(""),[i,s]=F.useState(""),[a,c]=F.useState(!1),[l,f]=F.useState(!1),[p,m]=F.useState(null),[y,v]=F.useState(null),[k,S]=F.useState(null),[P,w]=F.useState(!1),[L,R]=F.useState(0),J=["Configurao","Validao","Setup","Finalizado"];F.useEffect(()=>{},[n]);const te=()=>{!l&&!a&&(r(""),s(""),m(null),v(null),S(null),R(0),e())},he=async()=>{if(!t.trim()||!i.trim()){m({success:!1,message:"Por favor, preencha tanto o Project ID quanto a API Key"});return}c(!0),m(null);try{await new Promise(Y=>setTimeout(Y,1e3)),m({success:!0,message:"Conexo com Wasabi validada com sucesso!"}),R(1)}catch(Y){m({success:!1,message:`Erro na validao: ${Y instanceof Error?Y.message:"Erro desconhecido"}`})}finally{c(!1)}},Q=async()=>{if(!(!(p!=null&&p.success)&&(await he(),!(p!=null&&p.success)))){f(!0),S(null),R(2);try{v({step:1,message:"Criando bucket...",percentage:25}),await new Promise(Y=>setTimeout(Y,1e3)),v({step:2,message:"Configurando permisses...",percentage:50}),await new Promise(Y=>setTimeout(Y,1e3)),v({step:3,message:"Finalizando configurao...",percentage:75}),await new Promise(Y=>setTimeout(Y,1e3)),v({step:4,message:"Configurao concluda!",percentage:100}),S({success:!0,message:"Wasabi configurado com sucesso!",details:["Bucket criado","Permisses configuradas","Sistema pronto para uso"],errors:[]}),R(3)}catch(Y){S({success:!1,message:`Erro durante o setup: ${Y instanceof Error?Y.message:"Erro desconhecido"}`,details:[],errors:[Y instanceof Error?Y.message:"Erro desconhecido"]}),R(3)}finally{f(!1)}}},$=()=>{switch(L){case 0:return u.jsxs(re,{children:[u.jsx(fe,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Insira as credenciais do seu bucket Wasabi para configurar automaticamente o armazenamento."}),u.jsx(Rt,{fullWidth:!0,label:"Project ID",value:t,onChange:Y=>r(Y.target.value),placeholder:"68xxxxxxxxxxxxxxxxxx",sx:{mb:2},disabled:a||l,helperText:"O Access Key do seu bucket Wasabi (encontrado no dashboard)"}),u.jsx(Rt,{fullWidth:!0,label:"API Key",type:"password",value:i,onChange:Y=>s(Y.target.value),placeholder:"Sua Secret Key do Wasabi",sx:{mb:3},disabled:a||l,helperText:"Chave API com permisses de administrador"}),p&&u.jsx(Qt,{severity:p.success?"success":"error",sx:{mb:2},children:p.message})]});case 1:return u.jsxs(re,{children:[u.jsx(Qt,{severity:"success",sx:{mb:3},children:u.jsx(fe,{variant:"body2",children:" Credenciais validadas com sucesso! Agora voc pode configurar automaticamente a base de dados."})}),u.jsx(fe,{variant:"body2",color:"text.secondary",children:"O sistema ir criar automaticamente:"}),u.jsxs(Cl,{dense:!0,children:[u.jsxs(En,{children:[u.jsx(Tn,{children:u.jsx(no,{color:"primary"})}),u.jsx(Rn,{primary:"Database principal"})]}),u.jsxs(En,{children:[u.jsx(Tn,{children:u.jsx(no,{color:"primary"})}),u.jsx(Rn,{primary:"Collection de Videos"})]}),u.jsxs(En,{children:[u.jsx(Tn,{children:u.jsx(no,{color:"primary"})}),u.jsx(Rn,{primary:"Collection de Users"})]}),u.jsxs(En,{children:[u.jsx(Tn,{children:u.jsx(no,{color:"primary"})}),u.jsx(Rn,{primary:"Collection de Configuraes"})]}),u.jsxs(En,{children:[u.jsx(Tn,{children:u.jsx(no,{color:"primary"})}),u.jsx(Rn,{primary:"Collection de Sessions"})]}),u.jsxs(En,{children:[u.jsx(Tn,{children:u.jsx(ud,{color:"primary"})}),u.jsx(Rn,{primary:"Bucket de Videos"})]}),u.jsxs(En,{children:[u.jsx(Tn,{children:u.jsx(ud,{color:"primary"})}),u.jsx(Rn,{primary:"Bucket de Thumbnails"})]}),u.jsxs(En,{children:[u.jsx(Tn,{children:u.jsx(au,{color:"primary"})}),u.jsx(Rn,{primary:"Dados iniciais"})]})]})]});case 2:return u.jsxs(re,{children:[u.jsx(fe,{variant:"h6",sx:{mb:2},children:"Configurando base de dados..."}),y&&u.jsxs(re,{sx:{mb:3},children:[u.jsxs(re,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[u.jsx(fe,{variant:"body2",color:"text.secondary",children:y.stage}),u.jsxs(fe,{variant:"body2",color:"text.secondary",children:[y.progress,"%"]})]}),u.jsx(Wl,{variant:"determinate",value:y.progress,sx:{mb:1},color:y.isError?"error":"primary"}),u.jsx(fe,{variant:"body2",color:y.isError?"error.main":"text.secondary",children:y.message})]}),u.jsx(re,{sx:{display:"flex",justifyContent:"center",mt:2},children:u.jsx(Cr,{})})]});case 3:return u.jsx(re,{children:k&&u.jsxs(u.Fragment,{children:[u.jsxs(Qt,{severity:k.success?"success":"error",sx:{mb:2},action:u.jsx(xn,{color:"inherit",size:"small",onClick:()=>w(!P),children:P?u.jsx(y0,{}):u.jsx(w0,{})}),children:[u.jsx(fe,{variant:"body1",sx:{fontWeight:"bold"},children:k.message}),u.jsx(fe,{variant:"body2",sx:{mt:1},children:'Clique em "Ver Detalhes" para ver o resumo das operaes realizadas.'})]}),u.jsx(_f,{in:P,children:u.jsxs(re,{sx:{mt:2},children:[k.details.length>0&&u.jsxs(re,{sx:{mb:2},children:[u.jsx(fe,{variant:"subtitle2",color:"success.main",sx:{mb:1},children:" Operaes Realizadas:"}),u.jsx(Cl,{dense:!0,children:k.details.map((Y,N)=>u.jsxs(En,{children:[u.jsx(Tn,{children:u.jsx(kf,{color:"success",fontSize:"small"})}),u.jsx(Rn,{primary:Y,primaryTypographyProps:{variant:"body2"}})]},N))})]}),k.errors.length>0&&u.jsxs(re,{children:[u.jsx(fe,{variant:"subtitle2",color:"error.main",sx:{mb:1},children:" Erros encontrados:"}),u.jsx(Cl,{dense:!0,children:k.errors.map((Y,N)=>u.jsxs(En,{children:[u.jsx(Tn,{children:u.jsx(x0,{color:"error",fontSize:"small"})}),u.jsx(Rn,{primary:Y,primaryTypographyProps:{variant:"body2"}})]},N))})]})]})})]})});default:return null}},H=()=>{switch(L){case 0:return u.jsxs(u.Fragment,{children:[u.jsx(Xe,{onClick:te,disabled:a||l,children:"Cancelar"}),u.jsx(Xe,{onClick:he,variant:"contained",disabled:a||l||!t.trim()||!i.trim(),startIcon:a?u.jsx(Cr,{size:16}):null,children:a?"Validando...":"Validar Conexo"})]});case 1:return u.jsxs(u.Fragment,{children:[u.jsx(Xe,{onClick:()=>R(0),disabled:l,children:"Voltar"}),u.jsx(Xe,{onClick:Q,variant:"contained",color:"primary",disabled:l,children:"Iniciar Setup Automtico"})]});case 2:return u.jsx(Xe,{onClick:te,disabled:l,children:"Cancelar"});case 3:return u.jsx(Xe,{onClick:te,variant:"contained",color:k!=null&&k.success?"primary":"error",children:"Fechar"});default:return null}};return u.jsxs(Mu,{open:n,onClose:te,maxWidth:"md",fullWidth:!0,PaperProps:{sx:{minHeight:"500px"}},children:[u.jsx(Bu,{children:u.jsxs(re,{sx:{display:"flex",alignItems:"center",gap:1},children:[u.jsx(au,{color:"primary"}),u.jsx(fe,{variant:"h6",children:"Configurar Armazenamento Wasabi"})]})}),u.jsxs(Uu,{children:[u.jsx(m0,{activeStep:L,sx:{mb:4},children:J.map(Y=>u.jsx(v0,{children:u.jsx(b0,{children:Y})},Y))}),$()]}),u.jsx(jf,{sx:{px:3,pb:2},children:H()})]})},Iy=()=>{const[n,e]=F.useState({projectId:"",apiKey:""}),[t,r]=F.useState(!1),[i,s]=F.useState(!1);F.useEffect(()=>{e({projectId:"wasabi",apiKey:"configured"}),r(!0)},[]),F.useEffect(()=>{const c=l=>{l.ctrlKey&&l.altKey&&(l.key==="c"||l.key==="C")&&(s(!0),window.setTimeout(()=>s(!1),1e4))};return window.addEventListener("keydown",c),()=>window.removeEventListener("keydown",c)},[]);const a=()=>{confirm("Tem certeza que deseja limpar as credenciais?")&&(localStorage.removeItem("wasabi-config"),e({projectId:"",apiKey:""}),r(!1))};return i?t?u.jsxs(re,{sx:{position:"relative",mb:3,p:2,bgcolor:"rgba(76, 175, 80, 0.1)",borderRadius:1,border:"1px solid rgba(76, 175, 80, 0.3)"},children:[u.jsx(xn,{"aria-label":"fechar",size:"small",onClick:()=>s(!1),sx:{position:"absolute",top:8,right:8},children:u.jsx(hd,{fontSize:"small"})}),u.jsxs(re,{sx:{display:"flex",alignItems:"center",mb:2},children:[u.jsx(kf,{sx:{color:"#4CAF50",mr:1}}),u.jsx(fe,{variant:"h6",sx:{color:"#4CAF50",fontWeight:"bold"},children:"Credenciais Configuradas"})]}),u.jsxs(re,{sx:{display:"flex",flexDirection:"column",gap:1,mb:2},children:[u.jsxs(re,{sx:{display:"flex",alignItems:"center",gap:1},children:[u.jsx(fe,{variant:"body2",sx:{fontWeight:"bold",minWidth:100},children:"Project ID:"}),u.jsx(zt,{label:n.projectId,size:"small",sx:{bgcolor:"rgba(76, 175, 80, 0.2)",color:"#4CAF50"}})]}),u.jsxs(re,{sx:{display:"flex",alignItems:"center",gap:1},children:[u.jsx(fe,{variant:"body2",sx:{fontWeight:"bold",minWidth:100},children:"API Key:"}),u.jsx(zt,{label:`${n.apiKey.substring(0,8)}...`,size:"small",sx:{bgcolor:"rgba(76, 175, 80, 0.2)",color:"#4CAF50"}})]})]}),u.jsxs(re,{sx:{display:"flex",gap:1},children:[u.jsx(Xe,{size:"small",variant:"outlined",startIcon:u.jsx(au,{}),onClick:a,sx:{borderColor:"#FF9800",color:"#FF9800","&:hover":{borderColor:"#F57C00",color:"#F57C00"}},children:"Limpar Credenciais"}),u.jsx(fe,{variant:"caption",sx:{color:"rgba(0,0,0,0.6)",alignSelf:"center"},children:" Dica: Use Ctrl + Alt + S no footer para configurao secreta"})]})]}):u.jsx(Qt,{severity:"warning",sx:{mb:2},action:u.jsx(xn,{size:"small",onClick:()=>s(!1),children:u.jsx(hd,{fontSize:"small"})}),children:u.jsxs(fe,{variant:"body2",children:[u.jsx("strong",{children:"Credenciais no configuradas:"})," Use o boto de configurao para definir o Access Key e Secret Key do Wasabi."]})}):null},Ny=()=>{const[n,e]=F.useState(0),[t,r]=F.useState(!1),[i,s]=F.useState(null),[a]=F.useState(()=>`user_${Date.now()}_${Math.random().toString(36).substr(2,9)}`),c=zl.getInstance(),l=F.useCallback(p=>{e(p)},[]),f=F.useCallback(()=>{try{c.updateUserActivity(a)}catch(p){console.error("Erro ao enviar heartbeat:",p)}},[c,a]);return F.useEffect(()=>{try{c.addUser(a),r(!0);const p=c.getOnlineCount();e(p),c.addListener(l);const m=setInterval(f,3e3);return()=>{c.removeUser(a),c.removeListener(l),clearInterval(m),r(!1)}}catch(p){console.error("Erro ao inicializar usurios online:",p),s("Erro ao conectar com o sistema de usurios online")}},[c,a,l,f]),{onlineCount:n,isOnline:t,error:i}},gf=({showDetails:n=!0,variant:e="chip",size:t="medium",position:r="static"})=>{const{onlineCount:i,isOnline:s,error:a}=Ny(),c=()=>{switch(t){case"small":return{fontSize:"0.75rem",padding:"2px 8px"};case"large":return{fontSize:"1rem",padding:"8px 16px"};default:return{fontSize:"0.875rem",padding:"4px 12px"}}},l=()=>r==="fixed"?{position:"fixed",top:16,right:16,zIndex:1e3,backgroundColor:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",borderRadius:2,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"}:{};if(a)return u.jsx(re,{sx:{...l()},children:u.jsx(zt,{icon:u.jsx(Fl,{}),label:"Erro de conexo",color:"error",size:"small",sx:c()})});const f=k=>k===0?"0":k<1e3?k.toString():k<1e6?`${(k/1e3).toFixed(1)}K`:`${(k/1e6).toFixed(1)}M`,p=()=>!s||i===0?"default":i<10?"success":i<50?"warning":"error",m=()=>s?u.jsx(_0,{sx:{fontSize:"0.8rem",color:"#4caf50"}}):u.jsx(Fl,{}),y=()=>s?i===0?"No users online":i===1?"1 user online":`${i} users online`:"Connecting...",v=()=>s?i===0?"0 online":`${i} online`:"Connecting...";return e==="text"?u.jsx(re,{sx:{...l()},children:u.jsxs(fe,{variant:"body2",color:"text.secondary",sx:{display:"flex",alignItems:"center",gap:.5,...c()},children:[m(),v()]})}):e==="detailed"?u.jsx(re,{sx:{...l()},children:u.jsx(Mn,{in:s,children:u.jsxs(re,{sx:{display:"flex",alignItems:"center",gap:1,p:1,backgroundColor:"background.paper",borderRadius:1,border:"1px solid",borderColor:"divider"},children:[u.jsx(Sf,{color:"primary"}),u.jsxs(re,{children:[u.jsx(fe,{variant:"body2",fontWeight:"bold",children:f(i)}),u.jsx(fe,{variant:"caption",color:"text.secondary",children:i===1?"user online":"users online"})]})]})})}):u.jsx(re,{sx:l(),children:u.jsx(wo,{title:y(),arrow:!0,children:u.jsx(zt,{icon:m(),label:n?v():f(i),color:p(),size:"small",sx:{...c(),"& .MuiChip-icon":{fontSize:"1rem"}}})})})},Ey=()=>u.jsxs(Xi,{sx:{height:"100%",display:"flex",flexDirection:"column",borderRadius:"8px",overflow:"hidden",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",bgcolor:"background.paper"},children:[u.jsx(dr,{variant:"rectangular",sx:{width:"100%",paddingTop:"56.25%"},animation:"wave"}),u.jsxs(ks,{children:[u.jsx(dr,{variant:"text",sx:{fontSize:"1.5rem",mb:1}}),u.jsx(dr,{variant:"text",sx:{fontSize:"1rem",width:"60%"}}),u.jsxs(re,{sx:{mt:2,display:"flex",justifyContent:"space-between"},children:[u.jsx(dr,{variant:"text",sx:{width:"30%"}}),u.jsx(dr,{variant:"text",sx:{width:"20%"}})]})]})]}),Ty=({index:n})=>u.jsxs(Xi,{sx:{height:"100%",display:"flex",flexDirection:"column",borderRadius:"8px",overflow:"hidden",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",bgcolor:"background.paper",position:"relative"},children:[u.jsx(re,{sx:{width:"100%",paddingTop:"56.25%",position:"relative",bgcolor:"rgba(0,0,0,0.05)",display:"flex",alignItems:"center",justifyContent:"center"},children:u.jsxs(re,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[u.jsx(Cr,{size:40,thickness:4,sx:{color:"primary.main",animation:"pulse 1.5s ease-in-out infinite"}}),u.jsxs(fe,{variant:"caption",sx:{color:"text.secondary",fontWeight:"bold",textAlign:"center"},children:["Loading video ",n+1,"..."]})]})}),u.jsxs(ks,{children:[u.jsx(dr,{variant:"text",sx:{fontSize:"1.5rem",mb:1}}),u.jsx(dr,{variant:"text",sx:{fontSize:"1rem",width:"60%"}}),u.jsxs(re,{sx:{mt:2,display:"flex",justifyContent:"space-between"},children:[u.jsx(dr,{variant:"text",sx:{width:"30%"}}),u.jsx(dr,{variant:"text",sx:{width:"20%"}})]})]})]}),Ry=()=>{const[n,e]=F.useState(!0),[t,r]=F.useState(null),[i,s]=F.useState(1),[a,c]=F.useState(1),[l,f]=F.useState(!1),[p,m]=F.useState(!1),[y,v]=F.useState([]),[k,S]=F.useState(!1),{user:P}=ts(),{videoListTitle:w,telegramUsername:L}=Qn();Bn();const R=24;F.useEffect(()=>{(async()=>{try{e(!0),r(null),v([]);const Y=await Wt.getVideoIds(pi.NEWEST),N=Math.ceil(Y.length/R);c(N);const T=(i-1)*R,z=T+R,q=Y.slice(T,z);e(!1),J(q)}catch(Y){console.error("Error fetching videos:",Y),r("Failed to load videos. Please try again later."),e(!1)}})(),m(!1)},[P,i]);const J=async H=>{S(!0);const Y=H.slice(0,3),N=H.slice(3),T=Y.map(async z=>{try{const q=await Wt.getVideo(z);q&&v(de=>de.some(ce=>ce.$id===q.$id)?de:[...de,q])}catch(q){console.error(`Error loading video ${z}:`,q)}});await Promise.all(T);for(let z=0;z<N.length;z++){const q=N[z];try{const de=await Wt.getVideo(q);de&&v(ce=>ce.some(me=>me.$id===de.$id)?ce:[...ce,de]),await new Promise(ce=>setTimeout(ce,150))}catch(de){console.error(`Error loading video ${q}:`,de)}}S(!1)},te=(H,Y)=>{s(Y),window.scrollTo({top:0,behavior:"smooth"}),setTimeout(()=>{const N=document.querySelector("header");N&&N.scrollIntoView({behavior:"smooth",block:"start"})},100)},he=()=>{const H=R,Y=y.length,N=Math.max(0,H-Y);return Array(N).fill(0).map((T,z)=>u.jsx(Qe,{item:!0,xs:12,sm:6,md:4,lg:3,children:u.jsx(Ey,{})},`skeleton-${z}`))},Q=()=>{const H=R,Y=y.length,N=Math.max(0,H-Y);return Array(N).fill(0).map((T,z)=>u.jsx(Qe,{item:!0,xs:12,sm:6,md:4,lg:3,children:u.jsx(Ty,{index:Y+z})},`loading-${z}`))},$=()=>{if(L){const H=`
 *Premium Video Collection*

Welcome to our premium content site!

 *What we offer:*
 Exclusive high-quality videos
 Secure payments (PayPal, Stripe, Crypto)
 Instant access after purchase
 18+ adult content

 *Privacy and Security:*
 Encrypted transactions
 Protected data
 24/7 support

 *Need help?*
I'm here to answer your questions about our videos and services!

*Click "View Videos" to start your journey!* 
      `.trim(),Y=encodeURIComponent(H);window.open(`https://t.me/${L}?text=${Y}`,"_blank")}};return u.jsxs(re,{sx:{width:"100%"},children:[u.jsx("style",{children:`
          @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
          }
        `}),u.jsx(gf,{variant:"detailed",position:"fixed",size:"medium"}),u.jsxs(mi,{maxWidth:"lg",sx:{py:6},children:[u.jsxs(re,{sx:{textAlign:"center",mb:6,py:4,background:"linear-gradient(135deg, rgba(255, 15, 80, 0.05) 0%, rgba(209, 13, 66, 0.05) 100%)",borderRadius:2,border:"1px solid rgba(255, 15, 80, 0.1)"},children:[u.jsx(fe,{variant:"h2",component:"h1",sx:{fontWeight:"bold",fontSize:{xs:"2.5rem",md:"3.5rem"},background:"linear-gradient(45deg, #FF0F50 30%, #D10D42 90%)",backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",mb:2},children:"Premium Video Collection"}),u.jsx(fe,{variant:"h6",sx:{color:"text.secondary",maxWidth:"600px",mx:"auto",mb:3},children:"Discover exclusive adult content with high-quality videos and secure payment options"}),u.jsxs(re,{sx:{display:"flex",gap:2,justifyContent:"center",flexWrap:"wrap",alignItems:"center"},children:[u.jsx(zt,{label:"18+ ADULTS ONLY",color:"error",sx:{fontWeight:"bold"}}),u.jsx(zt,{label:"SECURE PAYMENTS",color:"primary",sx:{fontWeight:"bold"}}),u.jsx(zt,{label:"INSTANT ACCESS",color:"secondary",sx:{fontWeight:"bold"}}),L&&u.jsx(Xe,{variant:"contained",startIcon:u.jsx(Gi,{}),onClick:$,sx:{backgroundColor:"#0088cc",color:"white",fontWeight:"bold",px:3,py:1,borderRadius:"25px",textTransform:"none",fontSize:"0.9rem","&:hover":{backgroundColor:"#006699",transform:"scale(1.05)"},transition:"all 0.3s ease",boxShadow:"0 4px 12px rgba(0, 136, 204, 0.3)"},children:"Contact on Telegram"})]})]}),u.jsx(Iy,{}),u.jsxs(re,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},justifyContent:"space-between",alignItems:{xs:"stretch",md:"center"},mb:3},children:[u.jsxs(re,{children:[u.jsx(fe,{variant:"h4",component:"h2",gutterBottom:!0,children:w||"Featured Videos"}),!n&&y.length>0&&u.jsxs(re,{sx:{display:"flex",gap:2,flexWrap:"wrap",mt:1,alignItems:"center"},children:[u.jsx(zt,{label:`From $${Math.min(...y.map(H=>H.price)).toFixed(2)}`,size:"small",sx:{backgroundColor:"rgba(255, 15, 80, 0.1)",color:"#FF0F50",fontWeight:"bold",border:"1px solid rgba(255, 15, 80, 0.3)"}}),u.jsx(zt,{label:`Up to $${Math.max(...y.map(H=>H.price)).toFixed(2)}`,size:"small",sx:{backgroundColor:"rgba(255, 15, 80, 0.1)",color:"#FF0F50",fontWeight:"bold",border:"1px solid rgba(255, 15, 80, 0.3)"}}),u.jsx(zt,{label:`Avg: $${(y.reduce((H,Y)=>H+Y.price,0)/y.length).toFixed(2)}`,size:"small",sx:{backgroundColor:"rgba(255, 15, 80, 0.1)",color:"#FF0F50",fontWeight:"bold",border:"1px solid rgba(255, 15, 80, 0.3)"}}),u.jsx(gf,{variant:"chip",size:"small",showDetails:!0}),k&&u.jsx(zt,{label:`Loading ${y.length} videos...`,size:"small",sx:{backgroundColor:"rgba(33, 150, 243, 0.1)",color:"#2196F3",fontWeight:"bold",border:"1px solid rgba(33, 150, 243, 0.3)",animation:"pulse 1.5s ease-in-out infinite"}})]})]}),u.jsxs(re,{sx:{display:"flex",gap:1,alignItems:"center",alignSelf:{xs:"flex-start",md:"center"}},children:[p&&u.jsx(wo,{title:"Configurar Armazenamento Wasabi",children:u.jsx(Xe,{onClick:()=>f(!0),variant:"outlined",color:"secondary",size:"small",sx:{minWidth:"auto",px:1.5,opacity:.7,"&:hover":{opacity:1}},children:u.jsx(Ao,{fontSize:"small"})})}),u.jsx(Xe,{component:co,to:"/videos",variant:"outlined",color:"primary",endIcon:u.jsx(i1,{}),children:"View All Videos"})]})]}),t&&u.jsx(Qt,{severity:"error",sx:{mb:3},action:u.jsx(Xe,{color:"inherit",size:"small",onClick:()=>f(!0),startIcon:u.jsx(Ao,{}),children:"Configurar Base de Dados"}),children:t}),u.jsx(Mn,{in:!0,timeout:500,children:u.jsx(re,{children:n?u.jsx(Qe,{container:!0,spacing:3,children:he()}):y.length===0&&!k?u.jsx(Ol,{in:!0,timeout:1e3,children:u.jsx(Qt,{severity:"info",sx:{mb:3,borderRadius:2,"& .MuiAlert-icon":{fontSize:"1.5rem"}},children:"No videos available at the moment. Please check back later."})}):u.jsxs(u.Fragment,{children:[u.jsxs(Qe,{container:!0,spacing:3,children:[y.map((H,Y)=>u.jsx(Ol,{in:!0,timeout:200,children:u.jsx(Qe,{item:!0,xs:12,sm:6,md:4,lg:3,children:u.jsx(ph,{video:H})})},H.$id)),k&&Q()]}),a>1&&u.jsx(Mn,{in:!0,timeout:800,children:u.jsx(re,{sx:{display:"flex",justifyContent:"center",mt:5,pt:3,borderTop:"1px solid",borderColor:"divider"},children:u.jsx(S0,{count:a,page:i,onChange:te,color:"primary",size:"large",showFirstButton:!0,showLastButton:!0,sx:{"& .MuiPaginationItem-root":{transition:"all 0.3s ease","&:hover":{transform:"scale(1.1)",bgcolor:"primary.main",color:"white"}}}})})})]})})})]}),u.jsx(yp,{}),u.jsx(Py,{open:l,onClose:()=>f(!1)})]})};$u`
  0% {
    opacity: 0;
  }
  100% {
    opacity: 1;
  }
`;$u`
  0% {
    transform: scale(1);
  }
  100% {
    transform: scale(1.1);
  }
`;$u`
  0% {
    opacity: 1;
  }
  100% {
    opacity: 0;
  }
`;var Rh={},Oy=Lt;Object.defineProperty(Rh,"__esModule",{value:!0});var s1=Rh.default=void 0,Fy=Oy(Pt()),Dy=u;s1=Rh.default=(0,Fy.default)((0,Dy.jsx)("path",{d:"M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2m0 14H4v-6h16zm0-10H4V6h16z"}),"Payment");var Oh={},My=Lt;Object.defineProperty(Oh,"__esModule",{value:!0});var a1=Oh.default=void 0,By=My(Pt()),Uy=u;a1=Oh.default=(0,By.default)((0,Uy.jsx)("path",{d:"M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2m0 14H4v-6h16zm0-10H4V6h16z"}),"CreditCard");const $y=[{cc:"GB",name:"UK"},{cc:"CA",name:"Canada"},{cc:"AU",name:"Australia"},{cc:"DE",name:"Germany"},{cc:"FR",name:"France"}];function o1(n){return n[Math.floor(Math.random()*n.length)]}function qy(){if(Math.random()<.8)return{countryLabel:"USA",countryEmoji:""};const e=o1($y),t={GB:"",CA:"",AU:"",DE:"",FR:""};return{countryLabel:e.name,countryEmoji:t[e.cc]}}function zy(n){try{return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(n)}catch{return`$${n.toFixed(2)}`}}const Wy=n=>n==="Stripe"?u.jsx(a1,{fontSize:"small"}):u.jsx(s1,{fontSize:"small"}),Vy=({visible:n,country:e,countryEmoji:t,provider:r,product:i,price:s})=>u.jsx(Mn,{in:n,timeout:{enter:400,exit:400},children:u.jsx(yn,{elevation:6,sx:{p:1.5,borderRadius:2,minWidth:280,maxWidth:360},children:u.jsxs(j0,{direction:"row",spacing:1.25,alignItems:"center",children:[u.jsx(A0,{sx:{width:32,height:32},children:t}),u.jsxs(re,{sx:{flexGrow:1,minWidth:0},children:[u.jsxs(fe,{variant:"body2",noWrap:!0,children:["Someone purchased  ",e]}),u.jsxs(fe,{variant:"caption",color:"text.secondary",noWrap:!0,children:[Wy(r),u.jsxs(re,{component:"span",sx:{ml:.5},children:["completed via ",r]})]}),u.jsxs(fe,{variant:"body2",noWrap:!0,children:[i,"  ",zy(s)]})]})]})})}),Hy=()=>{const[n,e]=F.useState([]),[t,r]=F.useState(!1),[i,s]=F.useState(null),a=F.useRef(null);F.useEffect(()=>{let l=!1;return(async()=>{try{const f=await Wt.getAllVideos(pi.NEWEST);l||e(f)}catch{}})(),()=>{l=!0}},[]);const c=()=>4e4;return F.useEffect(()=>{function l(f=!1){const p=f?5e3:c(),m=window.setTimeout(()=>{if(n.length===0){l(!1);return}const y=o1(n),v=qy(),k=Math.random()<.6?"Stripe":"PayPal";s({country:v.countryLabel,countryEmoji:v.countryEmoji,provider:k,product:y.title,price:Number(y.price)||0}),r(!0),window.setTimeout(()=>r(!1),4200),l(!1)},p);a.current=m}return l(!0),()=>{a.current&&window.clearTimeout(a.current)}},[n]),i?u.jsx(re,{sx:{position:"fixed",left:16,top:16,zIndex:l=>l.zIndex.snackbar},children:u.jsx(Vy,{visible:t,country:i.country,countryEmoji:i.countryEmoji,provider:i.provider,product:i.product,price:i.price})}):null},mf="privacy_notice_ack",Gy=()=>{const[n,e]=F.useState(!1);F.useEffect(()=>{localStorage.getItem(mf)||e(!0)},[]);const t=()=>{e(!1),localStorage.setItem(mf,"1")};return u.jsx(Af,{open:n,onClose:t,autoHideDuration:8e3,anchorOrigin:{vertical:"top",horizontal:"center"},children:u.jsx(Qt,{onClose:t,severity:"info",variant:"filled",sx:{width:"100%"},children:"We do not share or store your data. It is 100% secure."})})},Ky=()=>{const{pathname:n}=Xn();return F.useEffect(()=>{try{window.scrollTo({top:0,left:0,behavior:"instant"})}catch{window.scrollTo(0,0)}},[n]),null};var vf={},Jy="@vercel/analytics",Yy="1.5.0",Zy=()=>{window.va||(window.va=function(...e){(window.vaq=window.vaq||[]).push(e)})};function l1(){return typeof window<"u"}function c1(){try{const n="production"}catch{}return"production"}function Xy(n="auto"){if(n==="auto"){window.vam=c1();return}window.vam=n}function Qy(){return(l1()?window.vam:c1())||"production"}function Fu(){return Qy()==="development"}function ew(n){return n.scriptSrc?n.scriptSrc:Fu()?"https://va.vercel-scripts.com/v1/script.debug.js":n.basePath?`${n.basePath}/insights/script.js`:"/_vercel/insights/script.js"}function tw(n={debug:!0}){var e;if(!l1())return;Xy(n.mode),Zy(),n.beforeSend&&((e=window.va)==null||e.call(window,"beforeSend",n.beforeSend));const t=ew(n);if(document.head.querySelector(`script[src*="${t}"]`))return;const r=document.createElement("script");r.src=t,r.defer=!0,r.dataset.sdkn=Jy+(n.framework?`/${n.framework}`:""),r.dataset.sdkv=Yy,n.disableAutoTrack&&(r.dataset.disableAutoTrack="1"),n.endpoint?r.dataset.endpoint=n.endpoint:n.basePath&&(r.dataset.endpoint=`${n.basePath}/insights`),n.dsn&&(r.dataset.dsn=n.dsn),r.onerror=()=>{const i=Fu()?"Please check if any ad blockers are enabled and try again.":"Be sure to enable Web Analytics for your project and deploy again. See https://vercel.com/docs/analytics/quickstart for more information.";console.log(`[Vercel Web Analytics] Failed to load script from ${t}. ${i}`)},Fu()&&n.debug===!1&&(r.dataset.debug="false"),document.head.appendChild(r)}function rw({route:n,path:e}){var t;(t=window.va)==null||t.call(window,"pageview",{route:n,path:e})}function nw(){if(!(typeof process>"u"||typeof vf>"u"))return vf.REACT_APP_VERCEL_OBSERVABILITY_BASEPATH}function iw(n){return F.useEffect(()=>{var e;n.beforeSend&&((e=window.va)==null||e.call(window,"beforeSend",n.beforeSend))},[n.beforeSend]),F.useEffect(()=>{tw({framework:n.framework||"react",basePath:n.basePath??nw(),...n.route!==void 0&&{disableAutoTrack:!0},...n})},[]),F.useEffect(()=>{n.route&&n.path&&rw({route:n.route,path:n.path})},[n.route,n.path]),null}const u1=()=>u.jsx(iw,{}),sw=({open:n,onClose:e})=>{const t=Po(),r=bf(t.breakpoints.down("sm")),[i,s]=F.useState(6);return F.useEffect(()=>{if(!n)return;const a=setInterval(()=>{s(c=>c<=1?(e(),0):c-1)},1e3);return()=>clearInterval(a)},[n,e]),F.useEffect(()=>{n&&s(5)},[n]),u.jsx(Mu,{open:n,onClose:()=>{},maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:3,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",position:"relative",overflow:"hidden"}},children:u.jsxs(Uu,{sx:{p:4,textAlign:"center",position:"relative"},children:[u.jsx(re,{sx:{position:"absolute",top:-50,right:-50,width:100,height:100,borderRadius:"50%",background:"rgba(255, 255, 255, 0.1)",zIndex:0}}),u.jsx(re,{sx:{position:"absolute",bottom:-30,left:-30,width:80,height:80,borderRadius:"50%",background:"rgba(255, 255, 255, 0.1)",zIndex:0}}),u.jsxs(re,{sx:{position:"relative",zIndex:1},children:[u.jsx(re,{sx:{mb:3},children:u.jsx(Cr,{size:r?40:50,thickness:4,sx:{color:"white"}})}),u.jsx(Bu,{sx:{p:0,mb:2},children:u.jsx(fe,{variant:r?"h5":"h4",component:"h1",sx:{fontWeight:"bold",background:"linear-gradient(45deg, #fff 30%, #f0f0f0 90%)",backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",textShadow:"0 2px 4px rgba(0,0,0,0.3)"},children:"Loading Site..."})}),u.jsxs(fe,{variant:"h6",sx:{mb:3,fontWeight:"bold",color:"#ffeb3b",textShadow:"0 1px 2px rgba(0,0,0,0.5)"},children:["Please wait ",i," seconds"]}),u.jsx(ya,{sx:{mb:3,borderColor:"rgba(255,255,255,0.3)"}}),u.jsxs(re,{sx:{mb:3},children:[u.jsx(fe,{variant:r?"h6":"h5",sx:{mb:2,fontWeight:"bold",color:"#ffeb3b",textShadow:"0 1px 2px rgba(0,0,0,0.5)"},children:" Special Offers Available! "}),u.jsxs(re,{sx:{mb:2,p:2,borderRadius:2,background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",backdropFilter:"blur(10px)"},children:[u.jsxs(re,{sx:{display:"flex",alignItems:"center",mb:1},children:[u.jsx(k0,{sx:{mr:1,color:"#4caf50"}}),u.jsx(fe,{variant:"h6",sx:{fontWeight:"bold"},children:"Crypto Payment Special"})]}),u.jsx(fe,{variant:"body1",sx:{mb:1},children:"Pay with cryptocurrency above $40 and get"}),u.jsx(zt,{label:"2 FREE Contents",sx:{background:"linear-gradient(45deg, #4caf50 30%, #8bc34a 90%)",color:"white",fontWeight:"bold",fontSize:"0.9rem"}})]}),u.jsxs(re,{sx:{p:2,borderRadius:2,background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",backdropFilter:"blur(10px)"},children:[u.jsxs(re,{sx:{display:"flex",alignItems:"center",mb:1},children:[u.jsx(C0,{sx:{mr:1,color:"#fff"}}),u.jsx(fe,{variant:"h6",sx:{fontWeight:"bold"},children:"Apple Pay & Other Methods"})]}),u.jsx(fe,{variant:"body1",sx:{mb:1},children:"Pay with Apple Pay, PayPal, or other methods and get"}),u.jsx(zt,{label:"1 FREE Content",sx:{background:"linear-gradient(45deg, #2196f3 30%, #21cbf3 90%)",color:"white",fontWeight:"bold",fontSize:"0.9rem"}})]})]}),u.jsx(fe,{variant:"body2",sx:{color:"rgba(255, 255, 255, 0.8)",fontStyle:"italic"},children:"Site is loading all metadata for the best experience..."})]})]})})},aw=()=>{const{siteName:n,loading:e}=Qn(),[t,r]=F.useState(!1),[i,s]=F.useState(!0),a=Xn(),c=!1;F.useEffect(()=>{n&&(document.title=`${n} - Adult Content`)},[n,a]),F.useEffect(()=>{},[a.pathname,c]);const l=()=>{s(!1)};return F.useEffect(()=>{s(!0)},[]),u.jsxs(re,{sx:{display:"flex",flexDirection:"column",minHeight:"100vh"},children:[u.jsx(sw,{open:i,onClose:l}),c,u.jsx(Gy,{}),u.jsx(Hy,{}),u.jsx(u1,{}),u.jsx(y5,{}),u.jsxs(re,{component:"main",sx:{flexGrow:1},children:[u.jsx(Ky,{}),u.jsxs(x2,{children:[u.jsx(ms,{path:"/",element:u.jsx(Ry,{})}),u.jsx(ms,{path:"/videos",element:u.jsx(ev,{})}),u.jsx(ms,{path:"/video/:id",element:u.jsx(ty,{})}),u.jsx(ms,{path:"/video/legacy/:id",element:u.jsx(ov,{})}),u.jsx(ms,{path:"/login",element:u.jsx(I5,{})}),u.jsx(ms,{path:"/admin",element:u.jsx(N5,{children:u.jsx(Ay,{})})})]})]}),u.jsx(P5,{})]})},ow=()=>u.jsx(R2,{children:u.jsx(P2,{children:u.jsx(t5,{children:u.jsx(r5,{children:u.jsx(aw,{})})})})});Lf(document.getElementById("root")).render(u.jsxs(F.StrictMode,{children:[u.jsx(ow,{}),u.jsx(u1,{})]}));
